/*! For license information please see main.1452b004.js.LICENSE.txt */
(()=>{var __webpack_modules__={756:function(e,t,n){!function(e){"use strict";function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self&&self;var r,o={exports:{}};r=o,function(e,t){r.exports&&(r.exports=t())}(0,(function(){function e(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function t(e,n,r,o){var i=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(i,t.prototype),i.expected=n,i.found=r,i.location=o,i.name="SyntaxError",i}function n(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}function r(e,n){var r,o={},i=(n=void 0!==n?n:{}).grammarSource,a={pgn:_d,tags:rh,game:nh,games:th},s=_d,l="\ufeff",c="Event",u="event",h="Site",d="site",f="Date",p="date",g="Round",m="round",y="White",b="white",v="Black",w="black",k="Result",x="result",E="WhiteTitle",_="Whitetitle",N="whitetitle",S="whiteTitle",C="BlackTitle",A="Blacktitle",R="blacktitle",T="blackTitle",B="WhiteELO",j="WhiteElo",O="Whiteelo",I="whiteelo",P="whiteElo",L="BlackELO",z="BlackElo",U="Blackelo",M="blackelo",F="blackElo",D="WhiteUSCF",q="WhiteUscf",H="Whiteuscf",W="whiteuscf",$="whiteUscf",K="BlackUSCF",Q="BlackUscf",G="Blackuscf",V="blackuscf",Z="blackUscf",Y="WhiteNA",J="WhiteNa",X="Whitena",ee="whitena",te="whiteNa",ne="whiteNA",re="BlackNA",oe="BlackNa",ie="Blackna",ae="blackna",se="blackNA",le="blackNa",ce="WhiteType",ue="Whitetype",he="whitetype",de="whiteType",fe="BlackType",pe="Blacktype",ge="blacktype",me="blackType",ye="EventDate",be="Eventdate",ve="eventdate",we="eventDate",ke="EventSponsor",xe="Eventsponsor",Ee="eventsponsor",_e="eventSponsor",Ne="Section",Se="section",Ce="Stage",Ae="stage",Re="Board",Te="board",Be="Opening",je="opening",Oe="Variation",Ie="variation",Pe="SubVariation",Le="Subvariation",ze="subvariation",Ue="subVariation",Me="ECO",Fe="Eco",De="eco",qe="NIC",He="Nic",We="nic",$e="Time",Ke="time",Qe="UTCTime",Ge="UTCtime",Ve="UtcTime",Ze="Utctime",Ye="utctime",Je="utcTime",Xe="UTCDate",et="UTCdate",tt="UtcDate",nt="Utcdate",rt="utcdate",ot="utcDate",it="TimeControl",at="Timecontrol",st="timecontrol",lt="timeControl",ct="SetUp",ut="Setup",ht="setup",dt="setUp",ft="FEN",pt="Fen",gt="fen",mt="Termination",yt="termination",bt="Annotator",vt="annotator",wt="Mode",kt="mode",xt="PlyCount",Et="Plycount",_t="plycount",Nt="plyCount",St="Variant",Ct="variant",At="WhiteRatingDiff",Rt="BlackRatingDiff",Tt="WhiteFideId",Bt="BlackFideId",jt="WhiteTeam",Ot="BlackTeam",It="Clock",Pt="WhiteClock",Lt="BlackClock",zt='"',Ut="\\",Mt=".",Ft=":",Dt="/",qt="?",Ht="-",Wt="+",$t="*",Kt="1-0",Qt="0-1",Gt="1/2-1/2",Vt="1/2",Zt="=",Yt="%csl",Jt="%cal",Xt="%",en="%eval",tn="[%",nn="}",rn=",",on="Y",an="G",sn="R",ln="B",cn="O",un="C",hn="{",dn="[",fn="]",pn=";",gn="clk",mn="egt",yn="emt",bn="mct",vn="(",wn=")",kn=" ",xn="e.p.",En="O-O-O",_n="O-O",Nn="@",Sn="Z0",Cn="+-",An="$$$",Rn="#",Tn="$",Bn="!!",jn="??",On="!?",In="?!",Pn="!",Ln="\u203c",zn="\u2047",Un="\u2049",Mn="\u2048",Fn="\u25a1",Dn="\u221e",qn="\u2a72",Hn="\u2a71",Wn="\xb1",$n="\u2213",Kn="-+",Qn="\u2a00",Gn="\u27f3",Vn="\u2192",Zn="\u2191",Yn="\u21c6",Jn="D",Xn="x",er=/^[ \t\n\r]/,tr=/^[\n\r]/,nr=/^[\-a-zA-Z0-9_.]/,rr=/^[^"\\\r\n]/,or=/^[0-9?]/,ir=/^[0-9]/,ar=/^[BNW]/,sr=/^[^\n\r]/,lr=/^[1-8a-h]/,cr=/^[RNBQKP]/,ur=/^[RNBQ]/,hr=/^[a-h]/,dr=/^[1-8]/,fr=/^[\-x]/,pr=$u("\ufeff",!1),gr=$u("Event",!1),mr=$u("event",!1),yr=$u("Site",!1),br=$u("site",!1),vr=$u("Date",!1),wr=$u("date",!1),kr=$u("Round",!1),xr=$u("round",!1),Er=$u("White",!1),_r=$u("white",!1),Nr=$u("Black",!1),Sr=$u("black",!1),Cr=$u("Result",!1),Ar=$u("result",!1),Rr=$u("WhiteTitle",!1),Tr=$u("Whitetitle",!1),Br=$u("whitetitle",!1),jr=$u("whiteTitle",!1),Or=$u("BlackTitle",!1),Ir=$u("Blacktitle",!1),Pr=$u("blacktitle",!1),Lr=$u("blackTitle",!1),zr=$u("WhiteELO",!1),Ur=$u("WhiteElo",!1),Mr=$u("Whiteelo",!1),Fr=$u("whiteelo",!1),Dr=$u("whiteElo",!1),qr=$u("BlackELO",!1),Hr=$u("BlackElo",!1),Wr=$u("Blackelo",!1),$r=$u("blackelo",!1),Kr=$u("blackElo",!1),Qr=$u("WhiteUSCF",!1),Gr=$u("WhiteUscf",!1),Vr=$u("Whiteuscf",!1),Zr=$u("whiteuscf",!1),Yr=$u("whiteUscf",!1),Jr=$u("BlackUSCF",!1),Xr=$u("BlackUscf",!1),eo=$u("Blackuscf",!1),to=$u("blackuscf",!1),no=$u("blackUscf",!1),ro=$u("WhiteNA",!1),oo=$u("WhiteNa",!1),io=$u("Whitena",!1),ao=$u("whitena",!1),so=$u("whiteNa",!1),lo=$u("whiteNA",!1),co=$u("BlackNA",!1),uo=$u("BlackNa",!1),ho=$u("Blackna",!1),fo=$u("blackna",!1),po=$u("blackNA",!1),go=$u("blackNa",!1),mo=$u("WhiteType",!1),yo=$u("Whitetype",!1),bo=$u("whitetype",!1),vo=$u("whiteType",!1),wo=$u("BlackType",!1),ko=$u("Blacktype",!1),xo=$u("blacktype",!1),Eo=$u("blackType",!1),_o=$u("EventDate",!1),No=$u("Eventdate",!1),So=$u("eventdate",!1),Co=$u("eventDate",!1),Ao=$u("EventSponsor",!1),Ro=$u("Eventsponsor",!1),To=$u("eventsponsor",!1),Bo=$u("eventSponsor",!1),jo=$u("Section",!1),Oo=$u("section",!1),Io=$u("Stage",!1),Po=$u("stage",!1),Lo=$u("Board",!1),zo=$u("board",!1),Uo=$u("Opening",!1),Mo=$u("opening",!1),Fo=$u("Variation",!1),Do=$u("variation",!1),qo=$u("SubVariation",!1),Ho=$u("Subvariation",!1),Wo=$u("subvariation",!1),$o=$u("subVariation",!1),Ko=$u("ECO",!1),Qo=$u("Eco",!1),Go=$u("eco",!1),Vo=$u("NIC",!1),Zo=$u("Nic",!1),Yo=$u("nic",!1),Jo=$u("Time",!1),Xo=$u("time",!1),ei=$u("UTCTime",!1),ti=$u("UTCtime",!1),ni=$u("UtcTime",!1),ri=$u("Utctime",!1),oi=$u("utctime",!1),ii=$u("utcTime",!1),ai=$u("UTCDate",!1),si=$u("UTCdate",!1),li=$u("UtcDate",!1),ci=$u("Utcdate",!1),ui=$u("utcdate",!1),hi=$u("utcDate",!1),di=$u("TimeControl",!1),fi=$u("Timecontrol",!1),pi=$u("timecontrol",!1),gi=$u("timeControl",!1),mi=$u("SetUp",!1),yi=$u("Setup",!1),bi=$u("setup",!1),vi=$u("setUp",!1),wi=$u("FEN",!1),ki=$u("Fen",!1),xi=$u("fen",!1),Ei=$u("Termination",!1),_i=$u("termination",!1),Ni=$u("Annotator",!1),Si=$u("annotator",!1),Ci=$u("Mode",!1),Ai=$u("mode",!1),Ri=$u("PlyCount",!1),Ti=$u("Plycount",!1),Bi=$u("plycount",!1),ji=$u("plyCount",!1),Oi=$u("Variant",!1),Ii=$u("variant",!1),Pi=$u("WhiteRatingDiff",!1),Li=$u("BlackRatingDiff",!1),zi=$u("WhiteFideId",!1),Ui=$u("BlackFideId",!1),Mi=$u("WhiteTeam",!1),Fi=$u("BlackTeam",!1),Di=$u("Clock",!1),qi=$u("WhiteClock",!1),Hi=$u("BlackClock",!1),Wi=Vu("whitespace"),$i=Ku([" ","\t","\n","\r"],!1,!1),Ki=Ku(["\n","\r"],!1,!1),Qi=Ku(["-",["a","z"],["A","Z"],["0","9"],"_","."],!1,!1),Gi=$u('"',!1),Vi=Ku(['"',"\\","\r","\n"],!0,!1),Zi=$u("\\",!1),Yi=Ku([["0","9"],"?"],!1,!1),Ji=$u(".",!1),Xi=Ku([["0","9"]],!1,!1),ea=$u(":",!1),ta=$u("/",!1),na=Ku(["B","N","W"],!1,!1),ra=$u("?",!1),oa=$u("-",!1),ia=$u("+",!1),aa=$u("*",!1),sa=$u("1-0",!1),la=$u("0-1",!1),ca=$u("1/2-1/2",!1),ua=$u("1/2",!1),ha=$u("=",!1),da=$u("%csl",!1),fa=$u("%cal",!1),pa=$u("%",!1),ga=$u("%eval",!1),ma=$u("[%",!1),ya=$u("}",!1),ba=Qu(),va=Ku(["\n","\r"],!0,!1),wa=$u(",",!1),ka=$u("Y",!1),xa=$u("G",!1),Ea=$u("R",!1),_a=$u("B",!1),Na=$u("O",!1),Sa=$u("C",!1),Ca=$u("{",!1),Aa=$u("[",!1),Ra=$u("]",!1),Ta=$u(";",!1),Ba=$u("clk",!1),ja=$u("egt",!1),Oa=$u("emt",!1),Ia=$u("mct",!1),Pa=$u("(",!1),La=$u(")",!1),za=Vu("integer"),Ua=$u(" ",!1),Ma=$u("e.p.",!1),Fa=$u("O-O-O",!1),Da=$u("O-O",!1),qa=$u("@",!1),Ha=$u("Z0",!1),Wa=$u("+-",!1),$a=$u("$$$",!1),Ka=$u("#",!1),Qa=$u("$",!1),Ga=$u("!!",!1),Va=$u("??",!1),Za=$u("!?",!1),Ya=$u("?!",!1),Ja=$u("!",!1),Xa=$u("\u203c",!1),es=$u("\u2047",!1),ts=$u("\u2049",!1),ns=$u("\u2048",!1),rs=$u("\u25a1",!1),os=$u("\u221e",!1),is=$u("\u2a72",!1),as=$u("\u2a71",!1),ss=$u("\xb1",!1),ls=$u("\u2213",!1),cs=$u("-+",!1),us=$u("\u2a00",!1),hs=$u("\u27f3",!1),ds=$u("\u2192",!1),fs=$u("\u2191",!1),ps=$u("\u21c6",!1),gs=$u("D",!1),ms=Ku([["1","8"],["a","h"]],!1,!1),ys=Ku(["R","N","B","Q","K","P"],!1,!1),bs=Ku(["R","N","B","Q"],!1,!1),vs=Ku([["a","h"]],!1,!1),ws=Ku([["1","8"]],!1,!1),ks=$u("x",!1),xs=Ku(["-","x"],!1,!1),Es=function(e,t){return t},_s=function(e,t){return[e].concat(t)},Ns=function(e){return e},Ss=function(e,t,n){var r=vf;return vf=[],{tags:e,gameComment:t,moves:n,messages:r}},Cs=function(e,t){return t},As=function(e,t){var n={};return[e].concat(t).forEach((function(e){n[e.name]=e.value})),n},Rs=function(e){return null===e?{}:(e.messages=vf,e)},Ts=function(e){return e},Bs=function(e){return{name:"Event",value:e}},js=function(e){return{name:"Site",value:e}},Os=function(e){return{name:"Date",value:e}},Is=function(e){return{name:"Round",value:e}},Ps=function(e){return{name:"WhiteTitle",value:e}},Ls=function(e){return{name:"BlackTitle",value:e}},zs=function(e){return{name:"WhiteElo",value:e}},Us=function(e){return{name:"BlackElo",value:e}},Ms=function(e){return{name:"WhiteUSCF",value:e}},Fs=function(e){return{name:"BlackUSCF",value:e}},Ds=function(e){return{name:"WhiteNA",value:e}},qs=function(e){return{name:"BlackNA",value:e}},Hs=function(e){return{name:"WhiteType",value:e}},Ws=function(e){return{name:"BlackType",value:e}},$s=function(e){return{name:"White",value:e}},Ks=function(e){return{name:"Black",value:e}},Qs=function(e){return{name:"Result",value:e}},Gs=function(e){return{name:"EventDate",value:e}},Vs=function(e){return{name:"EventSponsor",value:e}},Zs=function(e){return{name:"Section",value:e}},Ys=function(e){return{name:"Stage",value:e}},Js=function(e){return{name:"Board",value:e}},Xs=function(e){return{name:"Opening",value:e}},el=function(e){return{name:"Variation",value:e}},tl=function(e){return{name:"SubVariation",value:e}},nl=function(e){return{name:"ECO",value:e}},rl=function(e){return{name:"NIC",value:e}},ol=function(e){return{name:"Time",value:e}},il=function(e){return{name:"UTCTime",value:e}},al=function(e){return{name:"UTCDate",value:e}},sl=function(e){return{name:"TimeControl",value:e}},ll=function(e){return{name:"SetUp",value:e}},cl=function(e){return{name:"FEN",value:e}},ul=function(e){return{name:"Termination",value:e}},hl=function(e){return{name:"Annotator",value:e}},dl=function(e){return{name:"Mode",value:e}},fl=function(e){return{name:"PlyCount",value:e}},pl=function(e){return{name:"Variant",value:e}},gl=function(e){return{name:"WhiteRatingDiff",value:e}},ml=function(e){return{name:"BlackRatingDiff",value:e}},yl=function(e){return{name:"WhiteFideId",value:e}},bl=function(e){return{name:"BlackFideId",value:e}},vl=function(e){return{name:"WhiteTeam",value:e}},wl=function(e){return{name:"BlackTeam",value:e}},kl=function(e){return{name:"Clock",value:e}},xl=function(e){return{name:"WhiteClock",value:e}},El=function(e){return{name:"BlackClock",value:e}},_l=function(e,t){return wf({key:e,value:t,message:`Format of tag: "${e}" not correct: "${t}"`}),{name:e,value:t}},Nl=function(e,t){return wf({key:e,value:t,message:`Tag: "${e}" not known: "${t}"`}),{name:e,value:t}},Sl=function(e){return e.join("")},Cl=function(e){return e.map((e=>e.char||e)).join("")},Al=function(){return{type:"char",char:"\\"}},Rl=function(){return{type:"char",char:'"'}},Tl=function(e){return e},Bl=function(e,t,n){return{value:e.join("")+"."+t.join("")+"."+n.join(""),year:xf(e),month:xf(t),day:xf(n)}},jl=function(e,t,n,r){let o=e.join("")+":"+t.join("")+":"+n.join(""),i=0;return r&&(o=o+"."+r,wf({message:`Unusual use of millis in time: ${o}`}),xf(r)),{value:o,hour:xf(e),minute:xf(t),second:xf(n),millis:i}},Ol=function(e){return e.join("")},Il=function(e){return e},Pl=function(e,t){return e+"/"+t},Ll=function(e){return e},zl=function(e){return e},Ul=function(e){return e||(wf({message:"Tag TimeControl has to have a value"}),"")},Ml=function(e,t){return t},Fl=function(e,t){let n=[e].concat(t);return n.value=n.map((e=>e.value)).join(":"),n},Dl=function(e){return e},ql=function(){return{kind:"unknown",value:"?"}},Hl=function(){return{kind:"unlimited",value:"-"}},Wl=function(e,t,n){return{kind:"movesInSecondsIncrement",moves:e,seconds:t,increment:n,value:e+"/"+t+"+"+n}},$l=function(e,t){return{kind:"movesInSeconds",moves:e,seconds:t,value:e+"/"+t}},Kl=function(e,t){return{kind:"increment",seconds:e,increment:t,value:e+"+"+t}},Ql=function(e){return{kind:"suddenDeath",seconds:e,value:""+e}},Gl=function(e){return{kind:"hourglass",seconds:e,value:"*"+e}},Vl=function(e){return e},Zl=function(e){return e},Yl=function(e){return e},Jl=function(e){return e},Xl=function(){return"1/2-1/2"},ec=function(e){return e},tc=function(e){return e},nc=function(){return 0},rc=function(){return wf({message:'Use "-" for an unknown value'}),0},oc=function(e){return kf(e)},ic=function(e,t,n,r,o,i,a,s){var l=s||[],c={};return c.moveNumber=t,c.notation=n,i&&(c.commentAfter=i.comment),e&&(c.commentMove=e.comment),o&&(c.drawOffer=!0),c.variations=a||[],c.nag=r||null,l.unshift(c),c.commentDiag=i,l},ac=function(e){return e},sc=function(e){return[e]},lc=function(e,t){return t},cc=function(e,t){return Ef([e].concat(t))},uc=function(){},hc=function(e){return e},dc=function(e){return{comment:e}},fc=function(e,t){return t},pc=function(e,t){return Ef([{colorFields:e}].concat(t[0]))},gc=function(e,t){return t},mc=function(e,t){return Ef([{colorArrows:e}].concat(t[0]))},yc=function(e,t,n){return n},bc=function(e,t,n){var r={};return r[e]=t,Ef([r].concat(n[0]))},vc=function(e,t,n){return n},wc=function(e,t,n){var r={};return r[e]=t,Ef([r].concat(n[0]))},kc=function(e,t){return t},xc=function(e,t){var n={};return n.eval=parseFloat(e),Ef([n].concat(t[0]))},Ec=function(e,t,n){return n},_c=function(e,t,n){var r={};return r[e]=t.join(""),Ef([r].concat(n[0]))},Nc=function(e,t){return t},Sc=function(e,t){return t.length>0?Ef([{comment:Nf(e.join(""))}].concat(_f(t[0]))):{comment:e.join("")}},Cc=function(e){return e},Ac=function(e){return e},Rc=function(e){return e.join("")},Tc=function(e,t){var n=[];n.push(e);for(var r=0;r<t.length;r++)n.push(t[r][2]);return n},Bc=function(e,t){return e+t},jc=function(e,t){var n=[];n.push(e);for(var r=0;r<t.length;r++)n.push(t[r][2]);return n},Oc=function(e,t,n){return e+t+n},Ic=function(){return"Y"},Pc=function(){return"G"},Lc=function(){return"R"},zc=function(){return"B"},Uc=function(){return"O"},Mc=function(){return"C"},Fc=function(e,t){return e+t},Dc=function(){return"clk"},qc=function(){return"egt"},Hc=function(){return"emt"},Wc=function(){return"mct"},$c=function(e,t,n,r){let o=t;return e?o=e+o:wf({message:"Hours and minutes missing"}),e&&2==(e.match(/:/g)||[]).length&&2==e.search(":")&&wf({message:"Only 1 digit for hours normally used"}),n?o+=n:wf({message:"Only 2 digit for seconds normally used"}),r&&(wf({message:"Unusual use of millis in clock value"}),o+="."+r),o},Kc=function(e,t,n){let r=t;return e?r=e+r:wf({message:"Hours and minutes missing"}),e&&2==(e.match(/:/g)||[]).length&&1==e.search(":")&&wf({message:"Only 2 digits for hours normally used"}),n?r+=n:wf({message:"Only 2 digit for seconds normally used"}),r},Qc=function(e,t){return t?e+t:(wf({message:"No hours found"}),e)},Gc=function(e,t){let n=e;return n+=t?t+":":":",n},Vc=function(e,t){let n=e;return t?n+=t+":":(n+=":",wf({message:"Only 2 digits for minutes normally used"})),n},Zc=function(e){return e},Yc=function(e,t){var n=t||[];return n.unshift(e),n},Jc=function(e){return e},Xc=function(e){return kf(e)},eu=function(){return""},tu=function(e,t,n,r,o,i,a){var s={};return s.fig=e||null,s.disc=t||null,s.strike=n||null,s.col=r,s.row=o,s.check=a||null,s.promotion=i,s.notation=(e||"")+(t||"")+(n||"")+r+o+(i||"")+(a||""),s},nu=function(e,t,n,r,o,i,a,s){var l={};return l.fig=e||null,l.strike="x"==r?r:null,l.col=o,l.row=i,l.notation=(e&&"P"!==e?e:"")+t+n+("x"==r?r:"-")+o+i+(a||"")+(s||""),l.check=s||null,l.promotion=a,l},ru=function(e,t,n,r,o,i){var a={};return a.fig=e||null,a.strike=t||null,a.col=n,a.row=r,a.check=i||null,a.promotion=o,a.notation=(e||"")+(t||"")+n+r+(o||"")+(i||""),a},ou=function(e){var t={};return t.notation="O-O-O"+(e||""),t.check=e||null,t},iu=function(e){var t={};return t.notation="O-O"+(e||""),t.check=e||null,t},au=function(e,t,n){var r={};return r.fig=e,r.drop=!0,r.col=t,r.row=n,r.notation=e+"@"+t+n,r},su=function(){var e={notation:"Z0"};return e},lu=function(e){return e[1]},cu=function(e){return e[1]},uu=function(e){return"="+e},hu=function(e,t){var n=t||[];return n.unshift(e),n},du=function(e){return"$"+e},fu=function(){return"$3"},pu=function(){return"$4"},gu=function(){return"$5"},mu=function(){return"$6"},yu=function(){return"$1"},bu=function(){return"$2"},vu=function(){return"$3"},wu=function(){return"$4"},ku=function(){return"$5"},xu=function(){return"$6"},Eu=function(){return"$7"},_u=function(){return"$10"},Nu=function(){return"$13"},Su=function(){return"$14"},Cu=function(){return"$15"},Au=function(){return"$16"},Ru=function(){return"$17"},Tu=function(){return"$18"},Bu=function(){return"$19"},ju=function(){return"$22"},Ou=function(){return"$32"},Iu=function(){return"$36"},Pu=function(){return"$40"},Lu=function(){return"$132"},zu=function(){return"$220"},Uu=0|n.peg$currPos,Mu=Uu,Fu=[{line:1,column:1}],Du=Uu,qu=n.peg$maxFailExpected||[],Hu=0|n.peg$silentFails;if(n.startRule){if(!(n.startRule in a))throw new Error("Can't start parsing from rule \""+n.startRule+'".');s=a[n.startRule]}function Wu(){return Yu(Mu,Uu)}function $u(e,t){return{type:"literal",text:e,ignoreCase:t}}function Ku(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function Qu(){return{type:"any"}}function Gu(){return{type:"end"}}function Vu(e){return{type:"other",description:e}}function Zu(t){var n,r=Fu[t];if(r)return r;if(t>=Fu.length)n=Fu.length-1;else for(n=t;!Fu[--n];);for(r={line:(r=Fu[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return Fu[t]=r,r}function Yu(e,t,n){var r=Zu(e),o=Zu(t),a={source:i,start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:o.line,column:o.column}};return n&&i&&"function"===typeof i.offset&&(a.start=i.offset(a.start),a.end=i.offset(a.end)),a}function Ju(e){Uu<Du||(Uu>Du&&(Du=Uu,qu=[]),qu.push(e))}function Xu(e,n,r){return new t(t.buildMessage(e,n),e,n,r)}function eh(){var t;return 65279===e.charCodeAt(Uu)?(t=l,Uu++):(t=o,0===Hu&&Ju(pr)),t}function th(){var e,t,n,r,i,a;if(e=Uu,eh(),ed(),t=Uu,(n=nh())!==o){for(r=[],i=Uu,ed(),(a=nh())!==o?(Mu=i,i=Es(n,a)):(Uu=i,i=o);i!==o;)r.push(i),i=Uu,ed(),(a=nh())!==o?(Mu=i,i=Es(n,a)):(Uu=i,i=o);Mu=t,t=_s(n,r)}else Uu=t,t=o;return t===o&&(t=null),Mu=e,e=Ns(t)}function nh(){var e,t,n,r;return e=Uu,eh(),t=rh(),(n=Cd())===o&&(n=null),(r=_d())!==o?(Mu=e,e=Ss(t,n,r)):(Uu=e,e=o),e}function rh(){var e,t,n,r,i,a;if(e=Uu,eh(),ed(),t=Uu,(n=oh())!==o){for(r=[],i=Uu,ed(),(a=oh())!==o?(Mu=i,i=Cs(n,a)):(Uu=i,i=o);i!==o;)r.push(i),i=Uu,ed(),(a=oh())!==o?(Mu=i,i=Cs(n,a)):(Uu=i,i=o);Mu=t,t=As(n,r)}else Uu=t,t=o;return t===o&&(t=null),n=ed(),Mu=e,e=Rs(t)}function oh(){var e,t;return e=Uu,Dd()!==o?(ed(),(t=ih())!==o?(ed(),qd()!==o?(Mu=e,e=Ts(t)):(Uu=e,e=o)):(Uu=e,e=o)):(Uu=e,e=o),e}function ih(){var e,t,n,r,i;return e=Uu,(t=sh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=Bs(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=lh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=js(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=ch())!==o?(n=ed(),(r=cd())!==o?(Mu=e,e=Os(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=uh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=Is(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=ph())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=Ps(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=gh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=Ls(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=mh())!==o?(n=ed(),(r=xd())!==o?(Mu=e,e=zs(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=yh())!==o?(n=ed(),(r=xd())!==o?(Mu=e,e=Us(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=bh())!==o?(n=ed(),(r=Ed())!==o?(Mu=e,e=Ms(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=vh())!==o?(n=ed(),(r=Ed())!==o?(Mu=e,e=Fs(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=wh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=Ds(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=kh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=qs(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=xh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=Hs(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Eh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=Ws(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=hh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=$s(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=dh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=Ks(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=fh())!==o?(n=ed(),(r=wd())!==o?(Mu=e,e=Qs(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=_h())!==o?(n=ed(),(r=cd())!==o?(Mu=e,e=Gs(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Nh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=Vs(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Sh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=Zs(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Ch())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=Ys(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Ah())!==o?(n=ed(),(r=Ed())!==o?(Mu=e,e=Js(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Rh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=Xs(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Th())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=el(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Bh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=tl(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=jh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=nl(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Oh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=rl(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Ih())!==o?(n=ed(),(r=ud())!==o?(Mu=e,e=ol(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Ph())!==o?(n=ed(),(r=ud())!==o?(Mu=e,e=il(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Lh())!==o?(n=ed(),(r=cd())!==o?(Mu=e,e=al(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=zh())!==o?(n=ed(),(r=yd())!==o?(Mu=e,e=sl(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Uh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=ll(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Mh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=cl(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Fh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=ul(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Dh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=hl(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=qh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=dl(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Hh())!==o?(n=ed(),(r=Ed())!==o?(Mu=e,e=fl(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Wh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=pl(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=$h())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=gl(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Kh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=ml(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Qh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=yl(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Gh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=bl(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Vh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=vl(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Zh())!==o?(n=ed(),(r=id())!==o?(Mu=e,e=wl(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Yh())!==o?(n=ed(),(r=dd())!==o?(Mu=e,e=kl(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Jh())!==o?(n=ed(),(r=gd())!==o?(Mu=e,e=xl(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,(t=Xh())!==o?(n=ed(),(r=gd())!==o?(Mu=e,e=El(r)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,t=Uu,Hu++,n=ah(),Hu--,n!==o?(Uu=t,t=void 0):t=o,t!==o?(n=rd(),r=ed(),(i=id())!==o?(Mu=e,e=_l(n,i)):(Uu=e,e=o)):(Uu=e,e=o),e===o&&(e=Uu,t=Uu,Hu++,n=ah(),Hu--,n===o?t=void 0:(Uu=t,t=o),t!==o?(n=rd(),r=ed(),(i=id())!==o?(Mu=e,e=Nl(n,i)):(Uu=e,e=o)):(Uu=e,e=o))))))))))))))))))))))))))))))))))))))))))))))))),e}function ah(){var e;return(e=ch())===o&&(e=mh())===o&&(e=yh())===o&&(e=bh())===o&&(e=vh())===o&&(e=fh())===o&&(e=_h())===o&&(e=Ah())===o&&(e=Ih())===o&&(e=Ph())===o&&(e=Lh())===o&&(e=zh())===o&&(e=Hh())===o&&(e=Yh())===o&&(e=Jh())===o&&(e=Xh()),e}function sh(){var t;return e.substr(Uu,5)===c?(t=c,Uu+=5):(t=o,0===Hu&&Ju(gr)),t===o&&(e.substr(Uu,5)===u?(t=u,Uu+=5):(t=o,0===Hu&&Ju(mr))),t}function lh(){var t;return e.substr(Uu,4)===h?(t=h,Uu+=4):(t=o,0===Hu&&Ju(yr)),t===o&&(e.substr(Uu,4)===d?(t=d,Uu+=4):(t=o,0===Hu&&Ju(br))),t}function ch(){var t;return e.substr(Uu,4)===f?(t=f,Uu+=4):(t=o,0===Hu&&Ju(vr)),t===o&&(e.substr(Uu,4)===p?(t=p,Uu+=4):(t=o,0===Hu&&Ju(wr))),t}function uh(){var t;return e.substr(Uu,5)===g?(t=g,Uu+=5):(t=o,0===Hu&&Ju(kr)),t===o&&(e.substr(Uu,5)===m?(t=m,Uu+=5):(t=o,0===Hu&&Ju(xr))),t}function hh(){var t;return e.substr(Uu,5)===y?(t=y,Uu+=5):(t=o,0===Hu&&Ju(Er)),t===o&&(e.substr(Uu,5)===b?(t=b,Uu+=5):(t=o,0===Hu&&Ju(_r))),t}function dh(){var t;return e.substr(Uu,5)===v?(t=v,Uu+=5):(t=o,0===Hu&&Ju(Nr)),t===o&&(e.substr(Uu,5)===w?(t=w,Uu+=5):(t=o,0===Hu&&Ju(Sr))),t}function fh(){var t;return e.substr(Uu,6)===k?(t=k,Uu+=6):(t=o,0===Hu&&Ju(Cr)),t===o&&(e.substr(Uu,6)===x?(t=x,Uu+=6):(t=o,0===Hu&&Ju(Ar))),t}function ph(){var t;return e.substr(Uu,10)===E?(t=E,Uu+=10):(t=o,0===Hu&&Ju(Rr)),t===o&&(e.substr(Uu,10)===_?(t=_,Uu+=10):(t=o,0===Hu&&Ju(Tr)),t===o&&(e.substr(Uu,10)===N?(t=N,Uu+=10):(t=o,0===Hu&&Ju(Br)),t===o&&(e.substr(Uu,10)===S?(t=S,Uu+=10):(t=o,0===Hu&&Ju(jr))))),t}function gh(){var t;return e.substr(Uu,10)===C?(t=C,Uu+=10):(t=o,0===Hu&&Ju(Or)),t===o&&(e.substr(Uu,10)===A?(t=A,Uu+=10):(t=o,0===Hu&&Ju(Ir)),t===o&&(e.substr(Uu,10)===R?(t=R,Uu+=10):(t=o,0===Hu&&Ju(Pr)),t===o&&(e.substr(Uu,10)===T?(t=T,Uu+=10):(t=o,0===Hu&&Ju(Lr))))),t}function mh(){var t;return e.substr(Uu,8)===B?(t=B,Uu+=8):(t=o,0===Hu&&Ju(zr)),t===o&&(e.substr(Uu,8)===j?(t=j,Uu+=8):(t=o,0===Hu&&Ju(Ur)),t===o&&(e.substr(Uu,8)===O?(t=O,Uu+=8):(t=o,0===Hu&&Ju(Mr)),t===o&&(e.substr(Uu,8)===I?(t=I,Uu+=8):(t=o,0===Hu&&Ju(Fr)),t===o&&(e.substr(Uu,8)===P?(t=P,Uu+=8):(t=o,0===Hu&&Ju(Dr)))))),t}function yh(){var t;return e.substr(Uu,8)===L?(t=L,Uu+=8):(t=o,0===Hu&&Ju(qr)),t===o&&(e.substr(Uu,8)===z?(t=z,Uu+=8):(t=o,0===Hu&&Ju(Hr)),t===o&&(e.substr(Uu,8)===U?(t=U,Uu+=8):(t=o,0===Hu&&Ju(Wr)),t===o&&(e.substr(Uu,8)===M?(t=M,Uu+=8):(t=o,0===Hu&&Ju($r)),t===o&&(e.substr(Uu,8)===F?(t=F,Uu+=8):(t=o,0===Hu&&Ju(Kr)))))),t}function bh(){var t;return e.substr(Uu,9)===D?(t=D,Uu+=9):(t=o,0===Hu&&Ju(Qr)),t===o&&(e.substr(Uu,9)===q?(t=q,Uu+=9):(t=o,0===Hu&&Ju(Gr)),t===o&&(e.substr(Uu,9)===H?(t=H,Uu+=9):(t=o,0===Hu&&Ju(Vr)),t===o&&(e.substr(Uu,9)===W?(t=W,Uu+=9):(t=o,0===Hu&&Ju(Zr)),t===o&&(e.substr(Uu,9)===$?(t=$,Uu+=9):(t=o,0===Hu&&Ju(Yr)))))),t}function vh(){var t;return e.substr(Uu,9)===K?(t=K,Uu+=9):(t=o,0===Hu&&Ju(Jr)),t===o&&(e.substr(Uu,9)===Q?(t=Q,Uu+=9):(t=o,0===Hu&&Ju(Xr)),t===o&&(e.substr(Uu,9)===G?(t=G,Uu+=9):(t=o,0===Hu&&Ju(eo)),t===o&&(e.substr(Uu,9)===V?(t=V,Uu+=9):(t=o,0===Hu&&Ju(to)),t===o&&(e.substr(Uu,9)===Z?(t=Z,Uu+=9):(t=o,0===Hu&&Ju(no)))))),t}function wh(){var t;return e.substr(Uu,7)===Y?(t=Y,Uu+=7):(t=o,0===Hu&&Ju(ro)),t===o&&(e.substr(Uu,7)===J?(t=J,Uu+=7):(t=o,0===Hu&&Ju(oo)),t===o&&(e.substr(Uu,7)===X?(t=X,Uu+=7):(t=o,0===Hu&&Ju(io)),t===o&&(e.substr(Uu,7)===ee?(t=ee,Uu+=7):(t=o,0===Hu&&Ju(ao)),t===o&&(e.substr(Uu,7)===te?(t=te,Uu+=7):(t=o,0===Hu&&Ju(so)),t===o&&(e.substr(Uu,7)===ne?(t=ne,Uu+=7):(t=o,0===Hu&&Ju(lo))))))),t}function kh(){var t;return e.substr(Uu,7)===re?(t=re,Uu+=7):(t=o,0===Hu&&Ju(co)),t===o&&(e.substr(Uu,7)===oe?(t=oe,Uu+=7):(t=o,0===Hu&&Ju(uo)),t===o&&(e.substr(Uu,7)===ie?(t=ie,Uu+=7):(t=o,0===Hu&&Ju(ho)),t===o&&(e.substr(Uu,7)===ae?(t=ae,Uu+=7):(t=o,0===Hu&&Ju(fo)),t===o&&(e.substr(Uu,7)===se?(t=se,Uu+=7):(t=o,0===Hu&&Ju(po)),t===o&&(e.substr(Uu,7)===le?(t=le,Uu+=7):(t=o,0===Hu&&Ju(go))))))),t}function xh(){var t;return e.substr(Uu,9)===ce?(t=ce,Uu+=9):(t=o,0===Hu&&Ju(mo)),t===o&&(e.substr(Uu,9)===ue?(t=ue,Uu+=9):(t=o,0===Hu&&Ju(yo)),t===o&&(e.substr(Uu,9)===he?(t=he,Uu+=9):(t=o,0===Hu&&Ju(bo)),t===o&&(e.substr(Uu,9)===de?(t=de,Uu+=9):(t=o,0===Hu&&Ju(vo))))),t}function Eh(){var t;return e.substr(Uu,9)===fe?(t=fe,Uu+=9):(t=o,0===Hu&&Ju(wo)),t===o&&(e.substr(Uu,9)===pe?(t=pe,Uu+=9):(t=o,0===Hu&&Ju(ko)),t===o&&(e.substr(Uu,9)===ge?(t=ge,Uu+=9):(t=o,0===Hu&&Ju(xo)),t===o&&(e.substr(Uu,9)===me?(t=me,Uu+=9):(t=o,0===Hu&&Ju(Eo))))),t}function _h(){var t;return e.substr(Uu,9)===ye?(t=ye,Uu+=9):(t=o,0===Hu&&Ju(_o)),t===o&&(e.substr(Uu,9)===be?(t=be,Uu+=9):(t=o,0===Hu&&Ju(No)),t===o&&(e.substr(Uu,9)===ve?(t=ve,Uu+=9):(t=o,0===Hu&&Ju(So)),t===o&&(e.substr(Uu,9)===we?(t=we,Uu+=9):(t=o,0===Hu&&Ju(Co))))),t}function Nh(){var t;return e.substr(Uu,12)===ke?(t=ke,Uu+=12):(t=o,0===Hu&&Ju(Ao)),t===o&&(e.substr(Uu,12)===xe?(t=xe,Uu+=12):(t=o,0===Hu&&Ju(Ro)),t===o&&(e.substr(Uu,12)===Ee?(t=Ee,Uu+=12):(t=o,0===Hu&&Ju(To)),t===o&&(e.substr(Uu,12)===_e?(t=_e,Uu+=12):(t=o,0===Hu&&Ju(Bo))))),t}function Sh(){var t;return e.substr(Uu,7)===Ne?(t=Ne,Uu+=7):(t=o,0===Hu&&Ju(jo)),t===o&&(e.substr(Uu,7)===Se?(t=Se,Uu+=7):(t=o,0===Hu&&Ju(Oo))),t}function Ch(){var t;return e.substr(Uu,5)===Ce?(t=Ce,Uu+=5):(t=o,0===Hu&&Ju(Io)),t===o&&(e.substr(Uu,5)===Ae?(t=Ae,Uu+=5):(t=o,0===Hu&&Ju(Po))),t}function Ah(){var t;return e.substr(Uu,5)===Re?(t=Re,Uu+=5):(t=o,0===Hu&&Ju(Lo)),t===o&&(e.substr(Uu,5)===Te?(t=Te,Uu+=5):(t=o,0===Hu&&Ju(zo))),t}function Rh(){var t;return e.substr(Uu,7)===Be?(t=Be,Uu+=7):(t=o,0===Hu&&Ju(Uo)),t===o&&(e.substr(Uu,7)===je?(t=je,Uu+=7):(t=o,0===Hu&&Ju(Mo))),t}function Th(){var t;return e.substr(Uu,9)===Oe?(t=Oe,Uu+=9):(t=o,0===Hu&&Ju(Fo)),t===o&&(e.substr(Uu,9)===Ie?(t=Ie,Uu+=9):(t=o,0===Hu&&Ju(Do))),t}function Bh(){var t;return e.substr(Uu,12)===Pe?(t=Pe,Uu+=12):(t=o,0===Hu&&Ju(qo)),t===o&&(e.substr(Uu,12)===Le?(t=Le,Uu+=12):(t=o,0===Hu&&Ju(Ho)),t===o&&(e.substr(Uu,12)===ze?(t=ze,Uu+=12):(t=o,0===Hu&&Ju(Wo)),t===o&&(e.substr(Uu,12)===Ue?(t=Ue,Uu+=12):(t=o,0===Hu&&Ju($o))))),t}function jh(){var t;return e.substr(Uu,3)===Me?(t=Me,Uu+=3):(t=o,0===Hu&&Ju(Ko)),t===o&&(e.substr(Uu,3)===Fe?(t=Fe,Uu+=3):(t=o,0===Hu&&Ju(Qo)),t===o&&(e.substr(Uu,3)===De?(t=De,Uu+=3):(t=o,0===Hu&&Ju(Go)))),t}function Oh(){var t;return e.substr(Uu,3)===qe?(t=qe,Uu+=3):(t=o,0===Hu&&Ju(Vo)),t===o&&(e.substr(Uu,3)===He?(t=He,Uu+=3):(t=o,0===Hu&&Ju(Zo)),t===o&&(e.substr(Uu,3)===We?(t=We,Uu+=3):(t=o,0===Hu&&Ju(Yo)))),t}function Ih(){var t;return e.substr(Uu,4)===$e?(t=$e,Uu+=4):(t=o,0===Hu&&Ju(Jo)),t===o&&(e.substr(Uu,4)===Ke?(t=Ke,Uu+=4):(t=o,0===Hu&&Ju(Xo))),t}function Ph(){var t;return e.substr(Uu,7)===Qe?(t=Qe,Uu+=7):(t=o,0===Hu&&Ju(ei)),t===o&&(e.substr(Uu,7)===Ge?(t=Ge,Uu+=7):(t=o,0===Hu&&Ju(ti)),t===o&&(e.substr(Uu,7)===Ve?(t=Ve,Uu+=7):(t=o,0===Hu&&Ju(ni)),t===o&&(e.substr(Uu,7)===Ze?(t=Ze,Uu+=7):(t=o,0===Hu&&Ju(ri)),t===o&&(e.substr(Uu,7)===Ye?(t=Ye,Uu+=7):(t=o,0===Hu&&Ju(oi)),t===o&&(e.substr(Uu,7)===Je?(t=Je,Uu+=7):(t=o,0===Hu&&Ju(ii))))))),t}function Lh(){var t;return e.substr(Uu,7)===Xe?(t=Xe,Uu+=7):(t=o,0===Hu&&Ju(ai)),t===o&&(e.substr(Uu,7)===et?(t=et,Uu+=7):(t=o,0===Hu&&Ju(si)),t===o&&(e.substr(Uu,7)===tt?(t=tt,Uu+=7):(t=o,0===Hu&&Ju(li)),t===o&&(e.substr(Uu,7)===nt?(t=nt,Uu+=7):(t=o,0===Hu&&Ju(ci)),t===o&&(e.substr(Uu,7)===rt?(t=rt,Uu+=7):(t=o,0===Hu&&Ju(ui)),t===o&&(e.substr(Uu,7)===ot?(t=ot,Uu+=7):(t=o,0===Hu&&Ju(hi))))))),t}function zh(){var t;return e.substr(Uu,11)===it?(t=it,Uu+=11):(t=o,0===Hu&&Ju(di)),t===o&&(e.substr(Uu,11)===at?(t=at,Uu+=11):(t=o,0===Hu&&Ju(fi)),t===o&&(e.substr(Uu,11)===st?(t=st,Uu+=11):(t=o,0===Hu&&Ju(pi)),t===o&&(e.substr(Uu,11)===lt?(t=lt,Uu+=11):(t=o,0===Hu&&Ju(gi))))),t}function Uh(){var t;return e.substr(Uu,5)===ct?(t=ct,Uu+=5):(t=o,0===Hu&&Ju(mi)),t===o&&(e.substr(Uu,5)===ut?(t=ut,Uu+=5):(t=o,0===Hu&&Ju(yi)),t===o&&(e.substr(Uu,5)===ht?(t=ht,Uu+=5):(t=o,0===Hu&&Ju(bi)),t===o&&(e.substr(Uu,5)===dt?(t=dt,Uu+=5):(t=o,0===Hu&&Ju(vi))))),t}function Mh(){var t;return e.substr(Uu,3)===ft?(t=ft,Uu+=3):(t=o,0===Hu&&Ju(wi)),t===o&&(e.substr(Uu,3)===pt?(t=pt,Uu+=3):(t=o,0===Hu&&Ju(ki)),t===o&&(e.substr(Uu,3)===gt?(t=gt,Uu+=3):(t=o,0===Hu&&Ju(xi)))),t}function Fh(){var t;return e.substr(Uu,11)===mt?(t=mt,Uu+=11):(t=o,0===Hu&&Ju(Ei)),t===o&&(e.substr(Uu,11)===yt?(t=yt,Uu+=11):(t=o,0===Hu&&Ju(_i))),t}function Dh(){var t;return e.substr(Uu,9)===bt?(t=bt,Uu+=9):(t=o,0===Hu&&Ju(Ni)),t===o&&(e.substr(Uu,9)===vt?(t=vt,Uu+=9):(t=o,0===Hu&&Ju(Si))),t}function qh(){var t;return e.substr(Uu,4)===wt?(t=wt,Uu+=4):(t=o,0===Hu&&Ju(Ci)),t===o&&(e.substr(Uu,4)===kt?(t=kt,Uu+=4):(t=o,0===Hu&&Ju(Ai))),t}function Hh(){var t;return e.substr(Uu,8)===xt?(t=xt,Uu+=8):(t=o,0===Hu&&Ju(Ri)),t===o&&(e.substr(Uu,8)===Et?(t=Et,Uu+=8):(t=o,0===Hu&&Ju(Ti)),t===o&&(e.substr(Uu,8)===_t?(t=_t,Uu+=8):(t=o,0===Hu&&Ju(Bi)),t===o&&(e.substr(Uu,8)===Nt?(t=Nt,Uu+=8):(t=o,0===Hu&&Ju(ji))))),t}function Wh(){var t;return e.substr(Uu,7)===St?(t=St,Uu+=7):(t=o,0===Hu&&Ju(Oi)),t===o&&(e.substr(Uu,7)===Ct?(t=Ct,Uu+=7):(t=o,0===Hu&&Ju(Ii))),t}function $h(){var t;return e.substr(Uu,15)===At?(t=At,Uu+=15):(t=o,0===Hu&&Ju(Pi)),t}function Kh(){var t;return e.substr(Uu,15)===Rt?(t=Rt,Uu+=15):(t=o,0===Hu&&Ju(Li)),t}function Qh(){var t;return e.substr(Uu,11)===Tt?(t=Tt,Uu+=11):(t=o,0===Hu&&Ju(zi)),t}function Gh(){var t;return e.substr(Uu,11)===Bt?(t=Bt,Uu+=11):(t=o,0===Hu&&Ju(Ui)),t}function Vh(){var t;return e.substr(Uu,9)===jt?(t=jt,Uu+=9):(t=o,0===Hu&&Ju(Mi)),t}function Zh(){var t;return e.substr(Uu,9)===Ot?(t=Ot,Uu+=9):(t=o,0===Hu&&Ju(Fi)),t}function Yh(){var t;return e.substr(Uu,5)===It?(t=It,Uu+=5):(t=o,0===Hu&&Ju(Di)),t}function Jh(){var t;return e.substr(Uu,10)===Pt?(t=Pt,Uu+=10):(t=o,0===Hu&&Ju(qi)),t}function Xh(){var t;return e.substr(Uu,10)===Lt?(t=Lt,Uu+=10):(t=o,0===Hu&&Ju(Hi)),t}function ed(){var t,n;for(Hu++,t=[],n=e.charAt(Uu),er.test(n)?Uu++:(n=o,0===Hu&&Ju($i));n!==o;)t.push(n),n=e.charAt(Uu),er.test(n)?Uu++:(n=o,0===Hu&&Ju($i));return Hu--,n=o,0===Hu&&Ju(Wi),t}function td(){var t,n;if(t=[],n=e.charAt(Uu),er.test(n)?Uu++:(n=o,0===Hu&&Ju($i)),n!==o)for(;n!==o;)t.push(n),n=e.charAt(Uu),er.test(n)?Uu++:(n=o,0===Hu&&Ju($i));else t=o;return t}function nd(){var t,n;if(t=[],n=e.charAt(Uu),tr.test(n)?Uu++:(n=o,0===Hu&&Ju(Ki)),n!==o)for(;n!==o;)t.push(n),n=e.charAt(Uu),tr.test(n)?Uu++:(n=o,0===Hu&&Ju(Ki));else t=o;return t}function rd(){var t,n,r;for(t=Uu,n=[],r=e.charAt(Uu),nr.test(r)?Uu++:(r=o,0===Hu&&Ju(Qi));r!==o;)n.push(r),r=e.charAt(Uu),nr.test(r)?Uu++:(r=o,0===Hu&&Ju(Qi));return Mu=t,t=n=Sl(n)}function od(){var t;return 34===e.charCodeAt(Uu)?(t=zt,Uu++):(t=o,0===Hu&&Ju(Gi)),t}function id(){var t,n,r,i,a;if(t=Uu,34===e.charCodeAt(Uu)?(n=zt,Uu++):(n=o,0===Hu&&Ju(Gi)),n!==o){for(sd(),r=[],i=ad();i!==o;)r.push(i),i=ad();i=sd(),34===e.charCodeAt(Uu)?(a=zt,Uu++):(a=o,0===Hu&&Ju(Gi)),a!==o?(Mu=t,t=Cl(r)):(Uu=t,t=o)}else Uu=t,t=o;return t}function ad(){var t,n,r;return t=e.charAt(Uu),rr.test(t)?Uu++:(t=o,0===Hu&&Ju(Vi)),t===o&&(t=Uu,ld()!==o?(n=Uu,92===e.charCodeAt(Uu)?(r=Ut,Uu++):(r=o,0===Hu&&Ju(Zi)),r!==o&&(Mu=n,r=Al()),(n=r)===o&&(n=Uu,34===e.charCodeAt(Uu)?(r=zt,Uu++):(r=o,0===Hu&&Ju(Gi)),r!==o&&(Mu=n,r=Rl()),n=r),n!==o?(Mu=t,t=Tl(n)):(Uu=t,t=o)):(Uu=t,t=o)),t}function sd(){var t,n;for(Hu++,t=[],n=e.charAt(Uu),er.test(n)?Uu++:(n=o,0===Hu&&Ju($i));n!==o;)t.push(n),n=e.charAt(Uu),er.test(n)?Uu++:(n=o,0===Hu&&Ju($i));return Hu--,n=o,0===Hu&&Ju(Wi),t}function ld(){var t;return 92===e.charCodeAt(Uu)?(t=Ut,Uu++):(t=o,0===Hu&&Ju(Zi)),t}function cd(){var t,n,r,i,a,s,l,c;return t=Uu,od()!==o?(n=Uu,r=e.charAt(Uu),or.test(r)?Uu++:(r=o,0===Hu&&Ju(Yi)),r!==o?(i=e.charAt(Uu),or.test(i)?Uu++:(i=o,0===Hu&&Ju(Yi)),i!==o?(a=e.charAt(Uu),or.test(a)?Uu++:(a=o,0===Hu&&Ju(Yi)),a!==o?(s=e.charAt(Uu),or.test(s)?Uu++:(s=o,0===Hu&&Ju(Yi)),s!==o?n=r=[r,i,a,s]:(Uu=n,n=o)):(Uu=n,n=o)):(Uu=n,n=o)):(Uu=n,n=o),n!==o?(46===e.charCodeAt(Uu)?(r=Mt,Uu++):(r=o,0===Hu&&Ju(Ji)),r!==o?(i=Uu,a=e.charAt(Uu),or.test(a)?Uu++:(a=o,0===Hu&&Ju(Yi)),a!==o?(s=e.charAt(Uu),or.test(s)?Uu++:(s=o,0===Hu&&Ju(Yi)),s!==o?i=a=[a,s]:(Uu=i,i=o)):(Uu=i,i=o),i!==o?(46===e.charCodeAt(Uu)?(a=Mt,Uu++):(a=o,0===Hu&&Ju(Ji)),a!==o?(s=Uu,l=e.charAt(Uu),or.test(l)?Uu++:(l=o,0===Hu&&Ju(Yi)),l!==o?(c=e.charAt(Uu),or.test(c)?Uu++:(c=o,0===Hu&&Ju(Yi)),c!==o?s=l=[l,c]:(Uu=s,s=o)):(Uu=s,s=o),s!==o&&(l=od())!==o?(Mu=t,t=Bl(n,i,s)):(Uu=t,t=o)):(Uu=t,t=o)):(Uu=t,t=o)):(Uu=t,t=o)):(Uu=t,t=o)):(Uu=t,t=o),t}function ud(){var t,n,r,i,a,s,l;if(t=Uu,od()!==o){if(n=[],r=e.charAt(Uu),ir.test(r)?Uu++:(r=o,0===Hu&&Ju(Xi)),r!==o)for(;r!==o;)n.push(r),r=e.charAt(Uu),ir.test(r)?Uu++:(r=o,0===Hu&&Ju(Xi));else n=o;if(n!==o)if(58===e.charCodeAt(Uu)?(r=Ft,Uu++):(r=o,0===Hu&&Ju(ea)),r!==o){if(i=[],a=e.charAt(Uu),ir.test(a)?Uu++:(a=o,0===Hu&&Ju(Xi)),a!==o)for(;a!==o;)i.push(a),a=e.charAt(Uu),ir.test(a)?Uu++:(a=o,0===Hu&&Ju(Xi));else i=o;if(i!==o)if(58===e.charCodeAt(Uu)?(a=Ft,Uu++):(a=o,0===Hu&&Ju(ea)),a!==o){if(s=[],l=e.charAt(Uu),ir.test(l)?Uu++:(l=o,0===Hu&&Ju(Xi)),l!==o)for(;l!==o;)s.push(l),l=e.charAt(Uu),ir.test(l)?Uu++:(l=o,0===Hu&&Ju(Xi));else s=o;s!==o?((l=hd())===o&&(l=null),od()!==o?(Mu=t,t=jl(n,i,s,l)):(Uu=t,t=o)):(Uu=t,t=o)}else Uu=t,t=o;else Uu=t,t=o}else Uu=t,t=o;else Uu=t,t=o}else Uu=t,t=o;return t}function hd(){var t,n,r,i;if(t=Uu,46===e.charCodeAt(Uu)?(n=Mt,Uu++):(n=o,0===Hu&&Ju(Ji)),n!==o){if(r=[],i=e.charAt(Uu),ir.test(i)?Uu++:(i=o,0===Hu&&Ju(Xi)),i!==o)for(;i!==o;)r.push(i),i=e.charAt(Uu),ir.test(i)?Uu++:(i=o,0===Hu&&Ju(Xi));else r=o;r!==o?(Mu=t,t=Ol(r)):(Uu=t,t=o)}else Uu=t,t=o;return t}function dd(){var e,t;return e=Uu,od()!==o&&(t=fd())!==o&&od()!==o?(Mu=e,e=Il(t)):(Uu=e,e=o),e}function fd(){var t,n,r,i;return t=Uu,(n=pd())!==o?(47===e.charCodeAt(Uu)?(r=Dt,Uu++):(r=o,0===Hu&&Ju(ta)),r!==o&&(i=md())!==o?(Mu=t,t=Pl(n,i)):(Uu=t,t=o)):(Uu=t,t=o),t}function pd(){var t;return t=e.charAt(Uu),ar.test(t)?Uu++:(t=o,0===Hu&&Ju(na)),t}function gd(){var e,t;return e=Uu,od()!==o&&(t=md())!==o&&od()!==o?(Mu=e,e=Ll(t)):(Uu=e,e=o),e}function md(){var e,t;return e=Uu,(t=Kd())!==o&&(Mu=e,t=zl(t)),e=t}function yd(){var e,t;return e=Uu,od()!==o?(t=bd(),od()!==o?(Mu=e,e=Ul(t)):(Uu=e,e=o)):(Uu=e,e=o),e}function bd(){var t,n,r,i,a,s,l;if(t=Uu,n=Uu,(r=vd())!==o){for(i=[],a=Uu,58===e.charCodeAt(Uu)?(s=Ft,Uu++):(s=o,0===Hu&&Ju(ea)),s!==o&&(l=vd())!==o?(Mu=a,a=Ml(r,l)):(Uu=a,a=o);a!==o;)i.push(a),a=Uu,58===e.charCodeAt(Uu)?(s=Ft,Uu++):(s=o,0===Hu&&Ju(ea)),s!==o&&(l=vd())!==o?(Mu=a,a=Ml(r,l)):(Uu=a,a=o);Mu=n,n=Fl(r,i)}else Uu=n,n=o;return n===o&&(n=null),Mu=t,t=n=Dl(n)}function vd(){var t,n,r,i,a,s;return t=Uu,63===e.charCodeAt(Uu)?(n=qt,Uu++):(n=o,0===Hu&&Ju(ra)),n!==o&&(Mu=t,n=ql()),(t=n)===o&&(t=Uu,45===e.charCodeAt(Uu)?(n=Ht,Uu++):(n=o,0===Hu&&Ju(oa)),n!==o&&(Mu=t,n=Hl()),(t=n)===o&&(t=Uu,(n=rf())!==o?(47===e.charCodeAt(Uu)?(r=Dt,Uu++):(r=o,0===Hu&&Ju(ta)),r!==o&&(i=rf())!==o?(43===e.charCodeAt(Uu)?(a=Wt,Uu++):(a=o,0===Hu&&Ju(ia)),a!==o&&(s=rf())!==o?(Mu=t,t=Wl(n,i,s)):(Uu=t,t=o)):(Uu=t,t=o)):(Uu=t,t=o),t===o&&(t=Uu,(n=rf())!==o?(47===e.charCodeAt(Uu)?(r=Dt,Uu++):(r=o,0===Hu&&Ju(ta)),r!==o&&(i=rf())!==o?(Mu=t,t=$l(n,i)):(Uu=t,t=o)):(Uu=t,t=o),t===o&&(t=Uu,(n=rf())!==o?(43===e.charCodeAt(Uu)?(r=Wt,Uu++):(r=o,0===Hu&&Ju(ia)),r!==o&&(i=rf())!==o?(Mu=t,t=Kl(n,i)):(Uu=t,t=o)):(Uu=t,t=o),t===o&&(t=Uu,(n=rf())!==o&&(Mu=t,n=Ql(n)),(t=n)===o&&(t=Uu,42===e.charCodeAt(Uu)?(n=$t,Uu++):(n=o,0===Hu&&Ju(aa)),n!==o&&(r=rf())!==o?(Mu=t,t=Gl(r)):(Uu=t,t=o))))))),t}function wd(){var e,t;return e=Uu,od()!==o&&(t=kd())!==o&&od()!==o?(Mu=e,e=Vl(t)):(Uu=e,e=o),e}function kd(){var t,n;return t=Uu,e.substr(Uu,3)===Kt?(n=Kt,Uu+=3):(n=o,0===Hu&&Ju(sa)),n!==o&&(Mu=t,n=Zl(n)),(t=n)===o&&(t=Uu,e.substr(Uu,3)===Qt?(n=Qt,Uu+=3):(n=o,0===Hu&&Ju(la)),n!==o&&(Mu=t,n=Yl(n)),(t=n)===o&&(t=Uu,e.substr(Uu,7)===Gt?(n=Gt,Uu+=7):(n=o,0===Hu&&Ju(ca)),n!==o&&(Mu=t,n=Jl(n)),(t=n)===o&&(t=Uu,e.substr(Uu,3)===Vt?(n=Vt,Uu+=3):(n=o,0===Hu&&Ju(ua)),n!==o&&(Mu=t,n=Xl()),(t=n)===o&&(t=Uu,42===e.charCodeAt(Uu)?(n=$t,Uu++):(n=o,0===Hu&&Ju(aa)),n!==o&&(Mu=t,n=ec(n)),t=n)))),t}function xd(){var t,n,r;return t=Uu,(n=Ed())!==o&&(Mu=t,n=tc(n)),(t=n)===o&&(t=Uu,(n=od())!==o?(45===e.charCodeAt(Uu)?(r=Ht,Uu++):(r=o,0===Hu&&Ju(oa)),r!==o&&od()!==o?(Mu=t,t=nc()):(Uu=t,t=o)):(Uu=t,t=o),t===o&&(t=Uu,(n=od())!==o&&(r=od())!==o?(Mu=t,t=rc()):(Uu=t,t=o))),t}function Ed(){var t,n,r;if(t=Uu,od()!==o){if(n=[],r=e.charAt(Uu),ir.test(r)?Uu++:(r=o,0===Hu&&Ju(Xi)),r!==o)for(;r!==o;)n.push(r),r=e.charAt(Uu),ir.test(r)?Uu++:(r=o,0===Hu&&Ju(Xi));else n=o;n!==o&&(r=od())!==o?(Mu=t,t=oc(n)):(Uu=t,t=o)}else Uu=t,t=o;return t}function _d(){var e,t,n,r,i,a,s,l,c,u;return e=Uu,eh(),t=ed(),(n=Cd())===o&&(n=null),ed(),(r=tf())===o&&(r=null),ed(),(i=af())!==o?(ed(),(a=cf())===o&&(a=null),(s=Nd())===o&&(s=null),ed(),(l=Cd())===o&&(l=null),ed(),(c=Jd())===o&&(c=null),(u=_d())===o&&(u=null),Mu=e,e=ic(n,r,i,a,s,l,c,u)):(Uu=e,e=o),e===o&&(e=Uu,ed(),(t=Sd())!==o?(n=ed(),Mu=e,e=ac(t)):(Uu=e,e=o)),e}function Nd(){var t,n,r,i;return t=Uu,(n=Xd())!==o?(61===e.charCodeAt(Uu)?(r=Zt,Uu++):(r=o,0===Hu&&Ju(ha)),r!==o&&(i=ef())!==o?t=n=[n,r,i]:(Uu=t,t=o)):(Uu=t,t=o),t}function Sd(){var e,t;return e=Uu,(t=kd())!==o&&(Mu=e,t=sc(t)),e=t}function Cd(){var e,t,n,r,i;if(e=Uu,(t=Ad())!==o){for(n=[],r=Uu,ed(),(i=Ad())!==o?(Mu=r,r=lc(t,i)):(Uu=r,r=o);r!==o;)n.push(r),r=Uu,ed(),(i=Ad())!==o?(Mu=r,r=lc(t,i)):(Uu=r,r=o);Mu=e,e=cc(t,n)}else Uu=e,e=o;return e}function Ad(){var e,t,n;return e=Uu,(t=Md())!==o&&(n=Fd())!==o?(Mu=e,e=uc()):(Uu=e,e=o),e===o&&(e=Uu,(t=Md())!==o&&(n=Rd())!==o&&Fd()!==o?(Mu=e,e=hc(n)):(Uu=e,e=o),e===o&&(e=Uu,(t=jd())!==o&&(Mu=e,t=dc(t)),e=t)),e}function Rd(){var t,n,r,i,a,s,l,c,u,h,d,f;if(t=Uu,n=ed(),(r=Dd())!==o)if(e.substr(Uu,4)===Yt?(i=Yt,Uu+=4):(i=o,0===Hu&&Ju(da)),i!==o)if((a=td())!==o)if((s=Od())===o&&(s=null),l=ed(),(c=qd())!==o){for(ed(),u=[],h=Uu,(d=Rd())!==o&&(Mu=h,d=fc(s,d)),h=d;h!==o;)u.push(h),h=Uu,(d=Rd())!==o&&(Mu=h,d=fc(s,d)),h=d;Mu=t,t=pc(s,u)}else Uu=t,t=o;else Uu=t,t=o;else Uu=t,t=o;else Uu=t,t=o;if(t===o){if(t=Uu,n=ed(),(r=Dd())!==o)if(e.substr(Uu,4)===Jt?(i=Jt,Uu+=4):(i=o,0===Hu&&Ju(fa)),i!==o)if((a=td())!==o)if((s=Pd())===o&&(s=null),l=ed(),(c=qd())!==o){for(ed(),u=[],h=Uu,(d=Rd())!==o&&(Mu=h,d=gc(s,d)),h=d;h!==o;)u.push(h),h=Uu,(d=Rd())!==o&&(Mu=h,d=gc(s,d)),h=d;Mu=t,t=mc(s,u)}else Uu=t,t=o;else Uu=t,t=o;else Uu=t,t=o;else Uu=t,t=o;if(t===o){if(t=Uu,n=ed(),(r=Dd())!==o)if(37===e.charCodeAt(Uu)?(i=Xt,Uu++):(i=o,0===Hu&&Ju(pa)),i!==o)if((a=Wd())!==o)if((s=td())!==o)if((l=Kd())!==o)if(c=ed(),qd()!==o){for(u=ed(),h=[],d=Uu,(f=Rd())!==o&&(Mu=d,f=yc(a,l,f)),d=f;d!==o;)h.push(d),d=Uu,(f=Rd())!==o&&(Mu=d,f=yc(a,l,f)),d=f;Mu=t,t=bc(a,l,h)}else Uu=t,t=o;else Uu=t,t=o;else Uu=t,t=o;else Uu=t,t=o;else Uu=t,t=o;else Uu=t,t=o;if(t===o){if(t=Uu,n=ed(),(r=Dd())!==o)if(37===e.charCodeAt(Uu)?(i=Xt,Uu++):(i=o,0===Hu&&Ju(pa)),i!==o)if((a=$d())!==o)if((s=td())!==o)if((l=Qd())!==o)if(c=ed(),qd()!==o){for(u=ed(),h=[],d=Uu,(f=Rd())!==o&&(Mu=d,f=vc(a,l,f)),d=f;d!==o;)h.push(d),d=Uu,(f=Rd())!==o&&(Mu=d,f=vc(a,l,f)),d=f;Mu=t,t=wc(a,l,h)}else Uu=t,t=o;else Uu=t,t=o;else Uu=t,t=o;else Uu=t,t=o;else Uu=t,t=o;else Uu=t,t=o;if(t===o){if(t=Uu,n=ed(),(r=Dd())!==o)if(e.substr(Uu,5)===en?(i=en,Uu+=5):(i=o,0===Hu&&Ju(ga)),i!==o)if((a=td())!==o)if(s=rd(),l=ed(),(c=qd())!==o){for(ed(),u=[],h=Uu,(d=Rd())!==o&&(Mu=h,d=kc(s,d)),h=d;h!==o;)u.push(h),h=Uu,(d=Rd())!==o&&(Mu=h,d=kc(s,d)),h=d;Mu=t,t=xc(s,u)}else Uu=t,t=o;else Uu=t,t=o;else Uu=t,t=o;else Uu=t,t=o;if(t===o){if(t=Uu,n=ed(),(r=Dd())!==o)if(37===e.charCodeAt(Uu)?(i=Xt,Uu++):(i=o,0===Hu&&Ju(pa)),i!==o)if(a=rd(),(s=td())!==o){if(l=[],(c=Bd())!==o)for(;c!==o;)l.push(c),c=Bd();else l=o;if(l!==o)if((c=qd())!==o){for(ed(),u=[],h=Uu,(d=Rd())!==o&&(Mu=h,d=Ec(a,l,d)),h=d;h!==o;)u.push(h),h=Uu,(d=Rd())!==o&&(Mu=h,d=Ec(a,l,d)),h=d;Mu=t,t=_c(a,l,u)}else Uu=t,t=o;else Uu=t,t=o}else Uu=t,t=o;else Uu=t,t=o;else Uu=t,t=o;if(t===o){if(t=Uu,n=[],(r=Td())!==o)for(;r!==o;)n.push(r),r=Td();else n=o;if(n!==o){for(r=[],i=Uu,a=ed(),(s=Rd())!==o?(Mu=i,i=Nc(n,s)):(Uu=i,i=o);i!==o;)r.push(i),i=Uu,a=ed(),(s=Rd())!==o?(Mu=i,i=Nc(n,s)):(Uu=i,i=o);Mu=t,t=Sc(n,r)}else Uu=t,t=o}}}}}}return t}function Td(){var t,n,r,i;return t=Uu,n=Uu,Hu++,e.substr(Uu,2)===tn?(r=tn,Uu+=2):(r=o,0===Hu&&Ju(ma)),Hu--,r===o?n=void 0:(Uu=n,n=o),n!==o?(r=Uu,Hu++,125===e.charCodeAt(Uu)?(i=nn,Uu++):(i=o,0===Hu&&Ju(ya)),Hu--,i===o?r=void 0:(Uu=r,r=o),r!==o?(e.length>Uu?(i=e.charAt(Uu),Uu++):(i=o,0===Hu&&Ju(ba)),i!==o?(Mu=t,t=Cc(i)):(Uu=t,t=o)):(Uu=t,t=o)):(Uu=t,t=o),t}function Bd(){var t,n,r;return t=Uu,n=Uu,Hu++,r=qd(),Hu--,r===o?n=void 0:(Uu=n,n=o),n!==o?(e.length>Uu?(r=e.charAt(Uu),Uu++):(r=o,0===Hu&&Ju(ba)),r!==o?(Mu=t,t=Ac(r)):(Uu=t,t=o)):(Uu=t,t=o),t}function jd(){var t,n,r;if(t=Uu,Hd()!==o){for(n=[],r=e.charAt(Uu),sr.test(r)?Uu++:(r=o,0===Hu&&Ju(va));r!==o;)n.push(r),r=e.charAt(Uu),sr.test(r)?Uu++:(r=o,0===Hu&&Ju(va));(r=nd())!==o?(Mu=t,t=Rc(n)):(Uu=t,t=o)}else Uu=t,t=o;return t}function Od(){var t,n,r,i,a,s,l;if(t=Uu,(n=Id())!==o){for(ed(),r=[],i=Uu,44===e.charCodeAt(Uu)?(a=rn,Uu++):(a=o,0===Hu&&Ju(wa)),a!==o?(s=ed(),(l=Id())!==o?i=a=[a,s,l]:(Uu=i,i=o)):(Uu=i,i=o);i!==o;)r.push(i),i=Uu,44===e.charCodeAt(Uu)?(a=rn,Uu++):(a=o,0===Hu&&Ju(wa)),a!==o?(s=ed(),(l=Id())!==o?i=a=[a,s,l]:(Uu=i,i=o)):(Uu=i,i=o);Mu=t,t=Tc(n,r)}else Uu=t,t=o;return t}function Id(){var e,t,n;return e=Uu,(t=zd())!==o&&(n=Ud())!==o?(Mu=e,e=Bc(t,n)):(Uu=e,e=o),e}function Pd(){var t,n,r,i,a,s,l;if(t=Uu,(n=Ld())!==o){for(ed(),r=[],i=Uu,44===e.charCodeAt(Uu)?(a=rn,Uu++):(a=o,0===Hu&&Ju(wa)),a!==o?(s=ed(),(l=Ld())!==o?i=a=[a,s,l]:(Uu=i,i=o)):(Uu=i,i=o);i!==o;)r.push(i),i=Uu,44===e.charCodeAt(Uu)?(a=rn,Uu++):(a=o,0===Hu&&Ju(wa)),a!==o?(s=ed(),(l=Ld())!==o?i=a=[a,s,l]:(Uu=i,i=o)):(Uu=i,i=o);Mu=t,t=jc(n,r)}else Uu=t,t=o;return t}function Ld(){var e,t,n,r;return e=Uu,(t=zd())!==o&&(n=Ud())!==o&&(r=Ud())!==o?(Mu=e,e=Oc(t,n,r)):(Uu=e,e=o),e}function zd(){var t,n;return t=Uu,89===e.charCodeAt(Uu)?(n=on,Uu++):(n=o,0===Hu&&Ju(ka)),n!==o&&(Mu=t,n=Ic()),(t=n)===o&&(t=Uu,71===e.charCodeAt(Uu)?(n=an,Uu++):(n=o,0===Hu&&Ju(xa)),n!==o&&(Mu=t,n=Pc()),(t=n)===o&&(t=Uu,82===e.charCodeAt(Uu)?(n=sn,Uu++):(n=o,0===Hu&&Ju(Ea)),n!==o&&(Mu=t,n=Lc()),(t=n)===o&&(t=Uu,66===e.charCodeAt(Uu)?(n=ln,Uu++):(n=o,0===Hu&&Ju(_a)),n!==o&&(Mu=t,n=zc()),(t=n)===o&&(t=Uu,79===e.charCodeAt(Uu)?(n=cn,Uu++):(n=o,0===Hu&&Ju(Na)),n!==o&&(Mu=t,n=Uc()),(t=n)===o&&(t=Uu,67===e.charCodeAt(Uu)?(n=un,Uu++):(n=o,0===Hu&&Ju(Sa)),n!==o&&(Mu=t,n=Mc()),t=n))))),t}function Ud(){var e,t,n;return e=Uu,(t=gf())!==o&&(n=mf())!==o?(Mu=e,e=Fc(t,n)):(Uu=e,e=o),e}function Md(){var t;return 123===e.charCodeAt(Uu)?(t=hn,Uu++):(t=o,0===Hu&&Ju(Ca)),t}function Fd(){var t;return 125===e.charCodeAt(Uu)?(t=nn,Uu++):(t=o,0===Hu&&Ju(ya)),t}function Dd(){var t;return 91===e.charCodeAt(Uu)?(t=dn,Uu++):(t=o,0===Hu&&Ju(Aa)),t}function qd(){var t;return 93===e.charCodeAt(Uu)?(t=fn,Uu++):(t=o,0===Hu&&Ju(Ra)),t}function Hd(){var t;return 59===e.charCodeAt(Uu)?(t=pn,Uu++):(t=o,0===Hu&&Ju(Ta)),t}function Wd(){var t,n;return t=Uu,e.substr(Uu,3)===gn?(n=gn,Uu+=3):(n=o,0===Hu&&Ju(Ba)),n!==o&&(Mu=t,n=Dc()),(t=n)===o&&(t=Uu,e.substr(Uu,3)===mn?(n=mn,Uu+=3):(n=o,0===Hu&&Ju(ja)),n!==o&&(Mu=t,n=qc()),(t=n)===o&&(t=Uu,e.substr(Uu,3)===yn?(n=yn,Uu+=3):(n=o,0===Hu&&Ju(Oa)),n!==o&&(Mu=t,n=Hc()),t=n)),t}function $d(){var t,n;return t=Uu,e.substr(Uu,3)===bn?(n=bn,Uu+=3):(n=o,0===Hu&&Ju(Ia)),n!==o&&(Mu=t,n=Wc()),t=n}function Kd(){var e,t,n,r,i;return e=Uu,(t=Gd())===o&&(t=null),(n=Yd())!==o?((r=Yd())===o&&(r=null),(i=hd())===o&&(i=null),Mu=e,e=$c(t,n,r,i)):(Uu=e,e=o),e}function Qd(){var e,t,n,r;return e=Uu,(t=Gd())===o&&(t=null),(n=Yd())!==o?((r=Yd())===o&&(r=null),Mu=e,e=Kc(t,n,r)):(Uu=e,e=o),e}function Gd(){var e,t,n;return e=Uu,(t=Vd())!==o?((n=Zd())===o&&(n=null),Mu=e,e=Qc(t,n)):(Uu=e,e=o),e}function Vd(){var t,n,r,i;return t=Uu,(n=Yd())!==o?((r=Yd())===o&&(r=null),58===e.charCodeAt(Uu)?(i=Ft,Uu++):(i=o,0===Hu&&Ju(ea)),i!==o?(Mu=t,t=Gc(n,r)):(Uu=t,t=o)):(Uu=t,t=o),t}function Zd(){var t,n,r,i;return t=Uu,(n=Yd())!==o?((r=Yd())===o&&(r=null),58===e.charCodeAt(Uu)?(i=Ft,Uu++):(i=o,0===Hu&&Ju(ea)),i!==o?(Mu=t,t=Vc(n,r)):(Uu=t,t=o)):(Uu=t,t=o),t}function Yd(){var t,n;return t=Uu,n=e.charAt(Uu),ir.test(n)?Uu++:(n=o,0===Hu&&Ju(Xi)),n!==o&&(Mu=t,n=Zc(n)),t=n}function Jd(){var e,t,n;return e=Uu,Xd()!==o&&(t=_d())!==o&&ef()!==o?(ed(),(n=Jd())===o&&(n=null),Mu=e,e=Yc(t,n)):(Uu=e,e=o),e}function Xd(){var t;return 40===e.charCodeAt(Uu)?(t=vn,Uu++):(t=o,0===Hu&&Ju(Pa)),t}function ef(){var t;return 41===e.charCodeAt(Uu)?(t=wn,Uu++):(t=o,0===Hu&&Ju(La)),t}function tf(){var e,t,n,r,i,a,s;if(e=Uu,(t=rf())!==o){for(n=[],r=of();r!==o;)n.push(r),r=of();for(r=[],i=nf();i!==o;)r.push(i),i=nf();for(i=[],a=of();a!==o;)i.push(a),a=of();for(a=[],s=nf();s!==o;)a.push(s),s=nf();Mu=e,e=Jc(t)}else Uu=e,e=o;return e}function nf(){var t;return 46===e.charCodeAt(Uu)?(t=Mt,Uu++):(t=o,0===Hu&&Ju(Ji)),t}function rf(){var t,n,r;if(Hu++,t=Uu,n=[],r=e.charAt(Uu),ir.test(r)?Uu++:(r=o,0===Hu&&Ju(Xi)),r!==o)for(;r!==o;)n.push(r),r=e.charAt(Uu),ir.test(r)?Uu++:(r=o,0===Hu&&Ju(Xi));else n=o;return n!==o&&(Mu=t,n=Xc(n)),Hu--,(t=n)===o&&(n=o,0===Hu&&Ju(za)),t}function of(){var t,n,r;if(t=Uu,n=[],32===e.charCodeAt(Uu)?(r=kn,Uu++):(r=o,0===Hu&&Ju(Ua)),r!==o)for(;r!==o;)n.push(r),32===e.charCodeAt(Uu)?(r=kn,Uu++):(r=o,0===Hu&&Ju(Ua));else n=o;return n!==o&&(Mu=t,n=eu()),t=n}function af(){var t,n,r,i,a,s,l,c,u;return t=Uu,(n=ff())===o&&(n=null),r=Uu,Hu++,i=df(),Hu--,i!==o?(Uu=r,r=void 0):r=o,r!==o&&(i=hf())!==o?((a=yf())===o&&(a=null),(s=gf())!==o&&(l=mf())!==o?((c=lf())===o&&(c=null),(u=sf())===o&&(u=null),ed(),e.substr(Uu,4)===xn?Uu+=4:0===Hu&&Ju(Ma),Mu=t,t=tu(n,i,a,s,l,c,u)):(Uu=t,t=o)):(Uu=t,t=o),t===o&&(t=Uu,(n=ff())===o&&(n=null),(r=gf())!==o&&(i=mf())!==o?((a=bf())===o&&(a=null),(s=gf())!==o&&(l=mf())!==o?((c=lf())===o&&(c=null),(u=sf())===o&&(u=null),Mu=t,t=nu(n,r,i,a,s,l,c,u)):(Uu=t,t=o)):(Uu=t,t=o),t===o&&(t=Uu,(n=ff())===o&&(n=null),(r=yf())===o&&(r=null),(i=gf())!==o&&(a=mf())!==o?((s=lf())===o&&(s=null),(l=sf())===o&&(l=null),Mu=t,t=ru(n,r,i,a,s,l)):(Uu=t,t=o),t===o&&(t=Uu,e.substr(Uu,5)===En?(n=En,Uu+=5):(n=o,0===Hu&&Ju(Fa)),n!==o?((r=sf())===o&&(r=null),Mu=t,t=ou(r)):(Uu=t,t=o),t===o&&(t=Uu,e.substr(Uu,3)===_n?(n=_n,Uu+=3):(n=o,0===Hu&&Ju(Da)),n!==o?((r=sf())===o&&(r=null),Mu=t,t=iu(r)):(Uu=t,t=o),t===o&&(t=Uu,(n=ff())!==o?(64===e.charCodeAt(Uu)?(r=Nn,Uu++):(r=o,0===Hu&&Ju(qa)),r!==o&&(i=gf())!==o&&(a=mf())!==o?(Mu=t,t=au(n,i,a)):(Uu=t,t=o)):(Uu=t,t=o),t===o&&(t=Uu,e.substr(Uu,2)===Sn?(n=Sn,Uu+=2):(n=o,0===Hu&&Ju(Ha)),n!==o&&(Mu=t,n=su()),t=n)))))),t}function sf(){var t,n,r,i;return t=Uu,n=Uu,r=Uu,Hu++,e.substr(Uu,2)===Cn?(i=Cn,Uu+=2):(i=o,0===Hu&&Ju(Wa)),Hu--,i===o?r=void 0:(Uu=r,r=o),r!==o?(43===e.charCodeAt(Uu)?(i=Wt,Uu++):(i=o,0===Hu&&Ju(ia)),i!==o?n=r=[r,i]:(Uu=n,n=o)):(Uu=n,n=o),n!==o&&(Mu=t,n=lu(n)),(t=n)===o&&(t=Uu,n=Uu,r=Uu,Hu++,e.substr(Uu,3)===An?(i=An,Uu+=3):(i=o,0===Hu&&Ju($a)),Hu--,i===o?r=void 0:(Uu=r,r=o),r!==o?(35===e.charCodeAt(Uu)?(i=Rn,Uu++):(i=o,0===Hu&&Ju(Ka)),i!==o?n=r=[r,i]:(Uu=n,n=o)):(Uu=n,n=o),n!==o&&(Mu=t,n=cu(n)),t=n),t}function lf(){var t,n;return t=Uu,61===e.charCodeAt(Uu)?Uu++:0===Hu&&Ju(ha),(n=pf())!==o?(Mu=t,t=uu(n)):(Uu=t,t=o),t}function cf(){var e,t,n;return e=Uu,(t=uf())!==o?(ed(),(n=cf())===o&&(n=null),Mu=e,e=hu(t,n)):(Uu=e,e=o),e}function uf(){var t,n,r;return t=Uu,36===e.charCodeAt(Uu)?(n=Tn,Uu++):(n=o,0===Hu&&Ju(Qa)),n!==o&&(r=rf())!==o?(Mu=t,t=du(r)):(Uu=t,t=o),t===o&&(t=Uu,e.substr(Uu,2)===Bn?(n=Bn,Uu+=2):(n=o,0===Hu&&Ju(Ga)),n!==o&&(Mu=t,n=fu()),(t=n)===o&&(t=Uu,e.substr(Uu,2)===jn?(n=jn,Uu+=2):(n=o,0===Hu&&Ju(Va)),n!==o&&(Mu=t,n=pu()),(t=n)===o&&(t=Uu,e.substr(Uu,2)===On?(n=On,Uu+=2):(n=o,0===Hu&&Ju(Za)),n!==o&&(Mu=t,n=gu()),(t=n)===o&&(t=Uu,e.substr(Uu,2)===In?(n=In,Uu+=2):(n=o,0===Hu&&Ju(Ya)),n!==o&&(Mu=t,n=mu()),(t=n)===o&&(t=Uu,33===e.charCodeAt(Uu)?(n=Pn,Uu++):(n=o,0===Hu&&Ju(Ja)),n!==o&&(Mu=t,n=yu()),(t=n)===o&&(t=Uu,63===e.charCodeAt(Uu)?(n=qt,Uu++):(n=o,0===Hu&&Ju(ra)),n!==o&&(Mu=t,n=bu()),(t=n)===o&&(t=Uu,8252===e.charCodeAt(Uu)?(n=Ln,Uu++):(n=o,0===Hu&&Ju(Xa)),n!==o&&(Mu=t,n=vu()),(t=n)===o&&(t=Uu,8263===e.charCodeAt(Uu)?(n=zn,Uu++):(n=o,0===Hu&&Ju(es)),n!==o&&(Mu=t,n=wu()),(t=n)===o&&(t=Uu,8265===e.charCodeAt(Uu)?(n=Un,Uu++):(n=o,0===Hu&&Ju(ts)),n!==o&&(Mu=t,n=ku()),(t=n)===o&&(t=Uu,8264===e.charCodeAt(Uu)?(n=Mn,Uu++):(n=o,0===Hu&&Ju(ns)),n!==o&&(Mu=t,n=xu()),(t=n)===o&&(t=Uu,9633===e.charCodeAt(Uu)?(n=Fn,Uu++):(n=o,0===Hu&&Ju(rs)),n!==o&&(Mu=t,n=Eu()),(t=n)===o&&(t=Uu,61===e.charCodeAt(Uu)?(n=Zt,Uu++):(n=o,0===Hu&&Ju(ha)),n!==o&&(Mu=t,n=_u()),(t=n)===o&&(t=Uu,8734===e.charCodeAt(Uu)?(n=Dn,Uu++):(n=o,0===Hu&&Ju(os)),n!==o&&(Mu=t,n=Nu()),(t=n)===o&&(t=Uu,10866===e.charCodeAt(Uu)?(n=qn,Uu++):(n=o,0===Hu&&Ju(is)),n!==o&&(Mu=t,n=Su()),(t=n)===o&&(t=Uu,10865===e.charCodeAt(Uu)?(n=Hn,Uu++):(n=o,0===Hu&&Ju(as)),n!==o&&(Mu=t,n=Cu()),(t=n)===o&&(t=Uu,177===e.charCodeAt(Uu)?(n=Wn,Uu++):(n=o,0===Hu&&Ju(ss)),n!==o&&(Mu=t,n=Au()),(t=n)===o&&(t=Uu,8723===e.charCodeAt(Uu)?(n=$n,Uu++):(n=o,0===Hu&&Ju(ls)),n!==o&&(Mu=t,n=Ru()),(t=n)===o&&(t=Uu,e.substr(Uu,2)===Cn?(n=Cn,Uu+=2):(n=o,0===Hu&&Ju(Wa)),n!==o&&(Mu=t,n=Tu()),(t=n)===o&&(t=Uu,e.substr(Uu,2)===Kn?(n=Kn,Uu+=2):(n=o,0===Hu&&Ju(cs)),n!==o&&(Mu=t,n=Bu()),(t=n)===o&&(t=Uu,10752===e.charCodeAt(Uu)?(n=Qn,Uu++):(n=o,0===Hu&&Ju(us)),n!==o&&(Mu=t,n=ju()),(t=n)===o&&(t=Uu,10227===e.charCodeAt(Uu)?(n=Gn,Uu++):(n=o,0===Hu&&Ju(hs)),n!==o&&(Mu=t,n=Ou()),(t=n)===o&&(t=Uu,8594===e.charCodeAt(Uu)?(n=Vn,Uu++):(n=o,0===Hu&&Ju(ds)),n!==o&&(Mu=t,n=Iu()),(t=n)===o&&(t=Uu,8593===e.charCodeAt(Uu)?(n=Zn,Uu++):(n=o,0===Hu&&Ju(fs)),n!==o&&(Mu=t,n=Pu()),(t=n)===o&&(t=Uu,8646===e.charCodeAt(Uu)?(n=Yn,Uu++):(n=o,0===Hu&&Ju(ps)),n!==o&&(Mu=t,n=Lu()),(t=n)===o&&(t=Uu,68===e.charCodeAt(Uu)?(n=Jn,Uu++):(n=o,0===Hu&&Ju(gs)),n!==o&&(Mu=t,n=zu()),t=n))))))))))))))))))))))))),t}function hf(){var t;return t=e.charAt(Uu),lr.test(t)?Uu++:(t=o,0===Hu&&Ju(ms)),t}function df(){var e,t,n,r,i;return e=Uu,(t=hf())!==o?((n=yf())===o&&(n=null),(r=gf())!==o&&(i=mf())!==o?e=t=[t,n,r,i]:(Uu=e,e=o)):(Uu=e,e=o),e}function ff(){var t;return t=e.charAt(Uu),cr.test(t)?Uu++:(t=o,0===Hu&&Ju(ys)),t}function pf(){var t;return t=e.charAt(Uu),ur.test(t)?Uu++:(t=o,0===Hu&&Ju(bs)),t}function gf(){var t;return t=e.charAt(Uu),hr.test(t)?Uu++:(t=o,0===Hu&&Ju(vs)),t}function mf(){var t;return t=e.charAt(Uu),dr.test(t)?Uu++:(t=o,0===Hu&&Ju(ws)),t}function yf(){var t;return 120===e.charCodeAt(Uu)?(t=Xn,Uu++):(t=o,0===Hu&&Ju(ks)),t}function bf(){var t;return t=e.charAt(Uu),fr.test(t)?Uu++:(t=o,0===Hu&&Ju(xs)),t}var vf=[];function wf(e){var t=Object.assign(e,Wu());return vf.push(t),t}function kf(e){return parseInt(e.join(""),10)}function xf(e){return e.join("").match(/\?/)?e.join(""):kf(e)}function Ef(e){var t={};return e.forEach((function(e){for(var n in e)Array.isArray(e[n])?t[n]=t[n]?t[n].concat(e[n]):e[n]:t[n]=t[n]?Nf(t[n])+" "+_f(e[n]):e[n]})),t}function _f(e){if("string"!==typeof e)return e;var t=/^\s+/;return e.replace(t,"")}function Nf(e){if("string"!==typeof e)return e;var t=/\s+$/;return e.replace(t,"")}if(r=s(),n.peg$library)return{peg$result:r,peg$currPos:Uu,peg$FAILED:o,peg$maxFailExpected:qu,peg$maxFailPos:Du};if(r!==o&&Uu===e.length)return r;throw r!==o&&Uu<e.length&&Ju(Gu()),Xu(qu,Du<e.length?e.charAt(Du):null,Du<e.length?Yu(Du,Du+1):Yu(Du,Du))}return e(t,Error),t.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r,o=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){o=e[r].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,a=this.location.source&&"function"===typeof this.location.source.offset?this.location.source.offset(i):i,s=this.location.source+":"+a.line+":"+a.column;if(o){var l=this.location.end,c=n("",a.line.toString().length," "),u=o[i.line-1],h=(i.line===l.line?l.column:u.length+1)-i.column||1;t+="\n --\x3e "+s+"\n"+c+" |\n"+a.line+" | "+u+"\n"+c+" | "+n("",i.column-1," ")+n("",h,"^")}else t+="\n at "+s}return t},t.buildMessage=function(e,t){var n={literal:function(e){return'"'+o(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e)}));return"["+(e.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function a(e){return n[e.type](e)}function s(e){var t,n,r=e.map(a);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}function l(e){return e?'"'+o(e)+'"':"end of input"}return"Expected "+s(e)+" but "+l(t)+" found."},{StartRules:["pgn","tags","game","games"],SyntaxError:t,parse:r}}));var i=t(o.exports);function a(e,t){return t&&"games"!==t.startRule?s(e,t):c(e,t)}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{startRule:"game"};e=e.trim();let n=i.parse(e,t),r={moves:[],messages:[]};return"pgn"===t.startRule?r.moves=n:"tags"===t.startRule?r.tags=n:r=n,l(r,e,t)}function l(e,t,n){function r(e){if("tags"!==n.startRule){let t=e.moves[e.moves.length-1];if("string"==typeof t&&(e.moves.pop(),e.tags)){let n=e.tags.Result;n&&t!==n&&e.messages.push({key:"Result",value:n,message:"Result in tags is different to result in SAN"}),e.tags.Result=t}}return e}function o(e){function t(e){function t(e){return e.split(/\s+/)[1]}function r(e,t){function n(e){return"w"===e?"b":"w"}return e.turn=t,e.variations&&e.variations.forEach((function(e){let n=t;e.forEach((e=>n=r(e,n)))})),n(t)}const o="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";let i=t(n.fen||e.tags&&e.tags.FEN||o);return e.moves.forEach((e=>i=r(e,i))),e}return e.moves?t(e):e}return o(r(e))}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{startRule:"games"};function n(e){if(!Array.isArray(e))return[];if(0===e.length)return e;let t=e.pop();return(void 0!==t.tags||t.moves.length>0)&&e.push(t),e}function r(e,t){return n(e)}const o=Object.assign({startRule:"games"},t);let a=i.parse(e,o);return a?(r(a,e,o),a.forEach((t=>{l(t,e,o)})),a):[]}const u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\n";return e.replace(/\r?\n/g,t)};function h(e){let t=u(e).split(/\n\n+/),n=[],r={tags:"",pgn:"",all:""};return t.forEach((function(e){if(e.startsWith("["))r.tags=e;else if(e){r.pgn=e;let t=r.tags?r.tags+"\n\n"+r.pgn:r.pgn;r.all=t,n.push(r),r={tags:"",pgn:"",all:""}}})),n}e.parse=a,e.parseGame=s,e.parseGames=c,e.split=h}(t)},54:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(n){}!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:"0.0.1"}.DEBUG);return e},t.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(175)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},175:(e,t,n)=>{e.exports=function(e){function t(e){let n,o,i,a=null;function s(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];if(!s.enabled)return;const i=s,a=Number(new Date),l=a-(n||a);i.diff=l,i.prev=n,i.curr=a,n=a,r[0]=t.coerce(r[0]),"string"!==typeof r[0]&&r.unshift("%O");let c=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,((e,n)=>{if("%%"===e)return"%";c++;const o=t.formatters[n];if("function"===typeof o){const t=r[c];e=o.call(i,t),r.splice(c,1),c--}return e})),t.formatArgs.call(i,r);(i.log||t.log).apply(i,r)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=r,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i),set:e=>{a=e}}),"function"===typeof t.init&&t.init(s),s}function r(e,n){const r=t(this.namespace+("undefined"===typeof n?":":n)+e);return r.log=this.log,r}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"===typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(187),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},225:(e,t,n)=>{const{bech32:r,hex:o,utf8:i}=n(526),a={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},s={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},l={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},c={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},u=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],h={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},d=BigInt("2100000000000000000"),f=BigInt(1e11),p={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},g={};for(let w=0,k=Object.keys(p);w<k.length;w++){const e=k[w],t=p[k[w]].toString();g[t]=e}const m={1:e=>o.encode(r.fromWordsUnsafe(e)),16:e=>o.encode(r.fromWordsUnsafe(e)),13:e=>i.encode(r.fromWordsUnsafe(e)),19:e=>o.encode(r.fromWordsUnsafe(e)),23:e=>o.encode(r.fromWordsUnsafe(e)),27:e=>o.encode(r.fromWordsUnsafe(e)),6:b,24:b,3:function(e){const t=[];let n,i,a,s,l,c=r.fromWordsUnsafe(e);for(;c.length>0;)n=o.encode(c.slice(0,33)),i=o.encode(c.slice(33,41)),a=parseInt(o.encode(c.slice(41,45)),16),s=parseInt(o.encode(c.slice(45,49)),16),l=parseInt(o.encode(c.slice(49,51)),16),c=c.slice(51),t.push({pubkey:n,short_channel_id:i,fee_base_msat:a,fee_proportional_millionths:s,cltv_expiry_delta:l});return t},5:function(e){const t=e.slice().reverse().map((e=>[!!(1&e),!!(2&e),!!(4&e),!!(8&e),!!(16&e)])).reduce(((e,t)=>e.concat(t)),[]);for(;t.length<2*u.length;)t.push(!1);const n={};u.forEach(((e,r)=>{let o;o=t[2*r]?"required":t[2*r+1]?"supported":"unsupported",n[e]=o}));const r=t.slice(2*u.length);return n.extra_bits={start_bit:2*u.length,bits:r,has_required:r.reduce(((e,t,n)=>n%2!==0?e||!1:e||t),!1)},n}};function y(e){return t=>({tagCode:parseInt(e),words:r.encode("unknown",t,Number.MAX_SAFE_INTEGER)})}function b(e){return e.reverse().reduce(((e,t,n)=>e+t*Math.pow(32,n)),0)}function v(e,t){let n,r;if(e.slice(-1).match(/^[munp]$/))n=e.slice(-1),r=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");r=e}if(!r.match(/^\d+$/))throw new Error("Not a valid human readable amount");const o=BigInt(r),i=n?o*f/h[n]:o*f;if("p"===n&&o%BigInt(10)!==BigInt(0)||i>d)throw new Error("Amount is outside of valid range");return t?i.toString():i}e.exports={decode:function(e,t){if("string"!==typeof e)throw new Error("Lightning Payment Request must be string");if("ln"!==e.slice(0,2).toLowerCase())throw new Error("Not a proper lightning payment request");const n=[],i=r.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();const u=i.prefix;let h=i.words,d=e.slice(u.length+1),f=h.slice(-104);h=h.slice(0,-104);let w=u.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(w&&!w[2]&&(w=u.match(/^ln(\S+)$/)),!w)throw new Error("Not a proper lightning payment request");n.push({name:"lightning_network",letters:"ln"});const k=w[1];let x;if(t){if(void 0===t.bech32||void 0===t.pubKeyHash||void 0===t.scriptHash||!Array.isArray(t.validWitnessVersions))throw new Error("Invalid network");x=t}else switch(k){case a.bech32:x=a;break;case s.bech32:x=s;break;case l.bech32:x=l;break;case c.bech32:x=c}if(!x||x.bech32!==k)throw new Error("Unknown coin bech32 prefix");n.push({name:"coin_network",letters:k,value:x});const E=w[2];let _;if(E){_=v(E+w[3],!0),n.push({name:"amount",letters:w[2]+w[3],value:_})}else _=null;n.push({name:"separator",letters:"1"});const N=b(h.slice(0,7));let S,C,A,R;for(h=h.slice(7),n.push({name:"timestamp",letters:d.slice(0,7),value:N}),d=d.slice(7);h.length>0;){const e=h[0].toString();S=g[e]||"unknown_tag",C=m[e]||y(e),h=h.slice(1),A=b(h.slice(0,2)),h=h.slice(2),R=h.slice(0,A),h=h.slice(A),n.push({name:S,tag:d[0],letters:d.slice(0,3+A),value:C(R)}),d=d.slice(3+A)}n.push({name:"signature",letters:d.slice(0,104),value:o.encode(r.fromWordsUnsafe(f))}),d=d.slice(104),n.push({name:"checksum",letters:d});let T={paymentRequest:e,sections:n,get expiry(){let e=n.find((e=>"expiry"===e.name));if(e)return B("timestamp")+e.value},get route_hints(){return n.filter((e=>"route_hint"===e.name)).map((e=>e.value))}};for(let r in p)"route_hint"!==r&&Object.defineProperty(T,r,{get:()=>B(r)});return T;function B(e){let t=n.find((t=>t.name===e));return t?t.value:void 0}},hrpToMillisat:v}},526:(e,t)=>{"use strict";function n(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function r(){const e=(e,t)=>n=>e(t(n));for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return{encode:Array.from(n).reverse().reduce(((t,n)=>t?e(t,n.encode):n.encode),void 0),decode:n.reduce(((t,n)=>t?e(t,n.decode):n.decode),void 0)}}function o(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(n(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!==typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!==typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!==typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!==typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=";if(n(e),"string"!==typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function s(e){if("function"!==typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function l(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let o=0;const i=[],a=Array.from(e);for(a.forEach((e=>{if(n(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,n=!0;for(let i=o;i<a.length;i++){const s=a[i],l=t*e+s;if(!Number.isSafeInteger(l)||t*e/t!==e||l-s!==t*e)throw new Error("convertRadix: carry overflow");if(e=l%r,a[i]=Math.floor(l/r),!Number.isSafeInteger(a[i])||a[i]*r+e!==l)throw new Error("convertRadix: carry overflow");n&&(a[i]?n=!1:o=i)}if(i.push(e),n)break}for(let n=0;n<e.length-1&&0===e[n];n++)i.push(0);return i.reverse()}Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64url=t.base64=t.base32crockford=t.base32hex=t.base32=t.base16=t.utils=t.assertNumber=void 0,t.assertNumber=n;const c=(e,t)=>t?c(t,e%t):e,u=(e,t)=>e+(t-c(e,t));function h(e,t,r,o){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(u(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${u(t,r)}`);let i=0,a=0;const s=2**r-1,l=[];for(const c of e){if(n(c),c>=2**t)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(i=i<<t|c,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=r;a-=r)l.push((i>>a-r&s)>>>0);i&=2**a-1}if(i=i<<r-a&s,!o&&a>=t)throw new Error("Excess padding");if(!o&&i)throw new Error(`Non-zero padding: ${i}`);return o&&a>0&&l.push(i>>>0),l}function d(e){return n(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return l(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(l(t,e,256))}}}function f(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(u(8,e)>32||u(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return h(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!==typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(h(n,e,8,t))}}}function p(e){if("function"!==typeof e)throw new Error("unsafeWrapper fn should be function");return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(null,n)}catch(o){}}}function g(e,t){if(n(e),"function"!==typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),o=new Uint8Array(n.length+e);return o.set(n),o.set(r,n.length),o},decode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),o=t(r).slice(0,e),i=n.slice(-e);for(let t=0;t<e;t++)if(o[t]!==i[t])throw new Error("Invalid checksum");return r}}}t.utils={alphabet:o,chain:r,checksum:g,radix:d,radix2:f,join:i,padding:a},t.base16=r(f(4),o("0123456789ABCDEF"),i("")),t.base32=r(f(5),o("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),a(5),i("")),t.base32hex=r(f(5),o("0123456789ABCDEFGHIJKLMNOPQRSTUV"),a(5),i("")),t.base32crockford=r(f(5),o("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),i(""),s((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),t.base64=r(f(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),a(6),i("")),t.base64url=r(f(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),a(6),i(""));const m=e=>r(d(58),o(e),i(""));t.base58=m("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=m("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=m("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const y=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(e){let n="";for(let r=0;r<e.length;r+=8){const o=e.subarray(r,r+8);n+=t.base58.encode(o).padStart(y[o.length],"1")}return n},decode(e){let n=[];for(let r=0;r<e.length;r+=11){const o=e.slice(r,r+11),i=y.indexOf(o.length),a=t.base58.decode(o);for(let e=0;e<a.length-i;e++)if(0!==a[e])throw new Error("base58xmr: wrong padding");n=n.concat(Array.from(a.slice(a.length-i)))}return Uint8Array.from(n)}};t.base58check=e=>r(g(4,(t=>e(e(t)))),t.base58);const b=r(o("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),i("")),v=[996825010,642813549,513874426,1027748829,705979059];function w(e){const t=e>>25;let n=(33554431&e)<<5;for(let r=0;r<v.length;r++)1===(t>>r&1)&&(n^=v[r]);return n}function k(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=e.length;let o=1;for(let i=0;i<r;i++){const t=e.charCodeAt(i);if(t<33||t>126)throw new Error(`Invalid prefix (${e})`);o=w(o)^t>>5}o=w(o);for(let i=0;i<r;i++)o=w(o)^31&e.charCodeAt(i);for(let i of t)o=w(o)^i;for(let i=0;i<6;i++)o=w(o);return o^=n,b.encode(h([o%2**30],30,5,!1))}function x(e){const t="bech32"===e?1:734539939,n=f(5),r=n.decode,o=n.encode,i=p(r);function a(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;if("string"!==typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==n&&e.length>n)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${n})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const o=(e=r).lastIndexOf("1");if(0===o||-1===o)throw new Error('Letter "1" must be present between prefix and data only');const i=e.slice(0,o),a=e.slice(o+1);if(a.length<6)throw new Error("Data must be at least 6 characters long");const s=b.decode(a).slice(0,-6),l=k(i,s,t);if(!a.endsWith(l))throw new Error(`Invalid checksum in ${e}: expected "${l}"`);return{prefix:i,words:s}}return{encode:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:90;if("string"!==typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(n)||n.length&&"number"!==typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const o=e.length+7+n.length;if(!1!==r&&o>r)throw new TypeError(`Length ${o} exceeds limit ${r}`);return`${e=e.toLowerCase()}1${b.encode(n)}${k(e,n,t)}`},decode:a,decodeToBytes:function(e){const{prefix:t,words:n}=a(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:p(a),fromWords:r,fromWordsUnsafe:i,toWords:o}}t.bech32=x("bech32"),t.bech32m=x("bech32m"),t.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},t.hex=r(f(4),o("0123456789abcdef"),i(""),s((e=>{if("string"!==typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const E={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},_=`Invalid encoding type. Available types: ${Object.keys(E).join(", ")}`;t.bytesToString=(e,t)=>{if("string"!==typeof e||!E.hasOwnProperty(e))throw new TypeError(_);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return E[e].encode(t)},t.str=t.bytesToString;t.stringToBytes=(e,t)=>{if(!E.hasOwnProperty(e))throw new TypeError(_);if("string"!==typeof t)throw new TypeError("stringToBytes() expects string");return E[e].decode(t)},t.bytes=t.stringToBytes},187:e=>{var t=1e3,n=60*t,r=60*n,o=24*r,i=7*o,a=365.25*o;function s(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,l){l=l||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!s)return;var l=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*a;case"weeks":case"week":case"w":return l*i;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*n;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(e);if("number"===c&&isFinite(e))return l.long?function(e){var i=Math.abs(e);if(i>=o)return s(e,i,o,"day");if(i>=r)return s(e,i,r,"hour");if(i>=n)return s(e,i,n,"minute");if(i>=t)return s(e,i,t,"second");return e+" ms"}(e):function(e){var i=Math.abs(e);if(i>=o)return Math.round(e/o)+"d";if(i>=r)return Math.round(e/r)+"h";if(i>=n)return Math.round(e/n)+"m";if(i>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},534:(e,t,n)=>{"use strict";var r=n(313),o=n(224);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,t,n,r){var o=m.hasOwnProperty(t)?m[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var L,z=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var M=!1;function F(e,t){if(!e||M)return"";M=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var l="\n"+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{M=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function D(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case x:return"Portal";case N:return"Profiler";case _:return"StrictMode";case R:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case B:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function V(e,t){var n=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ie(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Ee=null,_e=null;function Ne(e){if(e=wo(e)){if("function"!==typeof xe)throw Error(i(280));var t=e.stateNode;t&&(t=xo(t),xe(e.stateNode,e.type,t))}}function Se(e){Ee?_e?_e.push(e):_e=[e]:Ee=e}function Ce(){if(Ee){var e=Ee,t=_e;if(_e=Ee=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Ae(e,t){return e(t)}function Re(){}var Te=!1;function Be(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ae(e,t,n)}finally{Te=!1,(null!==Ee||null!==_e)&&(Re(),Ce())}}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=xo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Oe=!1;if(u)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ue){Oe=!1}function Pe(e,t,n,r,o,i,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,ze=null,Ue=!1,Me=null,Fe={onError:function(e){Le=!0,ze=e}};function De(e,t,n,r,o,i,a,s,l){Le=!1,ze=null,Pe.apply(Fe,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(qe(e)!==e)throw Error(i(188))}function $e(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return We(o),e;if(a===r)return We(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=a;break}if(l===r){s=!0,r=o,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=o;break}if(l===r){s=!0,r=a,n=o;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Qe=o.unstable_scheduleCallback,Ge=o.unstable_cancelCallback,Ve=o.unstable_shouldYield,Ze=o.unstable_requestPaint,Ye=o.unstable_now,Je=o.unstable_getCurrentPriorityLevel,Xe=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~o;0!==s?r=ht(s):0!==(i&=a)&&(r=ht(i))}else 0!==(a=n&~o)?r=ht(a):0!==i&&(r=ht(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-at(t)),r|=e[n],t&=~o;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var vt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,xt,Et,_t,Nt,St=!1,Ct=[],At=null,Rt=null,Tt=null,Bt=new Map,jt=new Map,Ot=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Bt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(t.pointerId)}}function Lt(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=wo(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function zt(e){var t=vo(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Nt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Vt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wo(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Mt(e,t,n){Ut(e)&&n.delete(t)}function Ft(){St=!1,null!==At&&Ut(At)&&(At=null),null!==Rt&&Ut(Rt)&&(Rt=null),null!==Tt&&Ut(Tt)&&(Tt=null),Bt.forEach(Mt),jt.forEach(Mt)}function Dt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ft)))}function qt(e){function t(t){return Dt(t,e)}if(0<Ct.length){Dt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Dt(At,e),null!==Rt&&Dt(Rt,e),null!==Tt&&Dt(Tt,e),Bt.forEach(t),jt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)zt(n),null===n.blockedOn&&Ot.shift()}var Ht=w.ReactCurrentBatchConfig,Wt=!0;function $t(e,t,n,r){var o=vt,i=Ht.transition;Ht.transition=null;try{vt=1,Qt(e,t,n,r)}finally{vt=o,Ht.transition=i}}function Kt(e,t,n,r){var o=vt,i=Ht.transition;Ht.transition=null;try{vt=4,Qt(e,t,n,r)}finally{vt=o,Ht.transition=i}}function Qt(e,t,n,r){if(Wt){var o=Vt(e,t,n,r);if(null===o)Wr(e,t,r,Gt,n),Pt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return At=Lt(At,e,t,n,r,o),!0;case"dragenter":return Rt=Lt(Rt,e,t,n,r,o),!0;case"mouseover":return Tt=Lt(Tt,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Bt.set(i,Lt(Bt.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,jt.set(i,Lt(jt.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<It.indexOf(e)){for(;null!==o;){var i=wo(o);if(null!==i&&kt(i),null===(i=Vt(e,t,n,r))&&Wr(e,t,r,Gt,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Gt=null;function Vt(e,t,n,r){if(Gt=null,null!==(e=vo(e=ke(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Xe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Xt=null;function en(){if(Xt)return Xt;var e,t,n=Jt,r=n.length,o="value"in Yt?Yt.value:Yt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Xt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=z({},cn,{view:0,detail:0}),dn=on(hn),fn=z({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),gn=on(z({},fn,{dataTransfer:0})),mn=on(z({},hn,{relatedTarget:0})),yn=on(z({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=z({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=on(bn),wn=on(z({},cn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Nn(){return _n}var Sn=z({},hn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(Sn),An=on(z({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(z({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),Tn=on(z({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Bn=z({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jn=on(Bn),On=[9,13,27,32],In=u&&"CompositionEvent"in window,Pn=null;u&&"documentMode"in document&&(Pn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Pn,zn=u&&(!In||Pn&&8<Pn&&11>=Pn),Un=String.fromCharCode(32),Mn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function $n(e,t,n,r){Se(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Qn=null;function Gn(e){Ur(e,0)}function Vn(e){if(Q(ko(e)))return e}function Zn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Jn;if(u){var Xn="oninput"in document;if(!Xn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Xn="function"===typeof er.oninput}Jn=Xn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Qn=Kn=null)}function nr(e){if("value"===e.propertyName&&Vn(Qn)){var t=[];$n(t,Qn,e,ke(e)),Be(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Qn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vn(Qn)}function ir(e,t){if("click"===e)return Vn(t)}function ar(e,t){if("input"===e||"change"===e)return Vn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!h.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=ur(n,i);var a=ur(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,br=null,vr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==mr||mr!==G(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},Er={},_r={};function Nr(e){if(Er[e])return Er[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Er[e]=n[t];return e}u&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Nr("animationend"),Cr=Nr("animationiteration"),Ar=Nr("animationstart"),Rr=Nr("transitionend"),Tr=new Map,Br="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){Tr.set(e,t),l(t,[e])}for(var Or=0;Or<Br.length;Or++){var Ir=Br[Or];jr(Ir.toLowerCase(),"on"+(Ir[0].toUpperCase()+Ir.slice(1)))}jr(Sr,"onAnimationEnd"),jr(Cr,"onAnimationIteration"),jr(Ar,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(Rr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function zr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,s,l,c){if(De.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=ze;Le=!1,ze=null,Ue||(Ue=!0,Me=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;zr(o,s,c),i=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;zr(o,s,c),i=l}}}if(Ue)throw e=Me,Ue=!1,Me=null,e}function Mr(e,t){var n=t[mo];void 0===n&&(n=t[mo]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Dr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Dr]){e[Dr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Dr]||(t[Dr]=!0,Fr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Zt(t)){case 1:var o=$t;break;case 4:o=Kt;break;default:o=Qt}n=o.bind(null,t,n,e),o=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=vo(s)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}s=s.parentNode}}r=r.return}Be((function(){var r=i,o=ke(n),a=[];e:{var s=Tr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Sr:case Cr:case Ar:l=yn;break;case Rr:l=Tn;break;case"scroll":l=dn;break;case"wheel":l=jn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=je(p,d))&&u.push($r(p,g,f)))),h)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,o),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vo(c)&&!c[go])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vo(c):null)&&(c!==(h=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?s:ko(l),f=null==c?s:ko(c),(s=new u(g,p+"leave",l,n,o)).target=h,s.relatedTarget=f,g=null,vo(o)===r&&((u=new u(d,p+"enter",c,n,o)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Qr(f))p++;for(f=0,g=d;g;g=Qr(g))f++;for(;0<p-f;)u=Qr(u),p--;for(;0<f-p;)d=Qr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Qr(u),d=Qr(d)}u=null}else u=null;null!==l&&Gr(a,s,l,u,!1),null!==c&&null!==h&&Gr(a,h,c,u,!0)}if("select"===(l=(s=r?ko(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Zn;else if(Wn(s))if(Yn)m=ar;else{m=or;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ir);switch(m&&(m=m(e,r))?$n(a,m,n,o):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?ko(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,br=null);break;case"focusout":br=yr=mr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,wr(a,n,o);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(a,n,o)}var b;if(In)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else qn?Fn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(zn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==v?"onCompositionEnd"===v&&qn&&(b=en()):(Jt="value"in(Yt=o)?Yt.value:Yt.textContent,qn=!0)),0<(y=Kr(r,v)).length&&(v=new wn(v,e,null,n,o),a.push({event:v,listeners:y}),b?v.data=b:null!==(b=Dn(n))&&(v.data=b))),(b=Ln?function(e,t){switch(e){case"compositionend":return Dn(t);case"keypress":return 32!==t.which?null:(Mn=!0,Un);case"textInput":return(e=t.data)===Un&&Mn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!In&&Fn(e,t)?(e=en(),Xt=Jt=Yt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(o=new wn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=b))}Ur(a,t)}))}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=je(e,n))&&r.unshift($r(e,i,o)),null!=(i=je(e,t))&&r.push($r(e,i,o))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(l=je(n,i))&&a.unshift($r(n,l,s)):o||null!=(l=je(n,i))&&a.push($r(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Vr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Vr,"\n").replace(Zr,"")}function Jr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(i(425))}function Xr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout((function(){throw e}))}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);qt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),fo="__reactFiber$"+ho,po="__reactProps$"+ho,go="__reactContainer$"+ho,mo="__reactEvents$"+ho,yo="__reactListeners$"+ho,bo="__reactHandles$"+ho;function vo(e){var t=e[fo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[go]||n[fo]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[fo])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function wo(e){return!(e=e[fo]||e[go])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ko(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function xo(e){return e[po]||null}var Eo=[],_o=-1;function No(e){return{current:e}}function So(e){0>_o||(e.current=Eo[_o],Eo[_o]=null,_o--)}function Co(e,t){_o++,Eo[_o]=e.current,e.current=t}var Ao={},Ro=No(Ao),To=No(!1),Bo=Ao;function jo(e,t){var n=e.type.contextTypes;if(!n)return Ao;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Oo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Io(){So(To),So(Ro)}function Po(e,t,n){if(Ro.current!==Ao)throw Error(i(168));Co(Ro,t),Co(To,n)}function Lo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,H(e)||"Unknown",o));return z({},n,r)}function zo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ao,Bo=Ro.current,Co(Ro,e),Co(To,To.current),!0}function Uo(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Lo(e,t,Bo),r.__reactInternalMemoizedMergedChildContext=e,So(To),So(Ro),Co(Ro,e)):So(To),Co(To,n)}var Mo=null,Fo=!1,Do=!1;function qo(e){null===Mo?Mo=[e]:Mo.push(e)}function Ho(){if(!Do&&null!==Mo){Do=!0;var e=0,t=vt;try{var n=Mo;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Mo=null,Fo=!1}catch(o){throw null!==Mo&&(Mo=Mo.slice(e+1)),Qe(Xe,Ho),o}finally{vt=t,Do=!1}}return null}var Wo=[],$o=0,Ko=null,Qo=0,Go=[],Vo=0,Zo=null,Yo=1,Jo="";function Xo(e,t){Wo[$o++]=Qo,Wo[$o++]=Ko,Ko=e,Qo=t}function ei(e,t,n){Go[Vo++]=Yo,Go[Vo++]=Jo,Go[Vo++]=Zo,Zo=e;var r=Yo;e=Jo;var o=32-at(r)-1;r&=~(1<<o),n+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Yo=1<<32-at(t)+o|n<<o|r,Jo=i+e}else Yo=1<<i|n<<o|r,Jo=e}function ti(e){null!==e.return&&(Xo(e,1),ei(e,1,0))}function ni(e){for(;e===Ko;)Ko=Wo[--$o],Wo[$o]=null,Qo=Wo[--$o],Wo[$o]=null;for(;e===Zo;)Zo=Go[--Vo],Go[Vo]=null,Jo=Go[--Vo],Go[Vo]=null,Yo=Go[--Vo],Go[Vo]=null}var ri=null,oi=null,ii=!1,ai=null;function si(e,t){var n=Bc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function li(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,oi=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zo?{id:Yo,overflow:Jo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Bc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ri=e,oi=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var n=t;if(!li(e,t)){if(ci(e))throw Error(i(418));t=co(n.nextSibling);var r=ri;t&&li(e,t)?si(r,n):(e.flags=-4097&e.flags|2,ii=!1,ri=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ri=e}}}function hi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function di(e){if(e!==ri)return!1;if(!ii)return hi(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oi)){if(ci(e))throw fi(),Error(i(418));for(;t;)si(e,t),t=co(t.nextSibling)}if(hi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oi=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oi=null}}else oi=ri?co(e.stateNode.nextSibling):null;return!0}function fi(){for(var e=oi;e;)e=co(e.nextSibling)}function pi(){oi=ri=null,ii=!1}function gi(e){null===ai?ai=[e]:ai.push(e)}var mi=w.ReactCurrentBatchConfig;function yi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function bi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function wi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=zc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===j&&vi(i)===t.type)?((r=o(t,n.props)).ref=yi(e,t,n),r.return=e,r):((r=Ic(n.type,n.key,n.props,null,e.mode,r)).ref=yi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?((t=Pc(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(n=Ic(t.type,t.key,t.props,null,e.mode,n)).ref=yi(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case j:return d(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Pc(t,e.mode,n,null)).return=e,t;bi(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===o?c(e,t,n,r):null;case x:return n.key===o?u(e,t,n,r):null;case j:return f(e,t,(o=n._init)(n._payload),r)}if(te(n)||P(n))return null!==o?null:h(e,t,n,r,null);bi(e,n)}return null}function p(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case j:return p(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||P(r))return h(t,e=e.get(n)||null,r,o,null);bi(t,r)}return null}function g(o,i,s,l){for(var c=null,u=null,h=i,g=i=0,m=null;null!==h&&g<s.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(o,h,s[g],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(o,h),i=a(y,i,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===s.length)return n(o,h),ii&&Xo(o,g),c;if(null===h){for(;g<s.length;g++)null!==(h=d(o,s[g],l))&&(i=a(h,i,g),null===u?c=h:u.sibling=h,u=h);return ii&&Xo(o,g),c}for(h=r(o,h);g<s.length;g++)null!==(m=p(h,o,g,s[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),i=a(m,i,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(o,e)})),ii&&Xo(o,g),c}function m(o,s,l,c){var u=P(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var h=u=null,g=s,m=s=0,y=null,b=l.next();null!==g&&!b.done;m++,b=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var v=f(o,g,b.value,c);if(null===v){null===g&&(g=y);break}e&&g&&null===v.alternate&&t(o,g),s=a(v,s,m),null===h?u=v:h.sibling=v,h=v,g=y}if(b.done)return n(o,g),ii&&Xo(o,m),u;if(null===g){for(;!b.done;m++,b=l.next())null!==(b=d(o,b.value,c))&&(s=a(b,s,m),null===h?u=b:h.sibling=b,h=b);return ii&&Xo(o,m),u}for(g=r(o,g);!b.done;m++,b=l.next())null!==(b=p(g,o,m,b.value,c))&&(e&&null!==b.alternate&&g.delete(null===b.key?m:b.key),s=a(b,s,m),null===h?u=b:h.sibling=b,h=b);return e&&g.forEach((function(e){return t(o,e)})),ii&&Xo(o,m),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case k:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===E){if(7===u.tag){n(r,u.sibling),(i=o(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===j&&vi(c)===u.type){n(r,u.sibling),(i=o(u,a.props)).ref=yi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===E?((i=Pc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Ic(a.type,a.key,a.props,null,r.mode,l)).ref=yi(r,i,a),l.return=r,r=l)}return s(r);case x:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=o(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Uc(a,r.mode,l)).return=r,r=i}return s(r);case j:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return g(r,i,a,l);if(P(a))return m(r,i,a,l);bi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,a)).return=r,r=i):(n(r,i),(i=zc(a,r.mode,l)).return=r,r=i),s(r)):n(r,i)}}var ki=wi(!0),xi=wi(!1),Ei=No(null),_i=null,Ni=null,Si=null;function Ci(){Si=Ni=_i=null}function Ai(e){var t=Ei.current;So(Ei),e._currentValue=t}function Ri(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ti(e,t){_i=e,Si=Ni=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vs=!0),e.firstContext=null)}function Bi(e){var t=e._currentValue;if(Si!==e)if(e={context:e,memoizedValue:t,next:null},null===Ni){if(null===_i)throw Error(i(308));Ni=e,_i.dependencies={lanes:0,firstContext:e}}else Ni=Ni.next=e;return t}var ji=null;function Oi(e){null===ji?ji=[e]:ji.push(e)}function Ii(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Oi(t)):(n.next=o.next,o.next=n),t.interleaved=n,Pi(e,r)}function Pi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Li=!1;function zi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ui(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Pi(e,n)}return null===(o=r.interleaved)?(t.next=t,Oi(r)):(t.next=o.next,o.next=t),r.interleaved=t,Pi(e,n)}function Di(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function qi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hi(e,t,n,r){var o=e.updateQueue;Li=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var h=o.baseState;for(a=0,u=c=l=null,s=i;;){var d=s.lane,f=s.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=z({},h,d);break e;case 2:Li=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=o.effects)?o.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(d=s).next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}if(null===u&&(l=h),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=h}}function Wi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(i(191,o));o.call(r)}}}var $i={},Ki=No($i),Qi=No($i),Gi=No($i);function Vi(e){if(e===$i)throw Error(i(174));return e}function Zi(e,t){switch(Co(Gi,t),Co(Qi,e),Co(Ki,$i),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}So(Ki),Co(Ki,t)}function Yi(){So(Ki),So(Qi),So(Gi)}function Ji(e){Vi(Gi.current);var t=Vi(Ki.current),n=le(t,e.type);t!==n&&(Co(Qi,e),Co(Ki,n))}function Xi(e){Qi.current===e&&(So(Ki),So(Qi))}var ea=No(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var oa=w.ReactCurrentDispatcher,ia=w.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,ha=!1,da=0,fa=0;function pa(){throw Error(i(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,o,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?Xa:es,e=n(r,o),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(i(301));a+=1,ca=la=null,t.updateQueue=null,oa.current=ts,e=n(r,o)}while(ha)}if(oa.current=Ja,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(i(300));return e}function ya(){var e=0!==da;return da=0,e}function ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function va(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(i(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function wa(e,t){return"function"===typeof t?t(e):t}function ka(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=la,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}r.baseQueue=o=a,n.pending=null}if(null!==o){a=o.next,r=r.baseState;var l=s=null,c=null,u=a;do{var h=u.lane;if((aa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=r):c=c.next=d,sa.lanes|=h,Ll|=h}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(vs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{a=o.lane,sa.lanes|=a,Ll|=a,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);sr(a,t.memoizedState)||(vs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ea(){}function _a(e,t){var n=sa,r=va(),o=t(),a=!sr(r.memoizedState,o);if(a&&(r.memoizedState=o,vs=!0),r=r.queue,La(Ca.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Ba(9,Sa.bind(null,n,r,o,t),void 0,null),null===Rl)throw Error(i(349));0!==(30&aa)||Na(n,t,o)}return o}function Na(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Sa(e,t,n,r){t.value=n,t.getSnapshot=r,Aa(t)&&Ra(e)}function Ca(e,t,n){return n((function(){Aa(t)&&Ra(e)}))}function Aa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ra(e){var t=Pi(e,1);null!==t&&nc(t,e,1,-1)}function Ta(e){var t=ba();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ga.bind(null,sa,e),[t.memoizedState,e]}function Ba(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ja(){return va().memoizedState}function Oa(e,t,n,r){var o=ba();sa.flags|=e,o.memoizedState=Ba(1|t,n,void 0,void 0===r?null:r)}function Ia(e,t,n,r){var o=va();r=void 0===r?null:r;var i=void 0;if(null!==la){var a=la.memoizedState;if(i=a.destroy,null!==r&&ga(r,a.deps))return void(o.memoizedState=Ba(t,n,i,r))}sa.flags|=e,o.memoizedState=Ba(1|t,n,i,r)}function Pa(e,t){return Oa(8390656,8,e,t)}function La(e,t){return Ia(2048,8,e,t)}function za(e,t){return Ia(4,2,e,t)}function Ua(e,t){return Ia(4,4,e,t)}function Ma(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ia(4,4,Ma.bind(null,t,e),n)}function Da(){}function qa(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ha(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wa(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,vs=!0),e.memoizedState=n):(sr(n,t)||(n=gt(),sa.lanes|=n,Ll|=n,e.baseState=!0),t)}function $a(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{vt=n,ia.transition=r}}function Ka(){return va().memoizedState}function Qa(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Va(e))Za(t,n);else if(null!==(n=Ii(e,t,n,r))){nc(n,e,r,ec()),Ya(n,t,r)}}function Ga(e,t,n){var r=tc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Va(e))Za(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(o.next=o,Oi(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=Ii(e,t,o,r))&&(nc(n,e,r,o=ec()),Ya(n,t,r))}}function Va(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Za(e,t){ha=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ya(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Ja={readContext:Bi,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Xa={readContext:Bi,useCallback:function(e,t){return ba().memoizedState=[e,void 0===t?null:t],e},useContext:Bi,useEffect:Pa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4194308,4,Ma.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var n=ba();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ba();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qa.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ba().memoizedState=e},useState:Ta,useDebugValue:Da,useDeferredValue:function(e){return ba().memoizedState=e},useTransition:function(){var e=Ta(!1),t=e[0];return e=$a.bind(null,e[1]),ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,o=ba();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Rl)throw Error(i(349));0!==(30&aa)||Na(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,Pa(Ca.bind(null,r,a,e),[e]),r.flags|=2048,Ba(9,Sa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ba(),t=Rl.identifierPrefix;if(ii){var n=Jo;t=":"+t+"R"+(n=(Yo&~(1<<32-at(Yo)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Bi,useCallback:qa,useContext:Bi,useEffect:La,useImperativeHandle:Fa,useInsertionEffect:za,useLayoutEffect:Ua,useMemo:Ha,useReducer:ka,useRef:ja,useState:function(){return ka(wa)},useDebugValue:Da,useDeferredValue:function(e){return Wa(va(),la.memoizedState,e)},useTransition:function(){return[ka(wa)[0],va().memoizedState]},useMutableSource:Ea,useSyncExternalStore:_a,useId:Ka,unstable_isNewReconciler:!1},ts={readContext:Bi,useCallback:qa,useContext:Bi,useEffect:La,useImperativeHandle:Fa,useInsertionEffect:za,useLayoutEffect:Ua,useMemo:Ha,useReducer:xa,useRef:ja,useState:function(){return xa(wa)},useDebugValue:Da,useDeferredValue:function(e){var t=va();return null===la?t.memoizedState=e:Wa(t,la.memoizedState,e)},useTransition:function(){return[xa(wa)[0],va().memoizedState]},useMutableSource:Ea,useSyncExternalStore:_a,useId:Ka,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=z({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:z({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var os={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),i=Mi(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Fi(e,i,o))&&(nc(t,e,o,r),Di(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),i=Mi(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Fi(e,i,o))&&(nc(t,e,o,r),Di(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),o=Mi(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Fi(e,o,r))&&(nc(t,e,r,n),Di(t,e,r))}};function is(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(o,i))}function as(e,t,n){var r=!1,o=Ao,i=t.contextType;return"object"===typeof i&&null!==i?i=Bi(i):(o=Oo(t)?Bo:Ro.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?jo(e,o):Ao),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},zi(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=Bi(i):(i=Oo(t)?Bo:Ro.current,o.context=jo(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(rs(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&os.enqueueReplaceState(o,o.state,null),Hi(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=D(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Mi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,$l=r),hs(0,t)},n}function ps(e,t,n){(n=Mi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){hs(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Mi(-1,1)).tag=2,Fi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var bs=w.ReactCurrentOwner,vs=!1;function ws(e,t,n,r){t.child=null===e?xi(t,null,n,r):ki(t,e.child,n,r)}function ks(e,t,n,r,o){n=n.render;var i=t.ref;return Ti(t,o),r=ma(e,t,n,r,i,o),n=ya(),null===e||vs?(ii&&n&&ti(t),t.flags|=1,ws(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ws(e,t,o))}function xs(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||jc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ic(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Es(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Ws(e,t,o)}return t.flags|=1,(e=Oc(i,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(vs=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,Ws(e,t,o);0!==(131072&e.flags)&&(vs=!0)}}return Ss(e,t,n,r,o)}function _s(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Co(Ol,jl),jl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Co(Ol,jl),jl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Co(Ol,jl),jl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Co(Ol,jl),jl|=r;return ws(e,t,o,n),t.child}function Ns(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ss(e,t,n,r,o){var i=Oo(n)?Bo:Ro.current;return i=jo(t,i),Ti(t,o),n=ma(e,t,n,r,i,o),r=ya(),null===e||vs?(ii&&r&&ti(t),t.flags|=1,ws(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ws(e,t,o))}function Cs(e,t,n,r,o){if(Oo(n)){var i=!0;zo(t)}else i=!1;if(Ti(t,o),null===t.stateNode)Hs(e,t),as(t,n,r),ls(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Bi(c):c=jo(t,c=Oo(n)?Bo:Ro.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,a,r,c),Li=!1;var d=t.memoizedState;a.state=d,Hi(t,r,a,o),l=t.memoizedState,s!==r||d!==l||To.current||Li?("function"===typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=Li||is(t,n,s,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ui(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Bi(l):l=jo(t,l=Oo(n)?Bo:Ro.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&ss(t,a,r,l),Li=!1,d=t.memoizedState,a.state=d,Hi(t,r,a,o);var p=t.memoizedState;s!==h||d!==p||To.current||Li?("function"===typeof f&&(rs(t,n,f,r),p=t.memoizedState),(c=Li||is(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,i,o)}function As(e,t,n,r,o,i){Ns(e,t);var a=0!==(128&t.flags);if(!r&&!a)return o&&Uo(t,n,!1),Ws(e,t,i);r=t.stateNode,bs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ki(t,e.child,null,i),t.child=ki(t,null,s,i)):ws(e,t,s,i),t.memoizedState=r.state,o&&Uo(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Po(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Po(0,t.context,!1),Zi(e,t.containerInfo)}function Ts(e,t,n,r,o){return pi(),gi(o),t.flags|=256,ws(e,t,n,r),t.child}var Bs,js,Os,Is,Ps={dehydrated:null,treeContext:null,retryLane:0};function Ls(e){return{baseLanes:e,cachePool:null,transitions:null}}function zs(e,t,n){var r,o=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Co(ea,1&a),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,s?(o=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Lc(l,o,0,null),e=Pc(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ls(n),t.memoizedState=Ps,e):Us(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,o,a,s){if(n)return 256&t.flags?(t.flags&=-257,Ms(e,t,s,r=us(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=Lc({mode:"visible",children:r.children},o,0,null),(a=Pc(a,o,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&ki(t,e.child,null,s),t.child.memoizedState=Ls(s),t.memoizedState=Ps,a);if(0===(1&t.mode))return Ms(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,Ms(e,t,s,r=us(a=Error(i(419)),r,void 0))}if(l=0!==(s&e.childLanes),vs||l){if(null!==(r=Rl)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==a.retryLane&&(a.retryLane=o,Pi(e,o),nc(r,e,o,-1))}return gc(),Ms(e,t,s,r=us(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,oi=co(o.nextSibling),ri=t,ii=!0,ai=null,null!==e&&(Go[Vo++]=Yo,Go[Vo++]=Jo,Go[Vo++]=Zo,Yo=e.id,Jo=e.overflow,Zo=t),t=Us(t,r.children),t.flags|=4096,t)}(e,t,l,o,r,a,n);if(s){s=o.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Oc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Oc(r,s):(s=Pc(s,l,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,l=null===(l=e.child.memoizedState)?Ls(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ps,o}return e=(s=e.child).sibling,o=Oc(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Us(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ms(e,t,n,r){return null!==r&&gi(r),ki(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ri(e.return,t,n)}function Ds(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function qs(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fs(e,n,t);else if(19===e.tag)Fs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Co(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ds(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ta(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ds(t,!0,n,null,i);break;case"together":Ds(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $s(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Oo(t.type)&&Io(),Ks(t),null;case 3:return r=t.stateNode,Yi(),So(To),So(Ro),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(ac(ai),ai=null))),js(e,t),Ks(t),null;case 5:Xi(t);var o=Vi(Gi.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ks(t),null}if(e=Vi(Ki.current),di(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fo]=t,r[po]=a,e=0!==(1&t.mode),n){case"dialog":Mr("cancel",r),Mr("close",r);break;case"iframe":case"object":case"embed":Mr("load",r);break;case"video":case"audio":for(o=0;o<Pr.length;o++)Mr(Pr[o],r);break;case"source":Mr("error",r);break;case"img":case"image":case"link":Mr("error",r),Mr("load",r);break;case"details":Mr("toggle",r);break;case"input":Z(r,a),Mr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Mr("invalid",r);break;case"textarea":oe(r,a),Mr("invalid",r)}for(var l in be(n,a),o=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),o=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),o=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Mr("scroll",r)}switch(n){case"input":K(r),X(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Xr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fo]=t,e[po]=r,Bs(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Mr("cancel",e),Mr("close",e),o=r;break;case"iframe":case"object":case"embed":Mr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Pr.length;o++)Mr(Pr[o],e);o=r;break;case"source":Mr("error",e),o=r;break;case"img":case"image":case"link":Mr("error",e),Mr("load",e),o=r;break;case"details":Mr("toggle",e),o=r;break;case"input":Z(e,r),o=V(e,r),Mr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=z({},r,{value:void 0}),Mr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Mr("invalid",e)}for(a in be(n,o),c=o)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Mr("scroll",e):null!=u&&v(e,a,u,l))}switch(n){case"input":K(e),X(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Xr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Is(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Vi(Gi.current),Vi(Ki.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[fo]=t,(a=r.nodeValue!==n)&&null!==(e=ri))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fo]=t,t.stateNode=r}return Ks(t),null;case 13:if(So(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))fi(),pi(),t.flags|=98560,a=!1;else if(a=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[fo]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),a=!1}else null!==ai&&(ac(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Il&&(Il=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return Yi(),js(e,t),null===e&&qr(t.stateNode.containerInfo),Ks(t),null;case 10:return Ai(t.type._context),Ks(t),null;case 19:if(So(ea),null===(a=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)$s(a,!1);else{if(0!==Il||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,$s(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Co(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Ye()>ql&&(t.flags|=128,r=!0,$s(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),$s(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ii)return Ks(t),null}else 2*Ye()-a.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,$s(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ye(),t.sibling=null,n=ea.current,Co(ea,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&jl)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Gs(e,t){switch(ni(t),t.tag){case 1:return Oo(t.type)&&Io(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yi(),So(To),So(Ro),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xi(t),null;case 13:if(So(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return So(ea),null;case 4:return Yi(),null;case 10:return Ai(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Bs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},js=function(){},Os=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Vi(Ki.current);var i,a=null;switch(n){case"input":o=V(e,o),r=V(e,r),a=[];break;case"select":o=z({},o,{value:void 0}),r=z({},r,{value:void 0}),a=[];break;case"textarea":o=re(e,o),r=re(e,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Xr)}for(u in be(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Mr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Is=function(e,t,n,r){n!==r&&(t.flags|=4)};var Vs=!1,Zs=!1,Ys="function"===typeof WeakSet?WeakSet:Set,Js=null;function Xs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){_c(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&el(t,n,i)}o=o.next}while(o!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fo],delete t[po],delete t[mo],delete t[yo],delete t[bo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:Zs||Xs(n,t);case 6:var r=ul,o=hl;ul=null,dl(e,t,n),hl=o,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),qt(e)):lo(ul,n.stateNode));break;case 4:r=ul,o=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=o;break;case 0:case 11:case 14:case 15:if(!Zs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(n,t,a),o=o.next}while(o!==r)}dl(e,t,n);break;case 1:if(!Zs&&(Xs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){_c(n,t,s)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Zs=(r=Zs)||null!==n.memoizedState,dl(e,t,n),Zs=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ys),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));fl(a,s,o),ul=null,hl=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(u){_c(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){_c(e,e.return,m)}try{nl(5,e,e.return)}catch(m){_c(e,e.return,m)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&Xs(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&Xs(n,n.return),32&e.flags){var o=e.stateNode;try{de(o,"")}catch(m){_c(e,e.return,m)}}if(4&r&&null!=(o=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Y(o,a),ve(l,s);var u=ve(l,a);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?me(o,d):"dangerouslySetInnerHTML"===h?he(o,d):"children"===h?de(o,d):v(o,h,d,u)}switch(l){case"input":J(o,a);break;case"textarea":ie(o,a);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(o,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(o,!!a.multiple,a.defaultValue,!0):ne(o,!!a.multiple,a.multiple?[]:"",!1))}o[po]=a}catch(m){_c(e,e.return,m)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(m){_c(e,e.return,m)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(m){_c(e,e.return,m)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Dl=Ye())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Zs=(u=Zs)||h,gl(t,e),Zs=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Js=e,h=e.child;null!==h;){for(d=Js=h;null!==Js;){switch(p=(f=Js).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Xs(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){_c(r,n,m)}}break;case 5:Xs(f,f.return);break;case 22:if(null!==f.memoizedState){kl(d);continue}}null!==p?(p.return=f,Js=p):kl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{o=d.stateNode,u?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",s))}catch(m){_c(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){_c(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(de(o,""),r.flags&=-33),cl(e,sl(e),o);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(i(161))}}catch(s){_c(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Js=e,vl(e,t,n)}function vl(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var o=Js,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||Vs;if(!a){var s=o.alternate,l=null!==s&&null!==s.memoizedState||Zs;s=Vs;var c=Zs;if(Vs=a,(Zs=l)&&!c)for(Js=o;null!==Js;)l=(a=Js).child,22===a.tag&&null!==a.memoizedState?xl(o):null!==l?(l.return=a,Js=l):xl(o);for(;null!==i;)Js=i,vl(i,t,n),i=i.sibling;Js=o,Vs=s,Zs=c}wl(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,Js=i):wl(e)}}function wl(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zs)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Wi(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wi(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&qt(d)}}}break;default:throw Error(i(163))}Zs||512&t.flags&&ol(t)}catch(f){_c(t,t.return,f)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function kl(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function xl(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){_c(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(l){_c(t,o,l)}}var i=t.return;try{ol(t)}catch(l){_c(t,i,l)}break;case 5:var a=t.return;try{ol(t)}catch(l){_c(t,a,l)}}}catch(l){_c(t,t.return,l)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var El,_l=Math.ceil,Nl=w.ReactCurrentDispatcher,Sl=w.ReactCurrentOwner,Cl=w.ReactCurrentBatchConfig,Al=0,Rl=null,Tl=null,Bl=0,jl=0,Ol=No(0),Il=0,Pl=null,Ll=0,zl=0,Ul=0,Ml=null,Fl=null,Dl=0,ql=1/0,Hl=null,Wl=!1,$l=null,Kl=null,Ql=!1,Gl=null,Vl=0,Zl=0,Yl=null,Jl=-1,Xl=0;function ec(){return 0!==(6&Al)?Ye():-1!==Jl?Jl:Jl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Bl?Bl&-Bl:null!==mi.transition?(0===Xl&&(Xl=gt()),Xl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function nc(e,t,n,r){if(50<Zl)throw Zl=0,Yl=null,Error(i(185));yt(e,n,r),0!==(2&Al)&&e===Rl||(e===Rl&&(0===(2&Al)&&(zl|=n),4===Il&&sc(e,Bl)),rc(e,r),1===n&&0===Al&&0===(1&t.mode)&&(ql=Ye()+500,Fo&&Ho()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),s=1<<a,l=o[a];-1===l?0!==(s&n)&&0===(s&r)||(o[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=dt(e,e===Rl?Bl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Fo=!0,qo(e)}(lc.bind(null,e)):qo(lc.bind(null,e)),ao((function(){0===(6&Al)&&Ho()})),n=null;else{switch(wt(r)){case 1:n=Xe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Jl=-1,Xl=0,0!==(6&Al))throw Error(i(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=dt(e,e===Rl?Bl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var o=Al;Al|=2;var a=pc();for(Rl===e&&Bl===t||(Hl=null,ql=Ye()+500,dc(e,t));;)try{bc();break}catch(l){fc(e,l)}Ci(),Nl.current=a,Al=o,null!==Tl?t=0:(Rl=null,Bl=0,t=Il)}if(0!==t){if(2===t&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t)throw n=Pl,dc(e,0),sc(e,r),rc(e,Ye()),n;if(6===t)sc(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!sr(i(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=mc(e,r))&&(0!==(a=pt(e))&&(r=a,t=ic(e,a))),1===t))throw n=Pl,dc(e,0),sc(e,r),rc(e,Ye()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:kc(e,Fl,Hl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Dl+500-Ye())){if(0!==dt(e,0))break;if(((o=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(kc.bind(null,e,Fl,Hl),t);break}kc(e,Fl,Hl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>o&&(o=s),r&=~a}if(r=o,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_l(r/1960))-r)){e.timeoutHandle=ro(kc.bind(null,e,Fl,Hl),r);break}kc(e,Fl,Hl);break;default:throw Error(i(329))}}}return rc(e,Ye()),e.callbackNode===n?oc.bind(null,e):null}function ic(e,t){var n=Ml;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Fl,Fl=n,null!==t&&ac(t)),e}function ac(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function sc(e,t){for(t&=~Ul,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Al))throw Error(i(327));xc();var t=dt(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Pl,dc(e,0),sc(e,t),rc(e,Ye()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,Fl,Hl),rc(e,Ye()),null}function cc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(ql=Ye()+500,Fo&&Ho())}}function uc(e){null!==Gl&&0===Gl.tag&&0===(6&Al)&&xc();var t=Al;Al|=1;var n=Cl.transition,r=vt;try{if(Cl.transition=null,vt=1,e)return e()}finally{vt=r,Cl.transition=n,0===(6&(Al=t))&&Ho()}}function hc(){jl=Ol.current,So(Ol)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Tl)for(n=Tl.return;null!==n;){var r=n;switch(ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Io();break;case 3:Yi(),So(To),So(Ro),ra();break;case 5:Xi(r);break;case 4:Yi();break;case 13:case 19:So(ea);break;case 10:Ai(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Rl=e,Tl=e=Oc(e.current,null),Bl=jl=t,Il=0,Pl=null,Ul=zl=Ll=0,Fl=Ml=null,null!==ji){for(t=0;t<ji.length;t++)if(null!==(r=(n=ji[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}ji=null}return e}function fc(e,t){for(;;){var n=Tl;try{if(Ci(),oa.current=Ja,ua){for(var r=sa.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=sa=null,ha=!1,da=0,Sl.current=null,null===n||null===n.return){Il=1,Pl=t,Tl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Bl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,t),1&p.mode&&gs(a,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){gs(a,u,t),gc();break e}c=Error(i(426))}else if(ii&&1&l.mode){var y=ms(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,l,0,t),gi(cs(c,l));break e}}a=c=cs(c,l),4!==Il&&(Il=2),null===Ml?Ml=[a]:Ml.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,qi(a,fs(0,c,t));break e;case 1:l=c;var b=a.type,v=a.stateNode;if(0===(128&a.flags)&&("function"===typeof b.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Kl||!Kl.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t,qi(a,ps(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(w){t=w,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function pc(){var e=Nl.current;return Nl.current=Ja,null===e?Ja:e}function gc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===Rl||0===(268435455&Ll)&&0===(268435455&zl)||sc(Rl,Bl)}function mc(e,t){var n=Al;Al|=2;var r=pc();for(Rl===e&&Bl===t||(Hl=null,dc(e,t));;)try{yc();break}catch(o){fc(e,o)}if(Ci(),Al=n,Nl.current=r,null!==Tl)throw Error(i(261));return Rl=null,Bl=0,Il}function yc(){for(;null!==Tl;)vc(Tl)}function bc(){for(;null!==Tl&&!Ve();)vc(Tl)}function vc(e){var t=El(e.alternate,e,jl);e.memoizedProps=e.pendingProps,null===t?wc(e):Tl=t,Sl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,jl)))return void(Tl=n)}else{if(null!==(n=Gs(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Il=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Il&&(Il=5)}function kc(e,t,n){var r=vt,o=Cl.transition;try{Cl.transition=null,vt=1,function(e,t,n,r){do{xc()}while(null!==Gl);if(0!==(6&Al))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,a),e===Rl&&(Tl=Rl=null,Bl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Rc(tt,(function(){return xc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var s=vt;vt=1;var l=Al;Al|=4,Sl.current=null,function(e,t){if(eo=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(k){n=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==o&&3!==d.nodeType||(l=s+o),d!==a||0!==r&&3!==d.nodeType||(c=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===o&&(l=s),f===a&&++h===r&&(c=s),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Wt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?m:ns(t.type,m),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(k){_c(t,t.return,k)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}g=tl,tl=!1}(e,n),ml(n,e),pr(to),Wt=!!eo,to=eo=null,e.current=n,bl(n,e,o),Ze(),Al=l,vt=s,Cl.transition=a}else e.current=n;if(Ql&&(Ql=!1,Gl=e,Vl=o),a=e.pendingLanes,0===a&&(Kl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Wl)throw Wl=!1,e=$l,$l=null,e;0!==(1&Vl)&&0!==e.tag&&xc(),a=e.pendingLanes,0!==(1&a)?e===Yl?Zl++:(Zl=0,Yl=e):Zl=0,Ho()}(e,t,n,r)}finally{Cl.transition=o,vt=r}return null}function xc(){if(null!==Gl){var e=wt(Vl),t=Cl.transition,n=vt;try{if(Cl.transition=null,vt=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,Vl=0,0!==(6&Al))throw Error(i(331));var o=Al;for(Al|=4,Js=e.current;null!==Js;){var a=Js,s=a.child;if(0!==(16&Js.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Js=u;null!==Js;){var h=Js;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Js=d;else for(;null!==Js;){var f=(h=Js).sibling,p=h.return;if(il(h),h===u){Js=null;break}if(null!==f){f.return=p,Js=f;break}Js=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Js=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Js=s;else e:for(;null!==Js;){if(0!==(2048&(a=Js).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var b=a.sibling;if(null!==b){b.return=a.return,Js=b;break e}Js=a.return}}var v=e.current;for(Js=v;null!==Js;){var w=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Js=w;else e:for(s=v;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){_c(l,l.return,x)}if(l===s){Js=null;break e}var k=l.sibling;if(null!==k){k.return=l.return,Js=k;break e}Js=l.return}}if(Al=o,Ho(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(x){}r=!0}return r}finally{vt=n,Cl.transition=t}}return!1}function Ec(e,t,n){e=Fi(e,t=fs(0,t=cs(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function _c(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Fi(t,e=ps(t,e=cs(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Nc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Rl===e&&(Bl&n)===n&&(4===Il||3===Il&&(130023424&Bl)===Bl&&500>Ye()-Dl?dc(e,0):Ul|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Pi(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Sc(e,n)}function Rc(e,t){return Qe(e,t)}function Tc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bc(e,t,n,r){return new Tc(e,t,n,r)}function jc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Bc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ic(e,t,n,r,o,a){var s=2;if(r=e,"function"===typeof e)jc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Pc(n.children,o,a,t);case _:s=8,o|=8;break;case N:return(e=Bc(12,n,t,2|o)).elementType=N,e.lanes=a,e;case R:return(e=Bc(13,n,t,o)).elementType=R,e.lanes=a,e;case T:return(e=Bc(19,n,t,o)).elementType=T,e.lanes=a,e;case O:return Lc(n,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case C:s=9;break e;case A:s=11;break e;case B:s=14;break e;case j:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Bc(s,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Pc(e,t,n,r){return(e=Bc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Bc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function zc(e,t,n){return(e=Bc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Bc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Mc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Fc(e,t,n,r,o,i,a,s,l){return e=new Mc(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Bc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zi(i),e}function Dc(e){if(!e)return Ao;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Oo(n))return Lo(e,n,t)}return t}function qc(e,t,n,r,o,i,a,s,l){return(e=Fc(n,r,!0,e,0,i,0,s,l)).context=Dc(null),n=e.current,(i=Mi(r=ec(),o=tc(n))).callback=void 0!==t&&null!==t?t:null,Fi(n,i,o),e.current.lanes=o,yt(e,o,r),rc(e,r),e}function Hc(e,t,n,r){var o=t.current,i=ec(),a=tc(o);return n=Dc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Mi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fi(o,t,a))&&(nc(e,o,a,i),Di(e,o,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $c(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){$c(e,t),(e=e.alternate)&&$c(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||To.current)vs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return vs=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),pi();break;case 5:Ji(t);break;case 1:Oo(t.type)&&zo(t);break;case 4:Zi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Co(Ei,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Co(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zs(e,t,n):(Co(ea,1&ea.current),null!==(e=Ws(e,t,n))?e.sibling:null);Co(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Co(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,_s(e,t,n)}return Ws(e,t,n)}(e,t,n);vs=0!==(131072&e.flags)}else vs=!1,ii&&0!==(1048576&t.flags)&&ei(t,Qo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var o=jo(t,Ro.current);Ti(t,n),o=ma(null,t,r,e,o,n);var a=ya();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oo(r)?(a=!0,zo(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,zi(t),o.updater=os,t.stateNode=o,o._reactInternals=t,ls(t,r,e,n),t=As(null,t,r,!0,a,n)):(t.tag=0,ii&&a&&ti(t),ws(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return jc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===B)return 14}return 2}(r),e=ns(r,e),o){case 0:t=Ss(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=ks(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ns(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ss(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 1:return r=t.type,o=t.pendingProps,Cs(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 3:e:{if(Rs(t),null===e)throw Error(i(387));r=t.pendingProps,o=(a=t.memoizedState).element,Ui(e,t),Hi(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ts(e,t,r,n,o=cs(Error(i(423)),t));break e}if(r!==o){t=Ts(e,t,r,n,o=cs(Error(i(424)),t));break e}for(oi=co(t.stateNode.containerInfo.firstChild),ri=t,ii=!0,ai=null,n=xi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===o){t=Ws(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return Ji(t),null===e&&ui(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==a&&no(r,a)&&(t.flags|=32),Ns(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ui(t),null;case 13:return zs(e,t,n);case 4:return Zi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ki(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,ks(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,Co(Ei,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===o.children&&!To.current){t=Ws(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Mi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ri(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ri(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ti(t,n),r=r(o=Bi(o)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return o=ns(r=t.type,t.pendingProps),xs(e,t,r,o=ns(r.type,o),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ns(r,o),Hs(e,t),t.tag=1,Oo(r)?(e=!0,zo(t)):e=!1,Ti(t,n),as(t,r,o),ls(t,r,o,n),As(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return _s(e,t,n)}throw Error(i(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Vc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Xc(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof o){var s=o;o=function(){var e=Wc(a);s.call(e)}}Hc(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"===typeof r){var i=r;r=function(){var e=Wc(a);i.call(e)}}var a=qc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[go]=a.current,qr(8===e.nodeType?e.parentNode:e),uc(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=Wc(l);s.call(e)}}var l=Fc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[go]=l.current,qr(8===e.nodeType?e.parentNode:e),uc((function(){Hc(t,l,n,r)})),l}(n,t,e,o,r);return Wc(a)}Vc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Hc(e,t,null,null)},Vc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Hc(null,e,null,null)})),t[go]=null}},Vc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&zt(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(bt(t,1|n),rc(t,Ye()),0===(6&Al)&&(ql=Ye()+500,Ho()))}break;case 13:uc((function(){var t=Pi(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Kc(e,1)}},xt=function(e){if(13===e.tag){var t=Pi(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),n=Pi(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},_t=function(){return vt},Nt=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=xo(r);if(!o)throw Error(i(90));Q(r),J(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,Re=uc;var eu={usingClientEntryPoint:!1,Events:[wo,ko,xo,Se,Ce,cc]},tu={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{ot=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(i(299));var n=!1,r="",o=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Fc(e,1,!1,null,0,n,0,r,o),e[go]=t.current,qr(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(i(200));return Xc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,a="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,o,0,a,s),e[go]=t.current,qr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Vc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(i(200));return Xc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc((function(){Xc(null,null,e,!1,(function(){e._reactRootContainer=null,e[go]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Xc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},739:(e,t,n)=>{"use strict";var r=n(168);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},168:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(534)},918:(e,t,n)=>{"use strict";var r=n(313),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},306:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var w=v.prototype=new b;w.constructor=v,g(w,y.prototype),w.isPureReactComponent=!0;var k=Array.isArray,x=Object.prototype.hasOwnProperty,E={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,o)&&!_.hasOwnProperty(o)&&(i[o]=t[o]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:n,type:e,key:a,ref:s,props:i,_owner:E.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+A(l,0):i,k(a)?(o="",null!=e&&(o=e.replace(C,"$&/")+"/"),R(a,t,o,"",(function(e){return e}))):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",k(e))for(var c=0;c<e.length;c++){var u=i+A(s=e[c],c);l+=R(s,t,o,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=R(s=s.value,t,o,u=i+A(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var r=[],o=0;return R(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function B(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j={current:null},O={transition:null},I={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:O,ReactCurrentOwner:E};function P(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=a,t.PureComponent=v,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=g({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=E.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!_.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:B}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=P,t.useCallback=function(e,t){return j.current.useCallback(e,t)},t.useContext=function(e){return j.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return j.current.useDeferredValue(e)},t.useEffect=function(e,t){return j.current.useEffect(e,t)},t.useId=function(){return j.current.useId()},t.useImperativeHandle=function(e,t,n){return j.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.current.useMemo(e,t)},t.useReducer=function(e,t,n){return j.current.useReducer(e,t,n)},t.useRef=function(e){return j.current.useRef(e)},t.useState=function(e){return j.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.current.useTransition()},t.version="18.3.1"},313:(e,t,n)=>{"use strict";e.exports=n(306)},417:(e,t,n)=>{"use strict";e.exports=n(918)},95:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function k(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,O(x);else{var t=r(u);null!==t&&I(k,t.startTime-e)}}function x(e,n){g=!1,m&&(m=!1,b(S),S=-1),p=!0;var i=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!R());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var s=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(c)&&o(c),w(n)}else o(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&I(k,h.startTime-n),l=!1}return l}finally{d=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,_=!1,N=null,S=-1,C=5,A=-1;function R(){return!(t.unstable_now()-A<C)}function T(){if(null!==N){var e=t.unstable_now();A=e;var n=!0;try{n=N(!0,e)}finally{n?E():(_=!1,N=null)}}else _=!1}if("function"===typeof v)E=function(){v(T)};else if("undefined"!==typeof MessageChannel){var B=new MessageChannel,j=B.port2;B.port1.onmessage=T,E=function(){j.postMessage(null)}}else E=function(){y(T,0)};function O(e){N=e,_||(_=!0,E())}function I(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,O(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(m?(b(S),S=-1):m=!0,I(k,i-a))):(e.sortIndex=s,n(c,e),g||p||(g=!0,O(x))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},224:(e,t,n)=>{"use strict";e.exports=n(95)},230:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;var o=n(572),i=n(554);function a(e,t,n,r,o,i){var a=this.events[e];return!!a&&(0!==a.length&&(a.argsNum<6?a.call(t,n,r,o,i):a.call.apply(void 0,arguments),!0))}function s(e,t,n,r,o,i){var a=this.events[e];if(a){if(0===a.length)return!1;a.argsNum<6?a.call(t,n,r,o,i):a.call.apply(void 0,arguments)}var s=this.onceEvents[e];if(s){if("function"===typeof s)this.onceEvents[e]=void 0,arguments.length<6?s(t,n,r,o,i):s.apply(void 0,arguments);else{var l=s;if(this.onceEvents[e]=void 0,arguments.length<6)for(var c=0;c<l.length;++c)l[c](t,n,r,o,i);else for(c=0;c<l.length;++c)l[c].apply(void 0,arguments)}return!0}return!!a}var l=function(){function e(){this.events=(0,i.nullObj)(),this.onceEvents=(0,i.nullObj)(),this._symbolKeys=new Set,this.maxListeners=1/0}return Object.defineProperty(e.prototype,"_eventsCount",{get:function(){return this.eventNames().length},enumerable:!1,configurable:!0}),e}();function c(e,t,n){if(void 0===n&&(n=t.length),"function"!==typeof t)throw new TypeError("The listener must be a function");var r=this.events[e];return r?(r.push(t),r.growArgsNum(n),this.maxListeners!==1/0&&this.maxListeners<=r.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" event!'))):(this.events[e]=new o.TaskCollection(n,!0,t,!1),"symbol"===typeof e&&this._symbolKeys.add(e)),this}function u(e,t){var n=this.events[e];n&&n.removeLast(t);var r=this.onceEvents[e];return r&&("function"===typeof r?this.onceEvents[e]=void 0:"object"===typeof r&&(1===r.length&&r[0]===t?this.onceEvents[e]=void 0:(0,o._fast_remove_single)(r,r.lastIndexOf(t)))),this}t.EventEmitter=l,l.prototype.emit=a,l.prototype.on=c,l.prototype.once=function(e,t){switch(this.emit===a&&(this.emit=s),typeof this.onceEvents[e]){case"undefined":this.onceEvents[e]=t,"symbol"===typeof e&&this._symbolKeys.add(e);break;case"function":this.onceEvents[e]=[this.onceEvents[e],t];break;case"object":this.onceEvents[e].push(t)}return this},l.prototype.addListener=c,l.prototype.removeListener=u,l.prototype.hasListeners=function(e){return this.events[e]&&!!this.events[e].length},l.prototype.prependListener=function(e,t,n){if(void 0===n&&(n=t.length),"function"!==typeof t)throw new TypeError("The listener must be a function");var r=this.events[e];return r&&r instanceof o.TaskCollection?(r.insert(0,t),r.growArgsNum(n),this.maxListeners!==1/0&&this.maxListeners<=r.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" event!'))):(r=this.events[e]=new o.TaskCollection(n,!0,t,!1),"symbol"===typeof e&&this._symbolKeys.add(e)),this},l.prototype.prependOnceListener=function(e,t){this.emit===a&&(this.emit=s);var n=this.onceEvents[e];if(n&&"object"===typeof n)throw new Error("FIXME");return n=this.onceEvents[e]=[t],"symbol"===typeof e&&this._symbolKeys.add(e),this},l.prototype.off=u,l.prototype.removeAllListeners=function(e){return void 0===e?(this.events=(0,i.nullObj)(),this.onceEvents=(0,i.nullObj)(),this._symbolKeys=new Set):(this.events[e]=void 0,this.onceEvents[e]=void 0,"symbol"===typeof e&&this._symbolKeys.delete(e)),this},l.prototype.setMaxListeners=function(e){return this.maxListeners=e,this},l.prototype.getMaxListeners=function(){return this.maxListeners},l.prototype.listeners=function(e){return this.emit===a?this.events[e]?this.events[e].tasksAsArray().slice():[]:this.events[e]&&this.onceEvents[e]?r(r([],this.events[e].tasksAsArray(),!0),"function"===typeof this.onceEvents[e]?[this.onceEvents[e]]:this.onceEvents[e],!0):this.events[e]?this.events[e].tasksAsArray():this.onceEvents[e]?"function"===typeof this.onceEvents[e]?[this.onceEvents[e]]:this.onceEvents[e]:[]},l.prototype.eventNames=function(){var e=this;if(this.emit===a){var t=Object.keys(this.events);return r(r([],t,!0),Array.from(this._symbolKeys),!0).filter((function(t){return t in e.events&&e.events[t]&&e.events[t].length}))}t=Object.keys(this.events).filter((function(t){return e.events[t]&&e.events[t].length}));var n=Object.keys(this.onceEvents).filter((function(t){return e.onceEvents[t]&&e.onceEvents[t].length}));return r(r(r([],t,!0),n,!0),Array.from(this._symbolKeys).filter((function(t){return t in e.events&&e.events[t]&&e.events[t].length||t in e.onceEvents&&e.onceEvents[t]&&e.onceEvents[t].length})),!0)},l.prototype.listenerCount=function(e){return this.emit===a?this.events[e]&&this.events[e].length||0:(this.events[e]&&this.events[e].length||0)+(this.onceEvents[e]&&this.onceEvents[e].length||0)}},787:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(447),t),o(n(230),t)},304:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bakeCollectionVariadic=exports.bakeCollectionAwait=exports.bakeCollection=exports.BAKED_EMPTY_FUNC=void 0,exports.BAKED_EMPTY_FUNC=function(){};var FORLOOP_FALLBACK=1500;function generateArgsDefCode(e){var t="";if(0===e)return t;for(var n=0;n<e-1;++n)t+="arg"+String(n)+", ";return t+="arg"+String(e-1)}function generateBodyPartsCode(e,t){for(var n="",r="",o=0;o<t;++o)n+="var f".concat(o," = collection[").concat(o,"];\n"),r+="f".concat(o,"(").concat(e,")\n");return{funcDefCode:n,funcCallCode:r}}function generateBodyPartsVariadicCode(e){for(var t="",n="",r=0;r<e;++r)t+="var f".concat(r," = collection[").concat(r,"];\n"),n+="f".concat(r,".apply(undefined, arguments)\n");return{funcDefCode:t,funcCallCode:n}}function bakeCollection(collection,fixedArgsNum){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function(").concat(argsDefCode,") {\n                ").concat(funcCallCode,"\n            });\n        })")}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode=collection.length%10===0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 10) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                        collection[i+3](").concat(argsDefCode,");\n                        collection[i+4](").concat(argsDefCode,");\n                        collection[i+5](").concat(argsDefCode,");\n                        collection[i+6](").concat(argsDefCode,");\n                        collection[i+7](").concat(argsDefCode,");\n                        collection[i+8](").concat(argsDefCode,");\n                        collection[i+9](").concat(argsDefCode,");\n                    }\n                });\n            })"):collection.length%4===0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 4) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                        collection[i+3](").concat(argsDefCode,");\n                    }\n                });\n            })"):collection.length%3===0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 3) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                    }\n                });\n            })"):"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; ++i) {\n                        collection[i](").concat(argsDefCode,");\n                    }\n                });\n            })")}var bakeCollection_1=void 0,fixedArgsNum_1=void 0,bakeCollectionVariadic_1=void 0,bakeCollectionAwait_1=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}function bakeCollectionAwait(collection,fixedArgsNum){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function(").concat(argsDefCode,") {\n                return Promise.all([ ").concat(funcCallCode," ]);\n            });\n        })")}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode="(function(collection) {\n            return (function(".concat(argsDefCode,") {\n                var promises = Array(collection.length);\n                for (var i = 0; i < collection.length; ++i) {\n                    promises[i] = collection[i](").concat(argsDefCode,");\n                }\n                return Promise.all(promises);\n            });\n        })")}var bakeCollection_2=void 0,fixedArgsNum_2=void 0,bakeCollectionVariadic_2=void 0,bakeCollectionAwait_2=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}function bakeCollectionVariadic(collection){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var _a=generateBodyPartsVariadicCode(collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function() {\n                ").concat(funcCallCode,"\n            });\n        })")}else funcFactoryCode="(function(collection) {\n            return (function() {\n                for (var i = 0; i < collection.length; ++i) {\n                    collection[i].apply(undefined, arguments);\n                }\n            });\n        })";var bakeCollection_3=void 0,fixedArgsNum=void 0,bakeCollectionVariadic_3=void 0,bakeCollectionAwait_3=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}exports.bakeCollection=bakeCollection,exports.bakeCollectionAwait=bakeCollectionAwait,exports.bakeCollectionVariadic=bakeCollectionVariadic},572:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(686),t)},686:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.TaskCollection=t._fast_remove_single=void 0;var o=n(304);function i(e,t){var n,r=this.length;if(r>1)t?((n=this._tasks).push.apply(n,arguments),this.length+=arguments.length):(this._tasks.push(e),this.length++);else if(t){var o;if(1===r)(o=Array(1+arguments.length)).push(o),o.push.apply(o,arguments),this._tasks=o;else(o=Array(arguments.length)).push.apply(o,arguments),this._tasks=o;this.length+=arguments.length}else this._tasks=1===r?[this._tasks,e]:e,this.length++}function a(e,t){var n,r=this.length;if(r>1)t?((n=this._tasks).push.apply(n,arguments),this.length+=arguments.length):(this._tasks.push(e),this.length++);else if(t){var o;if(1===r)(o=Array(1+arguments.length)).push(o),o.push.apply(o,arguments),this._tasks=o;else(o=Array(arguments.length)).push.apply(o,arguments),this._tasks=o;this.length+=arguments.length}else this._tasks=1===r?[this._tasks,e]:e,this.length++;this.firstEmitBuildStrategy?this.call=p:this.rebuild()}function s(e,t){-1!==t&&(0===t?e.shift():t===e.length-1?e.length=e.length-1:e.splice(t,1))}function l(e){0!==this.length&&(1===this.length?this._tasks===e&&(this.length=0):(s(this._tasks,this._tasks.lastIndexOf(e)),1===this._tasks.length?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length))}function c(e){if(0!==this.length){if(1===this.length)return this._tasks===e&&(this.length=0),this.firstEmitBuildStrategy?void(this.call=o.BAKED_EMPTY_FUNC):void this.rebuild();s(this._tasks,this._tasks.lastIndexOf(e)),1===this._tasks.length?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length,this.firstEmitBuildStrategy?this.call=p:this.rebuild()}}function u(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];0===this.length?(this._tasks=n,this.length=1):1===this.length?(n.unshift(this._tasks),this._tasks=n,this.length=this._tasks.length):((t=this._tasks).splice.apply(t,r([e,0],n,!1)),this.length=this._tasks.length)}function h(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];0===this.length?(this._tasks=n,this.length=1):1===this.length?(n.unshift(this._tasks),this._tasks=n,this.length=this._tasks.length):((t=this._tasks).splice.apply(t,r([e,0],n,!1)),this.length=this._tasks.length),this.firstEmitBuildStrategy?this.call=p:this.rebuild()}function d(){0===this.length?this.call=o.BAKED_EMPTY_FUNC:1===this.length?this.call=this._tasks:this.call=(0,o.bakeCollection)(this._tasks,this.argsNum)}function f(){0===this.length?this.call=o.BAKED_EMPTY_FUNC:1===this.length?this.call=this._tasks:this.call=(0,o.bakeCollectionAwait)(this._tasks,this.argsNum)}function p(){this.rebuild(),this.call.apply(void 0,arguments)}t._fast_remove_single=s;var g=function(e,t,n,r){void 0===t&&(t=!0),void 0===n&&(n=null),void 0===r&&(r=!1),this.awaitTasks=r,this.call=o.BAKED_EMPTY_FUNC,this.argsNum=e,this.firstEmitBuildStrategy=!0,this.rebuild=r?f.bind(this):d.bind(this),this.setAutoRebuild(t),n?"function"===typeof n?(this._tasks=n,this.length=1):(this._tasks=n,this.length=n.length):(this._tasks=null,this.length=0),t&&this.rebuild()};t.TaskCollection=g,g.prototype.fastClear=function(){this._tasks=null,this.length=0,this.call=o.BAKED_EMPTY_FUNC},g.prototype.clear=function(){this._tasks=null,this.length=0,this.call=o.BAKED_EMPTY_FUNC},g.prototype.growArgsNum=function(e){this.argsNum<e&&(this.argsNum=e,this.firstEmitBuildStrategy?this.call=p:this.rebuild())},g.prototype.setAutoRebuild=function(e){e?(this.push=a.bind(this),this.insert=h.bind(this),this.removeLast=c.bind(this)):(this.push=i.bind(this),this.insert=u.bind(this),this.removeLast=l.bind(this))},g.prototype.tasksAsArray=function(){return 0===this.length?[]:1===this.length?[this._tasks]:this._tasks},g.prototype.setTasks=function(e){0===e.length?(this.length=0,this.call=o.BAKED_EMPTY_FUNC):1===e.length?(this.length=1,this.call=e[0],this._tasks=e[0]):(this.length=e.length,this._tasks=e,this.firstEmitBuildStrategy?this.call=p:this.rebuild())}},447:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},554:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nullObj=void 0,t.nullObj=function(){var e={__proto__:null,prototype:null};return e}},355:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=void 0;const r=n(928);class o{constructor(e){this.lookupTable=new Map,this.head=null,this.tail=null;const{maxSize:t=25,entryExpirationTimeInMS:n=null,onEntryEvicted:r,onEntryMarkedAsMostRecentlyUsed:o,cloneFn:i,clone:a}=null!==e&&void 0!==e?e:{};if(Number.isNaN(t)||t<=0)throw new Error("maxSize must be greater than 0.");if("number"===typeof n&&(n<=0||Number.isNaN(n)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.maxSizeInternal=t,this.entryExpirationTimeInMS=n,this.onEntryEvicted=r,this.onEntryMarkedAsMostRecentlyUsed=o,this.clone=a,this.cloneFn=i}get size(){return this.cleanCache(),this.lookupTable.size}get remainingSize(){return this.maxSizeInternal-this.size}get newest(){return this.head?this.head.isExpired?(this.removeNodeFromListAndLookupTable(this.head),this.newest):this.mapNodeToEntry(this.head):null}get oldest(){return this.tail?this.tail.isExpired?(this.removeNodeFromListAndLookupTable(this.tail),this.oldest):this.mapNodeToEntry(this.tail):null}get maxSize(){return this.maxSizeInternal}set maxSize(e){if(Number.isNaN(e)||e<=0)throw new Error("maxSize must be greater than 0.");this.maxSizeInternal=e,this.enforceSizeLimit()}set(e,t,n){const o=this.lookupTable.get(e);o&&this.removeNodeFromListAndLookupTable(o);const i=new r.LRUCacheNode(e,t,{entryExpirationTimeInMS:this.entryExpirationTimeInMS,onEntryEvicted:this.onEntryEvicted,onEntryMarkedAsMostRecentlyUsed:this.onEntryMarkedAsMostRecentlyUsed,clone:this.clone,cloneFn:this.cloneFn,...n});return this.setNodeAsHead(i),this.lookupTable.set(e,i),this.enforceSizeLimit(),this}get(e){const t=this.lookupTable.get(e);return t?t.isExpired?(this.removeNodeFromListAndLookupTable(t),null):(this.setNodeAsHead(t),t.value):null}peek(e){const t=this.lookupTable.get(e);return t?t.isExpired?(this.removeNodeFromListAndLookupTable(t),null):t.value:null}delete(e){const t=this.lookupTable.get(e);return!!t&&this.removeNodeFromListAndLookupTable(t)}has(e){const t=this.lookupTable.get(e);return!!t&&(!t.isExpired||(this.removeNodeFromListAndLookupTable(t),!1))}clear(){this.head=null,this.tail=null,this.lookupTable.clear()}find(e){let t=this.head;for(;t;){if(t.isExpired){const e=t.next;this.removeNodeFromListAndLookupTable(t),t=e;continue}const n=this.mapNodeToEntry(t);if(e(n))return this.setNodeAsHead(t),n;t=t.next}return null}forEach(e){let t=this.head,n=0;for(;t;)if(t.isExpired){const e=t.next;this.removeNodeFromListAndLookupTable(t),t=e}else e(t.value,t.key,n),t=t.next,n++}*values(){let e=this.head;for(;e;)if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t}else yield e.value,e=e.next}*keys(){let e=this.head;for(;e;)if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t}else yield e.key,e=e.next}*entries(){let e=this.head;for(;e;)if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t}else yield this.mapNodeToEntry(e),e=e.next}*[Symbol.iterator](){let e=this.head;for(;e;)if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t}else yield this.mapNodeToEntry(e),e=e.next}enforceSizeLimit(){let e=this.tail;for(;null!==e&&this.size>this.maxSizeInternal;){const t=e.prev;this.removeNodeFromListAndLookupTable(e),e=t}}mapNodeToEntry(e){let{key:t,value:n}=e;return{key:t,value:n}}setNodeAsHead(e){this.removeNodeFromList(e),this.head?(e.next=this.head,this.head.prev=e,this.head=e):(this.head=e,this.tail=e),e.invokeOnEntryMarkedAsMostRecentlyUsed()}removeNodeFromList(e){null!==e.prev&&(e.prev.next=e.next),null!==e.next&&(e.next.prev=e.prev),this.head===e&&(this.head=e.next),this.tail===e&&(this.tail=e.prev),e.next=null,e.prev=null}removeNodeFromListAndLookupTable(e){return e.invokeOnEvicted(),this.removeNodeFromList(e),this.lookupTable.delete(e.key)}cleanCache(){if(!this.entryExpirationTimeInMS)return;const e=[];for(const t of this.lookupTable.values())t.isExpired&&e.push(t);e.forEach((e=>this.removeNodeFromListAndLookupTable(e)))}}t.LRUCache=o},928:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCacheNode=void 0;t.LRUCacheNode=class{constructor(e,t,n){const{entryExpirationTimeInMS:r=null,next:o=null,prev:i=null,onEntryEvicted:a,onEntryMarkedAsMostRecentlyUsed:s,clone:l,cloneFn:c}=null!==n&&void 0!==n?n:{};if("number"===typeof r&&(r<=0||Number.isNaN(r)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.clone=null!==l&&void 0!==l&&l,this.cloneFn=null!==c&&void 0!==c?c:this.defaultClone,this.key=e,this.internalValue=this.clone?this.cloneFn(t):t,this.created=Date.now(),this.entryExpirationTimeInMS=r,this.next=o,this.prev=i,this.onEntryEvicted=a,this.onEntryMarkedAsMostRecentlyUsed=s}get value(){return this.clone?this.cloneFn(this.internalValue):this.internalValue}get isExpired(){return"number"===typeof this.entryExpirationTimeInMS&&Date.now()-this.created>this.entryExpirationTimeInMS}invokeOnEvicted(){if(this.onEntryEvicted){const{key:e,value:t,isExpired:n}=this;this.onEntryEvicted({key:e,value:t,isExpired:n})}}invokeOnEntryMarkedAsMostRecentlyUsed(){if(this.onEntryMarkedAsMostRecentlyUsed){const{key:e,value:t}=this;this.onEntryMarkedAsMostRecentlyUsed({key:e,value:t})}}defaultClone(e){return"boolean"===typeof e||"string"===typeof e||"number"===typeof e?e:JSON.parse(JSON.stringify(e))}}},940:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(355),t)},884:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,i(n)))}return e}function i(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var o=Object.create(null);__webpack_require__.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,__webpack_require__.d(o,i),o}})(),__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{dQ:()=>$x,ci:()=>Lx,bytesToNumberBE:()=>Mx,ty:()=>Fx,eV:()=>Wx,n$:()=>Gx,ql:()=>Hx,hexToBytes:()=>Ux,tL:()=>Dx,S5:()=>qx,FF:()=>Zx});var t=__webpack_require__(739),n=__webpack_require__(313),r=__webpack_require__.t(n,2),o=__webpack_require__(417);const i=()=>window.APP.SETTINGS_STORE_KEY,a=(0,n.createContext)(void 0),s=(e,t)=>{const{...n}=t;return{...e,...n}},l=e=>{let{value:{defaultValues:t},children:r}=e;const[l,c]=(0,n.useReducer)(s,Object.assign({},t,JSON.parse(window.localStorage.getItem(i())||"{}")));return(0,n.useEffect)((()=>{window.localStorage.setItem(i(),JSON.stringify(l))}),[l]),(0,o.jsx)(a.Provider,{value:{settings:l,dispatch:c},children:r})},c=()=>{const e=(0,n.useContext)(a);if(void 0===e)throw new Error("useSettings must be used within a SettingsProvider");return e.settings},u=()=>{const e=(0,n.useContext)(a);if(void 0===e)throw new Error("useSettingsDispatch must be used within a SettingsProvider");return e.dispatch};var h=Object.defineProperty,d=(e,t,n)=>(((e,t,n)=>{t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function p(e){var t=e.default;if("function"==typeof t){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var g,m,y={exports:{}};function b(){if(m)return g;m=1;var e=1e3,t=60*e,n=60*t,r=24*n,o=7*r,i=365.25*r;function a(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}return g=function(s,l){l=l||{};var c=typeof s;if("string"===c&&s.length>0)return function(a){if(a=String(a),!(a.length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(s){var l=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*i;case"weeks":case"week":case"w":return l*o;case"days":case"day":case"d":return l*r;case"hours":case"hour":case"hrs":case"hr":case"h":return l*n;case"minutes":case"minute":case"mins":case"min":case"m":return l*t;case"seconds":case"second":case"secs":case"sec":case"s":return l*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}(s);if("number"===c&&isFinite(s))return l.long?function(o){var i=Math.abs(o);return i>=r?a(o,i,r,"day"):i>=n?a(o,i,n,"hour"):i>=t?a(o,i,t,"minute"):i>=e?a(o,i,e,"second"):o+" ms"}(s):function(o){var i=Math.abs(o);return i>=r?Math.round(o/r)+"d":i>=n?Math.round(o/n)+"h":i>=t?Math.round(o/t)+"m":i>=e?Math.round(o/e)+"s":o+"ms"}(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))},g}var v=function(e){function t(e){let r,o,i,a=null;function s(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];if(!s.enabled)return;const i=s,a=Number(new Date),l=a-(r||a);i.diff=l,i.prev=r,i.curr=a,r=a,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");let c=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,((e,r)=>{if("%%"===e)return"%";c++;const o=t.formatters[r];if("function"==typeof o){const t=n[c];e=o.call(i,t),n.splice(c,1),c--}return e})),t.formatArgs.call(i,n),(i.log||t.log).apply(i,n)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=n,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i),set:e=>{a=e}}),"function"==typeof t.init&&t.init(s),s}function n(e,n){const r=t(this.namespace+(typeof n>"u"?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)!r[n]||("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=b(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t};!function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch{}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:"0.0.1"}.DEBUG),e},t.useColors=function(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch{}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=v(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}(y,y.exports);const w=y.exports;var k={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new o(r,i||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=new Array(i);o<i;o++)a[o]=r[o].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,o,i,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,o),!0;case 5:return u.fn.call(u.context,t,r,o,i),!0;case 6:return u.fn.call(u.context,t,r,o,i,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,o);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var s=this._events[i];if(s.fn)s.fn===t&&(!o||s.once)&&(!r||s.context===r)&&a(this,i);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||o&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[i]=1===c.length?c[0]:c:a(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(k);const x=k.exports;function E(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function _(e){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}const N={number:E,bool:function(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:_,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");E(e.outputLen),E(e.blockLen)},exists:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){_(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},S="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,C=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),A=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function R(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));class T{clone(){return this._cloneInto()}}function B(e){const t=t=>e().update(R(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function j(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(S&&"function"==typeof S.getRandomValues)return S.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class O extends T{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=C(this.buffer)}update(e){N.exists(this);const{view:t,buffer:n,blockLen:r}=this,o=(e=R(e)).length;for(let i=0;i<o;){const a=Math.min(r-this.pos,o-i);if(a!==r)n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=C(e);for(;r<=o-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){N.exists(this),N.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:o}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let u=i;u<r;u++)t[u]=0;(function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),a=Number(n>>o&i),s=Number(n&i),l=r?4:0,c=r?0:4;e.setUint32(t+l,a,r),e.setUint32(t+c,s,r)})(n,r-8,BigInt(8*this.length),o),this.process(n,0);const a=C(e),s=this.outputLen;if(s%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=s/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)a.setUint32(4*u,c[u],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:o,destroyed:i,pos:a}=this;return e.length=r,e.pos=a,e.finished=o,e.destroyed=i,r%t&&e.buffer.set(n),e}}const I=(e,t,n)=>e&t^~e&n,P=(e,t,n)=>e&t^e&n^t&n,L=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),z=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),U=new Uint32Array(64);class M extends O{constructor(){super(64,32,8,!1),this.A=0|z[0],this.B=0|z[1],this.C=0|z[2],this.D=0|z[3],this.E=0|z[4],this.F=0|z[5],this.G=0|z[6],this.H=0|z[7]}get(){const{A:e,B:t,C:n,D:r,E:o,F:i,G:a,H:s}=this;return[e,t,n,r,o,i,a,s]}set(e,t,n,r,o,i,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|a,this.H=0|s}process(e,t){for(let u=0;u<16;u++,t+=4)U[u]=e.getUint32(t,!1);for(let u=16;u<64;u++){const e=U[u-15],t=U[u-2],n=A(e,7)^A(e,18)^e>>>3,r=A(t,17)^A(t,19)^t>>>10;U[u]=r+U[u-7]+n+U[u-16]|0}let{A:n,B:r,C:o,D:i,E:a,F:s,G:l,H:c}=this;for(let u=0;u<64;u++){const e=c+(A(a,6)^A(a,11)^A(a,25))+I(a,s,l)+L[u]+U[u]|0,t=(A(n,2)^A(n,13)^A(n,22))+P(n,r,o)|0;c=l,l=s,s=a,a=i+e|0,i=o,o=r,r=n,n=e+t|0}n=n+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,s=s+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,r,o,i,a,s,l,c)}roundClean(){U.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class F extends M{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const D=B((()=>new M));B((()=>new F));const q=BigInt(0),H=BigInt(1),W=BigInt(2),$=e=>e instanceof Uint8Array,K=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Q(e){if(!$(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=K[e[n]];return t}function G(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function V(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function Z(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);if(e.length%2)throw new Error("hex string is invalid: unpadded "+e.length);const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n,o=e.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("invalid byte sequence");t[n]=i}return t}function Y(e){return V(Q(e))}function J(e){if(!$(e))throw new Error("Uint8Array expected");return V(Q(Uint8Array.from(e).reverse()))}const X=(e,t)=>Z(e.toString(16).padStart(2*t,"0")),ee=(e,t)=>X(e,t).reverse();function te(e,t,n){let r;if("string"==typeof t)try{r=Z(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else{if(!$(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const o=r.length;if("number"==typeof n&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function ne(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new Uint8Array(t.reduce(((e,t)=>e+t.length),0));let o=0;return t.forEach((e=>{if(!$(e))throw new Error("Uint8Array expected");r.set(e,o),o+=e.length})),r}function re(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}const oe=e=>(W<<BigInt(e-1))-H,ie=e=>new Uint8Array(e),ae=e=>Uint8Array.from(e);function se(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=ie(e),o=ie(e),i=0;const a=()=>{r.fill(1),o.fill(0),i=0},s=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n(o,r,...t)},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie();o=s(ae([0]),e),r=s(),0!==e.length&&(o=s(ae([1]),e),r=s())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=s();const t=r.slice();n.push(t),e+=r.length}return ne(...n)};return(e,t)=>{let n;for(a(),l(e);!(n=t(c()));)l();return a(),n}}const le={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function ce(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(t,n,r)=>{const o=le[n];if("function"!=typeof o)throw new Error(`Invalid validator "${n}", expected function`);const i=e[t];if((!r||void 0!==i)&&!o(i,e))throw new Error(`Invalid param ${String(t)}=${i} (${typeof i}), expected ${n}`)};for(const[o,i]of Object.entries(t))r(o,i,!1);for(const[o,i]of Object.entries(n))r(o,i,!0);return e}const ue=Object.freeze(Object.defineProperty({__proto__:null,bytesToHex:Q,numberToHexUnpadded:G,hexToNumber:V,hexToBytes:Z,bytesToNumberBE:Y,bytesToNumberLE:J,numberToBytesBE:X,numberToBytesLE:ee,numberToVarBytesBE:e=>Z(G(e)),ensureBytes:te,concatBytes:ne,equalBytes:function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},utf8ToBytes:re,bitLen:function(e){let t;for(t=0;e>q;e>>=H,t+=1);return t},bitGet:(e,t)=>e>>BigInt(t)&H,bitSet:(e,t,n)=>e|(n?H:q)<<BigInt(t),bitMask:oe,createHmacDrbg:se,validateObject:ce},Symbol.toStringTag,{value:"Module"})),he=BigInt(0),de=BigInt(1),fe=BigInt(2),pe=BigInt(3),ge=BigInt(4),me=BigInt(5),ye=BigInt(8);function be(e,t){const n=e%t;return n>=he?n:t+n}function ve(e,t,n){if(n<=he||t<he)throw new Error("Expected power/modulo > 0");if(n===de)return he;let r=de;for(;t>he;)t&de&&(r=r*e%n),e=e*e%n,t>>=de;return r}function we(e,t,n){let r=e;for(;t-- >he;)r*=r,r%=n;return r}function ke(e,t){if(e===he||t<=he)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=be(e,t),r=t,o=he,i=de;for(;n!==he;){const e=r%n,t=o-i*(r/n);r=n,n=e,o=i,i=t}if(r!==de)throw new Error("invert: does not exist");return be(o,t)}function xe(e){if(e%ge===pe){const t=(e+de)/ge;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%ye===me){const t=(e-me)/ye;return function(e,n){const r=e.mul(n,fe),o=e.pow(r,t),i=e.mul(n,o),a=e.mul(e.mul(i,fe),o),s=e.mul(i,e.sub(a,e.ONE));if(!e.eql(e.sqr(s),n))throw new Error("Cannot find square root");return s}}return function(e){const t=(e-de)/fe;let n,r,o;for(n=e-de,r=0;n%fe===he;n/=fe,r++);for(o=fe;o<e&&ve(o,t,e)!==e-de;o++);if(1===r){const t=(e+de)/ge;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const i=(n+de)/fe;return function(e,a){if(e.pow(a,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let s=r,l=e.pow(e.mul(e.ONE,o),n),c=e.pow(a,i),u=e.pow(a,n);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<s&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const n=e.pow(l,de<<BigInt(s-t-1));l=e.sqr(n),c=e.mul(c,n),u=e.mul(u,l),s=t}return c}}(e)}BigInt(9),BigInt(16);const Ee=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function _e(e){const t=Ee.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return ce(e,t)}function Ne(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}const Se=BigInt(0),Ce=BigInt(1);function Ae(e){return _e(e.Fp),ce(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ne(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:Re,hexToBytes:Te}=ue,Be={Err:class extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},_parseInt(e){const{Err:t}=Be;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(128&r[0])throw new t("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Re(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Be,n="string"==typeof e?Te(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:i}=Be._parseInt(n.subarray(2)),{d:a,l:s}=Be._parseInt(i);if(s.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:a}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},r=t(n(e.s)),o=t(n(e.r)),i=r.length/2,a=o.length/2,s=n(i),l=n(a);return`30${n(a+i+4)}02${l}${o}02${s}${r}`}},je=BigInt(0),Oe=BigInt(1),Ie=BigInt(2),Pe=BigInt(3),Le=BigInt(4);function ze(e){const t=function(e){const t=Ae(e);ce(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=t.toBytes||((e,t,r)=>{const o=t.toAffine();return ne(Uint8Array.from([4]),n.toBytes(o.x),n.toBytes(o.y))}),o=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function i(e){const{a:r,b:o}=t,i=n.sqr(e),a=n.mul(i,e);return n.add(n.add(a,n.mul(e,r)),o)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){return"bigint"==typeof e&&je<e&&e<t.n}function s(e){if(!a(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:o,n:i}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=Q(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let a;try{a="bigint"==typeof e?e:Y(te("private key",e,r))}catch{throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return o&&(a=be(a,i)),s(a),a}const c=new Map;function u(e){if(!(e instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof h)throw new Error("projective point not allowed");const o=e=>n.eql(e,n.ZERO);return o(t)&&o(r)?h.ZERO:new h(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(h.fromAffine)}static fromHex(e){const t=h.fromAffine(o(te("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw new Error("bad point: x or y not FE");const o=n.sqr(r),a=i(e);if(!n.eql(o,a))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){u(e);const{px:t,py:r,pz:o}=this,{px:i,py:a,pz:s}=e,l=n.eql(n.mul(t,s),n.mul(i,o)),c=n.eql(n.mul(r,s),n.mul(a,o));return l&&c}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,o=n.mul(r,Pe),{px:i,py:a,pz:s}=this;let l=n.ZERO,c=n.ZERO,u=n.ZERO,d=n.mul(i,i),f=n.mul(a,a),p=n.mul(s,s),g=n.mul(i,a);return g=n.add(g,g),u=n.mul(i,s),u=n.add(u,u),l=n.mul(e,u),c=n.mul(o,p),c=n.add(l,c),l=n.sub(f,c),c=n.add(f,c),c=n.mul(l,c),l=n.mul(g,l),u=n.mul(o,u),p=n.mul(e,p),g=n.sub(d,p),g=n.mul(e,g),g=n.add(g,u),u=n.add(d,d),d=n.add(u,d),d=n.add(d,p),d=n.mul(d,g),c=n.add(c,d),p=n.mul(a,s),p=n.add(p,p),d=n.mul(p,g),l=n.sub(l,d),u=n.mul(p,f),u=n.add(u,u),u=n.add(u,u),new h(l,c,u)}add(e){u(e);const{px:r,py:o,pz:i}=this,{px:a,py:s,pz:l}=e;let c=n.ZERO,d=n.ZERO,f=n.ZERO;const p=t.a,g=n.mul(t.b,Pe);let m=n.mul(r,a),y=n.mul(o,s),b=n.mul(i,l),v=n.add(r,o),w=n.add(a,s);v=n.mul(v,w),w=n.add(m,y),v=n.sub(v,w),w=n.add(r,i);let k=n.add(a,l);return w=n.mul(w,k),k=n.add(m,b),w=n.sub(w,k),k=n.add(o,i),c=n.add(s,l),k=n.mul(k,c),c=n.add(y,b),k=n.sub(k,c),f=n.mul(p,w),c=n.mul(g,b),f=n.add(c,f),c=n.sub(y,f),f=n.add(y,f),d=n.mul(c,f),y=n.add(m,m),y=n.add(y,m),b=n.mul(p,b),w=n.mul(g,w),y=n.add(y,b),b=n.sub(m,b),b=n.mul(p,b),w=n.add(w,b),m=n.mul(y,w),d=n.add(d,m),m=n.mul(k,w),c=n.mul(v,c),c=n.sub(c,m),m=n.mul(v,y),f=n.mul(k,f),f=n.add(f,m),new h(c,d,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return f.wNAFCached(this,c,e,(e=>{const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(h.fromAffine)}))}multiplyUnsafe(e){const r=h.ZERO;if(e===je)return r;if(s(e),e===Oe)return this;const{endo:o}=t;if(!o)return f.unsafeLadder(this,e);let{k1neg:i,k1:a,k2neg:l,k2:c}=o.splitScalar(e),u=r,d=r,p=this;for(;a>je||c>je;)a&Oe&&(u=u.add(p)),c&Oe&&(d=d.add(p)),p=p.double(),a>>=Oe,c>>=Oe;return i&&(u=u.negate()),l&&(d=d.negate()),d=new h(n.mul(d.px,o.beta),d.py,d.pz),u.add(d)}multiply(e){s(e);let r,o,i=e;const{endo:a}=t;if(a){const{k1neg:e,k1:t,k2neg:s,k2:l}=a.splitScalar(i);let{p:c,f:u}=this.wNAF(t),{p:d,f:p}=this.wNAF(l);c=f.constTimeNegate(e,c),d=f.constTimeNegate(s,d),d=new h(n.mul(d.px,a.beta),d.py,d.pz),r=c.add(d),o=u.add(p)}else{const{p:e,f:t}=this.wNAF(i);r=e,o=t}return h.normalizeZ([r,o])[0]}multiplyAndAddUnsafe(e,t,n){const r=h.BASE,o=(e,t)=>t!==je&&t!==Oe&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),i=o(this,t).add(o(e,n));return i.is0()?void 0:i}toAffine(e){const{px:t,py:r,pz:o}=this,i=this.is0();null==e&&(e=i?n.ONE:n.inv(o));const a=n.mul(t,e),s=n.mul(r,e),l=n.mul(o,e);if(i)return{x:n.ZERO,y:n.ZERO};if(!n.eql(l,n.ONE))throw new Error("invZ was invalid");return{x:a,y:s}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===Oe)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===Oe?this:n?n(h,this):this.multiplyUnsafe(t.h)}toRawBytes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.assertValidity(),r(h,this,e)}toHex(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Q(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const d=t.nBitLength,f=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,o=t;for(;n>Se;)n&Ce&&(r=r.add(o)),o=o.double(),n>>=Ce;return r},precomputeWindow(e,t){const{windows:n,windowSize:o}=r(t),i=[];let a=e,s=a;for(let r=0;r<n;r++){s=a,i.push(s);for(let e=1;e<o;e++)s=s.add(a),i.push(s);a=s.double()}return i},wNAF(t,o,i){const{windows:a,windowSize:s}=r(t);let l=e.ZERO,c=e.BASE;const u=BigInt(2**t-1),h=2**t,d=BigInt(t);for(let e=0;e<a;e++){const t=e*s;let r=Number(i&u);i>>=d,r>s&&(r-=h,i+=Ce);const a=t,f=t+Math.abs(r)-1,p=e%2!==0,g=r<0;0===r?c=c.add(n(p,o[a])):l=l.add(n(g,o[f]))}return{p:l,f:c}},wNAFCached(e,t,n,r){const o=e._WINDOW_SIZE||1;let i=t.get(e);return i||(i=this.precomputeWindow(e,o),1!==o&&t.set(e,r(i))),this.wNAF(o,i,n)}}}(h,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:a}}function Ue(e){const t=function(e){const t=Ae(e);return ce(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,o=n.BYTES+1,i=2*n.BYTES+1;function a(e){return be(e,r)}function s(e){return ke(e,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:u,isWithinCurveOrder:h}=ze({...t,toBytes(e,t,r){const o=t.toAffine(),i=n.toBytes(o.x),a=ne;return r?a(Uint8Array.from([t.hasEvenY()?2:3]),i):a(Uint8Array.from([4]),i,n.toBytes(o.y))},fromBytes(e){const t=e.length,r=e[0],a=e.subarray(1);if(t!==o||2!==r&&3!==r){if(t===i&&4===r){return{x:n.fromBytes(a.subarray(0,n.BYTES)),y:n.fromBytes(a.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}{const e=Y(a);if(!function(e){return je<e&&e<n.ORDER}(e))throw new Error("Point is not on curve");const t=u(e);let o=n.sqrt(t);return 1===(1&r)!==((o&Oe)===Oe)&&(o=n.neg(o)),{x:e,y:o}}}}),d=e=>Q(X(e,t.nByteLength));function f(e){return e>r>>Oe}const p=(e,t,n)=>Y(e.slice(t,n));class g{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=te("compactSignature",e,2*n),new g(p(e,0,n),p(e,n,2*n))}static fromDER(e){const{r:t,s:n}=Be.toSig(te("DER",e));return new g(t,n)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:o,recovery:i}=this,c=v(te("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const u=2===i||3===i?r+t.n:r;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0===(1&i)?"02":"03",f=l.fromHex(h+d(u)),p=s(u),g=a(-c*p),m=a(o*p),y=l.BASE.multiplyAndAddUnsafe(f,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Z(this.toDERHex())}toDERHex(){return Be.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Z(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const m={isValidPrivateKey(e){try{return c(e),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const e=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=(e=te("privateHash",e)).length,o=Ne(t).nByteLength+8;if(o<24||r<o||r>1024)throw new Error(`hashToPrivateScalar: expected ${o}-1024 bytes of input, got ${r}`);return be(n?J(e):Y(e),t-de)+de}(t.randomBytes(n.BYTES+8),r);return X(e,t.nByteLength)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function y(e){const t=e instanceof Uint8Array,n="string"==typeof e,r=(t||n)&&e.length;return t?r===o||r===i:n?r===2*o||r===2*i:e instanceof l}const b=t.bits2int||function(e){const n=Y(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},v=t.bits2int_modN||function(e){return a(b(e))},w=oe(t.nBitLength);function k(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(je<=e&&e<w))throw new Error(`bigint expected < 2^${t.nBitLength}`);return X(e,t.nByteLength)}function x(e,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;if(["recovered","canonical"].some((e=>e in o)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:u}=t;let{lowS:d,prehash:p,extraEntropy:m}=o;null==d&&(d=!0),e=te("msgHash",e),p&&(e=te("prehashed msgHash",i(e)));const y=v(e),w=c(r),x=[k(w),k(y)];if(null!=m){const e=!0===m?u(n.BYTES):m;x.push(te("extraEntropy",e,n.BYTES))}const _=ne(...x),N=y;return{seed:_,k2sig:function(e){const t=b(e);if(!h(t))return;const n=s(t),r=l.BASE.multiply(t).toAffine(),o=a(r.x);if(o===je)return;const i=a(n*a(N+o*w));if(i===je)return;let c=(r.x===o?0:2)|Number(r.y&Oe),u=i;return d&&f(i)&&(u=function(e){return f(e)?a(-e):e}(i),c^=1),new g(o,u,c)}}}const E={lowS:t.lowS,prehash:!1},_={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return l.fromHex(t).multiply(c(e)).toRawBytes(n)},sign:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;const{seed:o,k2sig:i}=x(e,n,r);return se(t.hash.outputLen,t.nByteLength,t.hmac)(o,i)},verify:function(e,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_;var i;const c=e;if(n=te("msgHash",n),r=te("publicKey",r),"strict"in o)throw new Error("options.strict was renamed to lowS");const{lowS:u,prehash:h}=o;let d,f;try{if("string"==typeof c||c instanceof Uint8Array)try{d=g.fromDER(c)}catch(IE){if(!(IE instanceof Be.Err))throw IE;d=g.fromCompact(c)}else{if("object"!=typeof c||"bigint"!=typeof c.r||"bigint"!=typeof c.s)throw new Error("PARSE");{const{r:e,s:t}=c;d=new g(e,t)}}f=l.fromHex(r)}catch(IE){if("PARSE"===IE.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&d.hasHighS())return!1;h&&(n=t.hash(n));const{r:p,s:m}=d,y=v(n),b=s(m),w=a(y*b),k=a(p*b),x=null==(i=l.BASE.multiplyAndAddUnsafe(f,w,k))?void 0:i.toAffine();return!!x&&a(x.x)===p},ProjectivePoint:l,Signature:g,utils:m}}class Me extends T{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,N.hash(e);const n=R(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(n.length>r?e.create().update(n).digest():n);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(e){return N.exists(this),this.iHash.update(e),this}digestInto(e){N.exists(this),N.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:a}=this;return e.finished=r,e.destroyed=o,e.blockLen=i,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Fe=(e,t,n)=>new Me(e,t).update(n).digest();function De(e){return{hash:e,hmac:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Fe(e,t,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const r=t.reduce(((e,t)=>e+t.length),0),o=new Uint8Array(r);for(let i=0,a=0;i<t.length;i++){const e=t[i];o.set(e,a),a+=e.length}return o}(...r))},randomBytes:j}}Fe.create=(e,t)=>new Me(e,t);const qe=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),He=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),We=BigInt(1),$e=BigInt(2),Ke=(e,t)=>(e+t/$e)/t;function Qe(e){const t=qe,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),a=BigInt(23),s=BigInt(44),l=BigInt(88),c=e*e*e%t,u=c*c*e%t,h=we(u,n,t)*u%t,d=we(h,n,t)*u%t,f=we(d,$e,t)*c%t,p=we(f,o,t)*f%t,g=we(p,i,t)*p%t,m=we(g,s,t)*g%t,y=we(m,l,t)*m%t,b=we(y,s,t)*g%t,v=we(b,n,t)*u%t,w=we(v,a,t)*p%t,k=we(w,r,t)*c%t,x=we(k,$e,t);if(!Ge.eql(Ge.sqr(x),e))throw new Error("Cannot find square root");return x}const Ge=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=he)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:i}=Ne(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=xe(e),s=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:oe(o),ZERO:he,ONE:de,create:t=>be(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return he<=t&&t<e},is0:e=>e===he,isOdd:e=>(e&de)===de,neg:t=>be(-t,e),eql:(e,t)=>e===t,sqr:t=>be(t*t,e),add:(t,n)=>be(t+n,e),sub:(t,n)=>be(t-n,e),mul:(t,n)=>be(t*n,e),pow:(e,t)=>function(e,t,n){if(n<he)throw new Error("Expected power > 0");if(n===he)return e.ONE;if(n===de)return t;let r=e.ONE,o=t;for(;n>he;)n&de&&(r=e.mul(r,o)),o=e.sqr(o),n>>=de;return r}(s,e,t),div:(t,n)=>be(t*ke(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>ke(t,e),sqrt:r.sqrt||(e=>a(s,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,o)=>e.is0(r)?t:(n[o]=t,e.mul(t,r))),e.ONE),o=e.inv(r);return t.reduceRight(((t,r,o)=>e.is0(r)?t:(n[o]=e.mul(t,n[o]),e.mul(t,r))),o),n}(s,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?ee(e,i):X(e,i),fromBytes:e=>{if(e.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${e.length}`);return n?J(e):Y(e)}});return Object.freeze(s)}(qe,void 0,void 0,{sqrt:Qe}),Ve=function(e,t){const n=t=>Ue({...e,...De(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:Ge,n:He,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=He,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-We*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),s=Ke(i*e,t),l=Ke(-r*e,t);let c=be(e-s*n-l*o,t),u=be(-s*r-l*i,t);const h=c>a,d=u>a;if(h&&(c=t-c),d&&(u=t-u),c>a||u>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:c,k2neg:d,k2:u}}}},D),Ze=BigInt(0),Ye=e=>"bigint"==typeof e&&Ze<e&&e<qe,Je=e=>"bigint"==typeof e&&Ze<e&&e<He,Xe={};function et(e){let t=Xe[e];if(void 0===t){const n=D(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=ne(n,n),Xe[e]=t}for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return D(ne(t,...r))}const tt=e=>e.toRawBytes(!0).slice(1),nt=e=>X(e,32),rt=e=>be(e,qe),ot=e=>be(e,He),it=Ve.ProjectivePoint,at=(e,t,n)=>it.BASE.multiplyAndAddUnsafe(e,t,n);function st(e){let t=Ve.utils.normPrivateKeyToScalar(e),n=it.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:ot(-t),bytes:tt(n)}}function lt(e){if(!Ye(e))throw new Error("bad x: need 0 < x < p");const t=rt(e*e);let n=Qe(rt(t*e+BigInt(7)));n%$e!==Ze&&(n=rt(-n));const r=new it(e,n,We);return r.assertValidity(),r}function ct(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ot(Y(et("BIP0340/challenge",...t)))}function ut(e,t,n){const r=te("signature",e,64),o=te("message",t),i=te("publicKey",n,32);try{const e=lt(Y(i)),t=Y(r.subarray(0,32));if(!Ye(t))return!1;const n=Y(r.subarray(32,64));if(!Je(n))return!1;const a=ct(nt(t),tt(e),o),s=at(e,n,ot(-a));return!(!s||!s.hasEvenY()||s.toAffine().x!==t)}catch{return!1}}const ht={getPublicKey:function(e){return st(e).bytes},sign:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j(32);const r=te("message",e),{bytes:o,scalar:i}=st(t),a=te("auxRand",n,32),s=nt(i^Y(et("BIP0340/aux",a))),l=et("BIP0340/nonce",s,o,r),c=ot(Y(l));if(c===Ze)throw new Error("sign failed: k is zero");const{bytes:u,scalar:h}=st(c),d=ct(u,o,r),f=new Uint8Array(64);if(f.set(u,0),f.set(nt(ot(h+d*i)),32),!ut(f,r,o))throw new Error("sign: Invalid signature produced");return f},verify:ut,utils:{randomPrivateKey:Ve.utils.randomPrivateKey,lift_x:lt,pointToBytes:tt,numberToBytesBE:X,bytesToNumberBE:Y,taggedHash:et,mod:be}},dt=function(e,t){const n=t.map((e=>Array.from(e).reverse()));return(t,r)=>{const[o,i,a,s]=n.map((n=>n.reduce(((n,r)=>e.add(e.mul(n,t),r)))));return t=e.div(o,i),r=e.mul(r,e.div(a,s)),{x:t,y:r}}}(Ge,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))),ft=function(e,t){if(_e(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=function(e,t){const n=e.ORDER;let r=je;for(let d=n-Oe;d%Ie===je;d/=Ie)r+=Oe;const o=r,i=(n-Oe)/Ie**o,a=(i-Oe)/Ie,s=Ie**o-Oe,l=Ie**(o-Oe),c=e.pow(t,i),u=e.pow(t,(i+Oe)/Ie);let h=(t,n)=>{let r=c,i=e.pow(n,s),h=e.sqr(i);h=e.mul(h,n);let d=e.mul(t,h);d=e.pow(d,a),d=e.mul(d,i),i=e.mul(d,n),h=e.mul(d,t);let f=e.mul(h,i);d=e.pow(f,l);let p=e.eql(d,e.ONE);i=e.mul(h,u),d=e.mul(f,r),h=e.cmov(i,h,p),f=e.cmov(d,f,p);for(let a=o;a>Oe;a--){let t=Ie**(a-Ie),n=e.pow(f,t);const o=e.eql(n,e.ONE);i=e.mul(h,r),r=e.mul(r,r),n=e.mul(f,r),h=e.cmov(i,h,o),f=e.cmov(n,f,o)}return{isValid:p,value:h}};if(e.ORDER%Le===Pe){const n=(e.ORDER-Pe)/Le,r=e.sqrt(e.neg(t));h=(t,o)=>{let i=e.sqr(o);const a=e.mul(t,o);i=e.mul(i,a);let s=e.pow(i,n);s=e.mul(s,a);const l=e.mul(s,r),c=e.mul(e.sqr(s),o),u=e.eql(c,t);return{isValid:u,value:e.cmov(l,s,u)}}}return h}(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let o,i,a,s,l,c,u,h;o=e.sqr(r),o=e.mul(o,t.Z),i=e.sqr(o),i=e.add(i,o),a=e.add(i,e.ONE),a=e.mul(a,t.B),s=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),s=e.mul(s,t.A),i=e.sqr(a),c=e.sqr(s),l=e.mul(c,t.A),i=e.add(i,l),i=e.mul(i,a),c=e.mul(c,s),l=e.mul(c,t.B),i=e.add(i,l),u=e.mul(o,a);const{isValid:d,value:f}=n(i,c);h=e.mul(o,r),h=e.mul(h,f),u=e.cmov(u,a,d),h=e.cmov(h,f,d);const p=e.isOdd(r)===e.isOdd(h);return h=e.cmov(e.neg(h),h,p),u=e.div(u,s),{x:u,y:h}}}(Ge,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Ge.create(BigInt("-11"))});!function(e,t,n){if("function"!=typeof t)throw new Error("mapToCurve() must be defined")}(Ve.ProjectivePoint,(e=>{const{x:t,y:n}=ft(Ge.create(e[0]));return dt(t,n)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Ge.ORDER,m:1,k:128,expand:"xmd",hash:D});const pt="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,gt=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),mt=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const yt=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function bt(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=yt[e[n]];return t}function vt(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n,o=e.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[n]=i}return t}function wt(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}class kt{clone(){return this._cloneInto()}}function xt(e){const t=t=>e().update(wt(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Et(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function _t(e){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}const Nt={number:Et,bool:function(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:_t,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Et(e.outputLen),Et(e.blockLen)},exists:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){_t(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}};class St extends kt{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=gt(this.buffer)}update(e){Nt.exists(this);const{view:t,buffer:n,blockLen:r}=this,o=(e=wt(e)).length;for(let i=0;i<o;){const a=Math.min(r-this.pos,o-i);if(a!==r)n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=gt(e);for(;r<=o-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Nt.exists(this),Nt.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:o}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let u=i;u<r;u++)t[u]=0;(function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),a=Number(n>>o&i),s=Number(n&i),l=r?4:0,c=r?0:4;e.setUint32(t+l,a,r),e.setUint32(t+c,s,r)})(n,r-8,BigInt(8*this.length),o),this.process(n,0);const a=gt(e),s=this.outputLen;if(s%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=s/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)a.setUint32(4*u,c[u],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:o,destroyed:i,pos:a}=this;return e.length=r,e.pos=a,e.finished=o,e.destroyed=i,r%t&&e.buffer.set(n),e}}const Ct=(e,t,n)=>e&t^~e&n,At=(e,t,n)=>e&t^e&n^t&n,Rt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Tt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Bt=new Uint32Array(64);class jt extends St{constructor(){super(64,32,8,!1),this.A=0|Tt[0],this.B=0|Tt[1],this.C=0|Tt[2],this.D=0|Tt[3],this.E=0|Tt[4],this.F=0|Tt[5],this.G=0|Tt[6],this.H=0|Tt[7]}get(){const{A:e,B:t,C:n,D:r,E:o,F:i,G:a,H:s}=this;return[e,t,n,r,o,i,a,s]}set(e,t,n,r,o,i,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|a,this.H=0|s}process(e,t){for(let u=0;u<16;u++,t+=4)Bt[u]=e.getUint32(t,!1);for(let u=16;u<64;u++){const e=Bt[u-15],t=Bt[u-2],n=mt(e,7)^mt(e,18)^e>>>3,r=mt(t,17)^mt(t,19)^t>>>10;Bt[u]=r+Bt[u-7]+n+Bt[u-16]|0}let{A:n,B:r,C:o,D:i,E:a,F:s,G:l,H:c}=this;for(let u=0;u<64;u++){const e=c+(mt(a,6)^mt(a,11)^mt(a,25))+Ct(a,s,l)+Rt[u]+Bt[u]|0,t=(mt(n,2)^mt(n,13)^mt(n,22))+At(n,r,o)|0;c=l,l=s,s=a,a=i+e|0,i=o,o=r,r=n,n=e+t|0}n=n+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,s=s+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,r,o,i,a,s,l,c)}roundClean(){Bt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Ot extends jt{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const It=xt((()=>new jt));function Pt(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function Lt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=(e,t)=>n=>e(t(n));return{encode:Array.from(t).reverse().reduce(((e,t)=>e?r(e,t.encode):t.encode),void 0),decode:t.reduce(((e,t)=>e?r(e,t.decode):t.decode),void 0)}}function zt(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(Pt(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function Ut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function Mt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=";if(Pt(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function Ft(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function Dt(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],i=Array.from(e);for(i.forEach((e=>{if(Pt(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,a=!0;for(let o=r;o<i.length;o++){const s=i[o],l=t*e+s;if(!Number.isSafeInteger(l)||t*e/t!==e||l-s!==t*e)throw new Error("convertRadix: carry overflow");if(e=l%n,i[o]=Math.floor(l/n),!Number.isSafeInteger(i[o])||i[o]*n+e!==l)throw new Error("convertRadix: carry overflow");a&&(i[o]?a=!1:r=o)}if(o.push(e),a)break}for(let a=0;a<e.length-1&&0===e[a];a++)o.push(0);return o.reverse()}xt((()=>new Ot));const qt=(e,t)=>t?qt(t,e%t):e,Ht=(e,t)=>e+(t-qt(e,t));function Wt(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Ht(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Ht(t,n)}`);let o=0,i=0;const a=2**n-1,s=[];for(const l of e){if(Pt(l),l>=2**t)throw new Error(`convertRadix2: invalid data word=${l} from=${t}`);if(o=o<<t|l,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)s.push((o>>i-n&a)>>>0);o&=2**i-1}if(o=o<<n-i&a,!r&&i>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&s.push(o>>>0),s}function $t(e){return Pt(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Dt(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Dt(t,e,256))}}}function Kt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Pt(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Ht(8,e)>32||Ht(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Wt(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Wt(n,e,8,t))}}}function Qt(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(null,n)}catch{}}}function Gt(e,t){if(Pt(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),o=new Uint8Array(n.length+e);return o.set(n),o.set(r,n.length),o},decode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),o=t(r).slice(0,e),i=n.slice(-e);for(let t=0;t<e;t++)if(o[t]!==i[t])throw new Error("Invalid checksum");return r}}}const Vt={alphabet:zt,chain:Lt,checksum:Gt,radix:$t,radix2:Kt,join:Ut,padding:Mt},Zt=Lt(Kt(4),zt("0123456789ABCDEF"),Ut("")),Yt=Lt(Kt(5),zt("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Mt(5),Ut("")),Jt=Lt(Kt(5),zt("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Mt(5),Ut("")),Xt=Lt(Kt(5),zt("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Ut(""),Ft((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),en=Lt(Kt(6),zt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Mt(6),Ut("")),tn=Lt(Kt(6),zt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Mt(6),Ut("")),nn=e=>Lt($t(58),zt(e),Ut("")),rn=nn("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),on=nn("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),an=nn("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),sn=[0,2,3,5,6,7,9,10,11],ln={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=rn.encode(r).padStart(sn[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),o=sn.indexOf(r.length),i=rn.decode(r);for(let e=0;e<i.length-o;e++)if(0!==i[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-o)))}return Uint8Array.from(t)}},cn=e=>Lt(Gt(4,(t=>e(e(t)))),rn),un=Lt(zt("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Ut("")),hn=[996825010,642813549,513874426,1027748829,705979059];function dn(e){const t=e>>25;let n=(33554431&e)<<5;for(let r=0;r<hn.length;r++)1===(t>>r&1)&&(n^=hn[r]);return n}function fn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=e.length;let o=1;for(let i=0;i<r;i++){const t=e.charCodeAt(i);if(t<33||t>126)throw new Error(`Invalid prefix (${e})`);o=dn(o)^t>>5}o=dn(o);for(let i=0;i<r;i++)o=dn(o)^31&e.charCodeAt(i);for(let i of t)o=dn(o)^i;for(let i=0;i<6;i++)o=dn(o);return o^=n,un.encode(Wt([o%2**30],30,5,!1))}function pn(e){const t="bech32"===e?1:734539939,n=Kt(5),r=n.decode,o=n.encode,i=Qt(r);function a(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==n&&e.length>n)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${n})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const o=(e=r).lastIndexOf("1");if(0===o||-1===o)throw new Error('Letter "1" must be present between prefix and data only');const i=e.slice(0,o),a=e.slice(o+1);if(a.length<6)throw new Error("Data must be at least 6 characters long");const s=un.decode(a).slice(0,-6),l=fn(i,s,t);if(!a.endsWith(l))throw new Error(`Invalid checksum in ${e}: expected "${l}"`);return{prefix:i,words:s}}return{encode:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:90;if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const o=e.length+7+n.length;if(!1!==r&&o>r)throw new TypeError(`Length ${o} exceeds limit ${r}`);return`${e=e.toLowerCase()}1${un.encode(n)}${fn(e,n,t)}`},decode:a,decodeToBytes:function(e){const{prefix:t,words:n}=a(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:Qt(a),fromWords:r,fromWordsUnsafe:i,toWords:o}}const gn=pn("bech32"),mn=pn("bech32m"),yn={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},bn=Lt(Kt(4),zt("0123456789abcdef"),Ut(""),Ft((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}))),vn={utf8:yn,hex:bn,base16:Zt,base32:Yt,base64:en,base64url:tn,base58:rn,base58xmr:ln},wn=`Invalid encoding type. Available types: ${Object.keys(vn).join(", ")}`,kn=(e,t)=>{if("string"!=typeof e||!vn.hasOwnProperty(e))throw new TypeError(wn);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return vn[e].encode(t)},xn=kn,En=(e,t)=>{if(!vn.hasOwnProperty(e))throw new TypeError(wn);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return vn[e].decode(t)},_n=En,Nn=Object.freeze(Object.defineProperty({__proto__:null,assertNumber:Pt,utils:Vt,base16:Zt,base32:Yt,base32hex:Jt,base32crockford:Xt,base64:en,base64url:tn,base58:rn,base58flickr:on,base58xrp:an,base58xmr:ln,base58check:cn,bech32:gn,bech32m:mn,utf8:yn,hex:bn,bytesToString:kn,str:xn,stringToBytes:En,bytes:_n},Symbol.toStringTag,{value:"Module"}));var Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});var Cn=Sn.wordlist=void 0;Cn=Sn.wordlist="abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n");var An={};function Rn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Tn(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function Bn(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}function jn(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Rn(e.outputLen),Rn(e.blockLen)}function On(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function In(e,t){Bn(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Pn={number:Rn,bool:Tn,bytes:Bn,hash:jn,exists:On,output:In},Ln=p(Object.freeze(Object.defineProperty({__proto__:null,number:Rn,bool:Tn,bytes:Bn,hash:jn,exists:On,output:In,default:Pn},Symbol.toStringTag,{value:"Module"})));var zn={},Un={};function Mn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Fn(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function Dn(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}function qn(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Mn(e.outputLen),Mn(e.blockLen)}function Hn(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Wn(e,t){Dn(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(Un,"__esModule",{value:!0}),Un.output=Un.exists=Un.hash=Un.bytes=Un.bool=Un.number=void 0,Un.number=Mn,Un.bool=Fn,Un.bytes=Dn,Un.hash=qn,Un.exists=Hn,Un.output=Wn;const $n={number:Mn,bool:Fn,bytes:Dn,hash:qn,exists:Hn,output:Wn};Un.default=$n;var Kn={},Qn={};const Gn="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Vn=p(Object.freeze(Object.defineProperty({__proto__:null,crypto:Gn},Symbol.toStringTag,{value:"Module"})));!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=Vn,n=e=>e instanceof Uint8Array;e.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);e.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));e.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(e.rotr=(e,t)=>e<<32-t|e>>>t,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!e.isLE)throw new Error("Non little-endian hardware is not supported");const r=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));e.bytesToHex=function(e){if(!n(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=r[e[n]];return t},e.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const t=2*r,o=e.slice(t,t+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[r]=i}return n};function o(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function i(e){if("string"==typeof e&&(e=o(e)),!n(e))throw new Error("expected Uint8Array, got "+typeof e);return e}e.nextTick=async()=>{},e.asyncLoop=async function(t,n,r){let o=Date.now();for(let i=0;i<t;i++){r(i);const t=Date.now()-o;t>=0&&t<n||(await(0,e.nextTick)(),o+=t)}},e.utf8ToBytes=o,e.toBytes=i,e.concatBytes=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const o=new Uint8Array(t.reduce(((e,t)=>e+t.length),0));let i=0;return t.forEach((e=>{if(!n(e))throw new Error("Uint8Array expected");o.set(e,i),i+=e.length})),o};e.Hash=class{clone(){return this._cloneInto()}};e.checkOpts=function(e,t){if(void 0!==t&&("object"!=typeof t||!(e=>"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object)(t)))throw new Error("Options should be object or undefined");return Object.assign(e,t)},e.wrapConstructor=function(e){const t=t=>e().update(i(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},e.wrapConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(i(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.wrapXOFConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(i(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.randomBytes=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(t.crypto&&"function"==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}}(Qn),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;const t=Un,n=Qn;class r extends n.Hash{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,t.default.hash(e);const o=(0,n.toBytes)(r);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,a=new Uint8Array(i);a.set(o.length>i?e.create().update(o).digest():o);for(let t=0;t<a.length;t++)a[t]^=54;this.iHash.update(a),this.oHash=e.create();for(let t=0;t<a.length;t++)a[t]^=106;this.oHash.update(a),a.fill(0)}update(e){return t.default.exists(this),this.iHash.update(e),this}digestInto(e){t.default.exists(this),t.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:a}=this;return e.finished=r,e.destroyed=o,e.blockLen=i,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.HMAC=r;e.hmac=(e,t,n)=>new r(e,t).update(n).digest(),e.hmac.create=(e,t)=>new r(e,t)}(Kn),Object.defineProperty(zn,"__esModule",{value:!0}),zn.pbkdf2Async=zn.pbkdf2=void 0;const Zn=Un,Yn=Kn,Jn=Qn;function Xn(e,t,n,r){Zn.default.hash(e);const o=(0,Jn.checkOpts)({dkLen:32,asyncTick:10},r),{c:i,dkLen:a,asyncTick:s}=o;if(Zn.default.number(i),Zn.default.number(a),Zn.default.number(s),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=(0,Jn.toBytes)(t),c=(0,Jn.toBytes)(n),u=new Uint8Array(a),h=Yn.hmac.create(e,l),d=h._cloneInto().update(c);return{c:i,dkLen:a,asyncTick:s,DK:u,PRF:h,PRFSalt:d}}function er(e,t,n,r,o){return e.destroy(),t.destroy(),r&&r.destroy(),o.fill(0),n}zn.pbkdf2=function(e,t,n,r){const{c:o,dkLen:i,DK:a,PRF:s,PRFSalt:l}=Xn(e,t,n,r);let c;const u=new Uint8Array(4),h=(0,Jn.createView)(u),d=new Uint8Array(s.outputLen);for(let f=1,p=0;p<i;f++,p+=s.outputLen){const e=a.subarray(p,p+s.outputLen);h.setInt32(0,f,!1),(c=l._cloneInto(c)).update(u).digestInto(d),e.set(d.subarray(0,e.length));for(let t=1;t<o;t++){s._cloneInto(c).update(d).digestInto(d);for(let t=0;t<e.length;t++)e[t]^=d[t]}}return er(s,l,a,c,d)},zn.pbkdf2Async=async function(e,t,n,r){const{c:o,dkLen:i,asyncTick:a,DK:s,PRF:l,PRFSalt:c}=Xn(e,t,n,r);let u;const h=new Uint8Array(4),d=(0,Jn.createView)(h),f=new Uint8Array(l.outputLen);for(let p=1,g=0;g<i;p++,g+=l.outputLen){const e=s.subarray(g,g+l.outputLen);d.setInt32(0,p,!1),(u=c._cloneInto(u)).update(h).digestInto(f),e.set(f.subarray(0,e.length)),await(0,Jn.asyncLoop)(o-1,a,(t=>{l._cloneInto(u).update(f).digestInto(f);for(let n=0;n<e.length;n++)e[n]^=f[n]}))}return er(l,c,s,u,f)};const tr=e=>e instanceof Uint8Array,nr=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),rr=(e,t)=>e<<32-t|e>>>t,or=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];if(!or)throw new Error("Non little-endian hardware is not supported");const ir=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function ar(e){if(!tr(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=ir[e[n]];return t}function sr(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const t=2*r,o=e.slice(t,t+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[r]=i}return n}const lr=async()=>{};function cr(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function ur(e){if("string"==typeof e&&(e=cr(e)),!tr(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function hr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new Uint8Array(t.reduce(((e,t)=>e+t.length),0));let o=0;return t.forEach((e=>{if(!tr(e))throw new Error("Uint8Array expected");r.set(e,o),o+=e.length})),r}class dr{clone(){return this._cloneInto()}}function fr(e){const t=t=>e().update(ur(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}const pr=Object.freeze(Object.defineProperty({__proto__:null,u8:e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),u32:e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),createView:nr,rotr:rr,isLE:or,bytesToHex:ar,hexToBytes:sr,nextTick:lr,asyncLoop:async function(e,t,n){let r=Date.now();for(let o=0;o<e;o++){n(o);const e=Date.now()-r;e>=0&&e<t||(await lr(),r+=e)}},utf8ToBytes:cr,toBytes:ur,concatBytes:hr,Hash:dr,checkOpts:function(e,t){if(void 0!==t&&("object"!=typeof t||!(e=>"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object)(t)))throw new Error("Options should be object or undefined");return Object.assign(e,t)},wrapConstructor:fr,wrapConstructorWithOpts:function(e){const t=(t,n)=>e(n).update(ur(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},wrapXOFConstructorWithOpts:function(e){const t=(t,n)=>e(n).update(ur(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},randomBytes:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(Gn&&"function"==typeof Gn.getRandomValues)return Gn.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}},Symbol.toStringTag,{value:"Module"}));class gr extends dr{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=nr(this.buffer)}update(e){Pn.exists(this);const{view:t,buffer:n,blockLen:r}=this,o=(e=ur(e)).length;for(let i=0;i<o;){const a=Math.min(r-this.pos,o-i);if(a!==r)n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=nr(e);for(;r<=o-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Pn.exists(this),Pn.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:o}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let u=i;u<r;u++)t[u]=0;(function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),a=Number(n>>o&i),s=Number(n&i),l=r?4:0,c=r?0:4;e.setUint32(t+l,a,r),e.setUint32(t+c,s,r)})(n,r-8,BigInt(8*this.length),o),this.process(n,0);const a=nr(e),s=this.outputLen;if(s%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=s/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)a.setUint32(4*u,c[u],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:o,destroyed:i,pos:a}=this;return e.length=r,e.pos=a,e.finished=o,e.destroyed=i,r%t&&e.buffer.set(n),e}}const mr=(e,t,n)=>e&t^~e&n,yr=(e,t,n)=>e&t^e&n^t&n,br=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),vr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wr=new Uint32Array(64);class kr extends gr{constructor(){super(64,32,8,!1),this.A=0|vr[0],this.B=0|vr[1],this.C=0|vr[2],this.D=0|vr[3],this.E=0|vr[4],this.F=0|vr[5],this.G=0|vr[6],this.H=0|vr[7]}get(){const{A:e,B:t,C:n,D:r,E:o,F:i,G:a,H:s}=this;return[e,t,n,r,o,i,a,s]}set(e,t,n,r,o,i,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|a,this.H=0|s}process(e,t){for(let u=0;u<16;u++,t+=4)wr[u]=e.getUint32(t,!1);for(let u=16;u<64;u++){const e=wr[u-15],t=wr[u-2],n=rr(e,7)^rr(e,18)^e>>>3,r=rr(t,17)^rr(t,19)^t>>>10;wr[u]=r+wr[u-7]+n+wr[u-16]|0}let{A:n,B:r,C:o,D:i,E:a,F:s,G:l,H:c}=this;for(let u=0;u<64;u++){const e=c+(rr(a,6)^rr(a,11)^rr(a,25))+mr(a,s,l)+br[u]+wr[u]|0,t=(rr(n,2)^rr(n,13)^rr(n,22))+yr(n,r,o)|0;c=l,l=s,s=a,a=i+e|0,i=o,o=r,r=n,n=e+t|0}n=n+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,s=s+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,r,o,i,a,s,l,c)}roundClean(){wr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class xr extends kr{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Er=fr((()=>new kr)),_r=fr((()=>new xr)),Nr=p(Object.freeze(Object.defineProperty({__proto__:null,sha256:Er,sha224:_r},Symbol.toStringTag,{value:"Module"}))),Sr=BigInt(2**32-1),Cr=BigInt(32);function Ar(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&Sr),l:Number(e>>Cr&Sr)}:{h:0|Number(e>>Cr&Sr),l:0|Number(e&Sr)}}const Rr={fromBig:Ar,split:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:i,l:a}=Ar(e[o],t);[n[o],r[o]]=[i,a]}return[n,r]},toBig:(e,t)=>BigInt(e>>>0)<<Cr|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,n)=>e<<n|t>>>32-n,rotlSL:(e,t,n)=>t<<n|e>>>32-n,rotlBH:(e,t,n)=>t<<n-32|e>>>64-n,rotlBL:(e,t,n)=>e<<n-32|t>>>64-n,add:function(e,t,n,r){const o=(t>>>0)+(r>>>0);return{h:e+n+(o/2**32|0)|0,l:0|o}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,o)=>t+n+r+o+(e/2**32|0)|0,add5H:(e,t,n,r,o,i)=>t+n+r+o+i+(e/2**32|0)|0,add5L:(e,t,n,r,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(o>>>0)},[Tr,Br]=Rr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),jr=new Uint32Array(80),Or=new Uint32Array(80);class Ir extends gr{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:o,Cl:i,Dh:a,Dl:s,Eh:l,El:c,Fh:u,Fl:h,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[e,t,n,r,o,i,a,s,l,c,u,h,d,f,p,g]}set(e,t,n,r,o,i,a,s,l,c,u,h,d,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|o,this.Cl=0|i,this.Dh=0|a,this.Dl=0|s,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let b=0;b<16;b++,t+=4)jr[b]=e.getUint32(t),Or[b]=e.getUint32(t+=4);for(let b=16;b<80;b++){const e=0|jr[b-15],t=0|Or[b-15],n=Rr.rotrSH(e,t,1)^Rr.rotrSH(e,t,8)^Rr.shrSH(e,t,7),r=Rr.rotrSL(e,t,1)^Rr.rotrSL(e,t,8)^Rr.shrSL(e,t,7),o=0|jr[b-2],i=0|Or[b-2],a=Rr.rotrSH(o,i,19)^Rr.rotrBH(o,i,61)^Rr.shrSH(o,i,6),s=Rr.rotrSL(o,i,19)^Rr.rotrBL(o,i,61)^Rr.shrSL(o,i,6),l=Rr.add4L(r,s,Or[b-7],Or[b-16]),c=Rr.add4H(l,n,a,jr[b-7],jr[b-16]);jr[b]=0|c,Or[b]=0|l}let{Ah:n,Al:r,Bh:o,Bl:i,Ch:a,Cl:s,Dh:l,Dl:c,Eh:u,El:h,Fh:d,Fl:f,Gh:p,Gl:g,Hh:m,Hl:y}=this;for(let b=0;b<80;b++){const e=Rr.rotrSH(u,h,14)^Rr.rotrSH(u,h,18)^Rr.rotrBH(u,h,41),t=Rr.rotrSL(u,h,14)^Rr.rotrSL(u,h,18)^Rr.rotrBL(u,h,41),v=u&d^~u&p,w=h&f^~h&g,k=Rr.add5L(y,t,w,Br[b],Or[b]),x=Rr.add5H(k,m,e,v,Tr[b],jr[b]),E=0|k,_=Rr.rotrSH(n,r,28)^Rr.rotrBH(n,r,34)^Rr.rotrBH(n,r,39),N=Rr.rotrSL(n,r,28)^Rr.rotrBL(n,r,34)^Rr.rotrBL(n,r,39),S=n&o^n&a^o&a,C=r&i^r&s^i&s;m=0|p,y=0|g,p=0|d,g=0|f,d=0|u,f=0|h,({h:u,l:h}=Rr.add(0|l,0|c,0|x,0|E)),l=0|a,c=0|s,a=0|o,s=0|i,o=0|n,i=0|r;const A=Rr.add3L(E,N,C);n=Rr.add3H(A,x,_,S),r=0|A}({h:n,l:r}=Rr.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:o,l:i}=Rr.add(0|this.Bh,0|this.Bl,0|o,0|i)),({h:a,l:s}=Rr.add(0|this.Ch,0|this.Cl,0|a,0|s)),({h:l,l:c}=Rr.add(0|this.Dh,0|this.Dl,0|l,0|c)),({h:u,l:h}=Rr.add(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:f}=Rr.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=Rr.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:y}=Rr.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(n,r,o,i,a,s,l,c,u,h,d,f,p,g,m,y)}roundClean(){jr.fill(0),Or.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Pr extends Ir{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Lr extends Ir{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class zr extends Ir{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Ur=fr((()=>new Ir)),Mr=fr((()=>new Pr)),Fr=fr((()=>new Lr)),Dr=fr((()=>new zr)),qr=p(Object.freeze(Object.defineProperty({__proto__:null,SHA512:Ir,sha512:Ur,sha512_224:Mr,sha512_256:Fr,sha384:Dr},Symbol.toStringTag,{value:"Module"}))),Hr=p(pr),Wr=p(Nn);Object.defineProperty(An,"__esModule",{value:!0});var $r=An.mnemonicToSeedSync=An.mnemonicToSeed=so=An.validateMnemonic=An.entropyToMnemonic=An.mnemonicToEntropy=no=An.generateMnemonic=void 0;const Kr=Ln,Qr=zn,Gr=Nr,Vr=qr,Zr=Hr,Yr=Wr,Jr=e=>"\u3042\u3044\u3053\u304f\u3057\u3093"===e[0];function Xr(e){if("string"!=typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function eo(e){const t=Xr(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function to(e){Kr.default.bytes(e,16,20,24,28,32)}var no=An.generateMnemonic=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128;if(Kr.default.number(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return ao((0,Zr.randomBytes)(t/8),e)};const ro=e=>{const t=8-e.length/4;return new Uint8Array([(0,Gr.sha256)(e)[0]>>t<<t])};function oo(e){if(!Array.isArray(e)||2048!==e.length||"string"!=typeof e[0])throw new Error("Worlist: expected array of 2048 strings");return e.forEach((e=>{if("string"!=typeof e)throw new Error(`Wordlist: non-string element: ${e}`)})),Yr.utils.chain(Yr.utils.checksum(1,ro),Yr.utils.radix2(11,!0),Yr.utils.alphabet(e))}function io(e,t){const{words:n}=eo(e),r=oo(t).decode(n);return to(r),r}function ao(e,t){return to(e),oo(t).encode(e).join(Jr(t)?"\u3000":" ")}An.mnemonicToEntropy=io,An.entropyToMnemonic=ao;var so=An.validateMnemonic=function(e,t){try{io(e,t)}catch{return!1}return!0};const lo=e=>Xr(`mnemonic${e}`);An.mnemonicToSeed=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,Qr.pbkdf2Async)(Vr.sha512,eo(e).nfkd,lo(t),{c:2048,dkLen:64})},$r=An.mnemonicToSeedSync=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,Qr.pbkdf2)(Vr.sha512,eo(e).nfkd,lo(t),{c:2048,dkLen:64})};class co extends dr{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Pn.hash(e);const n=ur(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(n.length>r?e.create().update(n).digest():n);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(e){return Pn.exists(this),this.iHash.update(e),this}digestInto(e){Pn.exists(this),Pn.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:a}=this;return e.finished=r,e.destroyed=o,e.blockLen=i,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const uo=(e,t,n)=>new co(e,t).update(n).digest();uo.create=(e,t)=>new co(e,t);const ho=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),fo=Uint8Array.from({length:16},((e,t)=>t)),po=fo.map((e=>(9*e+5)%16));let go=[fo],mo=[po];for(let $R=0;$R<4;$R++)for(let e of[go,mo])e.push(e[$R].map((e=>ho[e])));const yo=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),bo=go.map(((e,t)=>e.map((e=>yo[t][e])))),vo=mo.map(((e,t)=>e.map((e=>yo[t][e])))),wo=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),ko=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),xo=(e,t)=>e<<t|e>>>32-t;function Eo(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const _o=new Uint32Array(16);class No extends gr{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:o}=this;return[e,t,n,r,o]}set(e,t,n,r,o){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|o}process(e,t){for(let d=0;d<16;d++,t+=4)_o[d]=e.getUint32(t,!0);let n=0|this.h0,r=n,o=0|this.h1,i=o,a=0|this.h2,s=a,l=0|this.h3,c=l,u=0|this.h4,h=u;for(let d=0;d<5;d++){const e=4-d,t=wo[d],f=ko[d],p=go[d],g=mo[d],m=bo[d],y=vo[d];for(let r=0;r<16;r++){const e=xo(n+Eo(d,o,a,l)+_o[p[r]]+t,m[r])+u|0;n=u,u=l,l=0|xo(a,10),a=o,o=e}for(let n=0;n<16;n++){const t=xo(r+Eo(e,i,s,c)+_o[g[n]]+f,y[n])+h|0;r=h,h=c,c=0|xo(s,10),s=i,i=t}}this.set(this.h1+a+c|0,this.h2+l+h|0,this.h3+u+r|0,this.h4+n+i|0,this.h0+o+s|0)}roundClean(){_o.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const So=fr((()=>new No)),Co=Ve.ProjectivePoint,Ao=cn(Er);function Ro(e){return BigInt(`0x${ar(e)}`)}const To=cr("Bitcoin seed"),Bo={private:76066276,public:76067358},jo=2147483648,Oo=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const t=new Uint8Array(4);return nr(t).setUint32(0,e,!1),t};class Io{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return(e=>nr(e).getUint32(0,!1))(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return Ao.encode(this.serialize(this.versions.private,hr(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return Ao.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bo;if(Bn(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=uo(Ur,To,e);return new Io({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bo;const n=Ao.decode(e),r=nr(n),o=r.getUint32(0,!1),i={versions:t,depth:n[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),s=0===a[0];if(o!==t[s?"private":"public"])throw new Error("Version mismatch");return new Io(s?{...i,privateKey:a.slice(1)}:{...i,publicKey:a})}static fromJSON(e){return Io.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||Bo,this.depth=e.depth||0,this.chainCode=e.chainCode,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!Ve.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:Ro(e.privateKey),this.privKeyBytes=function(e){return sr(e.toString(16).padStart(64,"0"))}(this.privKey),this.pubKey=Ve.getPublicKey(e.privateKey,!0)}else{if(!e.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=Co.fromHex(e.publicKey).toRawBytes(!0)}this.pubHash=(e=>So(Er(e)))(this.pubKey)}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const t=e.replace(/^[mM]'?\//,"").split("/");let n=this;for(const r of t){const e=/^(\d+)('?)$/.exec(r);if(!e||3!==e.length)throw new Error(`Invalid child index: ${r}`);let t=+e[1];if(!Number.isSafeInteger(t)||t>=jo)throw new Error("Invalid index");"'"===e[2]&&(t+=jo),n=n.deriveChild(t)}return n}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=Oo(e);if(e>=jo){const e=this.privateKey;if(!e)throw new Error("Could not derive hardened child key");t=hr(new Uint8Array([0]),e,t)}else t=hr(this.pubKey,t);const n=uo(Ur,this.chainCode,t),r=Ro(n.slice(0,32)),o=n.slice(32);if(!Ve.utils.isValidPrivateKey(r))throw new Error("Tweak bigger than curve order");const i={versions:this.versions,chainCode:o,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const e=be(this.privKey+r,Ve.CURVE.n);if(!Ve.utils.isValidPrivateKey(e))throw new Error("The tweak was out of range or the resulted private key is invalid");i.privateKey=e}else{const e=Co.fromHex(this.pubKey).add(Co.fromPrivateKey(r));if(e.equals(Co.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");i.publicKey=e.toRawBytes(!0)}return new Io(i)}catch{return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return Bn(e,32),Ve.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){if(Bn(e,32),Bn(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=Ve.Signature.fromCompact(t)}catch{return!1}return Ve.verify(n,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return Bn(t,33),hr(Oo(e),new Uint8Array([this.depth]),Oo(this.parentFingerprint),Oo(this.index),this.chainCode,t)}}var Po=Object.defineProperty,Lo=(e,t)=>{for(var n in t)Po(e,n,{get:t[n],enumerable:!0})};function zo(e){return bt(ht.getPublicKey(e))}Lo({},{MessageNode:()=>Ho,MessageQueue:()=>Wo,insertEventIntoAscendingList:()=>qo,insertEventIntoDescendingList:()=>Do,normalizeURL:()=>Fo,utf8Decoder:()=>Uo,utf8Encoder:()=>Mo});var Uo=new TextDecoder("utf-8"),Mo=new TextEncoder;function Fo(e){let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),("80"===t.port&&"ws:"===t.protocol||"443"===t.port&&"wss:"===t.protocol)&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function Do(e,t){var n;let r,o=0,i=e.length-1,a=o;if(i<0)a=0;else if(t.created_at<e[i].created_at)a=i+1;else if(t.created_at>=e[o].created_at)a=o;else for(;;){if(i<=o+1){a=i;break}if(r=Math.floor(o+(i-o)/2),e[r].created_at>t.created_at)o=r;else{if(!(e[r].created_at<t.created_at)){a=r;break}i=r}}return(null==(n=e[a])?void 0:n.id)!==t.id?[...e.slice(0,a),t,...e.slice(a)]:e}function qo(e,t){var n;let r,o=0,i=e.length-1,a=o;if(i<0)a=0;else if(t.created_at>e[i].created_at)a=i+1;else if(t.created_at<=e[o].created_at)a=o;else for(;;){if(i<=o+1){a=i;break}if(r=Math.floor(o+(i-o)/2),e[r].created_at<t.created_at)o=r;else{if(!(e[r].created_at>t.created_at)){a=r;break}i=r}}return(null==(n=e[a])?void 0:n.id)!==t.id?[...e.slice(0,a),t,...e.slice(a)]:e}var Ho=class{constructor(e){d(this,"_value"),d(this,"_next"),this._value=e,this._next=null}get value(){return this._value}set value(e){this._value=e}get next(){return this._next}set next(e){this._next=e}},Wo=class{constructor(){d(this,"_first"),d(this,"_last"),d(this,"_size"),this._first=null,this._last=null,this._size=0}get first(){return this._first}set first(e){this._first=e}get last(){return this._last}set last(e){this._last=e}get size(){return this._size}set size(e){this._size=e}enqueue(e){const t=new Ho(e);return 0!==this._size&&this._last?(this._last.next=t,this._last=t):(this._first=t,this._last=t),this._size++,!0}dequeue(){if(0===this._size||!this._first)return null;let e=this._first;return this._first=e.next,e.next=null,this._size--,e.value}};function $o(e,t){let n=e;return n.pubkey=zo(t),n.id=Ko(n),n.sig=Zo(n,t),n}function Ko(e){let t=It(Mo.encode(function(e){if(!Go(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}(e)));return bt(t)}var Qo=e=>e instanceof Object;function Go(e){if(!Qo(e)||"number"!=typeof e.kind||"string"!=typeof e.content||"number"!=typeof e.created_at||"string"!=typeof e.pubkey||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let e=0;e<n.length;e++)if("object"==typeof n[e])return!1}return!0}function Vo(e){try{return ht.verify(e.sig,Ko(e),e.pubkey)}catch{return!1}}function Zo(e,t){return bt(ht.sign(Ko(e),t))}function Yo(e,t){if(e.ids&&-1===e.ids.indexOf(t.id)&&!e.ids.some((e=>t.id.startsWith(e)))||e.kinds&&-1===e.kinds.indexOf(t.kind)||e.authors&&-1===e.authors.indexOf(t.pubkey)&&!e.authors.some((e=>t.pubkey.startsWith(e))))return!1;for(let n in e)if("#"===n[0]){let r=e[`#${n.slice(1)}`];if(r&&!t.tags.find((e=>{let[t,o]=e;return t===n.slice(1)&&-1!==r.indexOf(o)})))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>=e.until)}function Jo(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function Xo(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,o=e.slice(r),i=Math.min(o.indexOf(","),o.indexOf("}"));return parseInt(o.slice(0,i),10)}function ei(e){let t=e.slice(0,22).indexOf('"EVENT"');if(-1===t)return null;let n=e.slice(t+7+1).indexOf('"');if(-1===n)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(-1===o)return null;let i=r+1+o;return e.slice(r+1,i)}function ti(e,t){return t===Jo(e,"id")}function ni(e,t){return t===Jo(e,"pubkey")}function ri(e,t){return t===Xo(e,"kind")}Lo({},{getHex64:()=>Jo,getInt:()=>Xo,getSubscriptionId:()=>ei,matchEventId:()=>ti,matchEventKind:()=>ri,matchEventPubkey:()=>ni});function oi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{listTimeout:n=3e3,getTimeout:r=3e3,countTimeout:o=3e3}=t;var i,a,s={},l={connect:[],disconnect:[],error:[],notice:[],auth:[]},c={},u={};async function h(){return a||(a=new Promise(((t,n)=>{try{i=new WebSocket(e)}catch(d){n(d)}i.onopen=()=>{l.connect.forEach((e=>e())),t()},i.onerror=()=>{a=void 0,l.error.forEach((e=>e())),n()},i.onclose=async()=>{a=void 0,l.disconnect.forEach((e=>e()))};let r,o=new Wo;function h(){var t,n,i;if(0===o.size)return clearInterval(r),void(r=null);var a=o.dequeue();if(!a)return;let h=ei(a);if(h){let t=s[h];if(t&&t.alreadyHaveEvent&&t.alreadyHaveEvent(Jo(a,"id"),e))return}try{let e=JSON.parse(a);switch(e[0]){case"EVENT":{let n=e[1],r=e[2];return void(Go(r)&&s[n]&&(s[n].skipVerification||Vo(r))&&function(e,t){for(let n=0;n<e.length;n++)if(Yo(e[n],t))return!0;return!1}(s[n].filters,r)&&(s[n],((null==(t=c[n])?void 0:t.event)||[]).forEach((e=>e(r)))))}case"COUNT":let r=e[1],o=e[2];return void(s[r]&&((null==(n=c[r])?void 0:n.count)||[]).forEach((e=>e(o))));case"EOSE":{let t=e[1];return void(t in c&&(c[t].eose.forEach((e=>e())),c[t].eose=[]))}case"OK":{let t=e[1],n=e[2],r=e[3]||"";return void(t in u&&(n?u[t].ok.forEach((e=>e())):u[t].failed.forEach((e=>e(r))),u[t].ok=[],u[t].failed=[]))}case"NOTICE":let a=e[1];return void l.notice.forEach((e=>e(a)));case"AUTH":{let t=e[1];return void(null==(i=l.auth)||i.forEach((e=>e(t))))}}}catch{return}}i.onmessage=e=>{o.enqueue(e.data),r||(r=setInterval(h,0))}})),a)}function d(){return 1===(null==i?void 0:i.readyState)}async function f(e){let t=JSON.stringify(e);if(d()||(await new Promise((e=>setTimeout(e,1e3))),d()))try{i.send(t)}catch(n){console.log(n)}}const p=function(e){let{verb:t="REQ",skipVerification:n=!1,alreadyHaveEvent:r=null,id:o=Math.random().toString().slice(2)}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o;return s[i]={id:i,filters:e,skipVerification:n,alreadyHaveEvent:r},f([t,i,...e]),{sub:function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(t||e,{skipVerification:o.skipVerification||n,alreadyHaveEvent:o.alreadyHaveEvent||r,id:i})},unsub:()=>{delete s[i],delete c[i],f(["CLOSE",i])},on:(e,t)=>{c[i]=c[i]||{event:[],count:[],eose:[]},c[i][e].push(t)},off:(e,t)=>{let n=c[i],r=n[e].indexOf(t);r>=0&&n[e].splice(r,1)}}};function g(e,t){if(!e.id)throw new Error(`event ${e} has no id`);let n=e.id;return f([t,e]),{on:(e,t)=>{u[n]=u[n]||{ok:[],failed:[]},u[n][e].push(t)},off:(e,t)=>{let r=u[n];if(!r)return;let o=r[e].indexOf(t);o>=0&&r[e].splice(o,1)}}}return{url:e,sub:p,on:(e,t)=>{l[e].push(t),"connect"===e&&1===(null==i?void 0:i.readyState)&&t()},off:(e,t)=>{let n=l[e].indexOf(t);-1!==n&&l[e].splice(n,1)},list:(e,t)=>new Promise((r=>{let o=p(e,t),i=[],a=setTimeout((()=>{o.unsub(),r(i)}),n);o.on("eose",(()=>{o.unsub(),clearTimeout(a),r(i)})),o.on("event",(e=>{i.push(e)}))})),get:(e,t)=>new Promise((n=>{let o=p([e],t),i=setTimeout((()=>{o.unsub(),n(null)}),r);o.on("event",(e=>{o.unsub(),clearTimeout(i),n(e)}))})),count:e=>new Promise((t=>{let n=p(e,{...p,verb:"COUNT"}),r=setTimeout((()=>{n.unsub(),t(null)}),o);n.on("count",(e=>{n.unsub(),clearTimeout(r),t(e)}))})),publish:e=>g(e,"EVENT"),auth:e=>g(e,"AUTH"),connect:async function(){d()||await h()},close(){l={connect:[],disconnect:[],error:[],notice:[],auth:[]},c={},u={},i.readyState===WebSocket.OPEN&&(null==i||i.close())},get status(){var e;return null!=(e=null==i?void 0:i.readyState)?e:3}}}var ii={};Lo(ii,{BECH32_REGEX:()=>si,decode:()=>li,naddrEncode:()=>mi,neventEncode:()=>gi,noteEncode:()=>di,nprofileEncode:()=>pi,npubEncode:()=>hi,nrelayEncode:()=>yi,nsecEncode:()=>ui});var ai=5e3,si=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function li(e){var t,n,r,o,i,a,s;let{prefix:l,words:c}=gn.decode(e,ai),u=new Uint8Array(gn.fromWords(c));switch(l){case"nprofile":{let e=ci(u);if(null==(t=e[0])||!t[0])throw new Error("missing TLV 0 for nprofile");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:bt(e[0][0]),relays:e[1]?e[1].map((e=>Uo.decode(e))):[]}}}case"nevent":{let e=ci(u);if(null==(n=e[0])||!n[0])throw new Error("missing TLV 0 for nevent");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(e[2]&&32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");return{type:"nevent",data:{id:bt(e[0][0]),relays:e[1]?e[1].map((e=>Uo.decode(e))):[],author:null!=(r=e[2])&&r[0]?bt(e[2][0]):void 0}}}case"naddr":{let e=ci(u);if(null==(o=e[0])||!o[0])throw new Error("missing TLV 0 for naddr");if(null==(i=e[2])||!i[0])throw new Error("missing TLV 2 for naddr");if(32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(null==(a=e[3])||!a[0])throw new Error("missing TLV 3 for naddr");if(4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Uo.decode(e[0][0]),pubkey:bt(e[2][0]),kind:parseInt(bt(e[3][0]),16),relays:e[1]?e[1].map((e=>Uo.decode(e))):[]}}}case"nrelay":{let e=ci(u);if(null==(s=e[0])||!s[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Uo.decode(e[0][0])}}case"nsec":case"npub":case"note":return{type:l,data:bt(u)};default:throw new Error(`unknown prefix ${l}`)}}function ci(e){let t={},n=e;for(;n.length>0;){let e=n[0],r=n[1];if(!r)throw new Error(`malformed TLV ${e}`);let o=n.slice(2,2+r);if(n=n.slice(2+r),o.length<r)throw new Error(`not enough data to read on TLV ${e}`);t[e]=t[e]||[],t[e].push(o)}return t}function ui(e){return fi("nsec",e)}function hi(e){return fi("npub",e)}function di(e){return fi("note",e)}function fi(e,t){let n=vt(t),r=gn.toWords(n);return gn.encode(e,r,ai)}function pi(e){let t=bi({0:[vt(e.pubkey)],1:(e.relays||[]).map((e=>Mo.encode(e)))}),n=gn.toWords(t);return gn.encode("nprofile",n,ai)}function gi(e){let t=bi({0:[vt(e.id)],1:(e.relays||[]).map((e=>Mo.encode(e))),2:e.author?[vt(e.author)]:[]}),n=gn.toWords(t);return gn.encode("nevent",n,ai)}function mi(e){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.kind,!1);let n=bi({0:[Mo.encode(e.identifier)],1:(e.relays||[]).map((e=>Mo.encode(e))),2:[vt(e.pubkey)],3:[new Uint8Array(t)]}),r=gn.toWords(n);return gn.encode("naddr",r,ai)}function yi(e){let t=bi({0:[Mo.encode(e)]}),n=gn.toWords(t);return gn.encode("nrelay",n,ai)}function bi(e){let t=[];return Object.entries(e).forEach((e=>{let[n,r]=e;r.forEach((e=>{let r=new Uint8Array(e.length+2);r.set([parseInt(n)],0),r.set([e.length],1),r.set(e,2),t.push(r)}))})),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const r=t.reduce(((e,t)=>e+t.length),0),o=new Uint8Array(r);for(let i=0,a=0;i<t.length;i++){const e=t[i];o.set(e,a),a+=e.length}return o}(...t)}var vi={};async function wi(e,t,n){const r=xi(Ve.getSharedSecret(e,"02"+t));let o=Uint8Array.from(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(pt&&"function"==typeof pt.getRandomValues)return pt.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}(16)),i=Mo.encode(n),a=await crypto.subtle.importKey("raw",r,{name:"AES-CBC"},!1,["encrypt"]),s=await crypto.subtle.encrypt({name:"AES-CBC",iv:o},a,i);return`${en.encode(new Uint8Array(s))}?iv=${en.encode(new Uint8Array(o.buffer))}`}async function ki(e,t,n){let[r,o]=n.split("?iv="),i=xi(Ve.getSharedSecret(e,"02"+t)),a=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),s=en.decode(r),l=en.decode(o),c=await crypto.subtle.decrypt({name:"AES-CBC",iv:l},a,s);return Uo.decode(c)}function xi(e){return e.slice(1,33)}Lo(vi,{decrypt:()=>ki,encrypt:()=>wi}),typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);var Ei={};Lo(Ei,{NIP05_REGEX:()=>Ni,queryProfile:()=>Ai,searchDomain:()=>Ci,useFetchImplementation:()=>Si});var _i,Ni=/^(?:([\w.+-]+)@)?([\w.-]+)$/;try{_i=fetch}catch{}function Si(e){_i=e}async function Ci(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return(await(await _i(`https://${e}/.well-known/nostr.json?name=${t}`)).json()).names}catch{return{}}}async function Ai(e){const t=e.match(Ni);if(!t)return null;const[n,r="_",o]=t;try{const e=await _i(`https://${o}/.well-known/nostr.json?name=${r}`),{names:t,relays:n}=function(e){const t={names:{}};for(const[n,r]of Object.entries(e.names))"string"==typeof n&&"string"==typeof r&&(t.names[n]=r);if(e.relays){t.relays={};for(const[n,r]of Object.entries(e.relays))"string"==typeof n&&Array.isArray(r)&&(t.relays[n]=r.filter((e=>"string"==typeof e)))}return t}(await e.json()),i=t[r];return i?{pubkey:i,relays:null==n?void 0:n[i]}:null}catch{return null}}function Ri(e,t){let n=Io.fromMasterSeed($r(e,t)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return bt(n)}function Ti(){return no(Cn)}function Bi(e){return so(e,Cn)}Lo({},{generateSeedWords:()=>Ti,privateKeyFromSeedWords:()=>Ri,validateWords:()=>Bi});function ji(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)"e"===r[0]&&r[1]&&n.push(r),"p"===r[0]&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){const e=n[r],[o,i,a,s]=e,l={id:i,relays:a?[a]:[]},c=0===r,u=r===n.length-1;"root"!==s?"reply"!==s?"mention"!==s?c?t.root=l:u?t.reply=l:t.mentions.push(l):t.mentions.push(l):t.reply=l:t.root=l}return t}Lo({},{parse:()=>ji});function Oi(e){return function(e){let t,n,r;for(n=0,t=0;n<e.length&&(r=Ii(e[n]),t+=r,8===r);n++);return t}(vt(e))}function Ii(e){let t=0;if(0===e)return 8;for(;e>>=1;)t++;return 7-t}Lo({},{getPow:()=>Oi});function Pi(e,t,n,r){var o;return $o({kind:6,tags:[...null!=(o=e.tags)?o:[],["e",t.id,n],["p",t.pubkey]],content:""===e.content?"":JSON.stringify(t),created_at:e.created_at},r)}function Li(e){if(6!==e.kind)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const o=e.tags[r];o.length>=2&&("e"===o[0]&&void 0===t?t=o:"p"===o[0]&&void 0===n&&(n=o))}return void 0!==t?{id:t[1],relays:[t[2],null==n?void 0:n[2]].filter((e=>"string"==typeof e)),author:null==n?void 0:n[1]}:void 0}function zi(e){let{skipVerification:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Li(e);if(void 0===n||""===e.content)return;let r;try{r=JSON.parse(e.content)}catch{return}return r.id===n.id&&(t||Vo(r))?r:void 0}Lo({},{finishRepostEvent:()=>Pi,getRepostedEvent:()=>zi,getRepostedEventPointer:()=>Li});Lo({},{NOSTR_URI_REGEX:()=>Ui,parse:()=>Fi,test:()=>Mi});var Ui=new RegExp(`nostr:(${si.source})`);function Mi(e){return"string"==typeof e&&new RegExp(`^${Ui.source}$`).test(e)}function Fi(e){const t=e.match(new RegExp(`^${Ui.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:li(t[1])}}function Di(e,t,n){var r,o;const i=t.tags.filter((e=>e.length>=2&&("e"===e[0]||"p"===e[0])));return $o({...e,kind:7,tags:[...null!=(r=e.tags)?r:[],...i,["e",t.id],["p",t.pubkey]],content:null!=(o=e.content)?o:"+"},n)}function qi(e){if(7!==e.kind)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const o=e.tags[r];o.length>=2&&("e"===o[0]&&void 0===t?t=o:"p"===o[0]&&void 0===n&&(n=o))}return void 0!==t&&void 0!==n?{id:t[1],relays:[t[2],n[2]].filter((e=>void 0!==e)),author:n[1]}:void 0}Lo({},{finishReactionEvent:()=>Di,getReactedEventPointer:()=>qi});function Hi(e,t){let n=[];(t.kind||-1)>=0&&n.push(`kind=${t.kind}`),t.until&&n.push(`created_at<${t.until}`),t.since&&n.push(`created_at>${t.since}`);let r=n.join("&");if(""===r)throw new Error("refusing to create a delegation without any conditions");let o=It(Mo.encode(`nostr:delegation:${t.pubkey}:${r}`)),i=bt(ht.sign(o,e));return{from:zo(e),to:t.pubkey,cond:r,sig:i}}function Wi(e){let t=e.tags.find((e=>"delegation"===e[0]&&e.length>=4));if(!t)return null;let n=t[1],r=t[2],o=t[3],i=r.split("&");for(let s=0;s<i.length;s++){let[t,n,r]=i[s].split(/\b/);if("kind"!==t||"="!==n||e.kind!==parseInt(r)){if("created_at"===t&&"<"===n&&e.created_at<parseInt(r))continue;if("created_at"===t&&">"===n&&e.created_at>parseInt(r))continue;return null}}let a=It(Mo.encode(`nostr:delegation:${e.pubkey}:${r}`));return ht.verify(o,a,n)?n:null}Lo({},{createDelegation:()=>Hi,getDelegator:()=>Wi});Lo({},{matchAll:()=>Ki,regex:()=>$i,replaceAll:()=>Qi});var $i=()=>new RegExp(`\\b${Ui.source}\\b`,"g");function*Ki(e){const t=e.matchAll($i());for(const n of t){const[e,t]=n;yield{uri:e,value:t,decoded:li(t),start:n.index,end:n.index+e.length}}}function Qi(e,t){return e.replaceAll($i(),((e,n)=>t({uri:e,value:n,decoded:li(n)})))}var Gi;Lo({},{useFetchImplementation:()=>Vi,validateGithub:()=>Zi});try{Gi=fetch}catch{}function Vi(e){Gi=e}async function Zi(e,t,n){try{return await(await Gi(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}Lo({},{authenticate:()=>Ji});var Yi,Ji=async e=>{let{challenge:t,relay:n,sign:r}=e;const o={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",n.url],["challenge",t]],content:""},i=n.auth(await r(o));return new Promise(((e,t)=>{i.on("ok",(function t(){i.off("ok",t),e()})),i.on("failed",(function e(n){i.off("failed",e),t(n)}))}))},Xi={};Lo(Xi,{getZapEndpoint:()=>ta,makeZapReceipt:()=>oa,makeZapRequest:()=>na,useFetchImplementation:()=>ea,validateZapRequest:()=>ra});try{Yi=fetch}catch{}function ea(e){Yi=e}async function ta(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:e}=gn.decode(n,1e3),r=gn.fromWords(e);t=Uo.decode(r)}else{if(!r)return null;{let[e,n]=r.split("@");t=`https://${n}/.well-known/lnurlp/${e}`}}let o=await(await Yi(t)).json();if(o.allowsNostr&&o.nostrPubkey)return o.callback}catch{}return null}function na(e){let{profile:t,event:n,amount:r,relays:o,comment:i=""}=e;if(!r)throw new Error("amount not given");if(!t)throw new Error("profile not given");let a={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t],["amount",r.toString()],["relays",...o]]};return n&&a.tags.push(["e",n]),a}function ra(e){let t;try{t=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!Go(t))return"Zap request is not a valid Nostr event.";if(!Vo(t))return"Invalid signature on zap request.";let n=t.tags.find((e=>{let[t,n]=e;return"p"===t&&n}));if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find((e=>{let[t,n]=e;return"e"===t&&n}));return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find((e=>{let[t,n]=e;return"relays"===t&&n}))?null:"Zap request doesn't have a 'relays' tag."}function oa(e){let{zapRequest:t,preimage:n,bolt11:r,paidAt:o}=e,i=JSON.parse(t).tags.filter((e=>{let[t]=e;return"e"===t||"p"===t||"a"===t})),a={kind:9735,created_at:Math.round(o.getTime()/1e3),content:"",tags:[...i,["bolt11",r],["description",t]]};return n&&a.tags.push(["preimage",n]),a}var ia={};Object.defineProperty(ia,"__esModule",{value:!0}),ia.is_node=void 0;var aa=null;ia.is_node=function(){return null===aa&&(aa="object"==typeof f&&"object"==typeof f.process&&"object"==typeof f.process.versions&&typeof f.process.versions.node<"u"),aa};var sa,la,ca={};const ua={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",contributors:["I\xf1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.34",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=4.0.0"},dependencies:{bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},devDependencies:{"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},config:{verbose:!1},scripts:{test:"tape test/unit/*.js",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"};var ha,da,fa,pa;function ga(){if(pa)return fa;var e;if(pa=1,"object"==typeof globalThis)e=globalThis;else try{e=function(){if(la)return sa;la=1;var e=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};return sa=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}}()}()}catch{}finally{if(!e&&typeof window<"u"&&(e=window),!e)throw new Error("Could not determine global this")}var t=e.WebSocket||e.MozWebSocket,n=(da||(da=1,ha=ua.version),ha);function r(e,n){return n?new t(e,n):new t(e)}return t&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(r,e,{get:function(){return t[e]}})})),fa={w3cwebsocket:t?r:null,version:n}}var ma,ya,ba={},va={},wa={},ka={},xa={},Ea={};function _a(){if(ya)return xa;ya=1;var e=f&&f.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(xa,"__esModule",{value:!0}),xa.Container=void 0;var t=function(){if(ma)return Ea;ma=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.ForOfAdaptor=void 0;var e=function(){function e(e,t){this.it_=e,this.last_=t}return e.prototype.next=function(){if(this.it_.equals(this.last_))return{done:!0,value:void 0};var e=this.it_;return this.it_=this.it_.next(),{done:!1,value:e.value}},e.prototype[Symbol.iterator]=function(){return this},e}();return Ea.ForOfAdaptor=e,Ea}(),n=function(){function n(){}return n.prototype.empty=function(){return 0===this.size()},n.prototype.rbegin=function(){return this.end().reverse()},n.prototype.rend=function(){return this.begin().reverse()},n.prototype[Symbol.iterator]=function(){return new t.ForOfAdaptor(this.begin(),this.end())},n.prototype.toJSON=function(){var t,n,r=[];try{for(var o=e(this),i=o.next();!i.done;i=o.next()){var a=i.value;r.push(a)}}catch(AS){t={error:AS}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},n}();return xa.Container=n,xa}var Na,Sa,Ca={};function Aa(){if(Na)return Ca;Na=1;var e=f&&f.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.NativeArrayIterator=void 0;var t=function(){function t(e,t){this.data_=e,this.index_=t}return t.prototype.index=function(){return this.index_},Object.defineProperty(t.prototype,"value",{get:function(){return this.data_[this.index_]},enumerable:!1,configurable:!0}),t.prototype.prev=function(){return--this.index_,this},t.prototype.next=function(){return++this.index_,this},t.prototype.advance=function(e){return this.index_+=e,this},t.prototype.equals=function(e){return this.data_===e.data_&&this.index_===e.index_},t.prototype.swap=function(t){var n,r;n=e([t.data_,this.data_],2),this.data_=n[0],t.data_=n[1],r=e([t.index_,this.index_],2),this.index_=r[0],t.index_=r[1]},t}();return Ca.NativeArrayIterator=t,Ca}var Ra,Ta,Ba,ja={},Oa={},Ia={},Pa={};function La(){if(Ta)return Ia;Ta=1;var e=f&&f.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.LogicError=void 0;var t=function(){if(Ra)return Pa;Ra=1;var e=f&&f.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.Exception=void 0;var t=function(t){function n(e){var n=this.constructor,r=t.call(this,e)||this,o=n.prototype;return Object.setPrototypeOf?Object.setPrototypeOf(r,o):r.__proto__=o,r}return e(n,t),Object.defineProperty(n.prototype,"name",{get:function(){return this.constructor.name},enumerable:!1,configurable:!0}),n.prototype.what=function(){return this.message},n.prototype.toJSON=function(){return{name:this.name,message:this.message,stack:this.stack}},n}(Error);return Pa.Exception=t,Pa}(),n=function(t){function n(e){return t.call(this,e)||this}return e(n,t),n}(t.Exception);return Ia.LogicError=n,Ia}function za(){if(Ba)return Oa;Ba=1;var e=f&&f.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.InvalidArgument=void 0;var t=function(t){function n(e){return t.call(this,e)||this}return e(n,t),n}(La().LogicError);return Oa.InvalidArgument=t,Oa}var Ua,Ma,Fa,Da={};function qa(){return Ma||(Ma=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorGenerator=void 0;var t=za(),n=function(){if(Ua)return Da;Ua=1;var e=f&&f.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Da,"__esModule",{value:!0}),Da.OutOfRange=void 0;var t=function(t){function n(e){return t.call(this,e)||this}return e(n,t),n}(La().LogicError);return Da.OutOfRange=t,Da}();!function(e){function r(e){if("string"==typeof e)return e;var t=e.constructor.name;return e.constructor.__MODULE&&(t="".concat(e.constructor.__MODULE,".").concat(t)),"std.".concat(t)}e.get_class_name=r,e.empty=function(e,t){return new n.OutOfRange("Error on ".concat(r(e),".").concat(t,"(): it's empty container."))},e.negative_index=function(e,t,o){return new n.OutOfRange("Error on ".concat(r(e),".").concat(t,"(): parametric index is negative -> (index = ").concat(o,")."))},e.excessive_index=function(e,t,o,i){return new n.OutOfRange("Error on ".concat(r(e),".").concat(t,"(): parametric index is equal or greater than size -> (index = ").concat(o,", size: ").concat(i,")."))},e.not_my_iterator=function(e,n){return new t.InvalidArgument("Error on ".concat(r(e),".").concat(n,"(): parametric iterator is not this container's own."))},e.erased_iterator=function(e,n){return new t.InvalidArgument("Error on ".concat(r(e),".").concat(n,"(): parametric iterator, it already has been erased."))},e.negative_iterator=function(e,t,o){return new n.OutOfRange("Error on ".concat(r(e),".").concat(t,"(): parametric iterator is directing negative position -> (index = ").concat(o,")."))},e.iterator_end_value=function(e,t){void 0===t&&(t="end");var o=r(e);return new n.OutOfRange("Error on ".concat(o,".Iterator.value: cannot access to the ").concat(o,".").concat(t,"().value."))},e.key_nout_found=function(e,t,o){throw new n.OutOfRange("Error on ".concat(r(e),".").concat(t,"(): unable to find the matched key -> ").concat(o))}}(e.ErrorGenerator||(e.ErrorGenerator={}))}(ja)),ja}function Ha(){if(Fa)return wa;Fa=1;var e=f&&f.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=f&&f.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},n=f&&f.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)(r||!(o in t))&&(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(wa,"__esModule",{value:!0}),wa.UniqueSet=void 0;var r=function(){if(Sa)return ka;Sa=1;var e=f&&f.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(ka,"__esModule",{value:!0}),ka.SetContainer=void 0;var t=_a(),n=Aa(),r=function(t){function r(e){var n=t.call(this)||this;return n.data_=e(n),n}return e(r,t),r.prototype.assign=function(e,t){this.clear(),this.insert(e,t)},r.prototype.clear=function(){this.data_.clear()},r.prototype.begin=function(){return this.data_.begin()},r.prototype.end=function(){return this.data_.end()},r.prototype.has=function(e){return!this.find(e).equals(this.end())},r.prototype.size=function(){return this.data_.size()},r.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return this.size();var r=new n.NativeArrayIterator(e,0),o=new n.NativeArrayIterator(e,e.length);return this._Insert_by_range(r,o),this.size()},r.prototype.insert=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length?this._Insert_by_key(e[0]):e[0].next instanceof Function&&e[1].next instanceof Function?this._Insert_by_range(e[0],e[1]):this._Insert_by_hint(e[0],e[1])},r.prototype.erase=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1!==e.length||e[0]instanceof this.end().constructor&&e[0].source()===this?1===e.length?this._Erase_by_range(e[0]):this._Erase_by_range(e[0],e[1]):this._Erase_by_val(e[0])},r.prototype._Erase_by_range=function(e,t){void 0===t&&(t=e.next());var n=this.data_.erase(e,t);return this._Handle_erase(e,t),n},r}(t.Container);return ka.SetContainer=r,ka}(),o=qa(),i=function(r){function i(){return null!==r&&r.apply(this,arguments)||this}return e(i,r),i.prototype.count=function(e){return this.find(e).equals(this.end())?0:1},i.prototype.insert=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return r.prototype.insert.apply(this,n([],t(e),!1))},i.prototype._Insert_by_range=function(e,t){for(;!e.equals(t);e=e.next())this._Insert_by_key(e.value)},i.prototype.extract=function(e){return e instanceof this.end().constructor?this._Extract_by_iterator(e):this._Extract_by_val(e)},i.prototype._Extract_by_val=function(e){var t=this.find(e);if(!0===t.equals(this.end()))throw o.ErrorGenerator.key_nout_found(this,"extract",e);return this._Erase_by_range(t),e},i.prototype._Extract_by_iterator=function(e){return!0===e.equals(this.end())||!1===this.has(e.value)?this.end():(this._Erase_by_range(e),e)},i.prototype._Erase_by_val=function(e){var t=this.find(e);return!0===t.equals(this.end())?0:(this._Erase_by_range(t),1)},i.prototype.merge=function(e){for(var t=e.begin();!t.equals(e.end());)!1===this.has(t.value)?(this.insert(t.value),t=e.erase(t)):t=t.next()},i}(r.SetContainer);return wa.UniqueSet=i,wa}var Wa,$a={},Ka={};var Qa,Ga,Va,Za={},Ya={},Ja={};function Xa(){if(Ga)return Ya;Ga=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.get_uid=void 0;var e=function(){if(Qa)return Ja;Qa=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja._Get_root=void 0;var e=ia;Ja._Get_root=function(){return null===t&&void 0===(t=(0,e.is_node)()?f:self).__s_iUID&&(t.__s_iUID=0),t};var t=null;return Ja}();return Ya.get_uid=function(t){if(t instanceof Object){if(!1===t.hasOwnProperty("__get_m_iUID")){var n=++(0,e._Get_root)().__s_iUID;Object.defineProperty(t,"__get_m_iUID",{value:function(){return n}})}return t.__get_m_iUID()}return void 0===t?-1:0},Ya}function es(){if(Va)return Za;Va=1;var e=f&&f.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Za,"__esModule",{value:!0}),Za.hash=void 0;var t=Xa();function n(e,t){return t^=e?1:0,t*=a}function r(e,t){return o(e.toString(),t)}function o(e,t){for(var n=0;n<e.length;++n)t^=e.charCodeAt(n),t*=a;return Math.abs(t)}Za.hash=function(){for(var s,l,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var h=i;try{for(var d=e(c),f=d.next();!f.done;f=d.next()){var p=f.value,g=typeof(p=p&&p.valueOf());if("boolean"===g)h=n(p,h);else if("number"===g||"bigint"===g)h=r(p,h);else if("string"===g)h=o(p,h);else if(p instanceof Object&&p.hashCode instanceof Function){var m=p.hashCode();if(1===c.length)return m;h^=m,h*=a}else h=r((0,t.get_uid)(p),h)}}catch(y){s={error:y}}finally{try{f&&!f.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}return Math.abs(h)};var i=2166136261,a=16777619;return Za}var ts,ns,rs={};function os(){if(ts)return rs;ts=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.greater_equal=rs.greater=rs.less_equal=rs.less=rs.not_equal_to=rs.equal_to=void 0;var e=Xa();function t(e,t){return e=e&&e.valueOf(),t=t&&t.valueOf(),e instanceof Object&&e.equals instanceof Function?e.equals(t):e===t}function n(t,n){return t=t.valueOf(),n=n.valueOf(),t instanceof Object?t.less instanceof Function?t.less(n):(0,e.get_uid)(t)<(0,e.get_uid)(n):t<n}function r(e,r){return n(e,r)||t(e,r)}return rs.equal_to=t,rs.not_equal_to=function(e,n){return!t(e,n)},rs.less=n,rs.less_equal=r,rs.greater=function(e,t){return!r(e,t)},rs.greater_equal=function(e,t){return!n(e,t)},rs}function is(){return ns||(ns=1,function(e){var t=f&&f.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},n=f&&f.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)(r||!(o in t))&&(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(e,"__esModule",{value:!0}),e.IHashContainer=void 0;var r=(Wa||(Wa=1,function(e){var t=f&&f.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(AS){o={error:AS}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},n=f&&f.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)(r||!(o in t))&&(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(e,"__esModule",{value:!0}),e.IAssociativeContainer=void 0,function(e){e.construct=function(e){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var i,a;return r.length>=1&&r[0]instanceof Array?(i=function(){var o=r[0];e.push.apply(e,n([],t(o),!1))},a=r.slice(1)):r.length>=2&&r[0].next instanceof Function&&r[1].next instanceof Function?(i=function(){var t=r[0],n=r[1];e.assign(t,n)},a=r.slice(2)):(i=null,a=r),{ramda:i,tail:a}}}(e.IAssociativeContainer||(e.IAssociativeContainer={}))}(Ka)),Ka),o=es(),i=os();(e.IHashContainer||(e.IHashContainer={})).construct=function(e,a,s){for(var l=[],c=3;c<arguments.length;c++)l[c-3]=arguments[c];var u=null,h=o.hash,d=i.equal_to;if(1===l.length&&l[0]instanceof a){var f=l[0];h=f.hash_function(),d=f.key_eq(),u=function(){var t=f.begin(),n=f.end();e.assign(t,n)}}else{var p=r.IAssociativeContainer.construct.apply(r.IAssociativeContainer,n([e],t(l),!1));u=p.ramda,p.tail.length>=1&&(h=p.tail[0]),p.tail.length>=2&&(d=p.tail[1])}s(h,d),null!==u&&u()}}($a)),$a}var as,ss={},ls={},cs={};function us(){if(as)return cs;as=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.ListIterator=void 0;var e=qa(),t=function(){function t(e,t,n){this.prev_=e,this.next_=t,this.value_=n}return t._Set_prev=function(e,t){e.prev_=t},t._Set_next=function(e,t){e.next_=t},t.prototype.prev=function(){return this.prev_},t.prototype.next=function(){return this.next_},Object.defineProperty(t.prototype,"value",{get:function(){return this._Try_value(),this.value_},enumerable:!1,configurable:!0}),t.prototype._Try_value=function(){if(void 0===this.value_&&!0===this.equals(this.source().end()))throw e.ErrorGenerator.iterator_end_value(this.source())},t.prototype.equals=function(e){return this===e},t}();return cs.ListIterator=t,cs}var hs,ds={};var fs,ps,gs={};function ms(){if(fs)return gs;fs=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.next=gs.prev=gs.advance=gs.distance=gs.size=gs.empty=void 0;var e=za();function t(t,n){if(0===n)return t;if(t.advance instanceof Function)return t.advance(n);var r;if(n<0){if(!(t.prev instanceof Function))throw new e.InvalidArgument("Error on std.advance(): parametric iterator is not a bi-directional iterator, thus advancing to negative direction is not possible.");r=function(e){return e.prev()},n=-n}else r=function(e){return e.next()};for(;n-- >0;)t=r(t);return t}return gs.empty=function(e){return e instanceof Array?0!==e.length:e.empty()},gs.size=function(e){return e instanceof Array?e.length:e.size()},gs.distance=function(e,t){if(e.index instanceof Function)return function(e,t){var n=e.index(),r=t.index();return e.base instanceof Function?n-r:r-n}(e,t);for(var n=0;!e.equals(t);e=e.next())++n;return n},gs.advance=t,gs.prev=function(e,n){return void 0===n&&(n=1),1===n?e.prev():t(e,-n)},gs.next=function(e,n){return void 0===n&&(n=1),1===n?e.next():t(e,n)},gs}function ys(){if(ps)return ls;ps=1;var e=f&&f.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=f&&f.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(ls,"__esModule",{value:!0}),ls.ListContainer=void 0;var n=_a(),r=us(),o=function(){if(hs)return ds;hs=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.Repeater=void 0;var e=function(){function e(e,t){this.index_=e,this.value_=t}return e.prototype.index=function(){return this.index_},Object.defineProperty(e.prototype,"value",{get:function(){return this.value_},enumerable:!1,configurable:!0}),e.prototype.next=function(){return++this.index_,this},e.prototype.equals=function(e){return this.index_===e.index_},e}();return ds.Repeater=e,ds}(),i=Aa(),a=ms(),s=qa(),l=function(n){function l(){var e=n.call(this)||this;return e.end_=e._Create_iterator(null,null),e.clear(),e}return e(l,n),l.prototype.assign=function(e,t){this.clear(),this.insert(this.end(),e,t)},l.prototype.clear=function(){r.ListIterator._Set_prev(this.end_,this.end_),r.ListIterator._Set_next(this.end_,this.end_),this.begin_=this.end_,this.size_=0},l.prototype.resize=function(e){var t=e-this.size();t>0?this.insert(this.end(),t,void 0):t<0&&this.erase((0,a.advance)(this.end(),-t),this.end())},l.prototype.begin=function(){return this.begin_},l.prototype.end=function(){return this.end_},l.prototype.size=function(){return this.size_},l.prototype.push_front=function(e){this.insert(this.begin_,e)},l.prototype.push_back=function(e){this.insert(this.end_,e)},l.prototype.pop_front=function(){if(!0===this.empty())throw s.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_front");this.erase(this.begin_)},l.prototype.pop_back=function(){if(!0===this.empty())throw s.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_back");this.erase(this.end_.prev())},l.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return this.size();var n=new i.NativeArrayIterator(e,0),r=new i.NativeArrayIterator(e,e.length);return this._Insert_by_range(this.end(),n,r),this.size()},l.prototype.insert=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e.source()!==this.end_.source())throw s.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(!0===e.erased_)throw s.ErrorGenerator.erased_iterator(this.end_.source(),"insert");return 1===t.length?this._Insert_by_repeating_val(e,1,t[0]):2===t.length&&"number"==typeof t[0]?this._Insert_by_repeating_val(e,t[0],t[1]):this._Insert_by_range(e,t[0],t[1])},l.prototype._Insert_by_repeating_val=function(e,t,n){var r=new o.Repeater(0,n),i=new o.Repeater(t);return this._Insert_by_range(e,r,i)},l.prototype._Insert_by_range=function(e,t,n){for(var o=e.prev(),i=null,a=0,s=t;!1===s.equals(n);s=s.next()){var l=this._Create_iterator(o,null,s.value);0===a&&(i=l),r.ListIterator._Set_next(o,l),o=l,++a}return!0===e.equals(this.begin())&&(this.begin_=i),r.ListIterator._Set_next(o,e),r.ListIterator._Set_prev(e,o),this.size_+=a,i},l.prototype.erase=function(e,t){return void 0===t&&(t=e.next()),this._Erase_by_range(e,t)},l.prototype._Erase_by_range=function(e,t){if(e.source()!==this.end_.source())throw s.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(!0===e.erased_)throw s.ErrorGenerator.erased_iterator(this.end_.source(),"insert");if(e.equals(this.end_))return this.end_;var n=e.prev();r.ListIterator._Set_next(n,t),r.ListIterator._Set_prev(t,n);for(var o=e;!o.equals(t);o=o.next())o.erased_=!0,--this.size_;return e.equals(this.begin_)&&(this.begin_=t),t},l.prototype.swap=function(e){var n,r,o;n=t([e.begin_,this.begin_],2),this.begin_=n[0],e.begin_=n[1],r=t([e.end_,this.end_],2),this.end_=r[0],e.end_=r[1],o=t([e.size_,this.size_],2),this.size_=o[0],e.size_=o[1]},l}(n.Container);return ls.ListContainer=l,ls}var bs,vs,ws={};function ks(){if(bs)return ws;bs=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.ReverseIterator=void 0;var e=function(){function e(e){this.base_=e.prev()}return e.prototype.source=function(){return this.base_.source()},e.prototype.base=function(){return this.base_.next()},Object.defineProperty(e.prototype,"value",{get:function(){return this.base_.value},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return this._Create_neighbor(this.base().next())},e.prototype.next=function(){return this._Create_neighbor(this.base_)},e.prototype.equals=function(e){return this.base_.equals(e.base_)},e}();return ws.ReverseIterator=e,ws}var xs,Es,_s={},Ns={};function Ss(){if(xs)return Ns;xs=1;var e=f&&f.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.HashBuckets=void 0;var t=function(){function t(e,t){this.fetcher_=e,this.hasher_=t,this.max_load_factor_=r,this.data_=[],this.size_=0,this.initialize()}return t.prototype.clear=function(){this.data_=[],this.size_=0,this.initialize()},t.prototype.rehash=function(t){var r,o,i,a;t=Math.max(t,n);for(var s=[],l=0;l<t;++l)s.push([]);try{for(var c=e(this.data_),u=c.next();!u.done;u=c.next()){var h=u.value;try{for(var d=(i=void 0,e(h)),f=d.next();!f.done;f=d.next()){var p=f.value;s[this.hasher_(this.fetcher_(p))%s.length].push(p)}}catch(g){i={error:g}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}}}catch(g){r={error:g}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}this.data_=s},t.prototype.reserve=function(e){e>this.capacity()&&(e=Math.floor(e/this.max_load_factor_),this.rehash(e))},t.prototype.initialize=function(){for(var e=0;e<n;++e)this.data_.push([])},t.prototype.length=function(){return this.data_.length},t.prototype.capacity=function(){return this.data_.length*this.max_load_factor_},t.prototype.at=function(e){return this.data_[e]},t.prototype.load_factor=function(){return this.size_/this.length()},t.prototype.max_load_factor=function(e){if(void 0===e&&(e=null),null===e)return this.max_load_factor_;this.max_load_factor_=e},t.prototype.hash_function=function(){return this.hasher_},t.prototype.index=function(e){return this.hasher_(this.fetcher_(e))%this.length()},t.prototype.insert=function(e){var t=this.capacity();++this.size_>t&&this.reserve(2*t);var n=this.index(e);this.data_[n].push(e)},t.prototype.erase=function(e){for(var t=this.index(e),n=this.data_[t],r=0;r<n.length;++r)if(n[r]===e){n.splice(r,1),--this.size_;break}},t}();Ns.HashBuckets=t;var n=10,r=1;return Ns}var Cs,As,Rs={};function Ts(){if(Cs)return Rs;Cs=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.make_pair=Rs.Pair=void 0;var e=es(),t=os(),n=function(){function n(e,t){this.first=e,this.second=t}return n.prototype.equals=function(e){return(0,t.equal_to)(this.first,e.first)&&(0,t.equal_to)(this.second,e.second)},n.prototype.less=function(e){return!1===(0,t.equal_to)(this.first,e.first)?(0,t.less)(this.first,e.first):(0,t.less)(this.second,e.second)},n.prototype.hashCode=function(){return(0,e.hash)(this.first,this.second)},n}();return Rs.Pair=n,Rs.make_pair=function(e,t){return new n(e,t)},Rs}function Bs(){return As||(As=1,function(e){var t=f&&f.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),n=f&&f.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},r=f&&f.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)(r||!(o in t))&&(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(e,"__esModule",{value:!0}),e.HashSet=void 0;var o=Ha(),i=is(),a=(vs||(vs=1,function(e){var t=f&&f.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),n=f&&f.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.SetElementList=void 0;var r=ys(),o=us(),i=ks(),a=function(e){function r(t){var n=e.call(this)||this;return n.associative_=t,n}return t(r,e),r.prototype._Create_iterator=function(e,t,n){return r.Iterator.create(this,e,t,n)},r._Swap_associative=function(e,t){var r;r=n([t.associative_,e.associative_],2),e.associative_=r[0],t.associative_=r[1]},r.prototype.associative=function(){return this.associative_},r}(r.ListContainer);e.SetElementList=a,function(e){var n=function(e){function n(t,n,r,o){var i=e.call(this,n,r,o)||this;return i.source_=t,i}return t(n,e),n.create=function(e,t,r,o){return new n(e,t,r,o)},n.prototype.reverse=function(){return new r(this)},n.prototype.source=function(){return this.source_.associative()},n}(o.ListIterator);e.Iterator=n;var r=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype._Create_neighbor=function(e){return new n(e)},n}(i.ReverseIterator);e.ReverseIterator=r}(a=e.SetElementList||(e.SetElementList={})),e.SetElementList=a}(ss)),ss),s=function(){if(Es)return _s;Es=1;var e=f&&f.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=f&&f.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},n=f&&f.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(_s,"__esModule",{value:!0}),_s.SetHashBuckets=void 0;var r=function(r){function i(e,t,n){var i=r.call(this,o,t)||this;return i.source_=e,i.key_eq_=n,i}return e(i,r),i._Swap_source=function(e,n){var r;r=t([n.source_,e.source_],2),e.source_=r[0],n.source_=r[1]},i.prototype.key_eq=function(){return this.key_eq_},i.prototype.find=function(e){var t,r,o=this.hash_function()(e)%this.length(),i=this.at(o);try{for(var a=n(i),s=a.next();!s.done;s=a.next()){var l=s.value;if(this.key_eq_(l.value,e))return l}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return this.source_.end()},i}(Ss().HashBuckets);function o(e){return e.value}return _s.SetHashBuckets=r,_s}(),l=Ts(),c=function(e){function o(){for(var t=[],l=0;l<arguments.length;l++)t[l]=arguments[l];var c=e.call(this,(function(e){return new a.SetElementList(e)}))||this;return i.IHashContainer.construct.apply(i.IHashContainer,r([c,o,function(e,t){c.buckets_=new s.SetHashBuckets(c,e,t)}],n(t),!1)),c}return t(o,e),o.prototype.clear=function(){this.buckets_.clear(),e.prototype.clear.call(this)},o.prototype.swap=function(e){var t,r;t=n([e.data_,this.data_],2),this.data_=t[0],e.data_=t[1],a.SetElementList._Swap_associative(this.data_,e.data_),s.SetHashBuckets._Swap_source(this.buckets_,e.buckets_),r=n([e.buckets_,this.buckets_],2),this.buckets_=r[0],e.buckets_=r[1]},o.prototype.find=function(e){return this.buckets_.find(e)},o.prototype.begin=function(t){return void 0===t&&(t=null),null===t?e.prototype.begin.call(this):this.buckets_.at(t)[0]},o.prototype.end=function(t){if(void 0===t&&(t=null),null===t)return e.prototype.end.call(this);var n=this.buckets_.at(t);return n[n.length-1].next()},o.prototype.rbegin=function(e){return void 0===e&&(e=null),this.end(e).reverse()},o.prototype.rend=function(e){return void 0===e&&(e=null),this.begin(e).reverse()},o.prototype.bucket_count=function(){return this.buckets_.length()},o.prototype.bucket_size=function(e){return this.buckets_.at(e).length},o.prototype.load_factor=function(){return this.buckets_.load_factor()},o.prototype.hash_function=function(){return this.buckets_.hash_function()},o.prototype.key_eq=function(){return this.buckets_.key_eq()},o.prototype.bucket=function(e){return this.hash_function()(e)%this.buckets_.length()},o.prototype.max_load_factor=function(e){return void 0===e&&(e=null),this.buckets_.max_load_factor(e)},o.prototype.reserve=function(e){this.buckets_.reserve(e)},o.prototype.rehash=function(e){this.buckets_.rehash(e)},o.prototype._Insert_by_key=function(e){var t=this.find(e);return!1===t.equals(this.end())?new l.Pair(t,!1):(this.data_.push(e),t=t.prev(),this._Handle_insert(t,t.next()),new l.Pair(t,!0))},o.prototype._Insert_by_hint=function(e,t){var n=this.find(t);return!0===n.equals(this.end())&&(n=this.data_.insert(e,t),this._Handle_insert(n,n.next())),n},o.prototype._Handle_insert=function(e,t){for(;!e.equals(t);e=e.next())this.buckets_.insert(e)},o.prototype._Handle_erase=function(e,t){for(;!e.equals(t);e=e.next())this.buckets_.erase(e)},o}(o.UniqueSet);e.HashSet=c,function(e){e.Iterator=a.SetElementList.Iterator,e.ReverseIterator=a.SetElementList.ReverseIterator}(c=e.HashSet||(e.HashSet={})),e.HashSet=c}(va)),va}var js,Os,Is={},Ps={},Ls={};function zs(){if(Os)return Ps;Os=1;var e=f&&f.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=f&&f.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},n=f&&f.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)(r||!(o in t))&&(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.UniqueMap=void 0;var r=function(){if(js)return Ls;js=1;var e=f&&f.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.MapContainer=void 0;var t=_a(),n=Aa(),r=function(t){function r(e){var n=t.call(this)||this;return n.data_=e(n),n}return e(r,t),r.prototype.assign=function(e,t){this.clear(),this.insert(e,t)},r.prototype.clear=function(){this.data_.clear()},r.prototype.begin=function(){return this.data_.begin()},r.prototype.end=function(){return this.data_.end()},r.prototype.has=function(e){return!this.find(e).equals(this.end())},r.prototype.size=function(){return this.data_.size()},r.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=new n.NativeArrayIterator(e,0),o=new n.NativeArrayIterator(e,e.length);return this.insert(r,o),this.size()},r.prototype.insert=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length?this.emplace(e[0].first,e[0].second):e[0].next instanceof Function&&e[1].next instanceof Function?this._Insert_by_range(e[0],e[1]):this.emplace_hint(e[0],e[1].first,e[1].second)},r.prototype.erase=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1!==e.length||e[0]instanceof this.end().constructor&&e[0].source()===this?1===e.length?this._Erase_by_range(e[0]):this._Erase_by_range(e[0],e[1]):this._Erase_by_key(e[0])},r.prototype._Erase_by_range=function(e,t){void 0===t&&(t=e.next());var n=this.data_.erase(e,t);return this._Handle_erase(e,t),n},r}(t.Container);return Ls.MapContainer=r,Ls}(),o=qa(),i=function(r){function i(){return null!==r&&r.apply(this,arguments)||this}return e(i,r),i.prototype.count=function(e){return this.find(e).equals(this.end())?0:1},i.prototype.get=function(e){var t=this.find(e);if(!0===t.equals(this.end()))throw o.ErrorGenerator.key_nout_found(this,"get",e);return t.second},i.prototype.take=function(e,t){var n=this.find(e);return n.equals(this.end())?this.emplace(e,t()).first.second:n.second},i.prototype.set=function(e,t){this.insert_or_assign(e,t)},i.prototype.insert=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return r.prototype.insert.apply(this,n([],t(e),!1))},i.prototype._Insert_by_range=function(e,t){for(var n=e;!n.equals(t);n=n.next())this.emplace(n.value.first,n.value.second)},i.prototype.insert_or_assign=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 2===e.length?this._Insert_or_assign_with_key_value(e[0],e[1]):3===e.length?this._Insert_or_assign_with_hint(e[0],e[1],e[2]):void 0},i.prototype._Insert_or_assign_with_key_value=function(e,t){var n=this.emplace(e,t);return!1===n.second&&(n.first.second=t),n},i.prototype._Insert_or_assign_with_hint=function(e,t,n){var r=this.emplace_hint(e,t,n);return r.second!==n&&(r.second=n),r},i.prototype.extract=function(e){return e instanceof this.end().constructor?this._Extract_by_iterator(e):this._Extract_by_key(e)},i.prototype._Extract_by_key=function(e){var t=this.find(e);if(!0===t.equals(this.end()))throw o.ErrorGenerator.key_nout_found(this,"extract",e);var n=t.value;return this._Erase_by_range(t),n},i.prototype._Extract_by_iterator=function(e){return!0===e.equals(this.end())?this.end():(this._Erase_by_range(e),e)},i.prototype._Erase_by_key=function(e){var t=this.find(e);return!0===t.equals(this.end())?0:(this._Erase_by_range(t),1)},i.prototype.merge=function(e){for(var t=e.begin();!t.equals(e.end());)!1===this.has(t.first)?(this.insert(t.value),t=e.erase(t)):t=t.next()},i}(r.MapContainer);return Ps.UniqueMap=i,Ps}var Us,Ms={};var Fs,Ds={};var qs,Hs,Ws,$s={};function Ks(){return Hs||(Hs=1,function(e){var t=f&&f.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),n=f&&f.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},r=f&&f.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)(r||!(o in t))&&(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(e,"__esModule",{value:!0}),e.HashMap=void 0;var o,i=zs(),a=is(),s=(Us||(Us=1,function(e){var t=f&&f.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),n=f&&f.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.MapElementList=void 0;var r=ys(),o=us(),i=ks(),a=function(e){function r(t){var n=e.call(this)||this;return n.associative_=t,n}return t(r,e),r.prototype._Create_iterator=function(e,t,n){return r.Iterator.create(this,e,t,n)},r._Swap_associative=function(e,t){var r;r=n([t.associative_,e.associative_],2),e.associative_=r[0],t.associative_=r[1]},r.prototype.associative=function(){return this.associative_},r}(r.ListContainer);e.MapElementList=a,function(e){var n=function(e){function n(t,n,r,o){var i=e.call(this,n,r,o)||this;return i.list_=t,i}return t(n,e),n.create=function(e,t,r,o){return new n(e,t,r,o)},n.prototype.reverse=function(){return new r(this)},n.prototype.source=function(){return this.list_.associative()},Object.defineProperty(n.prototype,"first",{get:function(){return this.value.first},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"second",{get:function(){return this.value.second},set:function(e){this.value.second=e},enumerable:!1,configurable:!0}),n}(o.ListIterator);e.Iterator=n;var r=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype._Create_neighbor=function(e){return new n(e)},Object.defineProperty(n.prototype,"first",{get:function(){return this.base_.first},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"second",{get:function(){return this.base_.second},set:function(e){this.base_.second=e},enumerable:!1,configurable:!0}),n}(i.ReverseIterator);e.ReverseIterator=r}(a=e.MapElementList||(e.MapElementList={})),e.MapElementList=a}(Ms)),Ms),l=function(){if(Fs)return Ds;Fs=1;var e=f&&f.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=f&&f.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},n=f&&f.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.MapHashBuckets=void 0;var r=function(r){function i(e,t,n){var i=r.call(this,o,t)||this;return i.source_=e,i.key_eq_=n,i}return e(i,r),i._Swap_source=function(e,n){var r;r=t([n.source_,e.source_],2),e.source_=r[0],n.source_=r[1]},i.prototype.key_eq=function(){return this.key_eq_},i.prototype.find=function(e){var t,r,o=this.hash_function()(e)%this.length(),i=this.at(o);try{for(var a=n(i),s=a.next();!s.done;s=a.next()){var l=s.value;if(this.key_eq_(l.first,e))return l}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return this.source_.end()},i}(Ss().HashBuckets);function o(e){return e.first}return Ds.MapHashBuckets=r,Ds}(),c=function(){if(qs)return $s;qs=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.Entry=void 0;var e=es(),t=os(),n=function(){function n(e,t){this.first=e,this.second=t}return n.prototype.equals=function(e){return(0,t.equal_to)(this.first,e.first)},n.prototype.less=function(e){return(0,t.less)(this.first,e.first)},n.prototype.hashCode=function(){return(0,e.hash)(this.first)},n}();return $s.Entry=n,$s}(),u=Ts(),h=function(e){function o(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var c=e.call(this,(function(e){return new s.MapElementList(e)}))||this;return a.IHashContainer.construct.apply(a.IHashContainer,r([c,o,function(e,t){c.buckets_=new l.MapHashBuckets(c,e,t)}],n(t),!1)),c}return t(o,e),o.prototype.clear=function(){this.buckets_.clear(),e.prototype.clear.call(this)},o.prototype.swap=function(e){var t,r;t=n([e.data_,this.data_],2),this.data_=t[0],e.data_=t[1],s.MapElementList._Swap_associative(this.data_,e.data_),l.MapHashBuckets._Swap_source(this.buckets_,e.buckets_),r=n([e.buckets_,this.buckets_],2),this.buckets_=r[0],e.buckets_=r[1]},o.prototype.find=function(e){return this.buckets_.find(e)},o.prototype.begin=function(t){return void 0===t&&(t=null),null===t?e.prototype.begin.call(this):this.buckets_.at(t)[0]},o.prototype.end=function(t){if(void 0===t&&(t=null),null===t)return e.prototype.end.call(this);var n=this.buckets_.at(t);return n[n.length-1].next()},o.prototype.rbegin=function(e){return void 0===e&&(e=null),this.end(e).reverse()},o.prototype.rend=function(e){return void 0===e&&(e=null),this.begin(e).reverse()},o.prototype.bucket_count=function(){return this.buckets_.length()},o.prototype.bucket_size=function(e){return this.buckets_.at(e).length},o.prototype.load_factor=function(){return this.buckets_.load_factor()},o.prototype.hash_function=function(){return this.buckets_.hash_function()},o.prototype.key_eq=function(){return this.buckets_.key_eq()},o.prototype.bucket=function(e){return this.hash_function()(e)%this.buckets_.length()},o.prototype.max_load_factor=function(e){return void 0===e&&(e=null),this.buckets_.max_load_factor(e)},o.prototype.reserve=function(e){this.buckets_.reserve(e)},o.prototype.rehash=function(e){this.buckets_.rehash(e)},o.prototype.emplace=function(e,t){var n=this.find(e);return!1===n.equals(this.end())?new u.Pair(n,!1):(this.data_.push(new c.Entry(e,t)),n=n.prev(),this._Handle_insert(n,n.next()),new u.Pair(n,!0))},o.prototype.emplace_hint=function(e,t,n){var r=this.find(t);return!0===r.equals(this.end())&&(r=this.data_.insert(e,new c.Entry(t,n)),this._Handle_insert(r,r.next())),r},o.prototype._Handle_insert=function(e,t){for(;!e.equals(t);e=e.next())this.buckets_.insert(e)},o.prototype._Handle_erase=function(e,t){for(;!e.equals(t);e=e.next())this.buckets_.erase(e)},o}(i.UniqueMap);e.HashMap=h,(o=h=e.HashMap||(e.HashMap={})).Iterator=s.MapElementList.Iterator,o.ReverseIterator=s.MapElementList.ReverseIterator,e.HashMap=h}(Is)),Is}var Qs,Gs={};function Vs(){if(Qs)return Gs;Qs=1,Object.defineProperty(Gs,"__esModule",{value:!0});var e=function(e,t){this.type=e,t&&Object.assign(this,t)};return Gs.Event=e,Gs}var Zs,Ys={};var Js,Xs={};var el,tl,nl={};ia.is_node()&&(f.WebSocket=(tl||(tl=1,function(e){var t=f&&f.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),n=f&&f.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r,o=ga(),i=function(){if(Ws)return ba;Ws=1;var e=f&&f.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(ba,"__esModule",{value:!0});var t=Bs(),n=Ks(),r=function(){function r(){this.listeners_=new n.HashMap,this.created_at_=new Date}return r.prototype.dispatchEvent=function(t){var n,r,o=this.listeners_.find(t.type);if(!o.equals(this.listeners_.end())){t.target=this,t.timeStamp=(new Date).getTime()-this.created_at_.getTime();try{for(var i=e(o.second),a=i.next();!a.done;a=i.next())(0,a.value)(t)}catch($w){n={error:$w}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},r.prototype.addEventListener=function(e,n){var r=this.listeners_.find(e);r.equals(this.listeners_.end())&&(r=this.listeners_.emplace(e,new t.HashSet).first),r.second.insert(n)},r.prototype.removeEventListener=function(e,t){var n=this.listeners_.find(e);n.equals(this.listeners_.end())||(n.second.erase(t),n.second.empty()&&this.listeners_.erase(n))},r}();return ba.EventTarget=r,ba}(),a=Vs(),s=function(){if(Zs)return Ys;Zs=1;var e=f&&f.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Ys,"__esModule",{value:!0});var t=function(t){function n(e,n){return t.call(this,e,n)||this}return e(n,t),n}(Vs().Event);return Ys.CloseEvent=t,Ys}(),l=function(){if(Js)return Xs;Js=1;var e=f&&f.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Xs,"__esModule",{value:!0});var t=function(t){function n(e,n){return t.call(this,e,n)||this}return e(n,t),n}(Vs().Event);return Xs.MessageEvent=t,Xs}(),c=function(){if(el)return nl;el=1;var e=f&&f.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(nl,"__esModule",{value:!0});var t=function(t){function n(e,n){return t.call(this,e,n)||this}return e(n,t),n}(Vs().Event);return nl.ErrorEvent=t,nl}(),u=function(e){function r(t,n){var i=e.call(this)||this;return i.on_={},i.state_=r.CONNECTING,i.client_=new o.client,i.client_.on("connect",i._Handle_connect.bind(i)),i.client_.on("connectFailed",i._Handle_error.bind(i)),"string"==typeof n&&(n=[n]),i.client_.connect(t,n),i}return t(r,e),r.prototype.close=function(e,t){this.state_=r.CLOSING,void 0===e?this.connection_.sendCloseFrame():this.connection_.sendCloseFrame(e,t,!0)},r.prototype.send=function(e){if("string"==typeof e.valueOf())this.connection_.sendUTF(e);else{var t=void 0;t=e instanceof Buffer?e:e instanceof Blob?new Buffer(e,"blob"):e.buffer?new Buffer(e.buffer):new Buffer(e),this.connection_.sendBytes(t)}},Object.defineProperty(r.prototype,"url",{get:function(){return this.client_.url.href},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"protocol",{get:function(){return this.client_.protocols?this.client_.protocols[0]:""},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"extensions",{get:function(){return this.connection_&&this.connection_.extensions?this.connection_.extensions[0].name:""},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"readyState",{get:function(){return this.state_},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bufferedAmount",{get:function(){return this.connection_.bytesWaitingToFlush},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"binaryType",{get:function(){return"arraybuffer"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onopen",{get:function(){return this.on_.open},set:function(e){this._Set_on("open",e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onclose",{get:function(){return this.on_.close},set:function(e){this._Set_on("close",e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onmessage",{get:function(){return this.on_.message},set:function(e){this._Set_on("message",e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onerror",{get:function(){return this.on_.error},set:function(e){this._Set_on("error",e)},enumerable:!0,configurable:!0}),r.prototype._Set_on=function(e,t){this.on_[e]&&this.removeEventListener(e,this.on_[e]),this.addEventListener(e,t),this.on_[e]=t},r.prototype._Handle_connect=function(e){this.connection_=e,this.state_=r.OPEN,this.connection_.on("message",this._Handle_message.bind(this)),this.connection_.on("error",this._Handle_error.bind(this)),this.connection_.on("close",this._Handle_close.bind(this));var t=new a.Event("open",h);this.dispatchEvent(t)},r.prototype._Handle_close=function(e,t){var o=new s.CloseEvent("close",n({},h,{code:e,reason:t}));this.state_=r.CLOSED,this.dispatchEvent(o)},r.prototype._Handle_message=function(e){var t=new l.MessageEvent("message",n({},h,{data:e.binaryData?e.binaryData:e.utf8Data}));this.dispatchEvent(t)},r.prototype._Handle_error=function(e){var t=new c.ErrorEvent("error",n({},h,{error:e,message:e.message}));this.state_===r.CONNECTING&&(this.state_=r.CLOSED),this.dispatchEvent(t)},r}(i.EventTarget);e.WebSocket=u,(r=u=e.WebSocket||(e.WebSocket={})).CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3,e.WebSocket=u;var h={bubbles:!1,cancelable:!1}}(ca)),ca).WebSocket),BigInt(1e3),BigInt(1e6),BigInt(1e9),BigInt(1e12),BigInt("2100000000000000000"),BigInt(1e11);const rl={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27};for(let $R=0,KR=Object.keys(rl);$R<KR.length;$R++)KR[$R],rl[KR[$R]].toString();var ol=["wss://nos.lol","wss://relay.nostr.band","wss://relay.f7z.io","wss://relay.damus.io","wss://nostr.mom","wss://no.str.cr"],il=class extends x{constructor(e){super(),d(this,"ndk"),d(this,"zappedEvent"),d(this,"zappedUser"),this.ndk=e.ndk,this.zappedEvent=e.zappedEvent,this.zappedUser=e.zappedUser||this.ndk.getUser({hexpubkey:this.zappedEvent.pubkey})}async getZapEndpoint(){let e,t,n,r;if(this.zappedEvent){const n=(await this.zappedEvent.getMatchingTags("zap"))[0];if(n)switch(n[2]){case"lud06":e=n[1];break;case"lud16":t=n[1];break;default:throw new Error(`Unknown zap tag ${n}`)}}if(this.zappedUser&&!e&&!t&&(this.zappedUser.profile||await this.zappedUser.fetchProfile(),e=(this.zappedUser.profile||{}).lud06,t=(this.zappedUser.profile||{}).lud16),t){const[e,r]=t.split("@");n=`https://${r}/.well-known/lnurlp/${e}`}else if(e){const{words:t}=gn.decode(e,1e3),r=gn.fromWords(t);n=new TextDecoder("utf-8").decode(r)}if(!n)throw new Error("No zap endpoint found");const o=await(await fetch(n)).json();return(null==o?void 0:o.allowsNostr)&&((null==o?void 0:o.nostrPubkey)||(null==o?void 0:o.nostrPubKey))&&(r=o.callback),r}async createZapRequest(e,t,n,r){const o=await this.getZapEndpoint();if(!o)throw new Error("No zap endpoint found");if(!this.zappedEvent)throw new Error("No zapped event found");const i=Xi.makeZapRequest({profile:this.zappedUser.hexpubkey(),event:null,amount:e,comment:t||"",relays:null!=r?r:this.relays()});if(this.zappedEvent){const e=this.zappedEvent.tagReference();e&&i.tags.push(e)}i.tags.push(["lnurl",o]);const a=new gl(this.ndk,i);n&&(a.tags=a.tags.concat(n)),await a.sign();const s=await a.toNostrEvent();return(await(await fetch(`${o}?`+new URLSearchParams({amount:e.toString(),nostr:JSON.stringify(s)}))).json()).pr}relays(){var e,t;let n=[];return null!=(t=null==(e=this.ndk)?void 0:e.pool)&&t.relays&&(n=this.ndk.pool.urls()),n.length||(n=ol),n}};function al(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=1e4&&this.kind<2e4}function sl(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=3e4&&this.kind<4e4}async function ll(){if(!this.ndk)throw new Error("NDK not set");const e=await this.ndk.fetchEvents({kinds:[3],authors:[this.hexpubkey()]});if(e){const t=new Set;return e.forEach((e=>{e.tags.forEach((e=>{if("p"===e[0])try{const n=ii.npubEncode(e[1]);t.add(n)}catch{}}))})),[...t].reduce(((e,t)=>{const n=new cl({npub:t});return n.ndk=this.ndk,e.add(n),e}),new Set)}return new Set}var cl=class{constructor(e){d(this,"ndk"),d(this,"profile"),d(this,"npub",""),d(this,"relayUrls",[]),d(this,"follows",ll.bind(this)),e.npub&&(this.npub=e.npub),e.hexpubkey&&(this.npub=ii.npubEncode(e.hexpubkey)),e.relayUrls&&(this.relayUrls=e.relayUrls)}static async fromNip05(e){const t=await Ei.queryProfile(e);if(t)return new cl({hexpubkey:t.pubkey,relayUrls:t.relays})}hexpubkey(){return ii.decode(this.npub).data}async fetchProfile(e){if(!this.ndk)throw new Error("NDK not set");this.profile||(this.profile={});const t=await this.ndk.fetchEvents({kinds:[0],authors:[this.hexpubkey()]},e);return t&&Array.from(t).sort(((e,t)=>e.created_at-t.created_at)).forEach((e=>{try{this.profile=function(e,t){const n=JSON.parse(e.content);return Object.keys(n).forEach((e=>{switch(e){case"name":t.name=n.name;break;case"display_name":case"displayName":t.displayName=n.displayName||n.display_name;break;case"image":case"picture":t.image=n.image||n.picture;break;case"banner":t.banner=n.banner;break;case"bio":t.bio=n.bio;break;case"nip05":t.nip05=n.nip05;break;case"lud06":t.lud06=n.lud06;break;case"lud16":t.lud16=n.lud16;break;case"about":t.about=n.about;break;case"zapService":t.zapService=n.zapService;break;case"website":t.website=n.website;break;default:t[e]=n[e]}})),t}(e,this.profile)}catch{}})),t}async relayList(){if(!this.ndk)throw new Error("NDK not set");return await this.ndk.fetchEvents({kinds:[10002],authors:[this.hexpubkey()]})||new Set}tagReference(){return["p",this.hexpubkey()]}async publish(){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),await new gl(this.ndk,{kind:0,content:JSON.stringify(this.profile)}).publish()}async follow(e,t){if(!this.ndk)throw new Error("No NDK instance found");if(this.ndk.assertSigner(),t||(t=await this.follows()),t.has(e))return!1;t.add(e);const n=new gl(this.ndk,{kind:3});for(const r of t)n.tag(r);return await n.publish(),!0}};async function ul(e,t){if(!t){if(!this.ndk)throw new Error("No signer available");await this.ndk.assertSigner(),t=this.ndk.signer}if(!e){const t=this.getMatchingTags("p");if(1!==t.length)throw new Error("No recipient could be determined and no explicit recipient was provided");(e=new cl({hexpubkey:t[0][1]})).ndk=this.ndk}this.content=await t.encrypt(e,this.content)}async function hl(e,t){if(!t){if(!this.ndk)throw new Error("No signer available");await this.ndk.assertSigner(),t=this.ndk.signer}e||(e=this.author),this.content=await t.decrypt(e,this.content)}function dl(){return this.isParamReplaceable()?ii.naddrEncode({kind:this.kind,pubkey:this.pubkey,identifier:this.replaceableDTag()}):ii.noteEncode(this.tagId())}async function fl(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;if(!t){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),t=this.ndk.signer}if(!t)throw new Error("No signer available");const n=await t.user(),r=new gl(this.ndk,{kind:pl(this),content:"",pubkey:n.hexpubkey()});return r.tag(this),16===r.kind&&r.tags.push(["k",`${this.kind}`]),await r.sign(t),e&&await r.publish(),r}function pl(e){return 1===e.kind?6:16}var gl=class extends x{constructor(e,t){super(),d(this,"ndk"),d(this,"created_at"),d(this,"content",""),d(this,"tags",[]),d(this,"kind"),d(this,"id",""),d(this,"sig"),d(this,"pubkey",""),d(this,"relay"),d(this,"isReplaceable",al.bind(this)),d(this,"isParamReplaceable",sl.bind(this)),d(this,"encode",dl.bind(this)),d(this,"encrypt",ul.bind(this)),d(this,"decrypt",hl.bind(this)),d(this,"repost",fl.bind(this)),this.ndk=e,this.created_at=null==t?void 0:t.created_at,this.content=(null==t?void 0:t.content)||"",this.tags=(null==t?void 0:t.tags)||[],this.id=(null==t?void 0:t.id)||"",this.sig=null==t?void 0:t.sig,this.pubkey=(null==t?void 0:t.pubkey)||"",this.kind=null==t?void 0:t.kind}rawEvent(){return{created_at:this.created_at,content:this.content,tags:this.tags,kind:this.kind,pubkey:this.pubkey,id:this.id,sig:this.sig}}set author(e){this.pubkey=e.hexpubkey()}get author(){const e=new cl({hexpubkey:this.pubkey});return e.ndk=this.ndk,e}tag(e,t){const n=e.tagReference();if(t&&n.push(t),this.tags.push(n),e instanceof gl){const t=e.author;t&&this.pubkey!==t.hexpubkey()&&this.tag(t);for(const n of e.getMatchingTags("p"))n[1]!==this.pubkey&&(this.tags.find((e=>"p"===e[0]&&e[1]===n[1]))||this.tags.push(["p",n[1]]))}}async toNostrEvent(e){var t,n;if(!e&&""===this.pubkey){const e=await(null==(n=null==(t=this.ndk)?void 0:t.signer)?void 0:n.user());this.pubkey=(null==e?void 0:e.hexpubkey())||""}this.created_at||(this.created_at=Math.floor(Date.now()/1e3));const r=this.rawEvent(),{content:o,tags:i}=this.generateTags();r.content=o||"",r.tags=i;try{this.id=Ko(r)}catch{}return this.id&&(r.id=this.id),this.sig&&(r.sig=this.sig),r}getMatchingTags(e){return this.tags.filter((t=>t[0]===e))}tagValue(e){const t=this.getMatchingTags(e);if(0!==t.length)return t[0][1]}removeTag(e){this.tags=this.tags.filter((t=>t[0]!==e))}async sign(e){var t;e||(null==(t=this.ndk)||t.assertSigner(),e=this.ndk.signer),await this.generateTags(),this.isReplaceable()&&(this.created_at=Math.floor(Date.now()/1e3));const n=await this.toNostrEvent();return this.sig=await e.sign(n),this.sig}async publish(e,t){if(this.sig||await this.sign(),!this.ndk)throw new Error("NDKEvent must be associated with an NDK instance to publish");return this.ndk.publish(this,e,t)}generateTags(){let e=[];const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e=e.replace(/(@|nostr:)(npub|nprofile|note|nevent)[a-zA-Z0-9]+/g,(e=>{try{const n=e.split(/(@|nostr:)/)[2],{type:r,data:o}=ii.decode(n);let i;switch(r){case"npub":i=["p",o];break;case"nprofile":i=["p",o.pubkey];break;case"nevent":i=["e",o.id];break;case"note":i=["e",o];break;default:return e}return t.find((e=>e[0]===i[0]&&e[1]===i[1]))||t.push(i),`nostr:${n}`}catch{return e}})),{content:e,tags:t}}(this.content,this.tags),n=t.content;if(e=t.tags,this.kind&&this.kind>=3e4&&this.kind<=4e4&&!this.getMatchingTags("d")[0]){const t=[...Array(16)].map((()=>Math.random().toString(36)[2])).join("");e.push(["d",t])}return{content:n||"",tags:e}}replaceableDTag(){if(this.kind&&this.kind>=3e4&&this.kind<=4e4){const e=this.getMatchingTags("d")[0];return e?e[1]:""}throw new Error("Event is not a parameterized replaceable event")}tagId(){if(this.kind&&this.kind>=3e4&&this.kind<=4e4){const e=this.replaceableDTag();return`${this.kind}:${this.pubkey}:${e}`}return this.id}tagReference(){return this.isParamReplaceable()?["a",this.tagId()]:["e",this.tagId()]}filter(){return this.isParamReplaceable()?{"#a":[this.tagId()]}:{"#e":[this.tagId()]}}async zap(e,t,n){if(!this.ndk)throw new Error("No NDK instance found");return this.ndk.assertSigner(),await new il({ndk:this.ndk,zappedEvent:this}).createZapRequest(e,t,n)}async delete(e){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const t=new gl(this.ndk,{kind:5,content:e||""});return t.tag(this),await t.publish(),t}},ml=class extends x{constructor(e){super(),d(this,"url"),d(this,"scores"),d(this,"relay"),d(this,"_status"),d(this,"connectedAt"),d(this,"_connectionStats",{attempts:0,success:0,durations:[]}),d(this,"complaining",!1),d(this,"debug"),d(this,"activeSubscriptions",new Set),d(this,"updateConnectionStats",{connected:()=>{this._connectionStats.success++,this._connectionStats.connectedAt=Date.now()},disconnected:()=>{this._connectionStats.connectedAt&&(this._connectionStats.durations.push(Date.now()-this._connectionStats.connectedAt),this._connectionStats.durations.length>100&&this._connectionStats.durations.shift()),this._connectionStats.connectedAt=void 0},attempt:()=>{this._connectionStats.attempts++}}),this.url=e,this.relay=oi(e),this.scores=new Map,this._status=3,this.debug=w(`ndk:relay:${e}`),this.relay.on("connect",(()=>{this.updateConnectionStats.connected(),this._status=1,this.emit("connect")})),this.relay.on("disconnect",(()=>{this.updateConnectionStats.disconnected(),1===this._status&&(this._status=3,this.handleReconnection()),this.emit("disconnect")})),this.relay.on("notice",(e=>this.handleNotice(e)))}isFlapping(){const e=this._connectionStats.durations;if(e.length<10)return!1;const t=e.reduce(((e,t)=>e+t),0)/e.length,n=e.map((e=>Math.pow(e-t,2))).reduce(((e,t)=>e+t),0)/e.length;return Math.sqrt(n)<1e3}handleReconnection(){this.isFlapping()&&(this.emit("flapping",this,this._connectionStats),this._status=5),this.connectedAt&&Date.now()-this.connectedAt<5e3?setTimeout((()=>this.connect()),6e4):this.connect()}get status(){return this._status}async connect(){try{this.updateConnectionStats.attempt(),this._status=0,await this.relay.connect()}catch(Ry){throw this.debug("Failed to connect",Ry),this._status=3,Ry}}disconnect(){this._status=2,this.relay.close()}async handleNotice(e){(e.includes("oo many")||e.includes("aximum"))&&(this.disconnect(),setTimeout((()=>this.connect()),2e3),this.debug(this.relay.url,"Relay complaining?",e)),this.emit("notice",this,e)}subscribe(e){const{filter:t}=e,n=this.relay.sub([t],{id:e.subId});this.debug(`Subscribed to ${JSON.stringify(t)}`),n.on("event",(t=>{const n=new gl(void 0,t);n.relay=this,e.eventReceived(n,this)})),n.on("eose",(()=>{e.eoseReceived(this)}));const r=n.unsub;return n.unsub=()=>{this.debug(`Unsubscribing from ${JSON.stringify(t)}`),this.activeSubscriptions.delete(e),r()},this.activeSubscriptions.add(e),e.on("close",(()=>{this.activeSubscriptions.delete(e)})),n}async publish(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;return 1===this.status?this.publishEvent(e,t):(this.once("connect",(()=>{this.publishEvent(e,t)})),!0)}async publishEvent(e,t){const n=await e.toNostrEvent(),r=this.relay.publish(n);let o;const i=new Promise(((t,n)=>{r.on("failed",(t=>{clearTimeout(o),this.debug("Publish failed",t,e.id),this.emit("publish:failed",e,t),n(t)})),r.on("ok",(()=>{clearTimeout(o),this.emit("published",e),t(!0)}))}));if(!t)return i;const a=new Promise(((n,r)=>{o=setTimeout((()=>{this.debug("Publish timed out",e.rawEvent()),this.emit("publish:failed",e,"Timeout"),r(new Error("Publish operation timed out"))}),t)}));return Promise.race([i,a])}scoreSlowerEvent(e){}get connectionStats(){return this._connectionStats}tagReference(e){const t=["r",this.relay.url];return e&&t.push(e),t}},yl=class extends x{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;super(),d(this,"relays",new Map),d(this,"debug"),this.debug=t.debug.extend("pool");for(const n of e){const e=new ml(n);e.on("notice",((e,t)=>this.emit("notice",e,t))),e.on("connect",(()=>this.handleRelayConnect(n))),e.on("disconnect",(()=>this.emit("relay:disconnect",e))),e.on("flapping",(()=>this.handleFlapping(e))),this.relays.set(n,e)}}handleRelayConnect(e){this.debug(`Relay ${e} connected`),this.emit("relay:connect",this.relays.get(e)),this.stats().connected===this.relays.size&&this.emit("connect")}async connect(e){const t=[];this.debug(`Connecting to ${this.relays.size} relays${e?`, timeout ${e}...`:""}`);for(const n of this.relays.values())if(e){const r=new Promise(((t,n)=>{setTimeout((()=>n(`Timed out after ${e}ms`)),e)}));t.push(Promise.race([n.connect(),r]).catch((e=>{this.debug(`Failed to connect to relay ${n.url}: ${e}`)})))}else t.push(n.connect());e&&setTimeout((()=>{const e=this.stats().connected===this.relays.size,t=this.stats().connected>0;!e&&t&&this.emit("connect")}),e),await Promise.all(t)}handleFlapping(e){this.debug(`Relay ${e.url} is flapping`),this.relays.delete(e.url),this.emit("flapping",e)}size(){return this.relays.size}stats(){const e={total:0,connected:0,disconnected:0,connecting:0};for(const t of this.relays.values())e.total++,1===t.status?e.connected++:3===t.status?e.disconnected++:0===t.status&&e.connecting++;return e}urls(){return Array.from(this.relays.keys())}};var bl={closeOnEose:!0,cacheUsage:"CACHE_FIRST",groupable:!0,groupableDelay:100},vl=class extends x{constructor(e,t,n,r,o){if(super(),d(this,"subId"),d(this,"filter"),d(this,"opts"),d(this,"relaySet"),d(this,"ndk"),d(this,"relaySubscriptions"),d(this,"debug"),d(this,"eventFirstSeen",new Map),d(this,"eosesSeen",new Set),d(this,"eventsPerRelay",new Map),d(this,"eoseTimeout"),this.ndk=e,this.opts={...bl,...n||{}},this.subId=o||(null==n?void 0:n.subId)||function(e){const t=Object.keys(e)||[],n=[];for(const r of t)if("kinds"===r){const t=[r,e.kinds.join(",")];n.push(t.join(":"))}else n.push(r);return n.push(Math.floor(999999999*Math.random()).toString()),n.join("-")}(t),this.filter=t,this.relaySet=r,this.relaySubscriptions=new Map,this.debug=e.debug.extend(`subscription:${this.subId}`),"ONLY_CACHE"===this.opts.cacheUsage&&!this.opts.closeOnEose)throw new Error("Cannot use cache-only options with a persistent subscription")}groupableId(){var e,t;if(null==(e=this.opts)||!e.groupable)return null;const n=((null==(t=this.filter.kinds)?void 0:t.length)||0)>0,r=!this.filter.since&&!this.filter.until,o=!this.filter.limit;if(n&&r&&o){let e=this.filter.kinds.join(",");return e+=`-${Object.keys(this.filter||{}).sort().join("-")}`,e}return null}shouldQueryCache(){var e;return"ONLY_RELAY"!==(null==(e=this.opts)?void 0:e.cacheUsage)}shouldQueryRelays(){var e;return"ONLY_CACHE"!==(null==(e=this.opts)?void 0:e.cacheUsage)}shouldWaitForCache(){var e;return this.opts.closeOnEose&&!(null==(e=this.ndk.cacheAdapter)||!e.locking)&&this.shouldQueryRelays()&&"PARALLEL"!==this.opts.cacheUsage}async start(){let e;if(this.shouldQueryCache()&&(e=this.startWithCache(),this.shouldWaitForCache()&&(await e,function(e){return!(!function(e){return!!e.ids}(e.filter)||!function(e){const t=e.filter.ids;return!!t&&t.length===e.eventFirstSeen.size}(e))}(this))))return this.debug("cache hit, fully filled: skipping relay query"),void this.emit("eose",this);this.shouldQueryRelays()&&this.startWithRelaySet()}stop(){this.relaySubscriptions.forEach((e=>e.unsub())),this.relaySubscriptions.clear(),this.emit("close",this)}async startWithCache(){var e;if(null!=(e=this.ndk.cacheAdapter)&&e.query){const e=this.ndk.cacheAdapter.query(this);this.ndk.cacheAdapter.locking&&await e}}startWithRelaySet(){this.relaySet||(this.relaySet=function(e,t){var n;const r=new Set;return null==(n=e.pool)||n.relays.forEach((t=>{t.complaining?e.debug(`Relay ${t.url} is complaining, not adding to set`):r.add(t)})),new kl(r,e)}(this.ndk,this.filter)),this.relaySet&&this.relaySet.subscribe(this)}eventReceived(e,t){if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&t){let n=this.eventsPerRelay.get(t);if(n||(n=new Set,this.eventsPerRelay.set(t,n)),n.add(e.id),this.eventFirstSeen.has(e.id)){const n=Date.now()-(this.eventFirstSeen.get(e.id)||0);return t.scoreSlowerEvent(n),void this.emit("event:dup",e,t,n,this)}this.ndk.cacheAdapter&&this.ndk.cacheAdapter.setEvent(e,this.filter),this.eventFirstSeen.set(`${e.id}`,Date.now())}else this.eventFirstSeen.set(`${e.id}`,0);this.emit("event",e,t,this)}eoseReceived(e){var t,n,r;null!=(t=this.opts)&&t.closeOnEose&&(null==(n=this.relaySubscriptions.get(e))||n.unsub(),this.relaySubscriptions.delete(e),0===this.relaySubscriptions.size&&this.emit("close",this)),this.eosesSeen.add(e),this.eosesSeen.size===(null==(r=this.relaySet)?void 0:r.size())?this.emit("eose"):(this.eoseTimeout&&clearTimeout(this.eoseTimeout),this.eoseTimeout=setTimeout((()=>{this.emit("eose")}),500))}},wl=class extends vl{constructor(e,t){const n=e.debug.extend("subscription-group"),r=function(e){const t={};return e.forEach((e=>{Object.entries(e).forEach((e=>{let[n,r]=e;Array.isArray(r)?void 0===t[n]?t[n]=[...r]:t[n]=Array.from(new Set([...t[n],...r])):t[n]=r}))})),t}(t.map((e=>e.filter)));super(e,r,t[0].opts,t[0].relaySet),d(this,"subscriptions"),this.subscriptions=t,n("merged filters",{count:t.length,mergedFilters:this.filter}),this.on("event",this.forwardEvent),this.on("event:dup",this.forwardEventDup),this.on("eose",this.forwardEose),this.on("close",this.forwardClose)}isEventForSubscription(e,t){const{filter:n}=t;return!!n&&Yo(n,e.rawEvent())}forwardEvent(e,t){for(const n of this.subscriptions)!this.isEventForSubscription(e,n)||n.emit("event",e,t,n)}forwardEventDup(e,t,n){for(const r of this.subscriptions)!this.isEventForSubscription(e,r)||r.emit("event:dup",e,t,n,r)}forwardEose(){for(const e of this.subscriptions)e.emit("eose",e)}forwardClose(){for(const e of this.subscriptions)e.emit("close",e)}};var kl=class{constructor(e,t){d(this,"relays"),d(this,"debug"),d(this,"ndk"),this.relays=e,this.ndk=t,this.debug=t.debug.extend("relayset")}static fromRelayUrls(e,t){const n=new Set;for(const r of e){const e=t.pool.relays.get(r);e&&n.add(e)}return new kl(new Set(n),t)}subscribeOnRelay(e,t){const n=e.subscribe(t);t.relaySubscriptions.set(e,n)}getId(){const e=Array.from(this.relays).map((e=>e.url)).sort().join(",");return ar(Er(e))}subscribe(e){const t=e.groupableId(),n=`${this.getId()}:${t}`;if(!t)return this.executeSubscription(e),e;const r=this.ndk.delayedSubscriptions.get(n);return r?r.push(e):(setTimeout((()=>{this.executeDelayedSubscription(n)}),e.opts.groupableDelay),this.ndk.delayedSubscriptions.set(n,[e])),e}executeDelayedSubscription(e){const t=this.ndk.delayedSubscriptions.get(e);this.ndk.delayedSubscriptions.delete(e),t&&(t.length>1?this.executeSubscriptions(t):this.executeSubscription(t[0]))}executeSubscriptions(e){const t=e[0].ndk,n=new wl(t,e);this.executeSubscription(n)}executeSubscription(e){this.debug("subscribing",{filter:e.filter});for(const t of this.relays)if(1===t.status)this.subscribeOnRelay(t,e);else{const n=()=>{this.debug("new relay coming online for active subscription",{relay:t.url,filter:e.filter}),this.subscribeOnRelay(t,e)};t.once("connect",n),e.once("close",(()=>{t.removeListener("connect",n)}))}return e}async publish(e,t){const n=new Set,r=Array.from(this.relays).map((r=>new Promise((o=>{r.publish(e,t).then((()=>{n.add(r),o()})).catch((e=>{this.debug("error publishing to relay",{relay:r.url,err:e}),o()}))}))));if(await Promise.all(r),0===n.size)throw new Error("No relay was able to receive the event");return n}size(){return this.relays.size}};var xl=class{constructor(){if(d(this,"_userPromise"),d(this,"nip04Queue",[]),d(this,"nip04Processing",!1),d(this,"debug"),!window.nostr)throw new Error("NIP-07 extension not available");this.debug=w("ndk:nip07")}async blockUntilReady(){var e;const t=await(null==(e=window.nostr)?void 0:e.getPublicKey());if(!t)throw new Error("User rejected access");return new cl({hexpubkey:t})}async user(){return this._userPromise||(this._userPromise=this.blockUntilReady()),this._userPromise}async sign(e){if(!window.nostr)throw new Error("NIP-07 extension not available");return(await window.nostr.signEvent(e)).sig}async encrypt(e,t){if(!window.nostr)throw new Error("NIP-07 extension not available");const n=e.hexpubkey();return this.queueNip04("encrypt",n,t)}async decrypt(e,t){if(!window.nostr)throw new Error("NIP-07 extension not available");const n=e.hexpubkey();return this.queueNip04("decrypt",n,t)}async queueNip04(e,t,n){return new Promise(((r,o)=>{this.nip04Queue.push({type:e,counterpartyHexpubkey:t,value:n,resolve:r,reject:o}),this.nip04Processing||this.processNip04Queue()}))}async processNip04Queue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e&&0===this.nip04Queue.length)return void(this.nip04Processing=!1);this.nip04Processing=!0;const{type:n,counterpartyHexpubkey:r,value:o,resolve:i,reject:a}=e||this.nip04Queue.shift();this.debug("Processing encryption queue item",{type:n,counterpartyHexpubkey:r,value:o});try{let e;e="encrypt"===n?await window.nostr.nip04.encrypt(r,o):await window.nostr.nip04.decrypt(r,o),i(e)}catch(s){if(s.message&&s.message.includes("call already executing")&&t<5)return this.debug("Retrying encryption queue item",{type:n,counterpartyHexpubkey:r,value:o,retries:t}),void setTimeout((()=>{this.processNip04Queue(e,t+1)}),50*t);a(s)}this.processNip04Queue()}},El=class extends x{constructor(e,t,n){super(),d(this,"ndk"),d(this,"signer"),d(this,"debug"),this.ndk=e,this.signer=t,this.debug=n.extend("rpc")}async subscribe(e){const t=this.ndk.subscribe(e,{closeOnEose:!1});return t.on("event",(async e=>{try{const t=await this.parseEvent(e);t.method?this.emit("request",t):this.emit(`response-${t.id}`,t)}catch(t){this.debug("error parsing event",t,e)}})),new Promise(((e,n)=>{t.on("eose",(()=>e(t)))}))}async parseEvent(e){const t=this.ndk.getUser({hexpubkey:e.pubkey});t.ndk=this.ndk;const n=await this.signer.decrypt(t,e.content),r=JSON.parse(n),{id:o,method:i,params:a,result:s,error:l}=r;return i?{id:o,pubkey:e.pubkey,method:i,params:a,event:e}:{id:o,result:s,error:l,event:e}}async sendResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:24133,o=arguments.length>4?arguments[4]:void 0;const i={id:e,result:n};o&&(i.error=o);const a=await this.signer.user(),s=this.ndk.getUser({hexpubkey:t}),l=new gl(this.ndk,{kind:r,content:JSON.stringify(i),tags:[["p",t]],pubkey:a.hexpubkey()});l.content=await this.signer.encrypt(s,l.content),await l.sign(this.signer),await this.ndk.publish(l)}async sendRequest(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:24133,o=arguments.length>4?arguments[4]:void 0;const i=Math.random().toString(36).substring(7),a=await this.signer.user(),s=this.ndk.getUser({hexpubkey:e}),l={id:i,method:t,params:n},c=new Promise((e=>{o&&this.once(`response-${i}`,o)})),u=new gl(this.ndk,{kind:r,content:JSON.stringify(l),tags:[["p",e]],pubkey:a.hexpubkey()});return u.content=await this.signer.encrypt(s,u.content),await u.sign(this.signer),this.debug("sending request to",e),await this.ndk.publish(u),c}},_l=class{constructor(e,t,n){let r,o;if(d(this,"ndk"),d(this,"remoteUser"),d(this,"remotePubkey"),d(this,"token"),d(this,"localSigner"),d(this,"rpc"),d(this,"debug"),t.includes("#")){const e=t.split("#");r=new cl({npub:e[0]}).hexpubkey(),o=e[1]}else r=t.startsWith("npub")?new cl({npub:t}).hexpubkey():t;this.ndk=e,this.remotePubkey=r,this.token=o,this.debug=e.debug.extend("nip46:signer"),this.remoteUser=new cl({hexpubkey:r}),this.localSigner=n||Nl.generate(),this.rpc=new El(e,this.localSigner,this.debug)}async user(){return this.remoteUser}async blockUntilReady(){const e=await this.localSigner.user(),t=this.ndk.getUser({npub:e.npub});return await this.rpc.subscribe({kinds:[24133],"#p":[e.hexpubkey()]}),new Promise(((n,r)=>{setTimeout((()=>{const o=[e.hexpubkey()];this.token&&o.push(this.token),this.rpc.sendRequest(this.remotePubkey,"connect",o,24133,(e=>{"ack"===e.result?n(t):r(e.error)}))}),100)}))}async encrypt(e,t){return this.debug("asking for encryption"),new Promise(((n,r)=>{this.rpc.sendRequest(this.remotePubkey,"nip04_encrypt",[e.hexpubkey(),t],24133,(e=>{e.error?r(e.error):n(e.result)}))}))}async decrypt(e,t){return this.debug("asking for decryption"),new Promise(((n,r)=>{this.rpc.sendRequest(this.remotePubkey,"nip04_decrypt",[e.hexpubkey(),t],24133,(e=>{if(e.error)r(e.error);else{const t=JSON.parse(e.result);n(t[0])}}))}))}async sign(e){return this.debug("asking for a signature"),new Promise(((t,n)=>{this.rpc.sendRequest(this.remotePubkey,"sign_event",[JSON.stringify(e)],24133,(e=>{if(this.debug("got a response",e),e.error)n(e.error);else{const n=JSON.parse(e.result);t(n.sig)}}))}))}},Nl=class{constructor(e){d(this,"_user"),d(this,"privateKey"),e&&(this.privateKey=e,this._user=new cl({hexpubkey:zo(this.privateKey)}))}static generate(){const e=bt(ht.utils.randomPrivateKey());return new Nl(e)}async blockUntilReady(){if(!this._user)throw new Error("NDKUser not initialized");return this._user}async user(){return await this.blockUntilReady(),this._user}async sign(e){if(!this.privateKey)throw Error("Attempted to sign without a private key");return Zo(e,this.privateKey)}async encrypt(e,t){if(!this.privateKey)throw Error("Attempted to encrypt without a private key");const n=e.hexpubkey();return await vi.encrypt(this.privateKey,n,t)}async decrypt(e,t){if(!this.privateKey)throw Error("Attempted to decrypt without a private key");const n=e.hexpubkey();return await vi.decrypt(this.privateKey,n,t)}},Sl=class extends x{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),d(this,"pool"),d(this,"signer"),d(this,"cacheAdapter"),d(this,"debug"),d(this,"devWriteRelaySet"),d(this,"delayedSubscriptions"),this.debug=e.debug||w("ndk"),this.pool=new yl(e.explicitRelayUrls||[],this),this.signer=e.signer,this.cacheAdapter=e.cacheAdapter,this.delayedSubscriptions=new Map,e.devWriteRelayUrls&&(this.devWriteRelaySet=kl.fromRelayUrls(e.devWriteRelayUrls,this))}toJSON(){return{relayCount:this.pool.relays.size}.toString()}async connect(e){return this.debug("Connecting to relays",{timeoutMs:e}),this.pool.connect(e)}getUser(e){const t=new cl(e);return t.ndk=this,t}subscribe(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=new vl(this,e,t,n);return r&&o.start(),o}async publish(e,t,n){return t||(t=this.devWriteRelaySet||function(e,t){var n;const r=new Set;return null==(n=e.pool)||n.relays.forEach((e=>r.add(e))),new kl(r,e)}(this)),t.publish(e,n)}async fetchEvent(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if(t="string"==typeof e?function(e){let t;try{switch(t=ii.decode(e),t.type){case"nevent":return{ids:[t.data.id]};case"note":return{ids:[t.data]};case"naddr":return{authors:[t.data.pubkey],"#d":[t.data.identifier],kinds:[t.data.kind]}}}catch{}return{ids:[e]}}(e):e,!t)throw new Error(`Invalid filter: ${JSON.stringify(e)}`);return new Promise((e=>{const o=this.subscribe(t,{...n,closeOnEose:!0},r,!1);o.on("event",(t=>{t.ndk=this,e(t)})),o.on("eose",(()=>{e(null)})),o.start()}))}async fetchEvents(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return new Promise((r=>{const o=new Map,i=this.subscribe(e,{...t,closeOnEose:!0},n,!1);i.on("event",(e=>{const t=o.get(e.tagId());t&&(e=function(e,t){return e.created_at>t.created_at?e:t}(t,e)),e.ndk=this,o.set(e.tagId(),e)})),i.on("eose",(()=>{r(new Set(o.values()))})),i.start()}))}async assertSigner(){if(!this.signer)throw this.emit("signerRequired"),new Error("Signer required")}};var Cl,Al={exports:{}},Rl={};!function(e){e.exports=function(){if(Cl)return Rl;Cl=1;var e=n,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function s(e,n,r){var s,l={},c=null,u=null;for(s in void 0!==r&&(c=""+r),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(u=n.ref),n)o.call(n,s)&&!a.hasOwnProperty(s)&&(l[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps)void 0===l[s]&&(l[s]=n[s]);return{$$typeof:t,type:e,key:c,ref:u,props:l,_owner:i.current}}return Rl.Fragment=r,Rl.jsx=s,Rl.jsxs=s,Rl}()}(Al);const Tl=Al.exports.jsx,Bl=(0,n.createContext)({ndk:void 0,signer:void 0,fetchEvents:e=>Promise.resolve([]),loginWithNip46:(e,t)=>Promise.resolve(void 0),loginWithSecret:e=>Promise.resolve(void 0),loginWithNip07:()=>Promise.resolve(void 0),signPublishEvent:(e,t)=>Promise.resolve(void 0),getUser:e=>cl.prototype,getProfile:e=>({})}),jl=e=>{let{children:t,relayUrls:r}=e;const{ndk:o,signer:i,setSigner:a,fetchEvents:s,signPublishEvent:l}=function(e){const t=(0,n.useRef)(!1),[r,o]=(0,n.useState)(void 0),[i,a]=(0,n.useState)(void 0);async function s(e,t){const n=new Sl({explicitRelayUrls:e,signer:t});t&&a(t);try{await n.connect(),o(n)}catch(r){console.error("ERROR loading NDK NDKInstance",r)}}return(0,n.useEffect)((()=>{!async function(){void 0===r&&!1===t.current&&(t.current=!0,await s(e))}()}),[]),{ndk:r,signer:i,loadNdk:s,setSigner:async function(t){s(e,t)},fetchEvents:async function(e){return void 0===r?[]:new Promise((t=>{const n=new Map,o=r.subscribe(e,{closeOnEose:!0});o.on("event",(e=>{e.ndk=r,n.set(e.tagId(),e)})),o.on("eose",(()=>{setTimeout((()=>t(Array.from(new Set(n.values())))),3e3)}))}))},signPublishEvent:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{repost:!1,publish:!0};if(void 0!==r)return e.ndk=r,t.repost?await e.repost():await e.sign(),t.publish&&await e.publish(),e}}}(r),{getUser:c,getProfile:u}=(e=>{const[t,r]=(0,n.useState)({}),o=(0,n.useRef)({});async function i(t){if(null==e||o.current[t])return;let n;o.current={...o.current,[t]:cl.prototype},n=t.startsWith("npub")?e.getUser({npub:t}):e.getUser({hexpubkey:t}),await n.fetchProfile(),n.profile&&(o.current={...o.current,[t]:n},r(o.current))}return{getUser:function(e){return t[e]?t[e]:(i(e),cl.prototype)},getProfile:function(e){return t[e]?t[e].profile:(i(e),{})}}})(o);return Tl(Bl.Provider,{value:{ndk:o,signer:i,fetchEvents:s,loginWithNip07:async function(){const e=await async function(){try{const e=new xl;return e.user().then((async t=>{if(t.npub)return{user:t,npub:t.npub,signer:e}}))}catch(t){throw t}}();if(e){const{signer:t}=e;return await a(t),e}},loginWithNip46:async function(e,t){if(void 0===o)return;const n=await async function(e,t,n){try{let r=Nl.generate();n&&(r=new Nl(n));const o=new _l(e,t,r);return o.user().then((async e=>{if(e.npub)return await o.blockUntilReady(),{user:e,npub:(await o.user()).npub,sk:r.privateKey,token:t,remoteSigner:o,localSigner:r}}))}catch(i){throw i}}(o,e,t);return n?(await a(n.remoteSigner),n):void 0},loginWithSecret:async function(e){const t=await async function(e){try{let t=e;"nsec"===t.substring(0,4)&&(t=ii.decode(t).data);const n=new Nl(t);return n.user().then((async e=>{if(e.npub)return{user:e,npub:e.npub,sk:t,signer:n}}))}catch(r){throw r}}(e);if(t){const{signer:e}=t;return await a(e),t}},signPublishEvent:l,getUser:c,getProfile:u},children:t})},Ol=()=>{const e=(0,n.useContext)(Bl);if(void 0===e)throw new Error("import NDKProvider to use useNDK");return e};function Il(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function Pl(e){return function t(n){return 0===arguments.length||Il(n)?t:e.apply(this,arguments)}}Array.isArray;function Ll(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var zl=Object.prototype.toString,Ul=function(){return"[object Arguments]"===zl.call(arguments)?function(e){return"[object Arguments]"===zl.call(e)}:function(e){return Ll("callee",e)}}();const Ml=Ul;var Fl=!{toString:null}.propertyIsEnumerable("toString"),Dl=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ql=function(){return arguments.propertyIsEnumerable("length")}(),Hl=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1};Object.keys;Number.isInteger;const Wl=["wss://relay.damus.io","wss://relay.primal.net","wss://relay.snort.social","wss://nostr.swiss-enigma.ch"];var $l,Kl=__webpack_require__(168),Ql=__webpack_require__.t(Kl,2);function Gl(){return Gl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gl.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}($l||($l={}));const Vl="popstate";function Zl(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Yl(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Ry){}}}function Jl(e,t){return{usr:e.state,key:e.key,idx:t}}function Xl(e,t,n,r){return void 0===n&&(n=null),Gl({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?tc(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function ec(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function tc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function nc(e,t,n,r){void 0===r&&(r={});let{window:o=document.defaultView,v5Compat:i=!1}=r,a=o.history,s=$l.Pop,l=null,c=u();function u(){return(a.state||{idx:null}).idx}function h(){s=$l.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:s,location:f.location,delta:t})}function d(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:ec(e);return n=n.replace(/ $/,"%20"),Zl(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==c&&(c=0,a.replaceState(Gl({},a.state,{idx:c}),""));let f={get action(){return s},get location(){return e(o,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(Vl,h),l=e,()=>{o.removeEventListener(Vl,h),l=null}},createHref:e=>t(o,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s=$l.Push;let r=Xl(f.location,e,t);n&&n(r,e),c=u()+1;let h=Jl(r,c),d=f.createHref(r);try{a.pushState(h,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;o.location.assign(d)}i&&l&&l({action:s,location:f.location,delta:1})},replace:function(e,t){s=$l.Replace;let r=Xl(f.location,e,t);n&&n(r,e),c=u();let o=Jl(r,c),h=f.createHref(r);a.replaceState(o,"",h),i&&l&&l({action:s,location:f.location,delta:0})},go:e=>a.go(e)};return f}var rc;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(rc||(rc={}));const oc=new Set(["lazy","caseSensitive","path","id","index","children"]);function ic(e,t,n,r){return void 0===n&&(n=[]),void 0===r&&(r={}),e.map(((e,o)=>{let i=[...n,String(o)],a="string"===typeof e.id?e.id:i.join("-");if(Zl(!0!==e.index||!e.children,"Cannot specify children on an index route"),Zl(!r[a],'Found a route id collision on id "'+a+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){let n=Gl({},e,t(e),{id:a});return r[a]=n,n}{let n=Gl({},e,t(e),{id:a,children:void 0});return r[a]=n,e.children&&(n.children=ic(e.children,t,i,r)),n}}))}function ac(e,t,n){return void 0===n&&(n="/"),sc(e,t,n,!1)}function sc(e,t,n,r){let o=kc(("string"===typeof t?tc(t):t).pathname||"/",n);if(null==o)return null;let i=lc(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let a=null;for(let s=0;null==a&&s<i.length;++s){let e=wc(o);a=bc(i[s],e,r)}return a}function lc(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let o=(e,o,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};a.relativePath.startsWith("/")&&(Zl(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=Sc([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(Zl(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),lc(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:yc(s,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of cc(e.path))o(e,t,r);else o(e,t)})),t}function cc(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return o?[i,""]:[i];let a=cc(r.join("/")),s=[];return s.push(...a.map((e=>""===e?i:[i,e].join("/")))),o&&s.push(...a),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const uc=/^:[\w-]+$/,hc=3,dc=2,fc=1,pc=10,gc=-2,mc=e=>"*"===e;function yc(e,t){let n=e.split("/"),r=n.length;return n.some(mc)&&(r+=gc),t&&(r+=dc),n.filter((e=>!mc(e))).reduce(((e,t)=>e+(uc.test(t)?hc:""===t?fc:pc)),r)}function bc(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,o={},i="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=vc({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=vc({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(o,u.params),a.push({params:o,pathname:Sc([i,u.pathname]),pathnameBase:Cc(Sc([i,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(i=Sc([i,u.pathnameBase]))}return a}function vc(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Yl("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let i=new RegExp(o,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],a=i.replace(/(.)\/+$/,"$1"),s=o.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:o}=t;if("*"===r){let e=s[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=o&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:i,pathnameBase:a,pattern:e}}function wc(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return Yl(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function kc(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function xc(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Ec(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function _c(e,t){let n=Ec(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function Nc(e,t,n,r){let o;void 0===r&&(r=!1),"string"===typeof e?o=tc(e):(o=Gl({},e),Zl(!o.pathname||!o.pathname.includes("?"),xc("?","pathname","search",o)),Zl(!o.pathname||!o.pathname.includes("#"),xc("#","pathname","hash",o)),Zl(!o.search||!o.search.includes("#"),xc("#","search","hash",o)));let i,a=""===e||""===o.pathname,s=a?"/":o.pathname;if(null==s)i=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:o=""}="string"===typeof e?tc(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:Ac(r),hash:Rc(o)}}(o,i),c=s&&"/"!==s&&s.endsWith("/"),u=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const Sc=e=>e.join("/").replace(/\/\/+/g,"/"),Cc=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ac=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Rc=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;class Tc{constructor(e,t,n,r){void 0===r&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function Bc(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const jc=["post","put","patch","delete"],Oc=new Set(jc),Ic=["get",...jc],Pc=new Set(Ic),Lc=new Set([301,302,303,307,308]),zc=new Set([307,308]),Uc={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Mc={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Fc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Dc=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qc=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)}),Hc="remix-router-transitions";function Wc(e){const t=e.window?e.window:"undefined"!==typeof window?window:void 0,n="undefined"!==typeof t&&"undefined"!==typeof t.document&&"undefined"!==typeof t.document.createElement,r=!n;let o;if(Zl(e.routes.length>0,"You must provide a non-empty routes array to createRouter"),e.mapRouteProperties)o=e.mapRouteProperties;else if(e.detectErrorBoundary){let t=e.detectErrorBoundary;o=e=>({hasErrorBoundary:t(e)})}else o=qc;let i,a,s,l={},c=ic(e.routes,o,void 0,l),u=e.basename||"/",h=e.unstable_dataStrategy||eu,d=e.unstable_patchRoutesOnNavigation,f=Gl({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),p=null,g=new Set,m=1e3,y=new Set,b=null,v=null,w=null,k=null!=e.hydrationData,x=ac(c,e.history.location,u),E=null;if(null==x&&!d){let t=pu(404,{pathname:e.history.location.pathname}),{matches:n,route:r}=fu(c);x=n,E={[r.id]:t}}if(x&&!e.hydrationData){ye(x,c,e.history.location.pathname).active&&(x=null)}if(x)if(x.some((e=>e.route.lazy)))a=!1;else if(x.some((e=>e.route.loader)))if(f.v7_partialHydration){let t=e.hydrationData?e.hydrationData.loaderData:null,n=e.hydrationData?e.hydrationData.errors:null,r=e=>!e.route.loader||("function"!==typeof e.route.loader||!0!==e.route.loader.hydrate)&&(t&&void 0!==t[e.route.id]||n&&void 0!==n[e.route.id]);if(n){let e=x.findIndex((e=>void 0!==n[e.route.id]));a=x.slice(0,e+1).every(r)}else a=x.every(r)}else a=null!=e.hydrationData;else a=!0;else if(a=!1,x=[],f.v7_partialHydration){let t=ye(null,c,e.history.location.pathname);t.active&&t.matches&&(x=t.matches)}let _,N={historyAction:e.history.action,location:e.history.location,matches:x,initialized:a,navigation:Uc,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||E,fetchers:new Map,blockers:new Map},S=$l.Pop,C=!1,A=!1,R=new Map,T=null,B=!1,j=!1,O=[],I=new Set,P=new Map,L=0,z=-1,U=new Map,M=new Set,F=new Map,D=new Map,q=new Set,H=new Map,W=new Map,$=new Map,K=!1;function Q(e,t){void 0===t&&(t={}),N=Gl({},N,e);let n=[],r=[];f.v7_fetcherPersist&&N.fetchers.forEach(((e,t)=>{"idle"===e.state&&(q.has(t)?r.push(t):n.push(t))})),[...g].forEach((e=>e(N,{deletedFetchers:r,unstable_viewTransitionOpts:t.viewTransitionOpts,unstable_flushSync:!0===t.flushSync}))),f.v7_fetcherPersist&&(n.forEach((e=>N.fetchers.delete(e))),r.forEach((e=>oe(e))))}function G(t,n,r){var o,a;let s,{flushSync:l}=void 0===r?{}:r,u=null!=N.actionData&&null!=N.navigation.formMethod&&_u(N.navigation.formMethod)&&"loading"===N.navigation.state&&!0!==(null==(o=t.state)?void 0:o._isRedirect);s=n.actionData?Object.keys(n.actionData).length>0?n.actionData:null:u?N.actionData:null;let h=n.loaderData?uu(N.loaderData,n.loaderData,n.matches||[],n.errors):N.loaderData,d=N.blockers;d.size>0&&(d=new Map(d),d.forEach(((e,t)=>d.set(t,Fc))));let f,p=!0===C||null!=N.navigation.formMethod&&_u(N.navigation.formMethod)&&!0!==(null==(a=t.state)?void 0:a._isRedirect);if(i&&(c=i,i=void 0),B||S===$l.Pop||(S===$l.Push?e.history.push(t,t.state):S===$l.Replace&&e.history.replace(t,t.state)),S===$l.Pop){let e=R.get(N.location.pathname);e&&e.has(t.pathname)?f={currentLocation:N.location,nextLocation:t}:R.has(t.pathname)&&(f={currentLocation:t,nextLocation:N.location})}else if(A){let e=R.get(N.location.pathname);e?e.add(t.pathname):(e=new Set([t.pathname]),R.set(N.location.pathname,e)),f={currentLocation:N.location,nextLocation:t}}Q(Gl({},n,{actionData:s,loaderData:h,historyAction:S,location:t,initialized:!0,navigation:Uc,revalidation:"idle",restoreScrollPosition:me(t,n.matches||N.matches),preventScrollReset:p,blockers:d}),{viewTransitionOpts:f,flushSync:!0===l}),S=$l.Pop,C=!1,A=!1,B=!1,j=!1,O=[]}async function V(t,n,r){_&&_.abort(),_=null,S=t,B=!0===(r&&r.startUninterruptedRevalidation),function(e,t){if(b&&w){let n=ge(e,t);b[n]=w()}}(N.location,N.matches),C=!0===(r&&r.preventScrollReset),A=!0===(r&&r.enableViewTransition);let o=i||c,a=r&&r.overrideNavigation,s=ac(o,n,u),l=!0===(r&&r.flushSync),h=ye(s,o,n.pathname);if(h.active&&h.matches&&(s=h.matches),!s){let{error:e,notFoundMatches:t,route:r}=de(n.pathname);return void G(n,{matches:t,loaderData:{},errors:{[r.id]:e}},{flushSync:l})}if(N.initialized&&!j&&function(e,t){if(e.pathname!==t.pathname||e.search!==t.search)return!1;if(""===e.hash)return""!==t.hash;if(e.hash===t.hash)return!0;if(""!==t.hash)return!0;return!1}(N.location,n)&&!(r&&r.submission&&_u(r.submission.formMethod)))return void G(n,{matches:s},{flushSync:l});_=new AbortController;let d,p=iu(e.history,n,_.signal,r&&r.submission);if(r&&r.pendingError)d=[du(s).route.id,{type:rc.error,error:r.pendingError}];else if(r&&r.submission&&_u(r.submission.formMethod)){let t=await async function(e,t,n,r,o,i){void 0===i&&(i={});ee();let a,s=function(e,t){let n={state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text};return n}(t,n);if(Q({navigation:s},{flushSync:!0===i.flushSync}),o){let n=await be(r,t.pathname,e.signal);if("aborted"===n.type)return{shortCircuited:!0};if("error"===n.type){let{boundaryId:e,error:r}=fe(t.pathname,n);return{matches:n.partialMatches,pendingActionResult:[e,{type:rc.error,error:r}]}}if(!n.matches){let{notFoundMatches:e,error:n,route:r}=de(t.pathname);return{matches:e,pendingActionResult:[r.id,{type:rc.error,error:n}]}}r=n.matches}let l=Au(r,t);if(l.route.action||l.route.lazy){if(a=(await J("action",e,[l],r))[0],e.signal.aborted)return{shortCircuited:!0}}else a={type:rc.error,error:pu(405,{method:e.method,pathname:t.pathname,routeId:l.route.id})};if(wu(a)){let t;if(i&&null!=i.replace)t=i.replace;else{t=ou(a.response.headers.get("Location"),new URL(e.url),u)===N.location.pathname+N.location.search}return await Y(e,a,{submission:n,replace:t}),{shortCircuited:!0}}if(bu(a))throw pu(400,{type:"defer-action"});if(vu(a)){let e=du(r,l.route.id);return!0!==(i&&i.replace)&&(S=$l.Push),{matches:r,pendingActionResult:[e.route.id,a]}}return{matches:r,pendingActionResult:[l.route.id,a]}}(p,n,r.submission,s,h.active,{replace:r.replace,flushSync:l});if(t.shortCircuited)return;if(t.pendingActionResult){let[e,r]=t.pendingActionResult;if(vu(r)&&Bc(r.error)&&404===r.error.status)return _=null,void G(n,{matches:t.matches,loaderData:{},errors:{[e]:r.error}})}s=t.matches||s,d=t.pendingActionResult,a=Tu(n,r.submission),l=!1,h.active=!1,p=iu(e.history,p.url,p.signal)}let{shortCircuited:g,matches:m,loaderData:y,errors:v}=await async function(t,n,r,o,a,s,l,h,d,p,g){let m=a||Tu(n,s),y=s||l||Ru(m),b=!B&&(!f.v7_partialHydration||!d);if(o){if(b){let e=Z(g);Q(Gl({navigation:m},void 0!==e?{actionData:e}:{}),{flushSync:p})}let e=await be(r,n.pathname,t.signal);if("aborted"===e.type)return{shortCircuited:!0};if("error"===e.type){let{boundaryId:t,error:r}=fe(n.pathname,e);return{matches:e.partialMatches,loaderData:{},errors:{[t]:r}}}if(!e.matches){let{error:e,notFoundMatches:t,route:r}=de(n.pathname);return{matches:t,loaderData:{},errors:{[r.id]:e}}}r=e.matches}let v=i||c,[w,k]=Gc(e.history,N,r,y,n,f.v7_partialHydration&&!0===d,f.v7_skipActionErrorRevalidation,j,O,I,q,F,M,v,u,g);if(pe((e=>!(r&&r.some((t=>t.route.id===e)))||w&&w.some((t=>t.route.id===e)))),z=++L,0===w.length&&0===k.length){let e=se();return G(n,Gl({matches:r,loaderData:{},errors:g&&vu(g[1])?{[g[0]]:g[1].error}:null},hu(g),e?{fetchers:new Map(N.fetchers)}:{}),{flushSync:p}),{shortCircuited:!0}}if(b){let e={};if(!o){e.navigation=m;let t=Z(g);void 0!==t&&(e.actionData=t)}k.length>0&&(e.fetchers=function(e){return e.forEach((e=>{let t=N.fetchers.get(e.key),n=Bu(void 0,t?t.data:void 0);N.fetchers.set(e.key,n)})),new Map(N.fetchers)}(k)),Q(e,{flushSync:p})}k.forEach((e=>{P.has(e.key)&&ie(e.key),e.controller&&P.set(e.key,e.controller)}));let x=()=>k.forEach((e=>ie(e.key)));_&&_.signal.addEventListener("abort",x);let{loaderResults:E,fetcherResults:S}=await X(N.matches,r,w,k,t);if(t.signal.aborted)return{shortCircuited:!0};_&&_.signal.removeEventListener("abort",x);k.forEach((e=>P.delete(e.key)));let C=gu([...E,...S]);if(C){if(C.idx>=w.length){let e=k[C.idx-w.length].key;M.add(e)}return await Y(t,C.result,{replace:h}),{shortCircuited:!0}}let{loaderData:A,errors:R}=cu(N,r,w,E,g,k,S,H);H.forEach(((e,t)=>{e.subscribe((n=>{(n||e.done)&&H.delete(t)}))})),f.v7_partialHydration&&d&&N.errors&&Object.entries(N.errors).filter((e=>{let[t]=e;return!w.some((e=>e.route.id===t))})).forEach((e=>{let[t,n]=e;R=Object.assign(R||{},{[t]:n})}));let T=se(),U=le(z),D=T||U||k.length>0;return Gl({matches:r,loaderData:A,errors:R},D?{fetchers:new Map(N.fetchers)}:{})}(p,n,s,h.active,a,r&&r.submission,r&&r.fetcherSubmission,r&&r.replace,r&&!0===r.initialHydration,l,d);g||(_=null,G(n,Gl({matches:m||s},hu(d),{loaderData:y,errors:v})))}function Z(e){return e&&!vu(e[1])?{[e[0]]:e[1].data}:N.actionData?0===Object.keys(N.actionData).length?null:N.actionData:void 0}async function Y(r,o,i){let{submission:a,fetcherSubmission:s,replace:l}=void 0===i?{}:i;o.response.headers.has("X-Remix-Revalidate")&&(j=!0);let c=o.response.headers.get("Location");Zl(c,"Expected a Location header on the redirect Response"),c=ou(c,new URL(r.url),u);let h=Xl(N.location,c,{_isRedirect:!0});if(n){let n=!1;if(o.response.headers.has("X-Remix-Reload-Document"))n=!0;else if(Dc.test(c)){const r=e.history.createURL(c);n=r.origin!==t.location.origin||null==kc(r.pathname,u)}if(n)return void(l?t.location.replace(c):t.location.assign(c))}_=null;let d=!0===l||o.response.headers.has("X-Remix-Replace")?$l.Replace:$l.Push,{formMethod:f,formAction:p,formEncType:g}=N.navigation;!a&&!s&&f&&p&&g&&(a=Ru(N.navigation));let m=a||s;if(zc.has(o.response.status)&&m&&_u(m.formMethod))await V(d,h,{submission:Gl({},m,{formAction:c}),preventScrollReset:C});else{let e=Tu(h,a);await V(d,h,{overrideNavigation:e,fetcherSubmission:s,preventScrollReset:C})}}async function J(e,t,n,r){try{let i=await tu(h,e,t,n,r,l,o);return await Promise.all(i.map(((e,o)=>{if(yu(e)){let i=e.result;return{type:rc.redirect,response:ru(i,t,n[o].route.id,r,u,f.v7_relativeSplatPath)}}return nu(e)})))}catch(Ry){return n.map((()=>({type:rc.error,error:Ry})))}}async function X(t,n,r,o,i){let[a,...s]=await Promise.all([r.length?J("loader",i,r,n):[],...o.map((t=>{if(t.matches&&t.match&&t.controller){return J("loader",iu(e.history,t.path,t.controller.signal),[t.match],t.matches).then((e=>e[0]))}return Promise.resolve({type:rc.error,error:pu(404,{pathname:t.path})})}))]);return await Promise.all([Nu(t,r,a,a.map((()=>i.signal)),!1,N.loaderData),Nu(t,o.map((e=>e.match)),s,o.map((e=>e.controller?e.controller.signal:null)),!0)]),{loaderResults:a,fetcherResults:s}}function ee(){j=!0,O.push(...pe()),F.forEach(((e,t)=>{P.has(t)&&(I.add(t),ie(t))}))}function te(e,t,n){void 0===n&&(n={}),N.fetchers.set(e,t),Q({fetchers:new Map(N.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function ne(e,t,n,r){void 0===r&&(r={});let o=du(N.matches,t);oe(e),Q({errors:{[o.route.id]:n},fetchers:new Map(N.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function re(e){return f.v7_fetcherPersist&&(D.set(e,(D.get(e)||0)+1),q.has(e)&&q.delete(e)),N.fetchers.get(e)||Mc}function oe(e){let t=N.fetchers.get(e);!P.has(e)||t&&"loading"===t.state&&U.has(e)||ie(e),F.delete(e),U.delete(e),M.delete(e),q.delete(e),I.delete(e),N.fetchers.delete(e)}function ie(e){let t=P.get(e);Zl(t,"Expected fetch controller: "+e),t.abort(),P.delete(e)}function ae(e){for(let t of e){let e=ju(re(t).data);N.fetchers.set(t,e)}}function se(){let e=[],t=!1;for(let n of M){let r=N.fetchers.get(n);Zl(r,"Expected fetcher: "+n),"loading"===r.state&&(M.delete(n),e.push(n),t=!0)}return ae(e),t}function le(e){let t=[];for(let[n,r]of U)if(r<e){let e=N.fetchers.get(n);Zl(e,"Expected fetcher: "+n),"loading"===e.state&&(ie(n),U.delete(n),t.push(n))}return ae(t),t.length>0}function ce(e){N.blockers.delete(e),W.delete(e)}function ue(e,t){let n=N.blockers.get(e)||Fc;Zl("unblocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"proceeding"===t.state||"blocked"===n.state&&"unblocked"===t.state||"proceeding"===n.state&&"unblocked"===t.state,"Invalid blocker state transition: "+n.state+" -> "+t.state);let r=new Map(N.blockers);r.set(e,t),Q({blockers:r})}function he(e){let{currentLocation:t,nextLocation:n,historyAction:r}=e;if(0===W.size)return;W.size>1&&Yl(!1,"A router only supports one blocker at a time");let o=Array.from(W.entries()),[i,a]=o[o.length-1],s=N.blockers.get(i);return s&&"proceeding"===s.state?void 0:a({currentLocation:t,nextLocation:n,historyAction:r})?i:void 0}function de(e){let t=pu(404,{pathname:e}),n=i||c,{matches:r,route:o}=fu(n);return pe(),{notFoundMatches:r,route:o,error:t}}function fe(e,t){return{boundaryId:du(t.partialMatches).route.id,error:pu(400,{type:"route-discovery",pathname:e,message:null!=t.error&&"message"in t.error?t.error:String(t.error)})}}function pe(e){let t=[];return H.forEach(((n,r)=>{e&&!e(r)||(n.cancel(),t.push(r),H.delete(r))})),t}function ge(e,t){if(v){return v(e,t.map((e=>function(e,t){let{route:n,pathname:r,params:o}=e;return{id:n.id,pathname:r,params:o,data:t[n.id],handle:n.handle}}(e,N.loaderData))))||e.key}return e.key}function me(e,t){if(b){let n=ge(e,t),r=b[n];if("number"===typeof r)return r}return null}function ye(e,t,n){if(d){if(y.has(n))return{active:!1,matches:e};if(!e){return{active:!0,matches:sc(t,n,u,!0)||[]}}if(Object.keys(e[0].params).length>0){return{active:!0,matches:sc(t,n,u,!0)}}}return{active:!1,matches:null}}async function be(e,t,n){let r=e;for(;;){let e=null==i,a=i||c;try{await Yc(d,t,r,a,l,o,$,n)}catch(Ry){return{type:"error",error:Ry,partialMatches:r}}finally{e&&(c=[...c])}if(n.aborted)return{type:"aborted"};let s=ac(a,t,u);if(s)return ve(t,y),{type:"success",matches:s};let h=sc(a,t,u,!0);if(!h||r.length===h.length&&r.every(((e,t)=>e.route.id===h[t].route.id)))return ve(t,y),{type:"success",matches:null};r=h}}function ve(e,t){if(t.size>=m){let e=t.values().next().value;t.delete(e)}t.add(e)}return s={get basename(){return u},get future(){return f},get state(){return N},get routes(){return c},get window(){return t},initialize:function(){if(p=e.history.listen((t=>{let{action:n,location:r,delta:o}=t;if(K)return void(K=!1);Yl(0===W.size||null!=o,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let i=he({currentLocation:N.location,nextLocation:r,historyAction:n});return i&&null!=o?(K=!0,e.history.go(-1*o),void ue(i,{state:"blocked",location:r,proceed(){ue(i,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),e.history.go(o)},reset(){let e=new Map(N.blockers);e.set(i,Fc),Q({blockers:e})}})):V(n,r)})),n){!function(e,t){try{let n=e.sessionStorage.getItem(Hc);if(n){let e=JSON.parse(n);for(let[n,r]of Object.entries(e||{}))r&&Array.isArray(r)&&t.set(n,new Set(r||[]))}}catch(Ry){}}(t,R);let e=()=>function(e,t){if(t.size>0){let r={};for(let[e,n]of t)r[e]=[...n];try{e.sessionStorage.setItem(Hc,JSON.stringify(r))}catch(n){Yl(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}(t,R);t.addEventListener("pagehide",e),T=()=>t.removeEventListener("pagehide",e)}return N.initialized||V($l.Pop,N.location,{initialHydration:!0}),s},subscribe:function(e){return g.add(e),()=>g.delete(e)},enableScrollRestoration:function(e,t,n){if(b=e,w=t,v=n||null,!k&&N.navigation===Uc){k=!0;let e=me(N.location,N.matches);null!=e&&Q({restoreScrollPosition:e})}return()=>{b=null,w=null,v=null}},navigate:async function t(n,r){if("number"===typeof n)return void e.history.go(n);let o=$c(N.location,N.matches,u,f.v7_prependBasename,n,f.v7_relativeSplatPath,null==r?void 0:r.fromRouteId,null==r?void 0:r.relative),{path:i,submission:a,error:s}=Kc(f.v7_normalizeFormMethod,!1,o,r),l=N.location,c=Xl(N.location,i,r&&r.state);c=Gl({},c,e.history.encodeLocation(c));let h=r&&null!=r.replace?r.replace:void 0,d=$l.Push;!0===h?d=$l.Replace:!1===h||null!=a&&_u(a.formMethod)&&a.formAction===N.location.pathname+N.location.search&&(d=$l.Replace);let p=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,g=!0===(r&&r.unstable_flushSync),m=he({currentLocation:l,nextLocation:c,historyAction:d});if(!m)return await V(d,c,{submission:a,pendingError:s,preventScrollReset:p,replace:r&&r.replace,enableViewTransition:r&&r.unstable_viewTransition,flushSync:g});ue(m,{state:"blocked",location:c,proceed(){ue(m,{state:"proceeding",proceed:void 0,reset:void 0,location:c}),t(n,r)},reset(){let e=new Map(N.blockers);e.set(m,Fc),Q({blockers:e})}})},fetch:function(t,n,o,a){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");P.has(t)&&ie(t);let s=!0===(a&&a.unstable_flushSync),l=i||c,h=$c(N.location,N.matches,u,f.v7_prependBasename,o,f.v7_relativeSplatPath,n,null==a?void 0:a.relative),d=ac(l,h,u),p=ye(d,l,h);if(p.active&&p.matches&&(d=p.matches),!d)return void ne(t,n,pu(404,{pathname:h}),{flushSync:s});let{path:g,submission:m,error:y}=Kc(f.v7_normalizeFormMethod,!0,h,a);if(y)return void ne(t,n,y,{flushSync:s});let b=Au(d,g);C=!0===(a&&a.preventScrollReset),m&&_u(m.formMethod)?async function(t,n,r,o,a,s,l,h){function d(e){if(!e.route.action&&!e.route.lazy){let e=pu(405,{method:h.formMethod,pathname:r,routeId:n});return ne(t,n,e,{flushSync:l}),!0}return!1}if(ee(),F.delete(t),!s&&d(o))return;let p=N.fetchers.get(t);te(t,function(e,t){let n={state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0};return n}(h,p),{flushSync:l});let g=new AbortController,m=iu(e.history,r,g.signal,h);if(s){let e=await be(a,r,m.signal);if("aborted"===e.type)return;if("error"===e.type){let{error:o}=fe(r,e);return void ne(t,n,o,{flushSync:l})}if(!e.matches)return void ne(t,n,pu(404,{pathname:r}),{flushSync:l});if(d(o=Au(a=e.matches,r)))return}P.set(t,g);let y=L,b=await J("action",m,[o],a),v=b[0];if(m.signal.aborted)return void(P.get(t)===g&&P.delete(t));if(f.v7_fetcherPersist&&q.has(t)){if(wu(v)||vu(v))return void te(t,ju(void 0))}else{if(wu(v))return P.delete(t),z>y?void te(t,ju(void 0)):(M.add(t),te(t,Bu(h)),Y(m,v,{fetcherSubmission:h}));if(vu(v))return void ne(t,n,v.error)}if(bu(v))throw pu(400,{type:"defer-action"});let w=N.navigation.location||N.location,k=iu(e.history,w,g.signal),x=i||c,E="idle"!==N.navigation.state?ac(x,N.navigation.location,u):N.matches;Zl(E,"Didn't find any matches after fetcher action");let C=++L;U.set(t,C);let A=Bu(h,v.data);N.fetchers.set(t,A);let[R,T]=Gc(e.history,N,E,h,w,!1,f.v7_skipActionErrorRevalidation,j,O,I,q,F,M,x,u,[o.route.id,v]);T.filter((e=>e.key!==t)).forEach((e=>{let t=e.key,n=N.fetchers.get(t),r=Bu(void 0,n?n.data:void 0);N.fetchers.set(t,r),P.has(t)&&ie(t),e.controller&&P.set(t,e.controller)})),Q({fetchers:new Map(N.fetchers)});let B=()=>T.forEach((e=>ie(e.key)));g.signal.addEventListener("abort",B);let{loaderResults:D,fetcherResults:W}=await X(N.matches,E,R,T,k);if(g.signal.aborted)return;g.signal.removeEventListener("abort",B),U.delete(t),P.delete(t),T.forEach((e=>P.delete(e.key)));let $=gu([...D,...W]);if($){if($.idx>=R.length){let e=T[$.idx-R.length].key;M.add(e)}return Y(k,$.result)}let{loaderData:K,errors:V}=cu(N,N.matches,R,D,void 0,T,W,H);if(N.fetchers.has(t)){let e=ju(v.data);N.fetchers.set(t,e)}le(C),"loading"===N.navigation.state&&C>z?(Zl(S,"Expected pending action"),_&&_.abort(),G(N.navigation.location,{matches:E,loaderData:K,errors:V,fetchers:new Map(N.fetchers)})):(Q({errors:V,loaderData:uu(N.loaderData,K,E,V),fetchers:new Map(N.fetchers)}),j=!1)}(t,n,g,b,d,p.active,s,m):(F.set(t,{routeId:n,path:g}),async function(t,n,r,o,i,a,s,l){let c=N.fetchers.get(t);te(t,Bu(l,c?c.data:void 0),{flushSync:s});let u=new AbortController,h=iu(e.history,r,u.signal);if(a){let e=await be(i,r,h.signal);if("aborted"===e.type)return;if("error"===e.type){let{error:o}=fe(r,e);return void ne(t,n,o,{flushSync:s})}if(!e.matches)return void ne(t,n,pu(404,{pathname:r}),{flushSync:s});o=Au(i=e.matches,r)}P.set(t,u);let d=L,f=await J("loader",h,[o],i),p=f[0];bu(p)&&(p=await Su(p,h.signal,!0)||p);P.get(t)===u&&P.delete(t);if(h.signal.aborted)return;if(q.has(t))return void te(t,ju(void 0));if(wu(p))return z>d?void te(t,ju(void 0)):(M.add(t),void await Y(h,p));if(vu(p))return void ne(t,n,p.error);Zl(!bu(p),"Unhandled fetcher deferred data"),te(t,ju(p.data))}(t,n,g,b,d,p.active,s,m))},revalidate:function(){ee(),Q({revalidation:"loading"}),"submitting"!==N.navigation.state&&("idle"!==N.navigation.state?V(S||N.historyAction,N.navigation.location,{overrideNavigation:N.navigation}):V(N.historyAction,N.location,{startUninterruptedRevalidation:!0}))},createHref:t=>e.history.createHref(t),encodeLocation:t=>e.history.encodeLocation(t),getFetcher:re,deleteFetcher:function(e){if(f.v7_fetcherPersist){let t=(D.get(e)||0)-1;t<=0?(D.delete(e),q.add(e)):D.set(e,t)}else oe(e);Q({fetchers:new Map(N.fetchers)})},dispose:function(){p&&p(),T&&T(),g.clear(),_&&_.abort(),N.fetchers.forEach(((e,t)=>oe(t))),N.blockers.forEach(((e,t)=>ce(t)))},getBlocker:function(e,t){let n=N.blockers.get(e)||Fc;return W.get(e)!==t&&W.set(e,t),n},deleteBlocker:ce,patchRoutes:function(e,t){let n=null==i;Jc(e,t,i||c,l,o),n&&(c=[...c],Q({}))},_internalFetchControllers:P,_internalActiveDeferreds:H,_internalSetRoutes:function(e){l={},i=ic(e,o,void 0,l)}},s}Symbol("deferred");function $c(e,t,n,r,o,i,a,s){let l,c;if(a){l=[];for(let e of t)if(l.push(e),e.route.id===a){c=e;break}}else l=t,c=t[t.length-1];let u=Nc(o||".",_c(l,i),kc(e.pathname,n)||e.pathname,"path"===s);return null==o&&(u.search=e.search,u.hash=e.hash),null!=o&&""!==o&&"."!==o||!c||!c.route.index||Cu(u.search)||(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&"/"!==n&&(u.pathname="/"===u.pathname?n:Sc([n,u.pathname])),ec(u)}function Kc(e,t,n,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:n};if(r.formMethod&&!Eu(r.formMethod))return{path:n,error:pu(405,{method:r.formMethod})};let o,i,a=()=>({path:n,error:pu(400,{type:"invalid-body"})}),s=r.formMethod||"get",l=e?s.toUpperCase():s.toLowerCase(),c=mu(n);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!_u(l))return a();let e="string"===typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce(((e,t)=>{let[n,r]=t;return""+e+n+"="+r+"\n"}),""):String(r.body);return{path:n,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:void 0,text:e}}}if("application/json"===r.formEncType){if(!_u(l))return a();try{let e="string"===typeof r.body?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:e,text:void 0}}}catch(Ry){return a()}}}if(Zl("function"===typeof FormData,"FormData is not available in this environment"),r.formData)o=au(r.formData),i=r.formData;else if(r.body instanceof FormData)o=au(r.body),i=r.body;else if(r.body instanceof URLSearchParams)o=r.body,i=su(o);else if(null==r.body)o=new URLSearchParams,i=new FormData;else try{o=new URLSearchParams(r.body),i=su(o)}catch(Ry){return a()}let u={formMethod:l,formAction:c,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:i,json:void 0,text:void 0};if(_u(u.formMethod))return{path:n,submission:u};let h=tc(n);return t&&h.search&&Cu(h.search)&&o.append("index",""),h.search="?"+o,{path:ec(h),submission:u}}function Qc(e,t){let n=e;if(t){let r=e.findIndex((e=>e.route.id===t));r>=0&&(n=e.slice(0,r))}return n}function Gc(e,t,n,r,o,i,a,s,l,c,u,h,d,f,p,g){let m=g?vu(g[1])?g[1].error:g[1].data:void 0,y=e.createURL(t.location),b=e.createURL(o),v=g&&vu(g[1])?g[0]:void 0,w=v?Qc(n,v):n,k=g?g[1].statusCode:void 0,x=a&&k&&k>=400,E=w.filter(((e,n)=>{let{route:o}=e;if(o.lazy)return!0;if(null==o.loader)return!1;if(i)return!("function"===typeof o.loader&&!o.loader.hydrate)||void 0===t.loaderData[o.id]&&(!t.errors||void 0===t.errors[o.id]);if(function(e,t,n){let r=!t||n.route.id!==t.route.id,o=void 0===e[n.route.id];return r||o}(t.loaderData,t.matches[n],e)||l.some((t=>t===e.route.id)))return!0;let a=t.matches[n],c=e;return Zc(e,Gl({currentUrl:y,currentParams:a.params,nextUrl:b,nextParams:c.params},r,{actionResult:m,actionStatus:k,defaultShouldRevalidate:!x&&(s||y.pathname+y.search===b.pathname+b.search||y.search!==b.search||Vc(a,c))}))})),_=[];return h.forEach(((e,o)=>{if(i||!n.some((t=>t.route.id===e.routeId))||u.has(o))return;let a=ac(f,e.path,p);if(!a)return void _.push({key:o,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null});let l=t.fetchers.get(o),h=Au(a,e.path),g=!1;d.has(o)?g=!1:c.has(o)?(c.delete(o),g=!0):g=l&&"idle"!==l.state&&void 0===l.data?s:Zc(h,Gl({currentUrl:y,currentParams:t.matches[t.matches.length-1].params,nextUrl:b,nextParams:n[n.length-1].params},r,{actionResult:m,actionStatus:k,defaultShouldRevalidate:!x&&s})),g&&_.push({key:o,routeId:e.routeId,path:e.path,matches:a,match:h,controller:new AbortController})})),[E,_]}function Vc(e,t){let n=e.route.path;return e.pathname!==t.pathname||null!=n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Zc(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if("boolean"===typeof n)return n}return t.defaultShouldRevalidate}async function Yc(e,t,n,r,o,i,a,s){let l=[t,...n.map((e=>e.route.id))].join("-");try{let u=a.get(l);u||(u=e({path:t,matches:n,patch:(e,t)=>{s.aborted||Jc(e,t,r,o,i)}}),a.set(l,u)),u&&("object"===typeof(c=u)&&null!=c&&"then"in c)&&await u}finally{a.delete(l)}var c}function Jc(e,t,n,r,o){if(e){var i;let n=r[e];Zl(n,"No route found to patch children into: routeId = "+e);let a=ic(t,o,[e,"patch",String((null==(i=n.children)?void 0:i.length)||"0")],r);n.children?n.children.push(...a):n.children=a}else{let e=ic(t,o,["patch",String(n.length||"0")],r);n.push(...e)}}async function Xc(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let o=n[e.id];Zl(o,"No route found in manifest");let i={};for(let a in r){let e=void 0!==o[a]&&"hasErrorBoundary"!==a;Yl(!e,'Route "'+o.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+a+'" will be ignored.'),e||oc.has(a)||(i[a]=r[a])}Object.assign(o,i),Object.assign(o,Gl({},t(o),{lazy:void 0}))}function eu(e){return Promise.all(e.matches.map((e=>e.resolve())))}async function tu(e,t,n,r,o,i,a,s){let l=r.reduce(((e,t)=>e.add(t.route.id)),new Set),c=new Set,u=await e({matches:o.map((e=>{let r=l.has(e.route.id);return Gl({},e,{shouldLoad:r,resolve:o=>(c.add(e.route.id),r?async function(e,t,n,r,o,i,a){let s,l,c=r=>{let o,s=new Promise(((e,t)=>o=t));l=()=>o(),t.signal.addEventListener("abort",l);let c,u=o=>"function"!==typeof r?Promise.reject(new Error('You cannot call the handler for a route which defines a boolean "'+e+'" [routeId: '+n.route.id+"]")):r({request:t,params:n.params,context:a},...void 0!==o?[o]:[]);return c=i?i((e=>u(e))):(async()=>{try{return{type:"data",result:await u()}}catch(Ry){return{type:"error",result:Ry}}})(),Promise.race([c,s])};try{let i=n.route[e];if(n.route.lazy)if(i){let e,[t]=await Promise.all([c(i).catch((t=>{e=t})),Xc(n.route,o,r)]);if(void 0!==e)throw e;s=t}else{if(await Xc(n.route,o,r),i=n.route[e],!i){if("action"===e){let e=new URL(t.url),r=e.pathname+e.search;throw pu(405,{method:t.method,pathname:r,routeId:n.route.id})}return{type:rc.data,result:void 0}}s=await c(i)}else{if(!i){let e=new URL(t.url);throw pu(404,{pathname:e.pathname+e.search})}s=await c(i)}Zl(void 0!==s.result,"You defined "+("action"===e?"an action":"a loader")+' for route "'+n.route.id+"\" but didn't return anything from your `"+e+"` function. Please return a value or `null`.")}catch(Ry){return{type:rc.error,result:Ry}}finally{l&&t.signal.removeEventListener("abort",l)}return s}(t,n,e,i,a,o,s):Promise.resolve({type:rc.data,result:void 0}))})})),request:n,params:o[0].params,context:s});return o.forEach((e=>Zl(c.has(e.route.id),'`match.resolve()` was not called for route id "'+e.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.'))),u.filter(((e,t)=>l.has(o[t].route.id)))}async function nu(e){let{result:t,type:n}=e;if(xu(t)){let e;try{let n=t.headers.get("Content-Type");e=n&&/\bapplication\/json\b/.test(n)?null==t.body?null:await t.json():await t.text()}catch(Ry){return{type:rc.error,error:Ry}}return n===rc.error?{type:rc.error,error:new Tc(t.status,t.statusText,e),statusCode:t.status,headers:t.headers}:{type:rc.data,data:e,statusCode:t.status,headers:t.headers}}if(n===rc.error){if(ku(t)){var r,o;if(t.data instanceof Error)return{type:rc.error,error:t.data,statusCode:null==(o=t.init)?void 0:o.status};t=new Tc((null==(r=t.init)?void 0:r.status)||500,void 0,t.data)}return{type:rc.error,error:t,statusCode:Bc(t)?t.status:void 0}}var i,a,s,l;return function(e){let t=e;return t&&"object"===typeof t&&"object"===typeof t.data&&"function"===typeof t.subscribe&&"function"===typeof t.cancel&&"function"===typeof t.resolveData}(t)?{type:rc.deferred,deferredData:t,statusCode:null==(i=t.init)?void 0:i.status,headers:(null==(a=t.init)?void 0:a.headers)&&new Headers(t.init.headers)}:ku(t)?{type:rc.data,data:t.data,statusCode:null==(s=t.init)?void 0:s.status,headers:null!=(l=t.init)&&l.headers?new Headers(t.init.headers):void 0}:{type:rc.data,data:t}}function ru(e,t,n,r,o,i){let a=e.headers.get("Location");if(Zl(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!Dc.test(a)){let s=r.slice(0,r.findIndex((e=>e.route.id===n))+1);a=$c(new URL(t.url),s,o,!0,a,i),e.headers.set("Location",a)}return e}function ou(e,t,n){if(Dc.test(e)){let r=e,o=r.startsWith("//")?new URL(t.protocol+r):new URL(r),i=null!=kc(o.pathname,n);if(o.origin===t.origin&&i)return o.pathname+o.search+o.hash}return e}function iu(e,t,n,r){let o=e.createURL(mu(t)).toString(),i={signal:n};if(r&&_u(r.formMethod)){let{formMethod:e,formEncType:t}=r;i.method=e.toUpperCase(),"application/json"===t?(i.headers=new Headers({"Content-Type":t}),i.body=JSON.stringify(r.json)):"text/plain"===t?i.body=r.text:"application/x-www-form-urlencoded"===t&&r.formData?i.body=au(r.formData):i.body=r.formData}return new Request(o,i)}function au(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,"string"===typeof r?r:r.name);return t}function su(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function lu(e,t,n,r,o,i){let a,s={},l=null,c=!1,u={},h=r&&vu(r[1])?r[1].error:void 0;return n.forEach(((n,r)=>{let d=t[r].route.id;if(Zl(!wu(n),"Cannot handle redirect results in processLoaderData"),vu(n)){let t=n.error;if(void 0!==h&&(t=h,h=void 0),l=l||{},i)l[d]=t;else{let n=du(e,d);null==l[n.route.id]&&(l[n.route.id]=t)}s[d]=void 0,c||(c=!0,a=Bc(n.error)?n.error.status:500),n.headers&&(u[d]=n.headers)}else bu(n)?(o.set(d,n.deferredData),s[d]=n.deferredData.data,null==n.statusCode||200===n.statusCode||c||(a=n.statusCode),n.headers&&(u[d]=n.headers)):(s[d]=n.data,n.statusCode&&200!==n.statusCode&&!c&&(a=n.statusCode),n.headers&&(u[d]=n.headers))})),void 0!==h&&r&&(l={[r[0]]:h},s[r[0]]=void 0),{loaderData:s,errors:l,statusCode:a||200,loaderHeaders:u}}function cu(e,t,n,r,o,i,a,s){let{loaderData:l,errors:c}=lu(t,n,r,o,s,!1);for(let u=0;u<i.length;u++){let{key:t,match:n,controller:r}=i[u];Zl(void 0!==a&&void 0!==a[u],"Did not find corresponding fetcher result");let o=a[u];if(!r||!r.signal.aborted)if(vu(o)){let r=du(e.matches,null==n?void 0:n.route.id);c&&c[r.route.id]||(c=Gl({},c,{[r.route.id]:o.error})),e.fetchers.delete(t)}else if(wu(o))Zl(!1,"Unhandled fetcher revalidation redirect");else if(bu(o))Zl(!1,"Unhandled fetcher deferred data");else{let n=ju(o.data);e.fetchers.set(t,n)}}return{loaderData:l,errors:c}}function uu(e,t,n,r){let o=Gl({},t);for(let i of n){let n=i.route.id;if(t.hasOwnProperty(n)?void 0!==t[n]&&(o[n]=t[n]):void 0!==e[n]&&i.route.loader&&(o[n]=e[n]),r&&r.hasOwnProperty(n))break}return o}function hu(e){return e?vu(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function du(e,t){return(t?e.slice(0,e.findIndex((e=>e.route.id===t))+1):[...e]).reverse().find((e=>!0===e.route.hasErrorBoundary))||e[0]}function fu(e){let t=1===e.length?e[0]:e.find((e=>e.index||!e.path||"/"===e.path))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function pu(e,t){let{pathname:n,routeId:r,method:o,type:i,message:a}=void 0===t?{}:t,s="Unknown Server Error",l="Unknown @remix-run/router error";return 400===e?(s="Bad Request","route-discovery"===i?l='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnNavigation()` function threw the following error:\n'+a:o&&n&&r?l="You made a "+o+' request to "'+n+'" but did not provide a `loader` for route "'+r+'", so there is no way to handle the request.':"defer-action"===i?l="defer() is not supported in actions":"invalid-body"===i&&(l="Unable to encode submission body")):403===e?(s="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):404===e?(s="Not Found",l='No route matches URL "'+n+'"'):405===e&&(s="Method Not Allowed",o&&n&&r?l="You made a "+o.toUpperCase()+' request to "'+n+'" but did not provide an `action` for route "'+r+'", so there is no way to handle the request.':o&&(l='Invalid request method "'+o.toUpperCase()+'"')),new Tc(e||500,s,new Error(l),!0)}function gu(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(wu(n))return{result:n,idx:t}}}function mu(e){return ec(Gl({},"string"===typeof e?tc(e):e,{hash:""}))}function yu(e){return xu(e.result)&&Lc.has(e.result.status)}function bu(e){return e.type===rc.deferred}function vu(e){return e.type===rc.error}function wu(e){return(e&&e.type)===rc.redirect}function ku(e){return"object"===typeof e&&null!=e&&"type"in e&&"data"in e&&"init"in e&&"DataWithResponseInit"===e.type}function xu(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function Eu(e){return Pc.has(e.toLowerCase())}function _u(e){return Oc.has(e.toLowerCase())}async function Nu(e,t,n,r,o,i){for(let a=0;a<n.length;a++){let s=n[a],l=t[a];if(!l)continue;let c=e.find((e=>e.route.id===l.route.id)),u=null!=c&&!Vc(c,l)&&void 0!==(i&&i[l.route.id]);if(bu(s)&&(o||u)){let e=r[a];Zl(e,"Expected an AbortSignal for revalidating fetcher deferred result"),await Su(s,e,o).then((e=>{e&&(n[a]=e||n[a])}))}}}async function Su(e,t,n){if(void 0===n&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:rc.data,data:e.deferredData.unwrappedData}}catch(Ry){return{type:rc.error,error:Ry}}return{type:rc.data,data:e.deferredData.data}}}function Cu(e){return new URLSearchParams(e).getAll("index").some((e=>""===e))}function Au(e,t){let n="string"===typeof t?tc(t).search:t.search;if(e[e.length-1].route.index&&Cu(n||""))return e[e.length-1];let r=Ec(e);return r[r.length-1]}function Ru(e){let{formMethod:t,formAction:n,formEncType:r,text:o,formData:i,json:a}=e;if(t&&n&&r)return null!=o?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:o}:null!=i?{formMethod:t,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0}:void 0!==a?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:a,text:void 0}:void 0}function Tu(e,t){if(t){return{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}return{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Bu(e,t){if(e){return{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}}return{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function ju(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Ou(){return Ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ou.apply(this,arguments)}const Iu=n.createContext(null);const Pu=n.createContext(null);const Lu=n.createContext(null);const zu=n.createContext(null);const Uu=n.createContext({outlet:null,matches:[],isDataRoute:!1});const Mu=n.createContext(null);function Fu(){return null!=n.useContext(zu)}function Du(){return Fu()||Zl(!1),n.useContext(zu).location}function qu(e){n.useContext(Lu).static||n.useLayoutEffect(e)}function Hu(){let{isDataRoute:e}=n.useContext(Uu);return e?function(){let{router:e}=eh(Ju.UseNavigateStable),t=nh(Xu.UseNavigateStable),r=n.useRef(!1);qu((()=>{r.current=!0}));let o=n.useCallback((function(n,o){void 0===o&&(o={}),r.current&&("number"===typeof n?e.navigate(n):e.navigate(n,Ou({fromRouteId:t},o)))}),[e,t]);return o}():function(){Fu()||Zl(!1);let e=n.useContext(Iu),{basename:t,future:r,navigator:o}=n.useContext(Lu),{matches:i}=n.useContext(Uu),{pathname:a}=Du(),s=JSON.stringify(_c(i,r.v7_relativeSplatPath)),l=n.useRef(!1);qu((()=>{l.current=!0}));let c=n.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void o.go(n);let i=Nc(n,JSON.parse(s),a,"path"===r.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:Sc([t,i.pathname])),(r.replace?o.replace:o.push)(i,r.state,r)}),[t,o,s,a,e]);return c}()}const Wu=n.createContext(null);function $u(e,t){let{relative:r}=void 0===t?{}:t,{future:o}=n.useContext(Lu),{matches:i}=n.useContext(Uu),{pathname:a}=Du(),s=JSON.stringify(_c(i,o.v7_relativeSplatPath));return n.useMemo((()=>Nc(e,JSON.parse(s),a,"path"===r)),[e,s,a,r])}function Ku(e,t,r,o){Fu()||Zl(!1);let{navigator:i}=n.useContext(Lu),{matches:a}=n.useContext(Uu),s=a[a.length-1],l=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/");s&&s.route;let u,h=Du();if(t){var d;let e="string"===typeof t?tc(t):t;"/"===c||(null==(d=e.pathname)?void 0:d.startsWith(c))||Zl(!1),u=e}else u=h;let f=u.pathname||"/",p=f;if("/"!==c){let e=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let g=ac(e,{pathname:p});let m=Yu(g&&g.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Sc([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:Sc([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,r,o);return t&&m?n.createElement(zu.Provider,{value:{location:Ou({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:$l.Pop}},m):m}function Qu(){let e=function(){var e;let t=n.useContext(Mu),r=th(Xu.UseRouteError),o=nh(Xu.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[o]}(),t=Bc(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:o};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),r?n.createElement("pre",{style:i},r):null,null)}const Gu=n.createElement(Qu,null);class Vu extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?n.createElement(Uu.Provider,{value:this.props.routeContext},n.createElement(Mu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Zu(e){let{routeContext:t,match:r,children:o}=e,i=n.useContext(Iu);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),n.createElement(Uu.Provider,{value:t},o)}function Yu(e,t,r,o){var i;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===o&&(o=null),null==e){var a;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(a=o)&&a.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let s=e,l=null==(i=r)?void 0:i.errors;if(null!=l){let e=s.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||Zl(!1),s=s.slice(0,Math.min(s.length,e+1))}let c=!1,u=-1;if(r&&o&&o.v7_partialHydration)for(let n=0;n<s.length;n++){let e=s[n];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=n),e.route.id){let{loaderData:t,errors:n}=r,o=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||o){c=!0,s=u>=0?s.slice(0,u+1):[s[0]];break}}}return s.reduceRight(((e,o,i)=>{let a,h=!1,d=null,f=null;var p;r&&(a=l&&o.route.id?l[o.route.id]:void 0,d=o.route.errorElement||Gu,c&&(u<0&&0===i?(p="route-fallback",!1||rh[p]||(rh[p]=!0),h=!0,f=null):u===i&&(h=!0,f=o.route.hydrateFallbackElement||null)));let g=t.concat(s.slice(0,i+1)),m=()=>{let t;return t=a?d:h?f:o.route.Component?n.createElement(o.route.Component,null):o.route.element?o.route.element:e,n.createElement(Zu,{match:o,routeContext:{outlet:e,matches:g,isDataRoute:null!=r},children:t})};return r&&(o.route.ErrorBoundary||o.route.errorElement||0===i)?n.createElement(Vu,{location:r.location,revalidation:r.revalidation,component:d,error:a,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var Ju=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ju||{}),Xu=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Xu||{});function eh(e){let t=n.useContext(Iu);return t||Zl(!1),t}function th(e){let t=n.useContext(Pu);return t||Zl(!1),t}function nh(e){let t=function(e){let t=n.useContext(Uu);return t||Zl(!1),t}(),r=t.matches[t.matches.length-1];return r.route.id||Zl(!1),r.route.id}const rh={};r.startTransition;function oh(e){let{to:t,replace:r,state:o,relative:i}=e;Fu()||Zl(!1);let{future:a,static:s}=n.useContext(Lu),{matches:l}=n.useContext(Uu),{pathname:c}=Du(),u=Hu(),h=Nc(t,_c(l,a.v7_relativeSplatPath),c,"path"===i),d=JSON.stringify(h);return n.useEffect((()=>u(JSON.parse(d),{replace:r,state:o,relative:i})),[u,d,i,r,o]),null}function ih(e){return function(e){let t=n.useContext(Uu).outlet;return t?n.createElement(Wu.Provider,{value:e},t):t}(e.context)}function ah(e){Zl(!1)}function sh(e){let{basename:t="/",children:r=null,location:o,navigationType:i=$l.Pop,navigator:a,static:s=!1,future:l}=e;Fu()&&Zl(!1);let c=t.replace(/^\/*/,"/"),u=n.useMemo((()=>({basename:c,navigator:a,static:s,future:Ou({v7_relativeSplatPath:!1},l)})),[c,l,a,s]);"string"===typeof o&&(o=tc(o));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:g="default"}=o,m=n.useMemo((()=>{let e=kc(h,c);return null==e?null:{location:{pathname:e,search:d,hash:f,state:p,key:g},navigationType:i}}),[c,h,d,f,p,g,i]);return null==m?null:n.createElement(Lu.Provider,{value:u},n.createElement(zu.Provider,{children:r,value:m}))}new Promise((()=>{}));n.Component;function lh(e,t){void 0===t&&(t=[]);let r=[];return n.Children.forEach(e,((e,o)=>{if(!n.isValidElement(e))return;let i=[...t,o];if(e.type===n.Fragment)return void r.push.apply(r,lh(e.props.children,i));e.type!==ah&&Zl(!1),e.props.index&&e.props.children&&Zl(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=lh(e.props.children,i)),r.push(a)})),r}function ch(e){let t={hasErrorBoundary:null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&Object.assign(t,{element:n.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:n.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:n.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}function uh(){return uh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uh.apply(this,arguments)}function hh(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const dh=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],fh=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"];try{window.__reactRouterVersion="6"}catch(Ry){}function ph(e,t){return Wc({basename:null==t?void 0:t.basename,future:uh({},null==t?void 0:t.future,{v7_prependBasename:!0}),history:(n={window:null==t?void 0:t.window},void 0===n&&(n={}),nc((function(e,t){let{pathname:n="/",search:r="",hash:o=""}=tc(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),Xl("",{pathname:n,search:r,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:ec(t))}),(function(e,t){Yl("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),n)),hydrationData:(null==t?void 0:t.hydrationData)||gh(),routes:e,mapRouteProperties:ch,unstable_dataStrategy:null==t?void 0:t.unstable_dataStrategy,unstable_patchRoutesOnNavigation:null==t?void 0:t.unstable_patchRoutesOnNavigation,window:null==t?void 0:t.window}).initialize();var n}function gh(){var e;let t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=uh({},t,{errors:mh(t.errors)})),t}function mh(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,o]of t)if(o&&"RouteErrorResponse"===o.__type)n[r]=new Tc(o.status,o.statusText,o.data,!0===o.internal);else if(o&&"Error"===o.__type){if(o.__subType){let e=window[o.__subType];if("function"===typeof e)try{let t=new e(o.message);t.stack="",n[r]=t}catch(Ry){}}if(null==n[r]){let e=new Error(o.message);e.stack="",n[r]=e}}else n[r]=o;return n}const yh=n.createContext({isTransitioning:!1});const bh=n.createContext(new Map);const vh=r.startTransition,wh=Ql.flushSync;r.useId;function kh(e){wh?wh(e):e()}class xh{constructor(){this.status="pending",this.promise=new Promise(((e,t)=>{this.resolve=t=>{"pending"===this.status&&(this.status="resolved",e(t))},this.reject=e=>{"pending"===this.status&&(this.status="rejected",t(e))}}))}}function Eh(e){let{fallbackElement:t,router:r,future:o}=e,[i,a]=n.useState(r.state),[s,l]=n.useState(),[c,u]=n.useState({isTransitioning:!1}),[h,d]=n.useState(),[f,p]=n.useState(),[g,m]=n.useState(),y=n.useRef(new Map),{v7_startTransition:b}=o||{},v=n.useCallback((e=>{b?function(e){vh?vh(e):e()}(e):e()}),[b]),w=n.useCallback(((e,t)=>{let{deletedFetchers:n,unstable_flushSync:o,unstable_viewTransitionOpts:i}=t;n.forEach((e=>y.current.delete(e))),e.fetchers.forEach(((e,t)=>{void 0!==e.data&&y.current.set(t,e.data)}));let s=null==r.window||null==r.window.document||"function"!==typeof r.window.document.startViewTransition;if(i&&!s){if(o){kh((()=>{f&&(h&&h.resolve(),f.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:i.currentLocation,nextLocation:i.nextLocation})}));let t=r.window.document.startViewTransition((()=>{kh((()=>a(e)))}));return t.finished.finally((()=>{kh((()=>{d(void 0),p(void 0),l(void 0),u({isTransitioning:!1})}))})),void kh((()=>p(t)))}f?(h&&h.resolve(),f.skipTransition(),m({state:e,currentLocation:i.currentLocation,nextLocation:i.nextLocation})):(l(e),u({isTransitioning:!0,flushSync:!1,currentLocation:i.currentLocation,nextLocation:i.nextLocation}))}else o?kh((()=>a(e))):v((()=>a(e)))}),[r.window,f,h,y,v]);n.useLayoutEffect((()=>r.subscribe(w)),[r,w]),n.useEffect((()=>{c.isTransitioning&&!c.flushSync&&d(new xh)}),[c]),n.useEffect((()=>{if(h&&s&&r.window){let e=s,t=h.promise,n=r.window.document.startViewTransition((async()=>{v((()=>a(e))),await t}));n.finished.finally((()=>{d(void 0),p(void 0),l(void 0),u({isTransitioning:!1})})),p(n)}}),[v,s,h,r.window]),n.useEffect((()=>{h&&s&&i.location.key===s.location.key&&h.resolve()}),[h,f,i.location,s]),n.useEffect((()=>{!c.isTransitioning&&g&&(l(g.state),u({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),m(void 0))}),[c.isTransitioning,g]),n.useEffect((()=>{}),[]);let k=n.useMemo((()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:e=>r.navigate(e),push:(e,t,n)=>r.navigate(e,{state:t,preventScrollReset:null==n?void 0:n.preventScrollReset}),replace:(e,t,n)=>r.navigate(e,{replace:!0,state:t,preventScrollReset:null==n?void 0:n.preventScrollReset})})),[r]),x=r.basename||"/",E=n.useMemo((()=>({router:r,navigator:k,static:!1,basename:x})),[r,k,x]),_=n.useMemo((()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath})),[r.future.v7_relativeSplatPath]);return n.createElement(n.Fragment,null,n.createElement(Iu.Provider,{value:E},n.createElement(Pu.Provider,{value:i},n.createElement(bh.Provider,{value:y.current},n.createElement(yh.Provider,{value:c},n.createElement(sh,{basename:x,location:i.location,navigationType:i.historyAction,navigator:k,future:_},i.initialized||r.future.v7_partialHydration?n.createElement(_h,{routes:r.routes,future:r.future,state:i}):t))))),null)}const _h=n.memo(Nh);function Nh(e){let{routes:t,future:n,state:r}=e;return Ku(t,void 0,r,n)}const Sh="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ch=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ah=n.forwardRef((function(e,t){let r,{onClick:o,relative:i,reloadDocument:a,replace:s,state:l,target:c,to:u,preventScrollReset:h,unstable_viewTransition:d}=e,f=hh(e,dh),{basename:p}=n.useContext(Lu),g=!1;if("string"===typeof u&&Ch.test(u)&&(r=u,Sh))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=kc(t.pathname,p);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:g=!0}catch(Ry){}let m=function(e,t){let{relative:r}=void 0===t?{}:t;Fu()||Zl(!1);let{basename:o,navigator:i}=n.useContext(Lu),{hash:a,pathname:s,search:l}=$u(e,{relative:r}),c=s;return"/"!==o&&(c="/"===s?o:Sc([o,s])),i.createHref({pathname:c,search:l,hash:a})}(u,{relative:i}),y=function(e,t){let{target:r,replace:o,state:i,preventScrollReset:a,relative:s,unstable_viewTransition:l}=void 0===t?{}:t,c=Hu(),u=Du(),h=$u(e,{relative:s});return n.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==o?o:ec(u)===ec(h);c(e,{replace:n,state:i,preventScrollReset:a,relative:s,unstable_viewTransition:l})}}),[u,c,h,o,i,r,e,a,s,l])}(u,{replace:s,state:l,target:c,preventScrollReset:h,relative:i,unstable_viewTransition:d});return n.createElement("a",uh({},f,{href:r||m,onClick:g||a?o:function(e){o&&o(e),e.defaultPrevented||y(e)},ref:t,target:c}))}));const Rh=n.forwardRef((function(e,t){let{"aria-current":r="page",caseSensitive:o=!1,className:i="",end:a=!1,style:s,to:l,unstable_viewTransition:c,children:u}=e,h=hh(e,fh),d=$u(l,{relative:h.relative}),f=Du(),p=n.useContext(Pu),{navigator:g,basename:m}=n.useContext(Lu),y=null!=p&&function(e,t){void 0===t&&(t={});let r=n.useContext(yh);null==r&&Zl(!1);let{basename:o}=jh(Th.useViewTransitionState),i=$u(e,{relative:t.relative});if(!r.isTransitioning)return!1;let a=kc(r.currentLocation.pathname,o)||r.currentLocation.pathname,s=kc(r.nextLocation.pathname,o)||r.nextLocation.pathname;return null!=vc(i.pathname,s)||null!=vc(i.pathname,a)}(d)&&!0===c,b=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,v=f.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;o||(v=v.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&m&&(w=kc(w,m)||w);const k="/"!==b&&b.endsWith("/")?b.length-1:b.length;let x,E=v===b||!a&&v.startsWith(b)&&"/"===v.charAt(k),_=null!=w&&(w===b||!a&&w.startsWith(b)&&"/"===w.charAt(b.length)),N={isActive:E,isPending:_,isTransitioning:y},S=E?r:void 0;x="function"===typeof i?i(N):[i,E?"active":null,_?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let C="function"===typeof s?s(N):s;return n.createElement(Ah,uh({},h,{"aria-current":S,className:x,ref:t,style:C,to:l,unstable_viewTransition:c}),"function"===typeof u?u(N):u)}));var Th,Bh;function jh(e){let t=n.useContext(Iu);return t||Zl(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Th||(Th={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Bh||(Bh={}));function Oh(){return Oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oh.apply(null,arguments)}function Ih(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function Ph(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function Lh(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Lh(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function zh(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Lh(e))&&(r&&(r+=" "),r+=t);return r}function Uh(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Mh(e))&&(r&&(r+=" "),r+=t);return r}function Mh(e){if("string"===typeof e)return e;for(var t,n="",r=0;r<e.length;r++)e[r]&&(t=Mh(e[r]))&&(n&&(n+=" "),n+=t);return n}var Fh="-";function Dh(e){var t=function(e){var t=e.theme,n=e.prefix,r={nextPart:new Map,validators:[]},o=function(e,t){if(!t)return e;return e.map((function(e){return[e[0],e[1].map((function(e){return"string"===typeof e?t+e:"object"===typeof e?Object.fromEntries(Object.entries(e).map((function(e){var n=e[0],r=e[1];return[t+n,r]}))):e}))]}))}(Object.entries(e.classGroups),n);return o.forEach((function(e){var n=e[0];Wh(e[1],r,n,t)})),r}(e),n=e.conflictingClassGroups,r=e.conflictingClassGroupModifiers,o=void 0===r?{}:r;return{getClassGroupId:function(e){var n=e.split(Fh);return""===n[0]&&1!==n.length&&n.shift(),qh(n,t)||function(e){if(Hh.test(e)){var t=Hh.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}(e)},getConflictingClassGroupIds:function(e,t){var r=n[e]||[];return t&&o[e]?[].concat(r,o[e]):r}}}function qh(e,t){if(0===e.length)return t.classGroupId;var n=e[0],r=t.nextPart.get(n),o=r?qh(e.slice(1),r):void 0;if(o)return o;if(0!==t.validators.length){var i=e.join(Fh);return t.validators.find((function(e){return(0,e.validator)(i)}))?.classGroupId}}var Hh=/^\[(.+)\]$/;function Wh(e,t,n,r){e.forEach((function(e){if("string"!==typeof e){if("function"===typeof e)return e.isThemeGetter?void Wh(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach((function(e){var o=e[0];Wh(e[1],$h(t,o),n,r)}))}else{(""===e?t:$h(t,e)).classGroupId=n}}))}function $h(e,t){var n=e;return t.split(Fh).forEach((function(e){n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)})),n}function Kh(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,r=new Map;function o(o,i){n.set(o,i),++t>e&&(t=0,r=n,n=new Map)}return{get:function(e){var t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(o(e,t),t):void 0},set:function(e,t){n.has(e)?n.set(e,t):o(e,t)}}}var Qh="!";function Gh(e){var t=e.separator||":",n=1===t.length,r=t[0],o=t.length;return function(e){for(var i,a=[],s=0,l=0,c=0;c<e.length;c++){var u=e[c];if(0===s){if(u===r&&(n||e.slice(c,c+o)===t)){a.push(e.slice(l,c)),l=c+o;continue}if("/"===u){i=c;continue}}"["===u?s++:"]"===u&&s--}var h=0===a.length?e:e.substring(l),d=h.startsWith(Qh);return{modifiers:a,hasImportantModifier:d,baseClassName:d?h.substring(1):h,maybePostfixModifierPosition:i&&i>l?i-l:void 0}}}var Vh=/\s+/;function Zh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o,i,a=function(e){var n=t[0],l=t.slice(1).reduce((function(e,t){return t(e)}),n());return r=function(e){return{cache:Kh(e.cacheSize),splitModifiers:Gh(e),...Dh(e)}}(l),o=r.cache.get,i=r.cache.set,a=s,s(e)};function s(e){var t=o(e);if(t)return t;var n=function(e,t){var n=t.splitModifiers,r=t.getClassGroupId,o=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(Vh).map((function(e){var t=n(e),o=t.modifiers,i=t.hasImportantModifier,a=t.baseClassName,s=t.maybePostfixModifierPosition,l=r(s?a.substring(0,s):a),c=Boolean(s);if(!l){if(!s)return{isTailwindClass:!1,originalClassName:e};if(!(l=r(a)))return{isTailwindClass:!1,originalClassName:e};c=!1}var u=function(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach((function(e){"["===e[0]?(t.push.apply(t,n.sort().concat([e])),n=[]):n.push(e)})),t.push.apply(t,n.sort()),t}(o).join(":");return{isTailwindClass:!0,modifierId:i?u+Qh:u,classGroupId:l,originalClassName:e,hasPostfixModifier:c}})).reverse().filter((function(e){if(!e.isTailwindClass)return!0;var t=e.modifierId,n=e.classGroupId,r=e.hasPostfixModifier,a=t+n;return!i.has(a)&&(i.add(a),o(n,r).forEach((function(e){return i.add(t+e)})),!0)})).reverse().map((function(e){return e.originalClassName})).join(" ")}(e,r);return i(e,n),n}return function(){return a(Uh.apply(null,arguments))}}function Yh(e){var t=function(t){return t[e]||[]};return t.isThemeGetter=!0,t}var Jh=/^\[(?:([a-z-]+):)?(.+)\]$/i,Xh=/^\d+\/\d+$/,ed=new Set(["px","full","screen"]),td=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,nd=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,rd=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function od(e){return ud(e)||ed.has(e)||Xh.test(e)||id(e)}function id(e){return yd(e,"length",bd)}function ad(e){return yd(e,"size",vd)}function sd(e){return yd(e,"position",vd)}function ld(e){return yd(e,"url",wd)}function cd(e){return yd(e,"number",ud)}function ud(e){return!Number.isNaN(Number(e))}function hd(e){return e.endsWith("%")&&ud(e.slice(0,-1))}function dd(e){return kd(e)||yd(e,"number",kd)}function fd(e){return Jh.test(e)}function pd(){return!0}function gd(e){return td.test(e)}function md(e){return yd(e,"",xd)}function yd(e,t,n){var r=Jh.exec(e);return!!r&&(r[1]?r[1]===t:n(r[2]))}function bd(e){return nd.test(e)}function vd(){return!1}function wd(e){return e.startsWith("url(")}function kd(e){return Number.isInteger(Number(e))}function xd(e){return rd.test(e)}function Ed(){var e=Yh("colors"),t=Yh("spacing"),n=Yh("blur"),r=Yh("brightness"),o=Yh("borderColor"),i=Yh("borderRadius"),a=Yh("borderSpacing"),s=Yh("borderWidth"),l=Yh("contrast"),c=Yh("grayscale"),u=Yh("hueRotate"),h=Yh("invert"),d=Yh("gap"),f=Yh("gradientColorStops"),p=Yh("gradientColorStopPositions"),g=Yh("inset"),m=Yh("margin"),y=Yh("opacity"),b=Yh("padding"),v=Yh("saturate"),w=Yh("scale"),k=Yh("sepia"),x=Yh("skew"),E=Yh("space"),_=Yh("translate"),N=function(){return["auto",fd,t]},S=function(){return[fd,t]},C=function(){return["",od]},A=function(){return["auto",ud,fd]},R=function(){return["","0",fd]},T=function(){return[ud,cd]},B=function(){return[ud,fd]};return{cacheSize:500,theme:{colors:[pd],spacing:[od],blur:["none","",gd,fd],brightness:T(),borderColor:[e],borderRadius:["none","","full",gd,fd],borderSpacing:S(),borderWidth:C(),contrast:T(),grayscale:R(),hueRotate:B(),invert:R(),gap:S(),gradientColorStops:[e],gradientColorStopPositions:[hd,id],inset:N(),margin:N(),opacity:T(),padding:S(),saturate:T(),scale:T(),sepia:R(),skew:B(),space:S(),translate:S()},classGroups:{aspect:[{aspect:["auto","square","video",fd]}],container:["container"],columns:[{columns:[gd]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[fd])}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",dd]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",fd]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",dd]}],"grid-cols":[{"grid-cols":[pd]}],"col-start-end":[{col:["auto",{span:["full",dd]},fd]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[pd]}],"row-start-end":[{row:["auto",{span:[dd]},fd]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",fd]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",fd]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal"].concat(["start","end","center","between","around","evenly","stretch"])}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(["start","end","center","between","around","evenly","stretch"],["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(["start","end","center","between","around","evenly","stretch"],["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",fd,t]}],"min-w":[{"min-w":["min","max","fit",fd,od]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[gd]},gd,fd]}],h:[{h:[fd,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",fd,od]}],"max-h":[{"max-h":[fd,t,"min","max","fit"]}],"font-size":[{text:["base",gd,id]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",cd]}],"font-family":[{font:[pd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",fd]}],"line-clamp":[{"line-clamp":["none",ud,cd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",fd,od]}],"list-image":[{"list-image":["none",fd]}],"list-style-type":[{list:["none","disc","decimal",fd]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(["solid","dashed","dotted","double","none"],["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",od]}],"underline-offset":[{"underline-offset":["auto",fd,od]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fd]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fd]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[sd])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ad]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ld]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[].concat(["solid","dashed","dotted","double","none"],["hidden"])}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:[""].concat(["solid","dashed","dotted","double","none"])}],"outline-offset":[{"outline-offset":[fd,od]}],"outline-w":[{outline:[od]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[od]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",gd,md]}],"shadow-color":[{shadow:[pd]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",gd,fd]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[v]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",fd]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",fd]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",fd]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[dd,fd]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[x]}],"skew-y":[{"skew-y":[x]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",fd]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fd]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fd]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[od,cd]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var _d=Zh(Ed);const Nd=["size","variant","color","dataTheme","className","style"],Sd=(0,n.forwardRef)(((e,t)=>{let{size:n,variant:r="spinner",color:i,dataTheme:a,className:s,style:l}=e,c=Ph(e,Nd);const u=_d("loading",s,zh({"loading-lg":"lg"===n,"loading-md":"md"===n,"loading-sm":"sm"===n,"loading-xs":"xs"===n,"loading-spinner":"spinner"===r,"loading-dots":"dots"===r,"loading-ring":"ring"===r,"loading-ball":"ball"===r,"loading-bars":"bars"===r,"loading-infinity":"infinity"===r,"text-primary":"primary"===i,"text-secondary":"secondary"===i,"text-accent":"accent"===i,"text-info":"info"===i,"text-success":"success"===i,"text-warning":"warning"===i,"text-error":"error"===i,"text-ghost":"ghost"===i}));return(0,o.jsx)("span",Oh({},c,{ref:t,"data-theme":a,className:u,style:l}))}));Sd.displayName="Loading";const Cd=["children","shape","size","variant","color","glass","startIcon","endIcon","wide","fullWidth","responsive","animation","loading","active","disabled","dataTheme","className","style","tag"],Ad=["area","base","br","col","embed","hr","img","input","link","keygen","meta","param","source","track","wbr"],Rd=(0,n.forwardRef)(((e,t)=>{let{children:n,shape:r,size:i,variant:a,color:s,glass:l,startIcon:c,endIcon:u,wide:h,fullWidth:d,responsive:f,animation:p=!0,loading:g,active:m,disabled:y,dataTheme:b,className:v,style:w,tag:k="button"}=e,x=Ph(e,Cd);const E=k,_=_d("btn",v,zh((c&&!g||u)&&"gap-2",{"btn-lg":"lg"===i,"btn-md":"md"===i,"btn-sm":"sm"===i,"btn-xs":"xs"===i,"btn-circle":"circle"===r,"btn-square":"square"===r,"btn-outline":"outline"===a,"btn-link":"link"===a,"btn-neutral":"neutral"===s,"btn-primary":"primary"===s,"btn-secondary":"secondary"===s,"btn-accent":"accent"===s,"btn-info":"info"===s,"btn-success":"success"===s,"btn-warning":"warning"===s,"btn-error":"error"===s,"btn-ghost":"ghost"===s,glass:l,"btn-wide":h,"btn-block":d,"btn-xs sm:btn-sm md:btn-md lg:btn-lg":f,"no-animation":!p,"btn-active":m,"btn-disabled":y}));return Ad.includes(E)?(0,o.jsx)(E,Oh({},x,{ref:t,"data-theme":b,className:_,style:w,disabled:y})):(0,o.jsxs)(E,Oh({},x,{ref:t,"data-theme":b,className:_,style:w,disabled:y,children:[g&&(0,o.jsx)(Sd,{size:i}),c&&!g&&c,n,u&&u]}))}));Rd.displayName="Button";const Td=["children","color","size","button","dataTheme","className","disabled"],Bd=(0,n.forwardRef)(((e,t)=>(0,o.jsx)(Rd,Oh({},e,{ref:t,tag:"summary"})))),jd=["children","className","horizontal","vertical","end","dataTheme","open"],Od=n.forwardRef(((e,t)=>{let{children:n,className:r,horizontal:i,vertical:a,end:s,dataTheme:l,open:c}=e,u=Ph(e,jd);return(0,o.jsx)("details",Oh({role:"listbox"},u,{ref:t,"data-theme":l,className:Md({className:r,horizontal:i,vertical:a,open:c,end:s}),open:c,children:n}))}));Od.displayName="Details";var Id=Object.assign(Od,{Toggle:Bd});const Pd=["dataTheme","className"],Ld=["anchor"],zd=n.forwardRef(((e,t)=>{let{anchor:n=!0}=e,r=Ph(e,Ld);return(0,o.jsx)("li",{role:"menuitem",children:n?(0,o.jsx)("a",Oh({ref:t},r)):r.children})})),Ud=["children","className","item","horizontal","vertical","end","hover","open","dataTheme"],Md=e=>{let{className:t,horizontal:n,vertical:r,end:o,hover:i,open:a}=e;return _d("dropdown",t,zh({"dropdown-left":"left"===n,"dropdown-right":"right"===n,"dropdown-top":"top"===r,"dropdown-bottom":"bottom"===r,"dropdown-end":o,"dropdown-hover":i,"dropdown-open":a}))},Fd=n.forwardRef(((e,t)=>{let{children:n,className:r,item:i,horizontal:a,vertical:s,end:l,hover:c,open:u,dataTheme:h}=e,d=Ph(e,Ud);return(0,o.jsx)("div",Oh({role:"listbox"},d,{ref:t,"data-theme":h,className:Md({className:r,horizontal:a,vertical:s,end:l,hover:c,open:u}),children:i?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("label",{tabIndex:0,children:n}),(0,o.jsx)("ul",{className:"dropdown-content",children:i})]}):(0,o.jsx)(o.Fragment,{children:n})}))}));Object.assign(Fd,{Details:Id,Toggle:e=>{let{children:t,color:n,size:r,button:i=!0,dataTheme:a,className:s,disabled:l}=e,c=Ph(e,Td);return(0,o.jsx)("label",Oh({tabIndex:0,className:s},c,{children:i?(0,o.jsx)(Rd,{type:"button",dataTheme:a,color:n,size:r,disabled:l,children:t}):t}))},Menu:e=>{let{dataTheme:t,className:n}=e,r=Ph(e,Pd);const i=_d("dropdown-content menu p-2 shadow bg-base-100 rounded-box",n);return(0,o.jsx)("ul",Oh({},r,{tabIndex:0,"data-theme":t,className:i,role:"menu"}))},Item:zd});const Dd=["children","className"],qd=n.forwardRef(((e,t)=>{let{children:n,className:r}=e,i=Ph(e,Dd);const a=_d("modal-action",r);return(0,o.jsx)("div",Oh({},i,{className:a,ref:t,children:n}))}));qd.displayName="ModalActions";const Hd=["children","className"],Wd=n.forwardRef(((e,t)=>{let{children:n,className:r}=e,i=Ph(e,Hd);return(0,o.jsx)("div",Oh({},i,{className:r,ref:t,children:n}))}));Wd.displayName="ModalBody";const $d=["children","className"],Kd=n.forwardRef(((e,t)=>{let{children:n,className:r}=e,i=Ph(e,$d);const a=_d("w-full mb-8 text-xl",r);return(0,o.jsx)("div",Oh({},i,{className:a,ref:t,children:n}))}));Kd.displayName="ModalHeader";const Qd=["children","open","responsive","onClickBackdrop","dataTheme","className"],Gd=(0,n.forwardRef)(((e,t)=>{let{children:n,open:r,responsive:i,onClickBackdrop:a,dataTheme:s,className:l}=e,c=Ph(e,Qd);const u=_d("modal",zh({"modal-open":r,"modal-bottom sm:modal-middle":i})),h=_d("modal-box",l);return(0,o.jsx)("div",{"aria-label":"Modal","aria-hidden":!r,"aria-modal":r,"data-theme":s,className:u,onClick:e=>{e.stopPropagation(),e.target===e.currentTarget&&(e.stopPropagation(),a&&a())},children:(0,o.jsx)("div",Oh({},c,{"data-theme":s,className:h,ref:t,children:n}))})}));Gd.displayName="Modal";const Vd=["children","open","responsive","backdrop","dataTheme","className"],Zd=["children"],Yd=(0,n.forwardRef)(((e,t)=>{let{children:n,open:r,responsive:i,backdrop:a,dataTheme:s,className:l}=e,c=Ph(e,Vd);const u=_d("modal",zh({"modal-open":r,"modal-bottom sm:modal-middle":i})),h=_d("modal-box",l);return(0,o.jsxs)("dialog",Oh({},c,{"aria-label":"Modal","aria-hidden":!r,open:r,"aria-modal":r,"data-theme":s,className:u,ref:t,children:[(0,o.jsx)("div",{"data-theme":s,className:h,children:n}),a&&(0,o.jsx)("form",{method:"dialog",className:"modal-backdrop",children:(0,o.jsx)("button",{children:"close"})})]}))}));Yd.displayName="Modal";var Jd=Object.assign(Yd,{Header:Kd,Body:Wd,Actions:qd,Legacy:Gd,useDialog:()=>{const e=(0,n.useRef)(null),t=(0,n.useCallback)((()=>{var t;null==(t=e.current)||t.showModal()}),[e]),r=(0,n.useCallback)((()=>{var t;null==(t=e.current)||t.close()}),[e]),i=t=>{let{children:n}=t,r=Ph(t,Zd);return(0,o.jsx)(Yd,Oh({},r,{ref:e,children:n}))};return i.displayName="Dialog",{dialogRef:e,Dialog:i,handleShow:t,handleHide:r}}});const Xd=["children","className"],ef=n.forwardRef(((e,t)=>{let{children:n,className:r}=e,i=Ph(e,Xd);const a=_d("avatar-group -space-x-6",r);return(0,o.jsx)("div",Oh({"aria-label":`Group of ${n.length} avatar photos`},i,{className:a,ref:t,children:n}))})),tf=["size","src","letters","shape","color","border","borderColor","online","offline","dataTheme","className","innerClassName","children"],nf=n.forwardRef(((e,t)=>{let{size:r="md",src:i,letters:a,shape:s,color:l,border:c,borderColor:u,online:h,offline:d,dataTheme:f,className:p,innerClassName:g,children:m}=e,y=Ph(e,tf);const b=_d("avatar",p,zh({online:h,offline:d,placeholder:!i})),v=zh(g,{"ring ring-offset-base-100 ring-offset-2":c,"ring-accent":"accent"===u,"ring-error":"error"===u,"ring-info":"info"===u,"ring-neutral":"neutral"===u,"ring-primary":"primary"===u,"ring-secondary":"secondary"===u,"ring-success":"success"===u,"ring-warning":"warning"===u,"rounded-btn":"square"===s,"rounded-full":"circle"===s,"w-32 h-32":"lg"===r,"w-24 h-24":"md"===r,"w-14 h-14":"sm"===r,"w-10 h-10":"xs"===r}),w=zh(g,{"bg-neutral-focus":!l,"text-neutral-content":!l||"neutral"===l,"bg-accent":"accent"===l,"bg-error":"error"===l,"bg-info":"info"===l,"bg-neutral":"neutral"===l,"bg-primary":"primary"===l,"bg-secondary":"secondary"===l,"bg-success":"success"===l,"bg-warning":"warning"===l,"text-accent-content":"accent"===l,"text-error-content":"error"===l,"text-info-content":"info"===l,"text-primary-content":"primary"===l,"text-secondary-content":"secondary"===l,"text-success-content":"success"===l,"text-warning-content":"warning"===l,"ring ring-offset-base-100 ring-offset-2":c,"ring-accent":"accent"===u,"ring-error":"error"===u,"ring-info":"info"===u,"ring-neutral":"neutral"===u,"ring-primary":"primary"===u,"ring-secondary":"secondary"===u,"ring-success":"success"===u,"ring-warning":"warning"===u,"rounded-btn":"square"===s,"rounded-full":"circle"===s,"w-32 h-32 text-3xl":"lg"===r,"w-24 h-24 text-xl":"md"===r,"w-14 h-14":"sm"===r,"w-10 h-10":"xs"===r}),k="number"===typeof r?{width:r,height:r}:{};return(0,o.jsx)("div",Oh({"aria-label":"Avatar photo"},y,{"data-theme":f,className:b,ref:t,children:(()=>{if(i)return(0,o.jsx)("div",{className:v,style:k,children:(0,o.jsx)("img",{src:i})});if(a||(e=>e&&1===n.Children.count(e)&&n.isValidElement(e)&&"string"===typeof e.props.children)(m))return(0,o.jsx)("div",{className:w,style:k,children:(0,o.jsx)("span",{children:a||m})});if(1===n.Children.count(m)){const e=n.Children.only(m);return n.cloneElement(e,{className:_d(v,e.props.className),style:Oh({},k,e.props.style)})}return(0,o.jsx)("div",{className:v,style:k,children:m})})()}))}));var rf=Object.assign(nf,{Group:ef});const of=["children","variant","outline","size","color","responsive","dataTheme","className"],af=(0,n.forwardRef)(((e,t)=>{let{children:n,variant:r,outline:i,size:a,color:s,responsive:l,dataTheme:c,className:u}=e,h=Ph(e,of);const d=_d("badge",u,zh({"badge-lg":"lg"===a,"badge-md":"md"===a,"badge-sm":"sm"===a,"badge-xs":"xs"===a,"badge-outline":"outline"===r||i,"badge-neutral":"neutral"===s,"badge-primary":"primary"===s,"badge-secondary":"secondary"===s,"badge-accent":"accent"===s,"badge-ghost":"ghost"===s,"badge-info":"info"===s,"badge-success":"success"===s,"badge-warning":"warning"===s,"badge-error":"error"===s,"badge-xs md:badge-sm lg:badge-md xl:badge-lg":l}));return(0,o.jsx)("div",Oh({"aria-label":"Badge"},h,{"data-theme":c,className:d,ref:t,children:n}))}));af.displayName="Badge";const sf=["className"],lf=n.forwardRef(((e,t)=>{let{className:n}=e,r=Ph(e,sf);return(0,o.jsx)("div",Oh({},r,{className:_d("card-actions",n),ref:t}))})),cf=["className"],uf=n.forwardRef(((e,t)=>{let{className:n}=e,r=Ph(e,cf);return(0,o.jsx)("div",Oh({},r,{className:_d("card-body",n),ref:t}))})),hf=["className","tag"],df=n.forwardRef(((e,t)=>{let{className:n,tag:r="div"}=e,i=Ph(e,hf);const a=r;return(0,o.jsx)(a,Oh({},i,{className:_d("card-title",n),ref:t}))})),ff=n.forwardRef(((e,t)=>{let n=Oh({},(Ih(e),e));return(0,o.jsx)("figure",{ref:t,children:(0,o.jsx)("img",Oh({},n))})})),pf=["bordered","imageFull","normal","compact","side","className"],gf={true:"card-compact",xs:"xs:card-compact",sm:"sm:card-compact",md:"md:card-compact",lg:"lg:card-compact"},mf={true:"card-normal",xs:"xs:card-normal",sm:"sm:card-normal",md:"md:card-normal",lg:"lg:card-normal"},yf={true:"card-side",xs:"xs:card-side",sm:"sm:card-side",md:"md:card-side",lg:"lg:card-side"},bf=n.forwardRef(((e,t)=>{let{bordered:n=!0,imageFull:r,normal:i,compact:a,side:s,className:l}=e,c=Ph(e,pf);const u=_d("card",l,zh({"card-bordered":n,"image-full":r,[a&&gf[a.toString()]||""]:a,[i&&mf[i.toString()]||""]:i,[s&&yf[s.toString()]||""]:s}));return(0,o.jsx)("div",Oh({"aria-label":"Card"},c,{className:u,ref:t}))}));Object.assign(bf,{Actions:lf,Body:uf,Title:df,Image:ff});const vf=["children","innerRef","src","alt","index","width","hasButtons","buttonStyle","onPrev","onNext","className"],wf=["children","display","snap","vertical","width","buttonStyle","dataTheme","className"],kf=(0,n.forwardRef)(((e,t)=>{let{children:r,display:i="slider",snap:a,vertical:s,width:l,buttonStyle:c,dataTheme:u,className:h}=e,d=Ph(e,wf);const f=_d("carousel",h,zh({"carousel-start":"start"===a,"carousel-center":"center"===a,"carousel-end":"end"===a,"carousel-vertical":s,"w-full":"slider"!==i})),[p,g]=(0,n.useState)([]),[m,y]=(0,n.useState)(0);(0,n.useEffect)((()=>{const e=[];r.map((t=>{e.push((0,n.createRef)())})),g(e)}),[r]);const b=e=>{var t;null==(t=p[e].current)||t.scrollIntoView({behavior:"smooth",block:"nearest",inline:a}),y(e)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",Oh({role:"listbox","aria-label":"Image carousel"},d,{ref:t,"data-theme":u,className:f,children:r.map(((e,t)=>(0,n.cloneElement)(e,Oh({key:t,innerRef:p[t],index:t+1,children:e.props.children,src:e.props.src,alt:e.props.alt,width:"slider"!==i?"full":l,hasButtons:"sequential"===i,buttonStyle:c,onPrev:()=>b(t-1<0?r.length-1:t-1),onNext:()=>b(t+1>r.length-1?0:t+1)},e.props))))})),"numbered"===i&&(0,o.jsx)("div",{className:"flex justify-center w-full py-2 gap-2",children:r.map(((e,t)=>null!=c?(0,n.cloneElement)(c((t+1).toString()),{key:t,onClick:()=>b(t)}):(0,o.jsx)(Rd,{active:t===m,onClick:()=>b(t),children:t+1},t)))})]})}));Object.assign(kf,{Item:e=>{let{children:t,innerRef:r,src:i,alt:a,index:s=0,width:l,hasButtons:c,buttonStyle:u,onPrev:h,onNext:d,className:f}=e,p=Ph(e,vf);const g=_d("carousel-item relative",f,zh({"w-full":"full"===l,"w-1/2":"half"===l,"h-full":!0})),m=zh({"w-full":"full"===l});return(0,o.jsxs)("div",Oh({},p,{id:`item${s}`,ref:r,className:g,children:[i?(0,o.jsx)("img",{src:i,alt:a,className:m}):t,c&&(0,o.jsx)("div",{className:"absolute flex justify-between transform -translate-y-1/2 left-5 right-5 top-1/2",children:null!=u?(0,o.jsxs)(o.Fragment,{children:[(0,n.cloneElement)(u("\u276e"),{onClick:h}),(0,n.cloneElement)(u("\u276f"),{onClick:d})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Rd,{onClick:h,shape:"circle",children:"\u276e"}),(0,o.jsx)(Rd,{onClick:d,shape:"circle",children:"\u276f"})]})})]}))}});const xf=["size","shape","className"],Ef=n.forwardRef(((e,t)=>{let{size:n="xs",shape:r="circle",className:i}=e,a=Ph(e,xf);return(0,o.jsx)(rf,Oh({size:n,shape:r},a,{className:_d("chat-image",i),ref:t}))})),_f=["color","className"],Nf=n.forwardRef(((e,t)=>{let{color:n,className:r}=e,i=Ph(e,_f);const a=_d("chat-bubble",zh({"chat-bubble-primary":"primary"===n,"chat-bubble-secondary":"secondary"===n,"chat-bubble-accent":"accent"===n,"chat-bubble-info":"info"===n,"chat-bubble-success":"success"===n,"chat-bubble-warning":"warning"===n,"chat-bubble-error":"error"===n}),r);return(0,o.jsx)("div",Oh({},i,{className:a,ref:t}))})),Sf=["className"],Cf=n.forwardRef(((e,t)=>{let{className:n}=e,r=Ph(e,Sf);return(0,o.jsx)("div",Oh({},r,{className:_d("chat-header",n),ref:t}))})),Af=["className"],Rf=n.forwardRef(((e,t)=>{let{className:n}=e,r=Ph(e,Af);return(0,o.jsx)("time",Oh({},r,{className:_d("text-xs opacity-50",n),ref:t}))})),Tf=["className"],Bf=n.forwardRef(((e,t)=>{let{className:n}=e,r=Ph(e,Tf);return(0,o.jsx)("div",Oh({},r,{className:_d("chat-footer opacity-50",n),ref:t}))})),jf=["end","color","dataTheme","className","children"],Of=(0,n.forwardRef)(((e,t)=>{let{end:n=!1,dataTheme:r,className:i,children:a}=e,s=Ph(e,jf);return(0,o.jsx)("div",Oh({},s,{"data-theme":r,className:_d("chat","chat-"+(n?"end":"start"),i),ref:t,children:a}))}));Of.displayName="ChatBubble";Object.assign(Of,{Header:Cf,Time:Rf,Avatar:Ef,Message:Nf,Footer:Bf});const If=["children","className"],Pf=e=>{let{className:t}=e;return _d("collapse-title",t)},Lf=e=>{let{children:t,className:n}=e,r=Ph(e,If);return(0,o.jsx)("div",Oh({},r,{className:Pf({className:n}),children:t}))},zf=n.forwardRef(((e,t)=>{let{children:n,className:r}=e;return(0,o.jsx)("summary",{ref:t,className:Pf({className:r}),children:n})})),Uf=["children","icon","open","dataTheme","className"],Mf=n.forwardRef(((e,t)=>{let{children:n,icon:r,open:i,dataTheme:a,className:s}=e,l=Ph(e,Uf);return(0,o.jsx)("details",Oh({},l,{ref:t,"data-theme":a,className:Wf({className:s,icon:r,open:i}),open:i,children:n}))}));Mf.displayName="Details";var Ff=Object.assign(Mf,{Title:zf});const Df=["children","className"],qf=e=>{let{children:t,className:n}=e,r=Ph(e,Df);const i=_d("collapse-content",n);return(0,o.jsx)("div",Oh({},r,{className:i,children:t}))},Hf=["children","checkbox","icon","open","dataTheme","className","onOpen","onClose","onToggle"],Wf=e=>{let{className:t,icon:n,open:r}=e;return _d("collapse",t,zh({"collapse-arrow":"arrow"===n,"collapse-plus":"plus"===n,"collapse-open":!0===r,"collapse-close":!1===r}))},$f=n.forwardRef(((e,t)=>{let{children:r,checkbox:i,icon:a,open:s,dataTheme:l,className:c,onOpen:u,onClose:h,onToggle:d}=e,f=Ph(e,Hf);const[p,g]=(0,n.useState)(s),m=(0,n.useRef)(null);return(0,o.jsxs)("div",Oh({"aria-expanded":s},f,{ref:t,tabIndex:!0===p?void 0:0,"data-theme":l,className:Wf({className:c,icon:a,open:s}),onBlur:e=>{!i&&d&&d(),!i&&h&&h(),f.onBlur&&f.onBlur(e)},onFocus:e=>{!i&&d&&d(),!i&&u&&u(),f.onFocus&&f.onFocus(e)},children:[i&&(0,o.jsx)("input",{type:"checkbox",tabIndex:!0===p?0:void 0,className:"peer",ref:m,onChange:()=>{var e,t,n;d&&d(),u&&null!=(e=m.current)&&e.checked?u():!h||null!=(t=m.current)&&t.checked||h(),g(null==(n=m.current)?void 0:n.checked)}}),r]}))}));Object.assign($f,{Details:Ff,Title:Lf,Content:qf});const Kf=["children","section","className"],Qf=n.forwardRef(((e,t)=>{let{children:n,section:r,className:i}=e,a=Ph(e,Kf);const s=_d(i,zh({"stat-title":"title"===r,"stat-value":"value"===r,"stat-desc":"desc"===r,"stat-figure":"figure"===r,"stat-actions":"actions"===r}));return(0,o.jsx)("div",Oh({},a,{className:s,ref:t,children:n}))})),Gf=["dataTheme","className"],Vf=(0,n.forwardRef)(((e,t)=>{let{dataTheme:n,className:r}=e,i=Ph(e,Gf);const a=_d("stat",r);return(0,o.jsx)("div",Oh({},i,{"data-theme":n,className:a,ref:t}))})),Zf=n.forwardRef(((e,t)=>(0,o.jsx)(Qf,Oh({},e,{section:"title",ref:t})))),Yf=n.forwardRef(((e,t)=>(0,o.jsx)(Qf,Oh({},e,{section:"value",ref:t})))),Jf=n.forwardRef(((e,t)=>(0,o.jsx)(Qf,Oh({},e,{section:"desc",ref:t})))),Xf=n.forwardRef(((e,t)=>(0,o.jsx)(Qf,Oh({},e,{section:"figure",ref:t})))),ep=n.forwardRef(((e,t)=>(0,o.jsx)(Qf,Oh({},e,{section:"actions",ref:t}))));var tp=Object.assign(Vf,{Title:Zf,Value:Yf,Desc:Jf,Figure:Xf,Actions:ep});const np=["direction","dataTheme","className","children"],rp=n.forwardRef(((e,t)=>{let{direction:n="horizontal",dataTheme:r,className:i,children:a}=e,s=Ph(e,np);const l=_d("stats",i,zh({"stats-vertical":"vertical"===n,"stats-horizontal":"horizontal"===n}));return(0,o.jsx)("div",Oh({},s,{ref:t,"data-theme":r,className:l,children:a}))}));var op=Object.assign(rp,{Stat:tp});const ip=["children"],ap=n.forwardRef(((e,t)=>{let{children:n}=e,r=Ph(e,ip);return(0,o.jsx)("thead",Oh({},r,{ref:t,children:(0,o.jsx)("tr",{children:null==n?void 0:n.map(((e,t)=>(0,o.jsx)("th",{children:e},t)))})}))})),sp=["children"],lp=n.forwardRef(((e,t)=>{let{children:n}=e,r=Ph(e,sp);return(0,o.jsx)("tbody",Oh({},r,{ref:t,children:n}))})),cp=["children","active","hover","className"],up=n.forwardRef(((e,t)=>{let{children:n,active:r,hover:i,className:a}=e,s=Ph(e,cp);const l=_d(a,zh({active:r,hover:i}));return(0,o.jsx)("tr",Oh({},s,{className:l,ref:t,children:null==n?void 0:n.map(((e,t)=>t<1?(0,o.jsx)("th",{children:e},t):(0,o.jsx)("td",{children:e},t)))}))})),hp=["children"],dp=n.forwardRef(((e,t)=>{let{children:n}=e,r=Ph(e,hp);return(0,o.jsx)("tfoot",Oh({},r,{ref:t,children:(0,o.jsx)("tr",{children:null==n?void 0:n.map(((e,t)=>(0,o.jsx)("th",{children:e},t)))})}))})),fp=["children","size","zebra","pinRows","pinCols","dataTheme","className"],pp=n.forwardRef(((e,t)=>{let{children:n,size:r,zebra:i,pinRows:a,pinCols:s,dataTheme:l,className:c}=e,u=Ph(e,fp);const h=_d("table",c,zh({"table-zebra":i,"table-lg":"lg"===r,"table-md":"md"===r,"table-sm":"sm"===r,"table-xs":"xs"===r,"table-pin-rows":a,"table-pin-cols":s}));return(0,o.jsx)("table",Oh({},u,{"data-theme":l,className:h,ref:t,children:n}))}));var gp=Object.assign(pp,{Head:ap,Body:lp,Row:up,Footer:dp});const mp=["name","icon","dataTheme","className","children"],yp=(0,n.forwardRef)(((e,t)=>{let{name:n="accordion",icon:r,dataTheme:i,className:a,children:s}=e,l=Ph(e,mp);const c=_d("collapse",zh({"collapse-arrow":"arrow"===r,"collapse-plus":"plus"===r}),a);return(0,o.jsxs)("div",{"data-theme":i,className:c,children:[(0,o.jsx)("input",Oh({},l,{ref:t,type:"radio",name:n})),s]})}));yp.displayName="Accordion";Object.assign(yp,{Title:Lf,Content:qf});const bp=["dataTheme","className","children","secondItem"];(0,n.forwardRef)(((e,t)=>{let{dataTheme:n,className:r,children:i,secondItem:a}=e,s=Ph(e,bp);const l=_d("diff aspect-[16/9]",zh({}),r);return(0,o.jsxs)("div",Oh({},s,{"data-theme":n,className:l,ref:t,children:[(0,o.jsx)("div",{className:"diff-item-1",children:i}),(0,o.jsx)("div",{className:"diff-item-2",children:a}),(0,o.jsx)("div",{className:"diff-resizer"})]}))})).displayName="Diff";const vp=["children","className","connect","startClassName","endClassName"],wp=n.forwardRef(((e,t)=>{let{children:n,className:r,connect:i,startClassName:a,endClassName:s}=e,l=Ph(e,vp);return(0,o.jsxs)("li",Oh({},l,{className:r,ref:t,children:[("both"===i||"start"===i)&&(0,o.jsx)("hr",{className:a}),n,("both"===i||"end"===i)&&(0,o.jsx)("hr",{className:s})]}))}));wp.displayName="TimelineItem";const kp=["children","className","box"],xp=n.forwardRef(((e,t)=>{let{children:n,className:r,box:i}=e,a=Ph(e,kp);const s=_d("timeline-start",zh({"timeline-box":i}),r);return(0,o.jsx)("div",Oh({},a,{className:s,ref:t,children:n}))}));xp.displayName="TimelineStart";const Ep=["children","className"],_p=n.forwardRef(((e,t)=>{let{children:n=(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})}),className:r}=e,i=Ph(e,Ep);const a=_d("timeline-middle",r);return(0,o.jsx)("div",Oh({},i,{className:a,ref:t,children:n}))}));_p.displayName="TimelineMiddle";const Np=["children","className","box"],Sp=n.forwardRef(((e,t)=>{let{children:n,className:r,box:i=!0}=e,a=Ph(e,Np);const s=_d("timeline-end",zh({"timeline-box":i}),r);return(0,o.jsx)("div",Oh({},a,{className:s,ref:t,children:n}))}));Sp.displayName="TimelineEnd";const Cp=["dataTheme","className","vertical","horizontal","responsive","snap","compact","children"],Ap=(0,n.forwardRef)(((e,t)=>{let{dataTheme:n,className:r,vertical:i,horizontal:a,responsive:s,snap:l,compact:c,children:u}=e,h=Ph(e,Cp);const d=_d("timeline",zh({"timeline-vertical":i,"timeline-horizontal":a,"timeline-vertical lg:timeline-horizontal":s,"timeline-snap-icon":l,"timeline-compact":c}),r);return(0,o.jsx)("ul",Oh({},h,{"data-theme":n,className:d,ref:t,children:u}))}));Ap.displayName="Timeline";Object.assign(Ap,{Item:wp,Start:xp,Middle:_p,End:Sp});const Rp=["children","href"],Tp=n.forwardRef(((e,t)=>{let{children:n,href:r}=e,i=Ph(e,Rp);return(0,o.jsx)("li",Oh({role:"link"},i,{ref:t,children:r?(0,o.jsx)("a",{href:r,children:n}):(0,o.jsx)(o.Fragment,{children:n})}))})),Bp=["children","dataTheme","className","innerProps","innerRef"],jp=n.forwardRef(((e,t)=>{let{children:n,dataTheme:r,className:i,innerProps:a,innerRef:s}=e,l=Ph(e,Bp);const c=_d("breadcrumbs","text-sm",i);return(0,o.jsx)("div",Oh({role:"navigation","aria-label":"Breadcrumbs"},l,{"data-theme":r,className:c,ref:t,children:(0,o.jsx)("ul",Oh({},a,{ref:s,children:n}))}))}));Object.assign(jp,{Item:Tp});const Op=["children","className","color","dataTheme","active","disabled"],Ip=(0,n.forwardRef)(((e,t)=>{let{children:n,className:r,color:i,dataTheme:a,active:s,disabled:l}=e,c=Ph(e,Op);const u=_d(r,zh({"text-neutral":"neutral"===i,"text-primary":"primary"===i,"text-secondary":"secondary"===i,"text-accent":"accent"===i,"text-info":"info"===i,"text-success":"success"===i,"text-warning":"warning"===i,"text-error":"error"===i,active:s,disabled:l}));return(0,o.jsx)("button",Oh({},c,{className:u,"data-theme":a,ref:t,children:n}))})),Pp=["children","className"],Lp=(0,n.forwardRef)(((e,t)=>{let{children:n,className:r}=e,i=Ph(e,Pp);const a=_d("btm-nav-label",r);return(0,o.jsx)("span",Oh({},i,{className:a,ref:t,children:n}))})),zp=["size","dataTheme","className","children"],Up=(0,n.forwardRef)(((e,t)=>{let{size:n,dataTheme:r,className:i,children:a}=e,s=Ph(e,zp);const l=_d("btm-nav",zh({"btm-nav-lg":"lg"===n,"btm-nav-md":"md"===n,"btm-nav-sm":"sm"===n,"btm-nav-xs":"xs"===n}),i);return(0,o.jsx)("div",Oh({},s,{role:"navigation","data-theme":r,className:l,ref:t,children:a}))}));Up.displayName="BottomNavigation";Object.assign(Up,{Item:Ip,Label:Lp});const Mp=["children","href","color","hover","dataTheme","className"];(0,n.forwardRef)(((e,t)=>{let{children:n,href:r,color:i,hover:a=!0,dataTheme:s,className:l}=e,c=Ph(e,Mp);const u=_d("link",l,zh({"link-neutral":"neutral"===i,"link-primary":"primary"===i,"link-secondary":"secondary"===i,"link-accent":"accent"===i,"link-info":"info"===i,"link-success":"success"===i,"link-warning":"warning"===i,"link-error":"error"===i,"link-hover":a}));return(0,o.jsx)("a",Oh({rel:"noopener noreferrer"},c,{href:r,"data-theme":s,className:u,ref:t,children:n}))})).displayName="Link";const Fp=["className"],Dp=n.forwardRef(((e,t)=>{let{className:n}=e,r=Ph(e,Fp);const i=_d("menu-title",n);return(0,o.jsx)("li",Oh({},r,{className:i,ref:t}))})),qp=["className","disabled"],Hp=n.forwardRef(((e,t)=>{let{className:n,disabled:r}=e,i=Ph(e,qp);const a=_d(n,zh({disabled:r}));return(0,o.jsx)("li",Oh({role:"menuitem",className:a},i,{ref:t}))})),Wp=["className","label","open","children"],$p=n.forwardRef(((e,t)=>{let{className:n,label:r,open:i,children:a}=e,s=Ph(e,Wp);const l=_d("menu-dropdown-toggle",n,zh({"menu-dropdown-show":i}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",Oh({},s,{className:l,ref:t,children:r})),(0,o.jsx)("ul",{className:zh("menu-dropdown",{"menu-dropdown-show":i}),children:a})]})})),Kp=["className","label","open","children"],Qp=n.forwardRef(((e,t)=>{let{className:n,label:r,open:i,children:a}=e,s=Ph(e,Kp);return(0,o.jsxs)("details",Oh({},s,{open:i,className:n,ref:t,children:[(0,o.jsx)("summary",{children:r}),(0,o.jsx)("ul",{children:a})]}))})),Gp=["responsive","horizontal","vertical","dataTheme","className","size"],Vp=n.forwardRef(((e,t)=>{let{responsive:n,horizontal:r,vertical:i,dataTheme:a,className:s,size:l}=e,c=Ph(e,Gp);const u=_d("menu",s,zh({"menu-vertical lg:menu-horizontal":n,"menu-lg":"lg"===l,"menu-md":"md"===l,"menu-sm":"sm"===l,"menu-xs":"xs"===l,"menu-vertical":i,"menu-horizontal":r}));return(0,o.jsx)("ul",Oh({role:"menu","data-theme":a,className:u},c,{ref:t}))}));var Zp=Object.assign(Vp,{Title:Dp,Item:Hp,Dropdown:$p,Details:Qp});const Yp=n.forwardRef(((e,t)=>{let{children:n,section:r,dataTheme:i,className:a,style:s}=e;const l=_d(a,zh({"navbar-start":"start"===r,"navbar-center":"center"===r,"navbar-end":"end"===r}));return(0,o.jsx)("div",{"data-theme":i,className:l,style:s,ref:t,children:n})})),Jp=["children","dataTheme","className"],Xp=n.forwardRef(((e,t)=>{let{children:n,dataTheme:r,className:i}=e,a=Ph(e,Jp);const s=_d("navbar",i);return(0,o.jsx)("div",Oh({role:"navigation","aria-label":"Navbar"},a,{"data-theme":r,className:s,ref:t,children:n}))})),eg=n.forwardRef(((e,t)=>(0,o.jsx)(Yp,Oh({},e,{section:"start",ref:t})))),tg=n.forwardRef(((e,t)=>(0,o.jsx)(Yp,Oh({},e,{section:"center",ref:t})))),ng=n.forwardRef(((e,t)=>(0,o.jsx)(Yp,Oh({},e,{section:"end",ref:t}))));var rg=Object.assign(Xp,{Start:eg,Center:tg,End:ng});const og=["dataTheme","className","children","responsive","vertical","horizontal"],ig=(0,n.forwardRef)(((e,t)=>{let{dataTheme:n,className:r,children:i,responsive:a,vertical:s,horizontal:l}=e,c=Ph(e,og);const u=_d("join",zh({"join-vertical":!a&&s,"join-horizontal":!a&&l,"join-vertical lg:join-horizontal":a}),r);return(0,o.jsx)("div",Oh({},c,{"data-theme":n,className:u,ref:t,children:i}))}));ig.displayName="Join";const ag=["children","value","color","dataTheme","className"],sg=n.forwardRef(((e,t)=>{let{children:n,value:r,color:i,dataTheme:a,className:s}=e,l=Ph(e,ag);const c=_d("step",s,zh({"step-primary":"primary"===i,"step-secondary":"secondary"===i,"step-accent":"accent"===i,"step-info":"info"===i,"step-success":"success"===i,"step-warning":"warning"===i,"step-error":"error"===i}));return(0,o.jsx)("li",Oh({"aria-label":"Step"},l,{"data-theme":a,"data-content":r,className:c,ref:t,children:n}))})),lg=["children","dataTheme","className","vertical","horizontal"],cg=n.forwardRef(((e,t)=>{let{children:n,dataTheme:r,className:i,vertical:a,horizontal:s}=e,l=Ph(e,lg);const c=_d("steps",i,zh({"steps-vertical":a,"steps-horizontal":s}));return(0,o.jsx)("ul",Oh({"aria-label":"Steps",role:"group"},l,{"data-theme":r,className:c,ref:t,children:n}))}));Object.assign(cg,{Step:sg});const ug=["children","className","color","bgColor","borderColor","active","disabled"],hg=(0,n.forwardRef)(((e,t)=>{let{children:n,className:r,color:i,bgColor:a,borderColor:s,active:l,disabled:c}=e,u=Ph(e,ug);const h=_d("tab",r,zh({[`[--tab-bg:${a}]`]:a,[`[--tab-border-color:${s}]`]:s,"text-neutral":"neutral"===i,"text-primary":"primary"===i,"text-secondary":"secondary"===i,"text-accent":"accent"===i,"text-info":"info"===i,"text-success":"success"===i,"text-warning":"warning"===i,"text-error":"error"===i,"tab-active":l,"tab-disabled":c}));return(0,o.jsx)("a",Oh({role:"tab"},u,{ref:t,className:h,children:n}))})),dg=["children","className","color","bgColor","borderColor","active","label","disabled","name","contentClassName"],fg=(0,n.forwardRef)(((e,t)=>{let{children:n,className:r,color:i,bgColor:a,borderColor:s,active:l,label:c,disabled:u,name:h,contentClassName:d}=e,f=Ph(e,dg);const p=_d("tab",r,zh({[`[--tab-bg:${a}]`]:a,[`[--tab-border-color:${s}]`]:s,"text-neutral":"neutral"===i,"text-primary":"primary"===i,"text-secondary":"secondary"===i,"text-accent":"accent"===i,"text-info":"info"===i,"text-success":"success"===i,"text-warning":"warning"===i,"text-error":"error"===i,"tab-active":l,"tab-disabled":u})),g=_d("tab-content",d);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",Oh({className:p,role:"tab",type:"radio",name:h,disabled:u,"aria-label":c},f,{ref:t})),(0,o.jsx)("div",{className:g,children:n})]})})),pg=(0,n.forwardRef)(((e,t)=>{let{children:n,className:r,variant:i,size:a}=e;const s=_d("tabs",r,zh({"tabs-boxed":"boxed"===i,"tabs-bordered":"bordered"===i,"tabs-lifted":"lifted"===i,"tabs-lg":"lg"===a,"tabs-md":"md"===a,"tabs-sm":"sm"===a,"tabs-xs":"xs"===a}));return(0,o.jsx)("div",{role:"tablist",className:s,ref:t,children:n})}));Object.assign(pg,{Tab:hg,RadioTab:fg});const gg=["children","icon","status","dataTheme","className"],mg=(0,n.forwardRef)(((e,t)=>{let{children:n,icon:r,status:i,dataTheme:a,className:s}=e,l=Ph(e,gg);const c=_d("alert",s,zh({"alert-info":"info"===i,"alert-success":"success"===i,"alert-warning":"warning"===i,"alert-error":"error"===i}));return(0,o.jsxs)("div",Oh({role:"alert"},l,{ref:t,"data-theme":a,className:c,children:[r,n]}))}));mg.displayName="Alert";const yg=["color","dataTheme","className"];(0,n.forwardRef)(((e,t)=>{let{color:n,dataTheme:r,className:i}=e,a=Ph(e,yg);const s=_d("progress",i,zh({"progress-accent":"accent"===n,"progress-error":"error"===n,"progress-ghost":"ghost"===n,"progress-info":"info"===n,"progress-primary":"primary"===n,"progress-secondary":"secondary"===n,"progress-success":"success"===n,"progress-warning":"warning"===n}));return(0,o.jsx)("progress",Oh({},a,{ref:t,"data-theme":r,className:s}))})).displayName="Progress";const bg=["value","size","thickness","color","dataTheme","className","children"];(0,n.forwardRef)(((e,t)=>{let{value:n,size:r="4rem",thickness:i="4px",color:a,dataTheme:s,className:l,children:c}=e,u=Ph(e,bg);const h=_d("radial-progress",l,zh({"text-primary":"primary"===a,"text-secondary":"secondary"===a,"text-accent":"accent"===a,"text-info":"info"===a,"text-success":"success"===a,"text-warning":"warning"===a,"text-error":"error"===a})),d=Math.min(100,Math.max(0,n)),f={"--value":d,"--size":r,"--thickness":i};return(0,o.jsx)("div",Oh({role:"progressbar","aria-valuenow":d,"aria-valuemin":0,"aria-valuemax":100},u,{ref:t,"data-theme":s,className:h,style:f,children:c}))})).displayName="RadialProgress";const vg=["dataTheme","className","children"];(0,n.forwardRef)(((e,t)=>{let{dataTheme:n,className:r,children:i}=e,a=Ph(e,vg);const s=_d("skeleton",zh({}),r);return(0,o.jsx)("div",Oh({},a,{"data-theme":n,className:s,ref:t,children:i}))})).displayName="Skeleton";const wg=["horizontal","vertical","className","children"],kg={start:"toast-start",center:"toast-center",end:"toast-end"},xg={top:"toast-top",middle:"toast-middle",bottom:"toast-bottom"};(0,n.forwardRef)(((e,t)=>{let{horizontal:n="end",vertical:r="bottom",className:i,children:a}=e,s=Ph(e,wg);return(0,o.jsx)("div",Oh({},s,{className:_d("toast",kg[n],xg[r],i),ref:t,children:a}))})).displayName="Toast";const Eg=["message","children","open","color","position","dataTheme","className"];(0,n.forwardRef)(((e,t)=>{let{message:n,children:r,open:i,color:a,position:s,dataTheme:l,className:c}=e,u=Ph(e,Eg);const h=_d("tooltip",c,zh({"tooltip-open":i,"tooltip-primary":"primary"===a,"tooltip-secondary":"secondary"===a,"tooltip-accent":"accent"===a,"tooltip-info":"info"===a,"tooltip-success":"success"===a,"tooltip-warning":"warning"===a,"tooltip-error":"error"===a,"tooltip-top":"top"===s,"tooltip-bottom":"bottom"===s,"tooltip-left":"left"===s,"tooltip-right":"right"===s}));return(0,o.jsx)("div",Oh({role:"tooltip"},u,{ref:t,"data-theme":l,"data-tip":n,className:h,children:r}))})).displayName="Tooltip";const _g=["children","title","dataTheme","className"],Ng=n.forwardRef(((e,t)=>{let{children:n,title:r,className:i}=e,a=Ph(e,_g);const s=_d("label",i);return(0,o.jsxs)("label",Oh({},a,{className:s,children:[(0,o.jsx)("span",{className:"label-text cursor-pointer",ref:t,children:r}),n]}))})),Sg=["children","dataTheme","className"],Cg=n.forwardRef(((e,t)=>{let{children:n,dataTheme:r,className:i}=e,a=Ph(e,Sg);const s=_d("form-control",i);return(0,o.jsx)("form",Oh({role:"form"},a,{"data-theme":r,className:s,ref:t,children:n}))}));var Ag=Object.assign(Cg,{Label:Ng});const Rg=["color","size","indeterminate","dataTheme","className"],Tg=(0,n.forwardRef)(((e,t)=>{let{color:r,size:i,indeterminate:a,dataTheme:s,className:l}=e,c=Ph(e,Rg);const u=_d("checkbox",l,zh({"checkbox-lg":"lg"===i,"checkbox-md":"md"===i,"checkbox-sm":"sm"===i,"checkbox-xs":"xs"===i,"checkbox-primary":"primary"===r,"checkbox-secondary":"secondary"===r,"checkbox-accent":"accent"===r,"checkbox-info":"info"===r,"checkbox-success":"success"===r,"checkbox-warning":"warning"===r,"checkbox-error":"error"===r})),h=(0,n.useRef)(null);return(0,n.useImperativeHandle)(t,(()=>h.current)),(0,n.useEffect)((()=>{h.current&&(h.current.indeterminate=!!a)}),[a]),(0,o.jsx)("input",Oh({},c,{ref:h,type:"checkbox","data-theme":s,className:u}))}));Tg.displayName="Checkbox";const Bg=["value","placeholder","bordered","borderOffset","size","color","dataTheme","className","type"],jg=(0,n.forwardRef)(((e,t)=>{let{value:n,placeholder:r,bordered:i=!0,borderOffset:a,size:s,color:l,dataTheme:c,className:u,type:h}=e,d=Ph(e,Bg);const f=_d("input",u,zh({"input-lg":"lg"===s,"input-md":"md"===s,"input-sm":"sm"===s,"input-xs":"xs"===s,"input-primary":"primary"===l,"input-secondary":"secondary"===l,"input-accent":"accent"===l,"input-ghost":"ghost"===l,"input-info":"info"===l,"input-success":"success"===l,"input-warning":"warning"===l,"input-error":"error"===l,"input-bordered":i,"focus:outline-offset-0":!a}));return(0,o.jsx)("input",Oh({},d,{ref:t,type:h,value:n,placeholder:r,"data-theme":c,className:f}))}));jg.displayName="Input";const Og=["color","size","name","dataTheme","className"];(0,n.forwardRef)(((e,t)=>{let{color:n,size:r,name:i,dataTheme:a,className:s}=e,l=Ph(e,Og);const c=_d("radio",s,zh({"radio-lg":"lg"===r,"radio-md":"md"===r,"radio-sm":"sm"===r,"radio-xs":"xs"===r,"radio-primary":"primary"===n,"radio-secondary":"secondary"===n,"radio-accent":"accent"===n,"radio-info":"info"===n,"radio-success":"success"===n,"radio-warning":"warning"===n,"radio-error":"error"===n}));return(0,o.jsx)("input",Oh({},l,{ref:t,type:"radio",name:i,"data-theme":a,className:c}))})).displayName="Radio";const Ig=["color","size","step","displayTicks","ticksStep","dataTheme","className"],Pg=(0,n.forwardRef)(((e,t)=>{let{color:n,size:r,step:i,displayTicks:a,ticksStep:s,dataTheme:l,className:c}=e,u=Ph(e,Ig);const h=_d("range",c,zh({"range-lg":"lg"===r,"range-md":"md"===r,"range-sm":"sm"===r,"range-xs":"xs"===r,"range-primary":"primary"===n,"range-secondary":"secondary"===n,"range-accent":"accent"===n,"range-info":"info"===n,"range-success":"success"===n,"range-warning":"warning"===n,"range-error":"error"===n})),d=null!=a?a:void 0!==i,f=void 0!==i?Number(i):1,p=null!=s?s:f,g=void 0!==u.min?Number(u.min):0,m=void 0!==u.max?Number(u.max):100,y=Math.max(Math.ceil((m-g)/p),1)+1;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",Oh({},u,{ref:t,type:"range",step:i,"data-theme":l,className:h})),d&&(0,o.jsx)("div",{className:"w-full flex justify-between text-xs px-2",children:[...Array(y)].map(((e,t)=>(0,o.jsx)("span",{children:"|"},t)))})]})}));Pg.displayName="Range";const Lg=e=>{let t=Oh({},(Ih(e),e));return(0,o.jsx)("input",Oh({},t,{type:"checkbox"}))},zg=["children","size","half","hidden","dataTheme","className","value","onChange"],Ug=n.forwardRef(((e,t)=>{let{children:r,size:i,half:a,hidden:s,dataTheme:l,className:c,value:u,onChange:h}=e,d=Ph(e,zg);const f=_d("rating",c,zh({"rating-lg":"lg"===i,"rating-md":"md"===i,"rating-sm":"sm"===i,"rating-xs":"xs"===i,"rating-half":a,"rating-hidden":s||0===u}));return(0,o.jsxs)("div",Oh({"aria-label":"Rating"},d,{ref:t,"data-theme":l,className:f,children:[0===u&&(0,o.jsx)(Lg,{className:zh(f,"hidden"),checked:!0,readOnly:!0}),n.Children.map(r,((e,t)=>{const r=e;return n.cloneElement(r,{key:t+u,checked:u===t+1,readOnly:null==h,onChange:()=>{null==h||h(t+1)}})}))]}))}));Object.assign(Ug,{Item:Lg});const Mg=["children"],Fg=["children","size","color","bordered","borderOffset","dataTheme","className"],Dg=(e,t)=>{const{children:n,size:r,color:i,bordered:a=!0,borderOffset:s,dataTheme:l,className:c}=e,u=Ph(e,Fg),h=_d("select",c,zh({"select-lg":"lg"===r,"select-md":"md"===r,"select-sm":"sm"===r,"select-xs":"xs"===r,"select-primary":"primary"===i,"select-secondary":"secondary"===i,"select-accent":"accent"===i,"select-ghost":"ghost"===i,"select-info":"info"===i,"select-success":"success"===i,"select-warning":"warning"===i,"select-error":"error"===i,"select-bordered":a,"focus:outline-offset-0":!s}));return(0,o.jsx)("select",Oh({},u,{ref:t,"data-theme":l,className:h,children:n}))},qg=n.forwardRef(Dg);Object.assign(qg,{Option:e=>{let{children:t}=e,n=Ph(e,Mg);return(0,o.jsx)("option",Oh({},n,{children:t}))}});const Hg=["color","size","dataTheme","className"];(0,n.forwardRef)(((e,t)=>{let{color:n,size:r,dataTheme:i,className:a}=e,s=Ph(e,Hg);const l=_d("toggle",a,zh({"toggle-lg":"lg"===r,"toggle-md":"md"===r,"toggle-sm":"sm"===r,"toggle-xs":"xs"===r,"toggle-primary":"primary"===n,"toggle-secondary":"secondary"===n,"toggle-accent":"accent"===n,"toggle-info":"info"===n,"toggle-success":"success"===n,"toggle-warning":"warning"===n,"toggle-error":"error"===n}));return(0,o.jsx)("input",Oh({},s,{ref:t,type:"checkbox","data-theme":i,className:l}))})).displayName="Toggle";const Wg=["bordered","borderOffset","color","size","dataTheme","className"],$g=n.forwardRef(((e,t)=>{let{bordered:n=!0,borderOffset:r,color:i,size:a,dataTheme:s,className:l}=e,c=Ph(e,Wg);const u=_d("textarea",l,zh({"textarea-lg":"lg"===a,"textarea-md":"md"===a,"textarea-sm":"sm"===a,"textarea-xs":"xs"===a,"textarea-primary":"primary"===i,"textarea-secondary":"secondary"===i,"textarea-accent":"accent"===i,"textarea-ghost":"ghost"===i,"textarea-info":"info"===i,"textarea-success":"success"===i,"textarea-warning":"warning"===i,"textarea-error":"error"===i,"textarea-bordered":n,"focus:outline-offset-0":!r}));return(0,o.jsx)("textarea",Oh({},c,{"data-theme":s,className:u,ref:t}))})),Kg=["className","size","color","bordered","dataTheme"];(0,n.forwardRef)(((e,t)=>{let{className:n,size:r,color:i,bordered:a,dataTheme:s}=e,l=Ph(e,Kg);const c=_d("file-input",n,zh({"file-input-lg":"lg"===r,"file-input-md":"md"===r,"file-input-sm":"sm"===r,"file-input-xs":"xs"===r,"file-input-primary":"primary"===i,"file-input-secondary":"secondary"===i,"file-input-accent":"accent"===i,"file-input-ghost":"ghost"===i,"file-input-info":"info"===i,"file-input-success":"success"===i,"file-input-warning":"warning"===i,"file-input-error":"error"===i,"file-input-bordered":a}));return(0,o.jsx)("input",Oh({},l,{ref:t,type:"file","data-theme":s,className:c}))})).displayName="FileInput";const Qg=["children","demo","size","horizontal","dataTheme","className"];(0,n.forwardRef)(((e,t)=>{let{children:n,demo:r=!0,size:i,horizontal:a,dataTheme:s,className:l}=e,c=Ph(e,Qg);const u=_d("artboard",l,zh({"artboard-demo":r,"phone-1":1===i,"phone-2":2===i,"phone-3":3===i,"phone-4":4===i,"phone-5":5===i,"phone-6":6===i,horizontal:a}));return(0,o.jsx)("div",Oh({"aria-label":"Artboard"},c,{ref:t,"data-theme":s,className:u,children:n}))})).displayName="Artboard";const Gg=["children","vertical","horizontal","responsive","color","start","end","dataTheme","className"],Vg=(0,n.forwardRef)(((e,t)=>{let{children:n,vertical:r,horizontal:i,responsive:a,color:s,start:l,end:c,dataTheme:u,className:h}=e,d=Ph(e,Gg);const f=_d("divider",h,zh({"divider-vertical":r,"divider-horizontal":i,"lg:divider-horizontal":a,"divider-neutral":"neutral"===s,"divider-primary":"primary"===s,"divider-secondary":"secondary"===s,"divider-accent":"accent"===s,"divider-warning":"warning"===s,"divider-info":"info"===s,"divider-error":"error"===s,"divider-start":l,"divider-end":c}));return(0,o.jsx)("div",Oh({role:"separator"},d,{"data-theme":u,className:f,ref:t,children:n}))}));Vg.displayName="Divider";const Zg=["children","side","open","end","dataTheme","className","toggleClassName","contentClassName","sideClassName","overlayClassName","onClickOverlay"],Yg=e=>{let{children:t,side:n,open:r,end:i,dataTheme:a,className:s,toggleClassName:l,contentClassName:c,sideClassName:u,overlayClassName:h,onClickOverlay:d}=e,f=Ph(e,Zg);const p=_d("drawer",s,zh({"drawer-end":i}));return(0,o.jsxs)("div",Oh({"aria-expanded":r},f,{"data-theme":a,className:p,children:[(0,o.jsx)("input",{type:"checkbox",className:zh("drawer-toggle",l),checked:r,readOnly:!0}),(0,o.jsx)("div",{className:zh("drawer-content",c),children:t}),(0,o.jsxs)("div",{className:zh("drawer-side",u),children:[(0,o.jsx)("label",{className:zh("drawer-overlay",h),onClick:d}),n]})]}))},Jg=["className"],Xg=n.forwardRef(((e,t)=>{let{className:n}=e,r=Ph(e,Jg);const i=_d("footer-title",n);return(0,o.jsx)("span",Oh({},r,{className:i,ref:t}))})),em=["center","dataTheme","className"],tm=n.forwardRef(((e,t)=>{let{center:n,dataTheme:r,className:i}=e,a=Ph(e,em);const s=_d("footer",i,zh({"footer-center":n}));return(0,o.jsx)("div",Oh({role:"contentinfo"},a,{"data-theme":r,className:s,ref:t}))}));var nm=Object.assign(tm,{Title:Xg});const rm=["dataTheme","className","children"],om=n.forwardRef(((e,t)=>{let{dataTheme:n,className:r,children:i}=e,a=Ph(e,rm);const s=_d("hero-content",r);return(0,o.jsx)("div",Oh({},a,{"data-theme":n,className:s,ref:t,children:i}))})),im=["dataTheme","className","children"],am=n.forwardRef(((e,t)=>{let{dataTheme:n,className:r,children:i}=e,a=Ph(e,im);const s=_d("hero-overlay",r);return(0,o.jsx)("div",Oh({},a,{"data-theme":n,className:s,ref:t,children:i}))})),sm=["dataTheme","className","children"],lm=n.forwardRef(((e,t)=>{let{dataTheme:n,className:r,children:i}=e,a=Ph(e,sm);const s=_d("hero",r);return(0,o.jsx)("div",Oh({role:"banner"},a,{"data-theme":n,className:s,ref:t,children:i}))}));Object.assign(lm,{Content:om,Overlay:am});const cm=["children","horizontal","vertical","dataTheme","className"],um=function(){let{className:e,horizontal:t,vertical:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _d("indicator-item",e,zh({"indicator-start":"start"===t,"indicator-center":"center"===t,"indicator-end":"end"===t,"indicator-top":"top"===n,"indicator-middle":"middle"===n,"indicator-bottom":"bottom"===n}))},hm=n.forwardRef(((e,t)=>{let{children:n,horizontal:r="end",vertical:i="top",className:a}=e,s=Ph(e,cm);return(0,o.jsx)("div",Oh({"aria-label":"Indicator"},s,{className:um({className:a,horizontal:r,vertical:i}),ref:t,children:n}))}));hm.displayName="IndicatorItem";var dm=Object.assign(hm,{className:um});const fm=["children","className","dataTheme"],pm=function(){let{className:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _d("indicator",e)},gm=n.forwardRef(((e,t)=>{let{children:n,className:r,dataTheme:i}=e,a=Ph(e,fm);return(0,o.jsx)("div",Oh({},a,{"data-theme":i,className:pm({className:r}),ref:t,children:n}))}));gm.displayName="Indicator";Object.assign(gm,{Item:dm,className:pm});const mm=["src","variant","dataTheme","className"],ym=function(){let{className:e,variant:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _d("mask",e,zh({"mask-squircle":"squircle"===t,"mask-heart":"heart"===t,"mask-hexagon":"hexagon"===t,"mask-hexagon-2":"hexagon-2"===t,"mask-decagon":"decagon"===t,"mask-pentagon":"pentagon"===t,"mask-diamond":"diamond"===t,"mask-square":"square"===t,"mask-circle":"circle"===t,"mask-parallelogram":"parallelogram"===t,"mask-parallelogram-2":"parallelogram-2"===t,"mask-parallelogram-3":"parallelogram-3"===t,"mask-parallelogram-4":"parallelogram-4"===t,"mask-star":"star"===t,"mask-star-2":"star-2"===t,"mask-triangle":"triangle"===t,"mask-triangle-2":"triangle-2"===t,"mask-triangle-3":"triangle-3"===t,"mask-triangle-4":"triangle-4"===t,"mask-half-1":"half-1"===t,"mask-half-2":"half-2"===t}))},bm=n.forwardRef(((e,t)=>{let{src:n,variant:r,dataTheme:i,className:a}=e,s=Ph(e,mm);return(0,o.jsx)("img",Oh({},s,{"data-theme":i,className:ym({className:a,variant:r}),src:n,ref:t}))}));bm.displayName="Mask";Object.assign(bm,{className:ym});const vm=["dataTheme","className","children"];(0,n.forwardRef)(((e,t)=>{let{dataTheme:n,className:r,children:i}=e,a=Ph(e,vm);const s=_d("stack",r);return(0,o.jsx)("div",Oh({"aria-label":"Stack"},a,{ref:t,"data-theme":n,className:s,children:i}))})).displayName="Stack";const wm=["dataPrefix","dataTheme","status","className","children","innerProps","innerRef"],km=(0,n.forwardRef)(((e,t)=>{let{dataPrefix:n,dataTheme:r,status:i,className:a,children:s,innerProps:l,innerRef:c}=e,u=Ph(e,wm);const h=_d(zh({"bg-info":"info"===i,"bg-success":"success"===i,"bg-warning":"warning"===i,"bg-error":"error"===i,"text-info-content":"info"===i,"text-success-content":"success"===i,"text-warning-content":"warning"===i,"text-error-content":"error"===i}),a),d=Oh({},u,{className:h},!1!==n&&{"data-prefix":n||">"});return(0,o.jsx)("pre",Oh({},d,{"data-theme":r,className:h,ref:t,children:(0,o.jsx)("code",Oh({},l,{ref:c,children:s}))}))}));km.displayName="CodeMockup.Line";const xm=["dataTheme","className","children"],Em=(0,n.forwardRef)(((e,t)=>{let{dataTheme:r,className:i,children:a}=e,s=Ph(e,xm);const l=_d("mockup-code",i);return(0,o.jsx)("div",Oh({"aria-label":"Code mockup"},s,{"data-theme":r,className:l,ref:t,children:n.Children.map(a,((e,t)=>{const r=e;return n.cloneElement(r,{key:t})}))}))}));Em.displayName="CodeMockup";Object.assign(Em,{Line:km});const _m=["color","dataTheme","className","children","innerRef","innerProps"];(0,n.forwardRef)(((e,t)=>{let{color:n,dataTheme:r,className:i,children:a,innerRef:s,innerProps:l}=e,c=Ph(e,_m);const u=_d("mockup-phone",zh({"border-primary":"primary"===n,"border-secondary":"secondary"===n,"border-info":"info"===n,"border-success":"success"===n,"border-warning":"warning"===n,"border-error":"error"===n}),i);return(0,o.jsxs)("div",Oh({"aria-label":"Phone mockup"},c,{"data-theme":r,className:u,ref:t,children:[(0,o.jsx)("div",{className:"camera"}),(0,o.jsx)("div",{className:"display",children:(0,o.jsx)("div",Oh({},l,{className:_d("artboard artboard-demo phone-1",null==l?void 0:l.className),ref:s,children:a}))})]}))})).displayName="PhoneMockup";const Nm=["border","borderColor","backgroundColor","frameColor","dataTheme","className","children"];(0,n.forwardRef)(((e,t)=>{let{border:r,borderColor:i,backgroundColor:a,frameColor:s,dataTheme:l,className:c,children:u}=e,h=Ph(e,Nm);const d=i||(s||"base-300"),f=_d("mockup-window",r&&`border border-${d}`,zh({"border-primary":"primary"===d,"border-secondary":"secondary"===d,"border-accent":"accent"===d,"border-info":"info"===d,"border-success":"success"===d,"border-warning":"warning"===d,"border-error":"error"===d,"border-base-100":"base-100"===d,"border-base-200":"base-200"===d,"border-base-300":"base-300"===d,"border-neutral":"neutral"===d,"bg-primary":"primary"===s,"bg-secondary":"secondary"===s,"bg-accent":"accent"===s,"bg-info":"info"===s,"bg-success":"success"===s,"bg-warning":"warning"===s,"bg-error":"error"===s,"bg-base-100":"base-100"===s,"bg-base-200":"base-200"===s,"bg-base-300":"base-300"===s,"bg-neutral":"neutral"===s}),c),p=n.Children.count(u)>0&&n.Children.toArray(u)[0],g=zh(a&&`bg-${a}`,r&&`border-t border-${d}`,"p-4"),m=p&&n.isValidElement(p)?n.cloneElement(p,{className:_d(g,p.props.className)}):(0,o.jsx)("div",{className:g,children:u});return(0,o.jsx)("div",Oh({"aria-label":"Window mockup"},h,{"data-theme":l,className:f,ref:t,children:m}))})).displayName="WindowMockup";const Sm=n.createContext({theme:"light",setTheme:()=>{}}),Cm=["children","dataTheme","onChange","className"],Am=n.forwardRef(((e,t)=>{let{children:r,dataTheme:i,onChange:a,className:s}=e,l=Ph(e,Cm);const c=(0,n.useRef)(null==t?void 0:t.current),u=(e=>{if(!e.current)return;const t=e.current.closest("[data-theme]");return t?t.getAttribute("data-theme"):void 0})(c),[h,d]=(0,n.useState)(i||u||"light"),f=e=>{a&&a(e),d(e)};return(0,n.useEffect)((()=>{i!==h&&i&&f(i)}),[i]),(0,o.jsx)(Sm.Provider,{value:{theme:h,setTheme:f},children:(0,o.jsx)("div",Oh({},l,{"data-theme":h,className:s,ref:c,children:r}))})})),Rm=e=>{const{theme:t,setTheme:r}=(0,n.useContext)(Sm);return(0,n.useEffect)((()=>{e&&t!==e&&r(e)}),[e]),{theme:t,setTheme:r}},Tm=64,Bm="nevent1qqs2kn0xfgz0mrt5ed67tfmq7mnmwj80j2a7pyvs53qeg9e4ms8kuqq83007e",jm="nevent1qvzqqqqqgqqzqg3sjumg4m8jndj202jvsdh85xzf4tplpawg9mwpa2679rsxkxdjen67jn",Om={id:"<32-bytes lowercase hex-encoded sha256 of the serialized event data>",pubkey:"<32-bytes lowercase hex-encoded public key of the event creator>",created_at:Math.floor(Date.now()/1e3),kind:Tm,tags:[],content:'[Event "?"]\n[Site "?"]\n[Date "????.??.??"]\n[Round "?"]\n[White "?"]\n[Black "?"]\n[Result "*"]\n\n*',sig:'<64-bytes lowercase hex of the signature of the sha256 hash of the serialized event data, which is the same as the "id" field>'},Im='[Event "F/S Return Match"]\n[Site "Belgrade, Serbia JUG"]\n[Date "1992.11.04"]\n[Round "29"]\n[White "Fischer, Robert J."]\n[Black "Spassky, Boris V."]\n[Result "1/2-1/2"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bb5 {This opening is called the Ruy Lopez.} 3... a6\n4. Ba4 Nf6 5. O-O Be7 6. Re1 b5 7. Bb3 d6 8. c3 O-O 9. h3 Nb8 10. d4 Nbd7\n11. c4 c6 12. cxb5 axb5 13. Nc3 Bb7 14. Bg5 b4 15. Nb1 h6 16. Bh4 c5 17. dxe5\nNxe4 18. Bxe7 Qxe7 19. exd6 Qf6 20. Nbd2 Nxd6 21. Nc4 Nxc4 22. Bxc4 Nb6\n23. Ne5 Rae8 24. Bxf7+ Rxf7 25. Nxf7 Rxe1+ 26. Qxe1 Kxf7 27. Qe3 Qg5 28. Qxg5\nhxg5 29. b3 Ke6 30. a3 Kd6 31. axb4 cxb4 32. Ra5 Nd5 33. f3 Bc8 34. Kf2 Bf5\n35. Ra7 g6 36. Ra6+ Kc5 37. Ke1 Nf4 38. g3 Nxh3 39. Kd2 Kb5 40. Rd6 Kc5 41. Ra6\nNf2 42. g4 Bd3 43. Re6 1/2-1/2',Pm={created_at:1,content:Im,tags:[],kind:Tm,pubkey:"",id:"",sig:""},Lm='[Event "USSR Championship"]\n[Site "Moscow URS"]\n[Date "1957.02.21"]\n[Round "21"]\n[White "Mikhail Tal"]\n[Black "Alexander Kazimirovich Tolush"]\n[Result "1-0"]\n[ECO "E81"]\n[Annotator "USER"]\n[PlyCount "83"]\n[EventDate "1957.??.??"]\n\n{Let\'s start our journey through the imaginative, wonderful world of the games\nof Mikhail Tal by examining his game against the old Soviet Master Alexander\nKazimirovich Tolush from the 21st USSR Championship, held in 1957. --- Tolush,\nwho would later become very famous as one of the trainers of the future World\nChampion Boris Spassky, was very known for his sharp and attacking style - so\nit is not surprising that his games against Mikhail Tal were often a spectacle\nin their own right! --- The two players have already created a mind-boggling\nmasterpiece in the 1956 USSR Chess Championship (which will not be analyzed in\nthis article, although it was analyzed by Garry Kasparov in his book On My\nGreat Predecessors in the chapter about Tal).} 1. c4 {Throughout this career,\nTal was playing all four main moves by White, although he was mainly 1.e4\nplayer - especially in his youth. Still, I guess he had his reasons for the\nopening choice in this game - although it is not unfair to say that back in\n1957, the significance of the opening stage at the top level was much less\nsignificant compared to today.} Nf6 2. Nc3 g6 3. e4 d6 4. d4 Bg7 {The King\'s\nIndian was brought to the forefront at the end of 1940s and beginning of 1950s\n(particularly through the effors of Boleslavsky and Bronstein, among others)\nso it is not a surprising opening choice for Tolush - especially when we\nconsider the traits of his style!} 5. f3 {The Saemisch variations is one of\nthe sharpest and arguably most critical ways of meeting the King\'s Indian\ndefence. The idea is to keep the center fluid, castle queenside and go for the\nsharp g4-h4 attack. It has remained quite popular to this day. and was tested\nextensively in one of the Karpov-Kasparov matches, although nowadays the\nneural networks are suggesting some other ways as more critical.} e5 {This\ntypical central counterstrike, characteristic of the King\'s Indian defence, is\nnot the most popular move by today\'s standards as it reveals Black\'s\nintentions prematurely, but we shouldn\'t judge the state of the opening theory\nfrom 1957 too harshly. It has to be said that this move was played by some\nstrong players like Ivanchuk and Sindarov, so it has every right to exist.} 6.\nNge2 {A standard move in the Saemisch, defending the d4 point and intending\nthe Be3/Bg5-Qd2-O-O-O developing scheme. Once again - other moves are possible,\nbut I wouldn\'t want to delve too deeply in the opening stage of this game.}\nNbd7 {Also a bit strange as the knight is passive here and it blocks the\nlight-squared bishop, although some strong players have played this even in\n2020s.} 7. Bg5 {[%cal Gh7h6,Gd1d2] Developing the bishop on a more active\nsquare than e3 as the d4 pawn is not under the attack here. White is trying to\nprovoke h6.} (7. Be3 {[%cal Gd1d2] Is an equally valid alternative. White\'s\nplan remains the same.}) 7... c6 {[%cal Gc6d5,Gd8a5] Taking the d5 square\nunder control and opening the queen\'s diagonal. Very standard procedure.} (7...\nh6 8. Be3 {[%cal Re3h6] And now the h6 pawn can become an object of the attack.\n}) 8. Qd2 O-O 9. d5 {[%csl Gc4,Gd5,Ge4] A very typical idea, closing the\ncenter before starting the kingside attack. White is not yet hurrying with\ncastling and intends to keep the king in the center for a bit, as it turns out\nit is more difficult for Black to create counterplay with the king in the\ncenter compared to the king on the queenside.} c5 {[%csl Gc4,Rc5,Gd5,Rd6,Ge4,\nRe5] This closing of the center was relatively a standard proceudre in the\npast, but it is just bad for Black as now White has a free hand on the\nkingside.} (9... Nc5 {It was much better to keep the tension between the pawns\nand, say, move the knight and keep the d6 pawn defended.}) (9... h6 {The\nmodern engine also suggests this move, which is based on a nice tactical shot}\n10. Bxh6 (10. Be3 {Should instead be played when Black can go} cxd5 11. cxd5 h5\n{And now the fluidity of the kingside attack is prevented so Black has a much\nbetter position than in the game, although White still remains better due to\nthe massive space advantage.}) 10... Nxe4 11. Nxe4 Qh4+) 10. g4 {[%csl Ge4,Gf3,\nGg4][%cal Ge2g3,Gh2h4,Gh4h5] The beginning of the standard procedure in the\nSaemisch. White wants to follow things up with moves such as Ng3-h4-h5 and so\non.} (10. h4 {Is also possible as now the blockading} h5 {Doesn\'t work due to}\n11. g4 hxg4 12. fxg4 {[%cal Rf6g4,Rg5d8,Gh4h5,Gf1h3] When the g4 pawn is\nimmune due to the pin and Black is in mortal danger.}) 10... a6 {Trying to\ncreate counterplay on the queenside somehow, but Black is much, much slower.}\n11. Ng3 {The standard attacking scheme in Saemisch. The knight goes to g3 and\nh4-h5 is next on the agenda, while the knight can also contemplate jumping on\nf5 in the future - as happens in this game.} Re8 {This is just pointless,\nthough.} (11... b5 {For better or for worse, Black should have started\ncounterplay on the queenside.}) 12. h4 {White\'s play is very easy and\nstraightforward while Black is struggling to create counterplay.} Qa5 {Black\ntries to play for the b5 push now, but it is all very slow and shouldn\'t work.}\n13. Bh6 {This logical move - exchanging the bishop that defends the king,\nseems to be a bit premature as White is not yet fully developed and is\nignoring the play on the queenside. Although this is purely from the engine\nperspective - it doesn\'t yet relinquish White\'s advantage - it just reduces it\nsomewhat.} (13. a4 {Is a move that computer really likes, simply nipping the\nb5 idea in the bud.}) 13... Nf8 ({The reason why engine doesn\'t like the\nprevious move is this preliminary exchange:} 13... Bxh6 14. Qxh6 Kh8 {[%cal\nGf6g8,Gd7f8] And now the king has prepared the move Ng8 if required, say after}\n15. h5 Ng8 16. Qd2 Rb8 {And even though White has the advantage, it is not yet\nclear how the attack is going to continue and Black has more counterplay than\nin the game! Of course, this is purely computer defence which is incredibly\ndifficult to see even in 2022, let alone in 1957.}) 14. h5 {Now we again have\na one-way street as Black has no counterplay.} Qc7 {[%cal Gc5c4,Gb7b5]\nIntending to play b5 and then c4 before recapturing on b5.} 15. Bd3 {Correctly\njudging that White shouldn\'t really fear the b5 advance.} (15. a4 {Was also\npossible, preventing the counterplay in the bud. However, since White is\nintending to castle queenside, it is probably not necessary to weaken the\nqueenside further and provide Black with a hook on a4 they can use to play b5\nin the future.}) 15... b5 {Finally, but this now comes a bit late in the day.}\n16. O-O-O {Ignoring the demonstration on the kingside seems like the best\napproach. There are some other possibilities like sacking the knight on f5 at\nonce, but this move seems very human and logical.} (16. cxb5 {would give Black\nsome play after} c4 17. Be2 ({or} 17. Bc2 axb5 18. Bxg7 Kxg7 19. Nxb5 Qb6 20.\na4 Kh8) 17... Bxh6 18. Qxh6 axb5 19. Nxb5 Qb6 {[%cal Rb6b2]} 20. a4 Bd7 {\nAlthough even here White retains the superiority with the thematic tactical\nshot} 21. Nf5 {Threatening mate on g7 and forcing} Bxf5 22. gxf5 {when White\nis firmly in the driver\'s seat. This Nf5 idea is very thematic in this\nposition so it is definitely something worth noting.}) 16... bxc4 {Black opens\nthe b-file, at least - but it turns out there is little they can do along it\nas White has many pieces defending the king and the bishop on g7 is not\nparticipating in the attack.} 17. Bb1 (17. Bc2 {Seems more precise, but I\nguess Tal wanted to keep the 2nd rank clear in case some lateral defence of\nthe b2 pawn is required.}) (17. Bxg7 {Btw, it also seems it was better to\ninclude the preliminary exchange on g7 in order to avoid having the queen\ndragged to h6 and avoid that whole Kh8 business.} Kxg7 18. Bb1 {and now if\nBlack tries} Kh8 19. g5 {is very strong, as the queen is not getting trapped\non h6.}) 17... Bh8 {This is just bad, although very understandable. Tolush\ntries to keep the bishop that covers the dark-squares, but it loses some more\ntime.} (17... Bxh6 18. Qxh6 Kh8 {was once again most resilient. The point is\nthat now} 19. g5 (19. Qd2 {is what White should play instead, when g5 is\ncoming and White is nevertheless in the driver\'s seat, but Black has gained a\nfew tempi compared to the game.}) 19... Ng8 {Traps the queen.}) 18. Rdg1 {\n[%cal Rg1g8,Gg3f5] Now all pieces are participating in the attack and\nsacrifice on f5 is in the air.} Rb8 {[%cal Gd2b2] This is why Tal put the\nbishop on b1 - the b2 pawn is protected by the queen.} 19. Nf5 {Here we go.\nThis thematic pseudosacrifice is very tough for Black as the knight is\nuntouchable on this square.} (19. g5 {The prosaic advance of the g-pawn was\nalso very strong as after} N6d7 20. Nf5 {Comes under arguably even stronger\ncircumstances. At first glance it is hard to understand why given that now\nafter} gxf5 {The g-file is closed. But it transpires that the sinple recapture\non f5 is good enough - but also that there is} 21. g6 hxg6 22. hxg6 fxg6 23.\nexf5 {With total destruction of Black\'s kingside. Black can\'t survive this\nposition.}) 19... N6d7 {It is hard to suggest a move for Black, but this\nundeveloping of the knight is surely not the most resillient attempt.} (19...\ngxf5 {The knight, of course, can\'t be taken due to} 20. gxf5+) (19... Rb7 {\nor some other similar waiting move, might be a bit more resistant, although\nBlack\'s position is very much lost all the same.}) 20. Bg5 {[%cal Rf5h6,Rh6f7]\nPreparing some Nh6-Nxf7 ideas.} (20. hxg6 {The prosaic opening of the h-file\nwas also sufficient - and arguably even simpler, as after} fxg6 21. Bxf8 Nxf8\n22. Nh6+ Kg7 23. f4 {Black is helpless against the opening of the kingside, e.\ng.} exf4 24. Qxf4 Qe7 25. Rf1 Rb7 26. g5 {And Qf6 and Qf7 threats are\nimpossible to deal with.}) 20... Bg7 {Black tries to deal with the threat of\nNh6 but ends up giving the bishop away.} (20... Qb6 {Black could have also\nignored the threat, but after} 21. hxg6 fxg6 22. Nh6+ Kg7 23. f4 {Comes with a\ngreat effect once again - just like in the previous variation} exf4 {And here\nthere are several wins, the most brutal of them being} 24. Qxf4 Qxb2+ 25. Kd1)\n21. Nxg7 Kxg7 22. Bh6+ Kg8 {Now Black\'s dark squares are very much weakened,\nalthough the position is much more resillient than it looks like at the first\nglance.} 23. f4 {Now with the knight gone from h6, this move seems to be not\nas powerful as in the previous variations, although White still keeps a big\nchunk of the advantage.} (23. Rh2 {Some patient move like Rh2, overprotecting\nb2 and maybe intending to double on the h-file, was probably better. White has\nall the time in the world to improve the pieces.}) (23. Bc2 {[%cal Gc2a4] With\nthe idea of playing Ba4 and exchanging the passive bishop for one of the\ndefenders of the king, was also an interesting idea worth examining.}) 23...\nexf4 24. Qxf4 Qd8 {[%cal Gd8f6] Now Black is kinda covering some dark-squares\nand his position does have some degree of the resillience, although White is\nobjectively completely winning.} 25. hxg6 {Opening the h-file seems very\nsensible.} (25. Qxd6 {Is exactly what Black was hoping for, as then there are\nsome crazy defensive ideas such as} g5 {[%cal Gb8b6] With the idea of Rb6.} (\n25... Rb6 26. Qf4 (26. Qg3 g5 27. Bxf8 Kxf8 {And Black is actually the one to\nbe preferred due to the control of the dark-squares, all of a sudden.}) 26...\nNe5 {Is also not as clear cut as Black now has some nice dark-squares to work\nwith.})) (25. Bg5 f6 26. hxg6 {Was also possible, weakening the king even\nfurther and profiting from the fact that the bishop on g5 is immune due to}\nfxg5 27. Qf7+) 25... Nxg6 (25... fxg6 26. Qxd6 {Is now much stronger for White\nas the h- and f-files are opened, so after} Rb6 27. Qg3 g5 (27... Ne5 28. Bf4\nQc7 29. g5 {Is also very strong for White. Yes, the knight on e5 is great, but\nwe have the open h-file and a strong dark-squared bishop of our own.}) 28. Bxf8\nKxf8 {Now doesn\'t work due to numerous reasons - but mostly because of the\nopen f-file} 29. Rf1+ Kg8 30. e5 {[%cal Rb1h7,Rh1h7] And now the weakness of\nthe h7 is terminal. This is the difference compared to the previous line.}) 26.\nQh2 {[%cal Rh1h8] Lining up on the h-file. Despite all the inaccuracies, the\nposition is still winning for White - which goes on to show how bad Black\'s\nposition was to begin with.} (26. Qxd6 Nge5 {Is once again very unclear and\nbetter to be avoided.}) 26... Nde5 {It is logical to bring the knight to e5\nand open up the bishop, although there are other options as well.} 27. Bf4 {\nBut this is a very strange decision, giving up the dark-squared bishop.} (27.\nBd2 {Seemed like the best move - discovering an attack on h7 and not giving up\nthe strong bishop.}) 27... Nf8 (27... Nxf4 {It was possible to take the bishop\non f4 and then after} 28. Qxf4 Qe7 {Hope to establish some sort of a defense\non the dark-squares with Ng6 and Qe5 next. It does look scary for a human, but\nthe engine insists it is not at all so easy for White to demonstrate a way\ntoward a clear advantage.}) (27... Qf6 {Was also more resillient, intending to\nreturn the pawn on h7 as after} 28. Qxh7+ Kf8 {Black has a very nice control\nover the dark-squares, the bishop is under the attack, g4 pawn is hanging and\nthe king will escape to e7 where it will be very safe. White does have some\nadvantage, but it is much less clear compared to what happened in the game.})\n28. Qh6 {[%cal Gf4g5] Now White will get in Bg5 and maintain the pressure on\nthe dark-squares.} Neg6 {A final mistake in an objectively difficult position.}\n(28... Rb7 {Or something along those lines - not moving the knight from e5 and\ntrying to add some more protection along the 7th rank, was more resillient,\nalthough White is still very much winning.}) 29. Bg5 f6 30. e5 {[%cal Rb1h7,\nGc3e4] A brilliant breakthrough at the most fortified point. White throws in a\npawn, but opens up the bishop on b1 as well as the square on e4 for the knight.\n} Rxe5 (30... fxg5 31. Bxg6 Nxg6 32. Qxh7+ {Leads to a very quick mate.}) 31.\nBxg6 Rb7 {[%cal Gb7h7] Trying to add some protection along the 7th rank, but\nnow this comes in too late.} (31... Nxg6 32. Qxh7+ Kf8 33. Qxg6 {Once again\nleads to a mate very very soon.}) 32. Ne4 {[%cal Re4f6] Bringing the last\npiece that is not participating in the attack into the game ("Bring all the\nboys to the party") and not really caring about the fact that the bishop on g5\nis hanging.} fxg5 (32... Rxg5 {Is also losing after the prosaic} 33. Bf5 {\n[%cal Re4f6,Rh6f6] When the pawn on f6 can\'t be defended.} Rf7 34. Bxc8 Qxc8\n35. Nxf6+ $18) 33. Rf1 {[%cal Ge4f6,Gf1f8] A brilliant quiet move, threatening\nthe capture on f8 and check on f6, among other things.} Rxe4 (33... Nxg6 34.\nNf6+ {Wins on the spot for White e.g.} Kh8 35. Qxh7+ Rxh7 36. Rxh7#) 34. Bxe4 {\nNow it is all over as White is up an exchange and still has a raging attack\ngoing on.} Rg7 35. Rf6 Bxg4 36. Rhf1 {A prosaic and "boring" way of ending up\nthe game - but more than good enough.} (36. Bxh7+ {Was leading to a quick mate\nafter} Nxh7 (36... Rxh7 37. Rxf8+ Qxf8 38. Qxh7#) 37. Rg6 Rxg6 38. Qxg6+) 36...\nNd7 37. Rxd6 Qe7 38. Rxa6 {[%cal Ga6a8] Simply collecting all the pawns and\nthreatening Ra8.} Kh8 39. Bxh7 {[%cal Ga6a8] A flashy finish, exploiting the\nweakness of the back rank.} Nb8 (39... Rxh7 40. Ra8+ {Leads to a quick mate.})\n40. Bf5+ Kg8 41. Be6+ Bxe6 42. Rxe6 {And here Tolush finally decided to throw\nin the towel. Perhaps not the most beautiful game by Mikhail Tal, but the one\nI felt is a good introduction to his style and to some of the later\nbrilliancies we will see in this article. --- Furthermore, I find these older\ngames very instructive mainly because quite often, one side (in this case\nTolush) completely misplays the opening and gets in a lost position early on -\nwhich is something that happens very often at the club level. Seeing a player\nof Tal caliber handling such a position - and also misplaying it at certain\nmoments - can be regarded as more instructive and relatable than, say, recent\nencounters at the very top level.} 1-0\n\n[Event "Riga ;MAINB"]\n[Site "Riga ;MAINB"]\n[Date "1957.??.??"]\n[Round "?"]\n[White "Mikhail Tal"]\n[Black "Alexander Koblents"]\n[Result "1-0"]\n[ECO "B63"]\n[Annotator "USER"]\n[PlyCount "77"]\n[EventDate "1957.??.??"]\n\n{Let\'s continue our journey through the magical world of Tal\'s games by\nexamining his game against Latvian Master Alexander Koblents - who was\nincidentally Tal\'s coach since 1949 and very notably - his second in the 1960\nand 1961 World Championship matches against Botvinnik.} 1. e4 {In this game,\nTal opened with his favourite move.} c5 {The Sicilian, leading to a sharp\nbattle, was always a risky opening choice against a player as tactically\ngifted as Tal, but I guess Koblents had his reasons for choosing it.} 2. Nf3 d6\n3. d4 cxd4 4. Nxd4 Nf6 5. Nc3 Nc6 {The Classical Sicilian has been\novershadowed by Najdorf, Sveshnikov and some other Sicilians in the recent\nyears, but it remains a very respectable opening to this day. Back in the day\nit was very popular - among other players, Mikhail Botvinnik used to play it\non a regular basis at some point in his career.} 6. Bg5 {The Richter Rauzer\nattack is the critical way of handling the Classical Sicilian even today.} e6\n7. Qd2 Be7 {The old mainline, opting for quick kingside castling.} (7... a6 {\nIs the main move today, postponing kingside development in favour of rapid\nqueenside development.}) 8. O-O-O O-O 9. Nb3 {This move avoids the typical\nexchange of the knights on d4. It is a very respectable and viable option,\nalthough less popular and arguably critical than the immedaite advance of the\npawns on the kingside.} (9. f4 {Is what consitutes the mainline nowadays.}) (9.\nh4 {Also has the right to exist!}) 9... Qb6 {This is the most popular move in\nthe position. The idea is to indirectly defend the d6 pawn and vacate the d8\nsquare for the rook while avoiding any Nb5 ideas. Still, it is probably not to\ngood, objectively speaking as the queen is put in front of the queenside pawns\n- and Black will very much want to attack on that side of the board.} (9... h6\n{Is the immediate suggestion by the computer. The point is that Black can\ncalmly give up the pawn on d6:} 10. Bxf6 Bxf6 11. Qxd6 Bxc3 12. bxc3 Qf6 {\nWith more than ample compensation for the pawn. This is a relatively rare and\nunexplored continuation that deserves some more attention, for sure.}) 10. f3 {\n[%cal Gf3e4] Removing the pawn from the attack and preparing the kingside play\nwith g4-h4 and so on. Not the only way of handling the position, but\ndefinitely a very logical one.} ({The idea behind Black\'s play is revealed\nafter} 10. Bxf6 Bxf6 11. Qxd6 Qxf2 {White can\'t really capture on d6 as it\nloses the f2 pawn and lands them in a lost position as the bishop pair and\nBlack\'s dark-square control are too strong.}) 10... a6 {Black also prepares\nthe queenside expansion slowly but surely.} (10... Rd8 {Defending the d6 pawn\nwas also possible, but not necessary.}) 11. g4 {A very logical way of going\nfor the attack, but maybe this is not the most precise way.} (11. Bxf6 Bxf6 12.\nQxd6 {Now doesn\'t lose a pawn, but still provides Black with a ton of\ncompensation after} Rd8 (12... Bxc3 {is also quite reasonable.}) 13. Qg3 Qe3+ {\nAs a matter of fact - Black regains the pawn at once and after} 14. Kb1 Bxc3\n15. Rxd8+ Nxd8 16. bxc3 Qxc3 {is at least equal in this position.}) (11. h4 {\nSeems to be a better way - pushing the pawn to h6 is the priority here. Say,\nif Black continues with} Qc7 {then the pawn on d6 is exposed:} (11... Rd8 {\nis achievement for White as after} 12. Be3 Qc7 13. Qf2 {Bb6 is threatend, the\nqueen sidestepps trouble on the d-file and g4-g5 is coming. White has better\nchances here.}) 12. Bxf6 Bxf6 13. Qxd6 {And now the counterplay is missing and\nit is more difficult for Black to prove the compensation for the pawn.}) 11...\nRd8 {This move is not necessary!} (11... Qc7 {Was possible. With the pawn on\ng4 instead of the pawn on h4} 12. Bxf6 Bxf6 13. Qxd6 {Is not as good as after}\nQxd6 14. Rxd6 Be7 15. Rd1 {Black manages to play the shocking move} g5 {\n[%csl Gg5][%cal Gg5f4,Gc6e5] Securing the dark-squares and the e5 square for\nthe knight. This is, of course, pointed by the computer, but it is amazing to\nme how deeply the engines understand chess strategy these days - this line is\nperfectly understandable from a human viewpoint!}) 12. Be3 {Now the bishop has\ndone its job on g5 and there is no point in keeping it there, so Tal retreats\nit with the gain of tempo and clears the way for the kingside expansion.} Qc7\n13. h4 {But this is a blunder that allows the immediate counterplay in the\ncenter.} (13. Qf2 {It was necessary to remove the queen from the d-file,\nthreaten Bb6 and only after} Nd7 {push the pawns with} 14. h4 {When White has\nbetter prospects in the upcoming fight with the opposite-side castling.}) 13...\nb5 {This is a mistake that allows White\'s attack to gain the momentum.} (13...\nd5 {Black could have executed the thematic Sicilian blow, exploiting the\nposition of the rook on d8. The line could continue} 14. Qf2 dxe4 15. Rxd8+\nQxd8 16. g5 Nd5 {And Black has no problems, as the crisis in the center\ndiverts White from executing the attack on the kingside.}) 14. g5 {Now the\nknight gets chased away and three is no d5 break any more.} Nd7 15. g6 {\nA very interesting, although not necessary pawn sacrifice, typical of the\nSicilian. The idea is to play h5 next and open the lines on the kingside.} (15.\nh5 {Continuing the attack with the push of the h-pawn,}) (15. Qf2 {Or moving\nthe queen and calmly improving the pieces, were both possible, although Tal\'s\nchoice is definitely more enterprising and thematic.}) 15... hxg6 {But this\nlogical move is already a decisive mistake, as it opens up the h-file\ncompletely.} (15... fxg6 {For better or for worse, taking with the f-pawn\nshould have been preferred. Usually, it is not positionally desirable to\ncapture "Towards the center", but in this particular case, Black simply\ndoesn\'t want to open up the h-file. Play might continue} 16. h5 gxh5 17. Rxh5\nNf6 18. Rh1 d5 {And here there is no direct attack along the h-file, so Black\nis much safer than in the game.}) 16. h5 gxh5 17. Rxh5 Nf6 18. Rh1 d5 {Now the\nsame variation but with the pawn on f7 instead of h7 is losing for Black due\nto the open h-file.} 19. e5 {A good reply, closing the action along the d-file\nand preparing to reposition the bishop on f4 and the queen on h2.} (19. Bf4 {\nThe immediate transfer of the bishop is pointed out by the engine as even\nstronger, but only due to some inhuman lines, such as} Bd6 (19... e5 {also\nleads to a fascinating line.} 20. Qh2 Kf8 21. Qh8+ Ng8 22. Rg1 Bf6 23. Bh6 {\nAnd White manages to break through. Not easy sequence to see, even for the\ngreat Mikhail Tal.}) 20. Bxd6 Qxd6 21. f4 {When e5 is threatened and Black\ncan\'t take on e4 due to the pin on the d-file.}) 19... Nxe5 20. Bf4 $2 {\nBut this is actually a significant mistake that allows Black to consolidate by\nmoving the bishop from e7 to d6.} (20. Qh2 {Was necessary as now mate in 1 is\nthreatened so Black doesn\'t have time to move the bishop from e7. Thus after}\nKf8 21. Qh8+ Ng8 {Black\'s pieces are not as coordinated and White can exploit\nit with the super precise} 22. Bd4 {Threatening f4.} Bf6 23. Bc5+ Be7 24. Rh7 {\nWhen g7 will fall and the position is completely won after} Bxc5 25. Qxg7+ Ke7\n26. Nxc5 {As the e5 knight is exposed and the king is in the center of the\nboard. Some chess still remains to be played, though, but this is definitely\nmuch better for White compared to the game.}) 20... Bd6 {Now the king gains\nthe e7 square and Black\'s bishop is more active on d6.} 21. Qh2 {Now this\ninfiltration comes a move too late.} Kf8 (21... Ng6 {Was even stronger, when\nWhite doesn\'t have anything better than} 22. Bxd6 Qxd6 {When there is no\nattack and Black has two extra pawns. White does have some practical\ncombination, but it should be objectively lost.}) 22. Qh8+ {Going from bad to\nworse - but this might be the best practical chance.} (22. Kb1 {Is the\ncomputer move, but you know you are sad if you have to suddenly switch to\nmaking such defensive moves in a position where you were attacking.}) 22... Ng8\n$2 {As usual in Tal games, it is very difficult for the opponent to withstand\nthe pressure and Koblents goes very wrong here, allowing Tal to seize the\ninitiative once again.} (22... Ke7 {Would have been the logical continuation\nnow that the e7 square is available. Koblents was potentially worried about\nleaving the g7 hanging, but after} 23. Qxg7 Rg8 {The queen is simply trapped.\nMaybe Koblents didn\'t want to beat his student? A bit shocking, to be honest,\nthat he didn\'t play this simple and obvious move.}) 23. Rh7 {[%cal Rh7g7,Rh8g7]\nNow White is fully back in the game and concrete threats start to appear.} f5 {\nThe only way to defend the h7 pawn and the best move in the position, although\nat first, I didn\'t fully understand why it is better to have the pawn on f5 as\nopposed to f6. However, it transpires that it is important to control the g4\nsquare - precisely because of one specific line!} ({After} 23... f6 24. Bh6 Rd7\n{It transpires that there is this strong move} 25. Nd4 {Threatening Nxe6.} Rf7\n26. Bxb5 gxh6 27. Rg1 {And in this position there is no Ng4 as the pawn is on\nf6 and not on f5, so Whiteis clearly better after some crazy line} Ng4 28. Rxg4\nBf4+ 29. Kb1 Bg5 30. Rxh6) 24. Bh6 Rd7 25. Bxb5 {[%cal Gd1g1] Adding some more\nfuel to the fire and creating a typical Tal chaos. The idea of this move is\nnot so much to recapture on b5 as to clear the 1st rank for the d1 rook to\njoin the attack.} (25. Nd4 {Now doesn\'t work as after} Rf7 26. Bxb5 gxh6 27.\nRg1 Ng4 {wins for Black. This is why it was better to push the pawn to f5\ninstead of f6.}) 25... Rf7 $2 {And immediately, Koblents commits a fatal\nmistake.} (25... axb5 {First of all, taking on b5 is not good as it - just\nlike the text move - gives White time to play} 26. Rg1 {[%cal Rg1g8,Rh6f8,\nRh7g7,Rh8g7] Increasing the pressure on the g7 pawn.} Ng4 {The only defence.}\n27. Nxb5 {[%cal Rb5d6,Rb5c7] Getting ready to eliminate the bishop on d6.} Bf4+\n28. Kb1 Qe5 29. Bxf4 Qxf4 30. fxg4 {And White retains material equality and\nhas a raging attack.}) (25... Ng6 {[%cal Rg6h8] Attacking the queen in the\ncorner, was the only move. Play continues} 26. Nd4 {Literally the only move to\nstay in the game, creating a counter threat of Nxe6.} Re7 {Defending the e6\npawn.} (26... Nxh8 27. Nxe6+ Kf7 28. Nxc7 {Turns out to be better for White\nafter some crazy complications} Rxc7 29. Rxg7+ Kf8 30. Rxc7+ Nxh6 31. Bc6 {\nand when the dust has settled - White has slightly better chances in the\nincoming imbalanced endgame. Crazy and beautiful how even the most complicated\nlines can end up in some imbalanced, but technical endgames.}) 27. Bxg7+ {\nAbsolutely the only move - but one has to see the following point.} Rxg7 28.\nBd7 {Marvelous interference! White creates the threats of Nxe6 and Qxg7 and it\nis very difficult to deal with both!} Qxd7 {Absolutely the only move!} (28...\nBxd7 29. Qxg7+ {Loses on the spot.}) (28... Nxh8 {also loses by force:} 29.\nNxe6+ Ke7 30. Rxg7+ Nf7 31. Nxd5+ Kxd7 32. Nexc7) 29. Nxe6+ {Diverting the\nqueen or the king from the defence of the rook on g7.} Qxe6 30. Qxg7+ Ke8 31.\nNxd5 {And the engine claims this position is equal, although it most certainly\nwont end in equality in a human game.}) 26. Rg1 {[%cal Rg1g8] The attack on g7\nreaches its peak and Black is helpless aginst the incoming onslaught.} Ra7 27.\nNd4 {[%cal Rd4f5,Rc3d5] Bringing the knight closer to the action and\nincreasing the pressure. Now the threat is Nxf5 and Nxd5, among others.} (27.\nBxa6 {Is pointed out by the computer as strong. I guess the point is that after\n} Bxa6 28. Nd4 {e6 is under threat and after} Bc8 29. Ncb5 {White wins the\nexchange back but - more importantly - eliminates one of the defenders of the\ng7 point.}) 27... Ng4 {Trying to block the g-file desperately.} (27... axb5 28.\nNcxb5 {Once again wins, as in the previous note.}) 28. fxg4 Be5 $2 {The final\nmistake!} (28... Bf4+ {Would have offered some chances to resist after} 29. Kb1\nBxh6 30. g5 Bxg5 31. Rxg5 {When White has an extra piece, but Black has two\npawns. This was definitely much better for Black than what happened in the\ngame.}) 29. Nc6 $6 {[%cal Rc6a7,Rc6e5] Sufficient, but not the most precise.} (\n29. Nf3 {Was much stronger. The point is to have some crazy Nh4 idea in the\ncase of} axb5 30. Nh4 {[%cal Rh4g6] and apparently this is winning for White.\nCrazy how much tactics the computers see in a position like this and how often\nparadoxical ideas are the best.}) 29... Bxc3 $2 {Capitulation!} (29... axb5 {\nWas the only way to stay in the game. White\'s problem is now that capturng on\nb5 is not possible and also that} 30. Nxa7 Qxa7 {[%cal Ge5g7] Doesn\'t work as\nthe bishop on e5 is defending the g7 pawn.}) 30. Be3 {[%cal Re3a7,Rh8g8] A\ndeadly bishop retreat, clearing the h-file and creating a nasty threat of Rh1\nand Qxg8.} ({The more prosaic recapture on c3 with} 30. bxc3 {was also\nsufficient as after} axb5 31. gxf5 {The pressure on g7 is too much for Black\nto handle:} Qxc6 32. Rgxg7) 30... d4 {Nothing else really works. This actually\nforces White to find the only winning way!} 31. Rgh1 {[%cal Gh8g8] With the\nnasty threat of Qxg8 and Rh8 mate.} Rd7 {Clearing the f7 square for the king!}\n32. Bg5 $2 {Amazingly, this turns out to be a mistake that allows Black to\nescape!} (32. gxf5 {Seems to be the only winning move. The idea is to take on\ne6 next and prevent the king from escaping once again, while also trying to\nopen the a2-g8 diagonal.} dxe3 (32... exf5 {Also loses to} 33. Qxg8+ Kxg8 34.\nBc4+ {[%cal Rc4g8]}) 33. fxe6 {Now the deadly threat of Qxg8 is still there\nand Black is just lost.}) 32... axb5 33. R1h6 {The culmination of this entire\nfascinating game!} d3 $2 {The final mistake, allowing a devastating attacking\nfinish.} (33... Qxc6 {Black had two ways of staying in the game. The first was\nthe "simple" recapture of the knight.White has nothing better than} 34. Rf6+\ngxf6 35. Bh6+ Rg7 36. Bxg7+ Ke7 {When there is no immediate mate and White\ndoesn\'t have more than a dynamic equality!}) (33... Bxb2+ {Was also possible,\nwith very similar ideas after} 34. Kxb2 (34. Kb1 Qxc6 {is similar.}) 34... Qxc6\n35. Rf6+ gxf6 36. Bh6+ Rg7 37. Bxg7+ Ke7 {when the engine gives the eternal "0.\n00" evaluation.}) 34. bxc3 {I guess this recapture escaped Koblents\' attention.\nWhite eliminates the defender of the g7 pawn and now intends to win with the\nRf6 checking mechanism.} d2+ 35. Kd1 Qxc6 36. Rf6+ Rf7 (36... gxf6 37. Bh6+ {\nWins this time, as after} Rg7 38. Bxg7+ Ke7 {there is} 39. Bxf6+ Kd6 40. Be5+ {\nThis check wasn\'t possible with the bishop on c3, but now the rook on a7 will\neventually drop and White will obtain a decisive material advantage.}) 37.\nQxg7+ {And here Koblents decided to resign due to} Ke8 38. Qxg8+ Kd7 39. Rhxf7+\n{And Black is getting mated shortly. A fascinating, mind-boggling and typical\nTal encounter, where he very successfully took his opponent into the "deep\ndark forest" and outwitted him in a sharp tactical melee. Games like these\nprobably contributed to Botvinnik calling Tal\'s style "gambling", but even\nwith the modern engines it is necessary to dive really deep to understand all\nthe intricacies and nuances of different tactical lines. --- I can only\nimagine how difficult it was to face this style over the board - especially in\nthe Botvinnik-Smyslov time where logic, harmony and positional player trumped\nthis sacrificial, combinational style.} 1-0\n\n[Event "WchT U26 fin-A 05th"]\n[Site "Varna BUL"]\n[Date "1958.07.??"]\n[Round "2"]\n[White "Milko Bobotsov"]\n[Black "Mikhail Tal"]\n[Result "0-1"]\n[ECO "E81"]\n[Annotator "USER"]\n[PlyCount "60"]\n[EventDate "1958.??.??"]\n\n{In the next game, we are going to see another very famous Tal game, played\nagainst Milko Bobotsov in Varna in 1958. Apparently, this was played during\nthe "World Team Chess Under-26 final". Talking about a strange chess\ntournament that could only exist in the past. --- Anyway, let\'s dive into the\ngame.} 1. d4 Nf6 2. c4 g6 3. Nc3 Bg7 {The King\'s Indian was not a surpising\nopening choice for Tal with the Black pieces, given its sharp,\ncounterattacking nature.} 4. e4 d6 5. f3 {This time, Tal has to face the\nSaemisch variation, which we have already seen in his game against Tolush\nanalyzed previously.} O-O {Deviating from the immediate push of the e-pawn\nwhich was Tolush\'s choice.} 6. Nge2 {One of the possible setups for White in\nthis variation that is still very relevant today.} c5 {Another typical\nundermining move in the King\'s Indian, inviting the transposition into a\nBenoni structure.} 7. Be3 {Reinforcing the d4 pawn and maintaining the tension\nis very playable.} (7. d5 e6 {Would lead to a Benoni structure. This was also\nplayed many times - and in some very high profile games, too.}) 7... Nbd7 {\nBut this move is a little bit passive as the knight turns out to be misplaced\non the d7 square. Still, it was played by Korobov, Mamedov and Carlsen, so it\ncan\'t be that bad.} (7... Nc6 8. d5 Ne5 {is by far the main line of this\nposition, seen many times. But then again, we shouldn\'t judge a game played in\n1958 too harshly from the opening viewpoint.}) 8. Qd2 a6 {[%cal Gb7b5] Going\nfor the typical counterplay involving b5.} 9. O-O-O {A brave, but somewhat\nrisky decision.} (9. Rd1 {Trying to control the center and preventing the\nliberating b5 push was more prudent.}) (9. dxc5 dxc5 10. Rd1 {Opening the\nd-file nad bringing the rook there was also more sensible. It seems that in\nthese cases Black\'s counterplay is quite limited.}) 9... Qa5 {Now Black does\nget a lot of activity on the queenside.} 10. Kb1 b5 11. Nd5 $2 {Bobotsov must\nhave been counting on this thematic tactical shot, exploiting the position of\nthe queen on a5 - but he is in for a nasty surprise.} (11. Nc1 {Playing in a\ncalmer fashion and allowing the exchange on c4 was more prudent, although after\n} bxc4 12. Bxc4 Qc7 {White doesn\'t have the usual stability in the center and\nmight start regretting the decision to castle long. Still, with best play the\nsituation is far from clear.}) (11. dxc5 {Taking on c5 and trying to open the\nd-file and alleviate some of the pressure on the kingside was also playable.\nAfter} dxc5 (11... Nxc5 12. Bxc5 dxc5 13. Nd5 {Is clearly better for White.})\n12. h4 h5 13. Nf4 {A complicated battle is ahead of us.}) 11... Nxd5 $1 {\nVery creative, enterprising and - most importantly - fully correct. Tal\nsacrifices the queen, but in return he will get two pieces and eliminate the\nopponent\'s dark-squared bishop. Even the materialistic engine approves of this\ndecision.} 12. Qxa5 {There is no way back now.} Nxe3 13. Rc1 Nxc4 {It is\ninteresting to note that this whole variation has been repeated in quite a few\ngames since this game was first played, with mixed result. But objectively,\nBlack should have more than sufficient compensation for the queen due to the\nharmonious pawn structure and powerful dark-squared bishop.} 14. Rxc4 {This is\nprobably not the best, but White is trying to eliminate the pesky knight and\ncreate some targets in the opponent\'s pawn structure.} (14. Qc3 {If White\nmoves the queen and tries to defend the d4 pawn, than Black has several good\noptions, out of which the most energetic seems to be} d5 {with the idea of} 15.\nexd5 Ndb6 {And Nxd5 next, with a fabulous position.}) (14. Qe1 cxd4 15. Nf4 {\nIS the engine proposal, just givin up a pawn and hoping to activate some\npieces, but this is not the easiest line for a human.}) 14... bxc4 15. Nc1 (15.\nNf4 {Was more active.}) 15... Rb8 {[%cal Rb8b2,Rg7b2] The rook starts eyeing\nthe b2 pawn. Black not only has compensation for the missing material - at\nthis point Black is completely winning due to the quality of his pieces and\nthe harmony of his position. White has more targets and the dark-squared\nbishop is absolutely powerful.} 16. Bxc4 Nb6 17. Bb3 Bxd4 {[%cal Rd4b2,Gc5c4]\nNow ideas like Bxb2 or c4 are on the agenda.} 18. Qd2 $2 {The losing mistake.}\n(18. Ne2 {seems to be the only move, as after} Bxb2 19. Kc2 Bf6 20. Rb1 {\nWhite at least manages to activate all pieces and create a threat of Bxf7.\nStill, Black\'s position is preferable after} e6 {Although a lot of chess\nremains to be played. Needless to say, this is not very human.}) 18... Bg7 {\n[%cal Gc5c4] Removing the bishop from the attack and preparing the inevitable\nc4 advance.} 19. Ne2 {Now this comes way too late.} c4 20. Bc2 c3 {[%cal Gb6c4]\nThe combined power of the bishop on g7 and the rook on b8 are too much for\nWhite to handle. Nc4 is also coming and White is busted already.} 21. Qd3 (21.\nNxc3 Nc4 {Is dead lost.}) 21... cxb2 {Now the pawn on b2 is a tremendous asset,\nas well. The game is virtually over at this point.} 22. Nd4 Bd7 23. Rd1 Rfc8 {\nCalmly finishing the development, bringing the last piece into the game and\npreparing Nc4.} 24. Bb3 Na4 {[%cal Ga4c3] Threatening the deadly Nc3 jump.} 25.\nBxa4 Bxa4 26. Nb3 Rc3 {It is hard to offer White any advice or improve the\nplay. Bobotsov could have easily resigned here.} 27. Qxa6 Bxb3 28. axb3 Rbc8\n29. Qa3 Rc1+ 30. Rxc1 Rxc1+ {And one move before mate, Bobotsov finally\nresigned. A tremendous game by Tal, featuring a fully correct queen sacrifice,\nthat I imagine was very revolutionary, novel for the time. Even today, when\ngoing through this game, one is left with a very satisfactory artistic/\naesthetic impression!} 0-1\n\n[Event "Bled-Zagreb-Belgrade Candidates"]\n[Site "Bled, Zagreb & Belgrade YUG"]\n[Date "1959.09.18"]\n[Round "8"]\n[White "Mikhail Tal"]\n[Black "Vasily Smyslov"]\n[Result "1-0"]\n[ECO "B10"]\n[Annotator "USER"]\n[PlyCount "51"]\n[EventDate "1959.09.07"]\n\n{After seeing a couple of games from Tal\'s youth of relatively (and I want to\nemphasize the word relatively) lower competetive importance, in this encounter,\nwe will completely change the script and examine a very famous and celebrated\ngame Tal played against the formidable Vasily Smyslov in the 1959 Candidates\nTournament. --- You have to remember that in the 1950s, Smyslov was very much\nin his prime, playing three matches against Botvinnik (1954, 1957 and 1958)\nfor the World Championship title and winning one of them. And even though he\ndidn\'t start very well in the 1959 Candidates Tournament, he was very much\nconsidered to be a favourite in such a long marathon (28 rounds) and had\nalready defeated Tal in their first game. --- Thus, Tal - who didn\'t have a\nbrilliant start to the tournament either - was very much seeking his revenge\nand trying to prove that his swashbuckling style can not only work against\n"lesser" masters, but also against the world\'s very best. --- Let\'s take a\nlook at this historical encounter that also had enormous competetive\nsignificance.} 1. e4 {Of course, no 1.d4 or 1.c4 shennanigans this time.} c6 {\nSmyslov is known for his contributions to the Ruy Lopez - an opening he used\nto play a lot with both colours. However, 1...e5 was not his only reply\nagainst the king\'s pawn opening as throughout his career he also regularly\nemployed both the Sicilian and Caro-Kann. He already played 1...c6 in the\nprevious round of the tournament against Fischer, so it surely didn\'t come as\na major surprise to Tal.} 2. d3 {A peculiar opening choice. This line is\nrelatively innocuous, but Tal (and Koblents) probably had his (their)\nreasoning behind this choice.} d5 3. Nd2 (3. Nf3 {is all the rage these days,\nbut it was a bit too extravagant for 1959.}) 3... e5 {A very principled reply\nagainst this King\'s Indian Attack setup by White (it is precisely this move\nWhite tries to avoid by playing 3.Nf3 first).} 4. Ngf3 Nd7 $6 {But this is a\nserious inaccuraccy, that kinda demonstrates the level of opening play at the\ntime. Black allows White to open up the center under favourable circumstances.}\n(4... Bd6 {is the main move here. The point is that after} 5. d4 exd4 6. exd5 {\nthe knight on b8 has the possibility to recapture on c6 and also the bishop on\nc8 is not blocked, so Black can play numerous reasonable moves, the most\nprecise probably being} Nf6) 5. d4 dxe4 (5... exd4 6. exd5 {[%cal Rc8h3] now\nworks in White\'s favour due to the poor positioning of the knight on d7 that\nis not defending the pawn on c6 and also blocking in the bishop on c8.}) 6.\nNxe4 exd4 7. Qxd4 {It is true that White has losta tempo in moving the d-pawn\ntwice in the opening and that now all the central pawns have been exchanged,\nbut now White has a nice lead in development. Furthermore, since Black played\nc6, the d6 square has been weakened and it is actually not super easy for\nBlack to deal with this.} Ngf6 {A natural developing move can\'t be too bad.} (\n7... Nc5 {Trying to resolve the central tension immediately is not too good as\nafter} 8. Qxd8+ Kxd8 {White has numerous good possibilities, the simplest of\nwhich seems to be} 9. Nxc5 Bxc5 10. Bf4 {When castling long is coming next,\nthen also Ng5 is on the table and White has a nice lead in the development.})\n8. Bg5 {Continuing the development and preparing castling long, while\nincreasing the pressure on the knight on f6.} (8. Nd6+ {White could have also\njumped with the knight immediately, but moving the bishop first is definitely\nplayable, as long as it is followed up by the knight jump to d6.}) 8... Be7 9.\nO-O-O $6 {But here this is a bit imprecise as it allows Black to castle\nwithout any issues.} (9. Nd6+ {Jumping with the knight seemed very simple and\npositional - forcing Black to give up the dark-squared bishop. After} Bxd6 10.\nQxd6 {It is difficult for Black to castle and the endgame after} Ne4 11. Bxd8\nNxd6 12. Bc7 {Is quite miserable as White has the bishop pair and slight lead\nin development.}) 9... O-O 10. Nd6 {Now this knight jump doesn\'t come with the\nsame effect as Black is not forced to capture it.} Qa5 {This is a bit\noverzealous on Smyslov\'s part. However, this does change the character of play\nand invites tactical complications where the value of each move is\nsignificantly increased.} (10... h6 {Forcing the bishop on g5 to declare its\nintentions and then moving the d7 knight was a healthier way toward equality.}\n11. Bh4 Nb6 {[%cal Gc8e6,Gb6d5] While Nbd5 is also an idea.}) 11. Bc4 {[%csl\nGa2][%cal Rc4f7,Rd6f7,Gc4a2] The bishop is very active on this diagonal,\nplacing pressure on f7 and also defending the a2 pawn.} b5 {Very provocative!\nBlack is inviting White to capture on f7, claiming that this exchange is not\nat all so unfavourable for him.} (11... Nb6 {Was the alternative way of\nplaying, however after something along the lines of} 12. Bb3 Nbd5 13. Nxc8\nRaxc8 {White has a clear advantage due to the bishop pair and the active\npieces in the center.}) 12. Bd2 {A very typical Tal move and a very surprising\ncounter. The idea is to eventually reposition the bishop to c3 and aim at the\nblack king.} (12. Bxf7+ {Capturing on f7 is suggested by the engine. At first\nglance, it seems as if it is initiating an unfavorable exchange for White that\nwe are already taught as beginners to avoid, but it transpires that situation\nis not at all so simple due to Black\'s lack in development and poor piece\ncoordination. The line continues} Rxf7 13. Nxf7 Kxf7 14. Rhe1 Qxa2 15. Rxe7+\nKxe7 16. Qe4+ Kd8 17. Qxc6 {And Black has an extra piece, but his king is\nterminally weak and his rook is under the attack for the moment, so White\ndefinitely has ample compensation. The engine continues the line with} Rb8 18.\nBf4 Qa1+ 19. Kd2 Qa5+ 20. Ke2 Qb6 21. Nd4 {And claims that White retains the\nadvantage in a position where Black has to find virtaully the only moves to\nsurvive. There is no denying Tal would thrive in a position like this, so it\nis a bit surprising to see him not going for something like this.}) 12... Qa6 {\n[%cal Ra6a2] Maintaining the control over the a2 pawn.} 13. Nf5 {The point of\nWhite\'s idea. Now the knight is placed on an active f5 square with the gain of\ntempo.} Bd8 14. Qh4 {Basically burning all the bridges and sacrificing the\npiece in order to create some nasty kingside threats. It has to be said that\nTal is objectively not risking that much at this particular point as his play\nis quite dangerous, but when you consider how good the position could have\nbeen after the earlier Nd6 knight jump, it does seem a bit unecessary. ---\nThen on the other hand, if Tal wasn\'t such a daredevil, we probably wouldn\'t\nbe analyzing this (as well as many other) games of his.} bxc4 {Of course -\nwhat else?} 15. Qg5 {[%cal Rg5g7] Mate on g7 is now threatened, but Black does\nhave some defensive ideas.} Nh5 {[%csl Gg7][%cal Gh5g7] Defending the g7 pawn\nand giving the piece back is an attempt to play for the win. Even though many\npeople associate Smyslov with quiet, positional play, he was a brilliant\ncalculator/tactician in his own right, so it is natural that he was tempted to\nplay for more than a draw - especially if you take into the account that he\nhad beaten Tal in the first round of this tournament.} (15... g6 {was the\nother way of dealing with the threat, when after} 16. Nh6+ {Black has hardly\nanything better than} Kg7 {And here White should probably repeat with} (16...\nKh8 {is too risky as after} 17. Bc3 {the knight on f6 is exposed and there are\nalready some nasty Rxd7 threats in the position.}) 17. Nf5+ (17. Bc3 {Now\ndoesn\'t work as the f6 knight is defended by the king. After} Qxa2 18. Rxd7\nBxd7 {Black is just winning.}) 17... Kg8 18. Nh6+) 16. Nh6+ (16. Qxh5 {would\nbe losing for White as after} Nf6 17. Qg5 Bxf5 18. Qxf5 Qxa2 {Black manages to\nexchange virtually all the relevant attacking pieces and is just left with a\nwon position.}) 16... Kh8 17. Qxh5 Qxa2 ({Of course, not} 17... gxh6 {as it\ndecisively weakens the king. After} 18. Qxh6 {[%cal Gd2c3,Gf3g5] It is hard to\nstop all the ideas (Bc3, Ng5).}) (17... Nf6 {Was playable here, though, when\nafter} 18. Qc5 {Attacking the rook on f8.} Nd7 19. Qd6 Qxa2 20. Bc3 {The\nposition is extremely tense and complicated, although Black can seemingly hold\nthe balance with the very difficult move} Bf6 21. Bxf6 gxf6 {And the engine\ngives eternal zeroes here, of course.}) 18. Bc3 {The culmination of this sharp\nand famous tactical skirmish.} Nf6 $4 {A fatal blunder, overlooking Tal\'s\ndevious reply.} (18... Bc7 {It was absolutely necessary to remove the bishop\non d8 and avoid the threat. Now White probably has to go for the draw with} 19.\nNxf7+ Kg8 20. Nh6+ {as playing for more might backfire. Note that the knight\nis immune as after} gxh6 21. Qg4+ Kf7 22. Rxd7+ {Black will get mated shortly.}\n) 19. Qxf7 {Smyslov surely missed this idea, diverting the rook on f7.} Qa1+ {\nWhat else?} (19... Rxf7 20. Rxd8+ {Leads to a quick mate:} Ne8 21. Rxe8+ Rf8\n22. Rxf8#) 20. Kd2 Rxf7 (20... Qxd1+ {also doesn\'t work due to} 21. Rxd1 Rxf7\n22. Nxf7+ {[%cal Rf7h8,Rf7d8]} Kg8 23. Nxd8 {And White remains a piece up!})\n21. Nxf7+ Kg8 22. Rxa1 Kxf7 {Now Black is "only" an exchange down, but his\npawns are also weak and there is no hope.} 23. Ne5+ Ke6 24. Nxc6 Ne4+ 25. Ke3\nBb6+ 26. Bd4 {And here Smyslov decided to throw in the towel. A marvellous,\nfascinating game that demonstrated that even the great players like Smyslov \n(albeit out of form) can succumb to Tal\'s psychological pressure and hurricane\nlike pressure over the board. ---After this game, the path of the two\ncompetitors diverged. Tal would go on to score a very convincing tournament\nvictory and then beat the great Botvinnik in the 1960 World Championship match,\nwhile Smyslov would finish with a mediocre performance and slowly be\novershadowed by the talented generation in the 1960s and would not seriously\nfight for the World title all the way until his resurgence in the 1980s (and\nhis final Candidates match against Garry Kasparov - in 1983!).} 1-0\n\n[Event "Botvinnik - Tal World Championship Matc"]\n[Site "Moscow URS"]\n[Date "1960.03.15"]\n[Round "1"]\n[White "Mikhail Tal"]\n[Black "Mikhail Botvinnik"]\n[Result "1-0"]\n[ECO "C18"]\n[Annotator "USER"]\n[PlyCount "63"]\n[EventDate "1960.??.??"]\n\n{In the previous game, we have already mentioned that Tal went on to win the\nCandidates tournament in 1959, which qualified him for the World Chess\nChampionship match against Botvinnik, held in 1960. --- Even though the world\nhas seen that Tal\'s style can very well work against the very best, everyone\nwas curious to see if it can work as well against the formidable Patriarch,\nwho was very dismissive of Tal\'s "gambling" style in the past. --- This match,\ndubbed "The War of Antipodes" by Garry Kasparov in his book On My Great\nPredecessors, was very much anticipated and historical, and we will be\nexamining two games from it, starting with the very first game of the match.} \n1. e4 {No hesitation. Very natural for Tal to go for his favourite move in the\nmost important event of his career up to that point.} e6 {The French was\nalways one of Botvinnik\'s favourite openings throughout his career, although\nin this particular match, this was the only game where he dared venturing it,\nswitching to Caro-Kann from the very next Black game. Apart from these two\nopenings, he was also a Sicilian player, but it is quite natural that his\nmatch strategy didn\'t involve going for such a sharp opening against Tal.} 2.\nd4 d5 3. Nc3 Bb4 4. e5 c5 5. a3 Bxc3+ 6. bxc3 Qc7 7. Qg4 {The Winawer\nvariation of the French remains to this day one of the most complicated,\nfascinating and most difficult variations to understand. I will not venture to\ndive deeply into its intricacies here.} f5 {One of the possible replies,\ndefending the g7 pawn, but one that has lost its popularity in the Modern day\nand age.} (7... Ne7 {Is the main move, leading to a major opening line.}) 8.\nQg3 {[%csl Gc3][%cal Gg3c3] The queen on g3 is nicely positioned as it defends\nthe c3 pawn and still eyes the g7 pawn.} Ne7 {Black has to play this move\nsooner or later as otherwise it is difficult to develop the kingside.} 9. Qxg7\nRg8 10. Qxh7 {Now Black is claiming it is difficult ofr the queen to return in\nthe game due to the pawn on f5. On one hand this is true, on the other hand,\nthe advance of the f-pawn has weakened the king.} cxd4 11. Kd1 {A very\nextravagant move, side-stepping the check on c3, but also the one on e5. From\nthe opening principle viewpoint, it looks as if this move is total nonsense,\nso let\'s try to explain it. Apart from the fact it parries the direct threats,\nthe king is actually not at all so badly placed in the center due to the fact\nthat Black\'s pawns are keeping all the lines closed and it is not clear how\nBlack will go about attacking it.} (11. Ne2 {With that being said, defending\nc3 with the knight was perfectly possible - especially since the pawn on e5 is\nalso immune due to} Qxe5 12. cxd4 {When White regains the central control and\nthe dark-squares and is strategically already winning.}) 11... Bd7 {Black\ntries to develop quickly and create the threat of Ba4, pressuring the c2 pawn,\nbut this is a bit too slow.} (11... dxc3 {For better or for worse, Black\nshould have taken the pawn on c3, although after something like} 12. Nf3 {\nWhite suddenly has a pleasant position due to the bishop pair, passed h-pawn\nand possibility to include the rook via the b1 square. Still, the position is\nextremely complicated and sharp - which is very typical of this variation.})\n12. Qh5+ {An annoying disruptive check, bringing the queen closer to the main\npoint of action with a gain of tempo.} Ng6 (12... Kd8 {is also not at all so\nsilly.}) 13. Ne2 {[%csl Gc3][%cal Ge2c3,Gc3d4,Ge2f4] Covering c3 and\npotentially preparing Nf4.} d3 {A nice tactical move, trying to disrupt\nWhite\'s harmony and open up the position in front of the king on d1 a bit.} (\n13... Ba4 14. Nf4 {Is unpleasant for Black as now} Kf7 {Loses to} 15. Qh7+ Rg7\n16. Qxg7+ Kxg7 17. Nxe6+) (13... dxc3 {might be relatively the best as now\nafter} 14. Nf4 {Black does have} Kf7 {Although here White has numerous way of\ncontinuing, including the simple.} 15. Bd3 {[%cal Gh2h4,Gg2g4,Gh1e1,Ga1b1]\nFinishing the development and intending Rb1 Re1 and so on.}) 14. cxd3 Ba4+ {\nThis turns out to be an empty check.} (14... d4 {For better or for worse, this\nmove should have been played, opening up the d5 square and the long a8-h1\ndiagonal fo the pieces. After} 15. cxd4 Nc6 16. Bd2 O-O-O {Black definitely\nhas more counterplay compared to what happened in the game, although here\nWhite should still be objectively better - after all, three pawns are three\npawns.}) 15. Ke1 Qxe5 {Black regains one pawn and activates the queen, but it\nturns out that this e5 pawn is not at all so relevant in these positions.\nFurthermore the exposed state of the Black queen now allows White to quickly\ncatch up on the development.} 16. Bg5 {Very powerful, taking the long diagonal\nunder control and making it super difficult for White to castle.} (16. d4 {\nImmediately, was also quite good.}) 16... Nc6 17. d4 Qc7 18. h4 {[%csl Gh4]\n[%cal Gh1h3] And now comes the h-pawn. In these Winawer positions where White\ncaptures on g7 and h7, the passed h-pawn is a very big asset as very often it\ncreates havoc in the Black camp and gets pushed very far very early in the\ngame. Furthermore, this opens up the h3 square for the rook.} e5 {This move\nalready feels somewhat desperate, but what else is Black to play? Due to the\nbishop on g5 they can\'t castle and it is hard to tell what else should be the\nplan. This move tries to exploit Black\'s lead in development at least,\nalthough White is not THAT far behind + Black\'s king is also quite weak.} 19.\nRh3 {[%cal Gh3e3] The rook is ready to join the action via the 3rd rank. This\nis not the only move in the position, mind you.} Qf7 {Trying to alleviate the\npin and move the knight from g6 away.} (19... e4 {Would allow} 20. Nf4) (19...\nexd4 {also leads nowhere after either} 20. cxd4 ({or} 20. Nxd4 {[%cal Gh3c3]\nNote how it is nice to have the rook on h3 defending c3 in these lines.})) 20.\ndxe5 Ncxe5 {Trying to keep the position complicated.} ({With that being said} \n20... Ngxe5 {wouldn\'t have brought much relief after, say} 21. Nf4 Qxh5 22.\nNxh5 {All WHite\'s pieces are active, White has weaknesses on f5 and d5 and\nWhite has the bishop pair and the passed h-pawn to top it all.}) 21. Re3 {\nActivating the rook and creating a nasty pin and the threat of f4.} Kd7 22. Rb1\n{Now the other rook is activate with the gain of tempo as well.} b6 23. Nf4 {\nNow the knight as well. The only piece that is currently somewhat slumbering\nis the bishop on f1. White\'s coordination is perfect while Black is struggling.\n} Rae8 24. Rb4 {Another move activating a piece with the gain of tempo.} Bc6\n25. Qd1 {Not the only move in this position, but not a bad one at all. Tal\nbrings the queen in the center of the board and tries to put pressure on the\nd5 pawn.} Nxf4 26. Rxf4 Ng6 27. Rd4 Rxe3+ 28. fxe3 {A very unconventional, but\nstrong decision. White does ruin his pawn structure, but it prevents even a\nhint of counterplay involving the advance of the f-pawn. Now c4 is a major\nthreat.} (28. Bxe3 f4 {Would be much more complicated, although White would\nstill retain a significant advantage after} 29. Qg4+) 28... Kc7 29. c4 {\nNevertheless! It seems strange that White is opening up the position when\nBlack is the one ahead in development, but it turns out that White\'s position\nis very stable, while Black\'s king is extremely exposed and White\'s bishops\nare very powerful.} dxc4 {It is probably better not to play this move, but it\nis already hard to offer Black some advice.} 30. Bxc4 Qg7 31. Bxg8 Qxg8 32. h5\n{And here Botvinnik finally decided he has had enough and decided to resign a\ngame. One of the most one-sided opening games of the World Championship Match\nand one of the worst defeats for not only Botvinnik, but any World Champion.\nThis game is perhaps not the most typical Tal game, but it is one that\nencapsulates very well his splendid feeling for such complicated, sharp and\ntactical positions - a true Model Game for all Winawer afficionados. It is not\nsurprising that Botvinnik decided to avoid the French for the rest of the\nmatch.} 1-0\n\n[Event "Botvinnik - Tal World Championship Matc"]\n[Site "Moscow URS"]\n[Date "1960.03.26"]\n[Round "6"]\n[White "Mikhail Botvinnik"]\n[Black "Mikhail Tal"]\n[Result "0-1"]\n[ECO "E69"]\n[Annotator "USER"]\n[PlyCount "93"]\n[EventDate "1960.??.??"]\n\n{Even though the first game of the Tal\'s 1960 World Championship Match against\nBotvinnik was very convincing and one-sided, arguably the most famous,\nbeatiful and impactful match was the 6th game. It was played after four draws\nin which Botvinnik was putting considerable pressure on Tal and it featured\none of the most paradoxical, daring and provocative sacrifices ever seen at\nthe World Championship level. --- To this day it remains one of my favourite\nTal\'s games not only due to its typical Tal nature, but also due to the fact\nit was played at the heights of the chess summit. Let\'s dive deep into this\nfantastic encounter.} 1. c4 {Throughout his life, Botvinnik had affinity for\nthe English Opening, although he was, naturally, a big master of 1.d4 as well.}\nNf6 2. Nf3 g6 3. g3 Bg7 4. Bg2 O-O 5. d4 d6 {Given Tal\'s style, The King\'s\nIndian Defense was not a surprising choice.} 6. Nc3 Nbd7 {I was under the\nimpression that developing schemes with the knight on d7 are nowadays rare and\nunexplored, but now I see that it is the most common move in the database\nagainst the Fianchetto setup by White, so what do I know. The idea is to place\nthe knight on a square where it supports e5 but where it isn\'t in the way of\nthe d-pawn. Against the fianchetto setup, Black doesn\'t always go for the\ntypical kingside attack with f5-f4, so the knight arguably has more\nflexibility on d7 than it would have, say, on c6 (or e7, following d5 by White)\n.} 7. O-O e5 8. e4 {Occupying the center is most ambitious, also not the only\nway of handling the position. It seems as if White is locking the bishop on g2,\nbut the argument is that seizing the space advantage while trying to limit\nBlack\'s counterplay is very principled - especially since Black often\nexchanges on d4 on the next move.} c6 {[%csl Gd5][%cal Gc6d5] This is also a\nvery common line. Black opens the way for the queen and adds some more control\nto the d5 square.} (8... exd4 {Taking on d4 is another very common move, that\nwas played by a number of strong players in the past, including very recently.}\n) 9. h3 {[%csl Gg4][%cal Gh3g4,Rc8g4] Taking the g4 square under control is\nvery useful as it prevents the future Bg4, fighting for the d4 square.} Qb6 {\n[%cal Rb6d4,Rb6b2] This queen move is also the most common move in this\nposition, but it is questionable whether it is necessarily the best. Now the\nthreat is to capture on d4 and then on e4 and White needs to react, but\nBlack\'s queen can easily become exposed to some unexpected ideas on this\nsquare.} 10. d5 {[%csl Gd5] Botvinnik embarks on a typical King\'s Indian move,\ngaining some more space and locking the center. However, in this particular\nposition, it is probably more precise to either keep the tension, or go for a\nsharp pawn sacrifice, which we will see in notes very shortly.} (10. Re1 {\nDefending e4 and dealing with the threat, is more common.}) (10. c5 {Is the\nchoice of the modern engine that was seen in more than 1000 games that reached\nthis position. The idea is to take on e5 on the next move after} dxc5 11. dxe5\nNe8 {And then to sac a pawn on e6 after} 12. e6 fxe6 13. Ng5 {Naturally, one\ndoesn\'t go for such a line without due home preparation - especially in 2022.\nMoreover, such a sacrificial, "speculative" pawn sacrifice was very much NOT\nin Botvinnik\'s style.}) 10... cxd5 11. cxd5 Nc5 {Now we have reached a very\ntypical King\'s Indian position where White has more space, but where Black has\nsome pieces on the queenside and the c-file to work with.} 12. Ne1 {The idea\nis to head to d3 and eliminate Black\'s active knight on c5.} Bd7 13. Nd3 Nxd3\n14. Qxd3 Rfc8 {This move is a bit provocative and semi-waiting. Black gives up\nthe plan of pushing the f-pawn (for which the rook was ideal on f8) for now\nand brings the heavy pieces to the open c-file.} (14... Nh5 {According to\nKasparov\'s notes in On My Great Predecessors, Tal wrote in one of his books\nthat he was afraid of} 15. Be3 Qd8 16. Qe2 (16. Nb5 {Should be White\'s choice\nand already the only attempt to play for the advantage.}) 16... f5 (16... Qe8 {\nProtecting the knight and preparing f5 next, was, though, much better.}) 17.\nexf5 {And now Black can\'t recapture with the pawn on f5 as the knight on h5\nwould be hanging which is a highly undesirable outcome in the King\'s Indian\nonce Black plays f5, soooo.}) 15. Rb1 {[%cal Gb1b2] Defending b2 and preparing\nto develop the bishop.} Nh5 {A bit inconsistent with the previous move of Rfc8,\nbut as I mentioned, Tal was somewhat deliberately playing in a very\nprovocative manner.} (15... Qd8 {The computer suggests this positional move,\nwith ideas of a6-b5 or h5-Qf8-Bh6. Apparently, the position demanded strategic\nand positional play.}) 16. Be3 Qb4 17. Qe2 Rc4 {Pushing the f-pawn is still\nimpossible due to the potentially hanging knight on h5 so Tal brings the rook\ninto the action.} (17... Qc4 {Trying to exchange queens by force, was also\nworth considering.}) (17... f5 18. exf5 {Once again leaves Black without a\ngood way of recapturing.}) 18. Rfc1 Rac8 {Doubling on the c-file looks logical,\nbut objectively, Black\'s pieces shouldn\'t be able to achieve all that much and\nshould be pushed back from the c-file in the near future.} 19. Kh2 {It is\nsensible to move the king out of the harm\'s way. The engines suggest some\nweird looking, computer lines as better options, but I was unable to quite\nunderstand them so I haven\'t bothered including them in the annotations, since\nthe main highlight of the game is just in front of us anyway.} f5 {Now Black\nfinally strikes with the f-pawn, despite the fact that he is still unable to\nrecapture with the pawn as this now comes with a tempo on the rook on b1.} 20.\nexf5 Bxf5 {[%cal Rf5b1]} 21. Ra1 {But what now? g4 is being threatened and it\nlooks like as if Black will have to retreat one of the two pieces. However,\nthe word retreat did not yet appear in Tal\'s vocabulary in 1960.} Nf4 {[%csl\nRf4] A tremendous, typical Tal move, that must have come as a huge shock to\nBotvinnik. Tal sacrifices a piece in order to kick the bishop on e3 away and\ncreate a strong pawn on f4 that can be used to disrupt the pieces on the 2nd\nrank. --- Even though the move is objectively not the best, it must have taken\nBotvinnik out of the comfort zone as instead of the slow strategic squeeze, he\nsuddenly has to navigate his way out of the "deep dark forest" - which was\nnever an easy task against the like of Mikhail Tal.} (21... Nf6 {Objectively,\nBlack\' should retreat after} 22. g4 Bd7 {Accept that he is worse and wait for\na more desirable turn of events in the future.}) 22. gxf4 {Of course - the\nknight has to be accepted.} exf4 23. Bd2 {This most obvious, natural retreat\nof the bishop turns out to be a mistake that allows Tal completely back in the\ngame as it interferes with the queen\'s defence of the important b2 square.} (\n23. a3 {With that being said, it was necessary to kick the queen away from the\na5 square and then go the other route - capture the pawn on a7 after} Qb3 24.\nBxa7 {Kasparov went on to reproduce lengthy analysis here in his book, quoting\nseveral resources such as match bulleting and trying to demonstrate that White\nis objectively winning here. Understanding of such a position at the outset is\nvery difficult, but it transpires that Black can\'t really trap the bishop and\nthat the fact that the b2 pawn survives in these variations makes a lot of\ndifference. I will not bother you with all the details, let me just mention\nthat} Ra8 {is met with the tricky} 25. Nb5 Rxc1 26. Rxc1 Be5 27. Nd4 $1 {\nVirtually the only winning move.} Qd3 28. Qxd3 Bxd3 29. Nf3 Rxa7 30. Nxe5 dxe5\n31. d6 {And White should win this endgame in the end. This variation is the\nbest example of the crazyness that Tal was able to create on the board. It is\nactually amazing how deep some of his combinations/concepts were and how much\nyou have to click around with the engine to get to their bottom. It is not at\nall surprising that Botvinnik - just like many of Tal\'s other opponents, was\nsimply unable to cope with such hurricane-style chess over the board.}) (23.\nBxa7 Qa5 {regains the piece, with unclear consequences.}) 23... Qxb2 {With\nthat being said, Tal himself was not completely immune to mistakes in these\nwild positions. Here capturing the b2 pawn turns out to be premature.} (23...\nBe5 {Was mentioned by Kasparov in the book and was also apparently written by\nTal on the score-sheet before he changed his mind. The idea is to activate the\nbishop and create the threat of f3 before taking on b2.} 24. f3 {The best, but\nnot at all obvious defence.} (24. Bf3 {White could have tried blocking the\npawn with the bishop as well, but now after} Qxb2 25. Rab1 Bxb1 26. Rxb1 Qc2 {\nThe pawn on d6 is defended so} 27. Nb5 {Simply loses to} Qxb1) 24... Qxb2 25.\nNd1 {Now, with the bishop on e5 and f3 alredy being played, this defensive\nidea is possible, as the queen doesn\'t have the access to the e5 square.} Qd4 {\nAnd here Black doesn\'t have any objective advantage. More importantly, the\nposition is a bit more stablized for White. Tal apparently saw/sensed that his\nchoice would be much more uncomfortable for Botvinnik and, just as so many\ntimes before, he decided to pull the trigger and gamble for a little bit.} ({or\n} 25... Qxa1 26. Rxa1 Bxa1)) 24. Rab1 {The culmination of the entire battle.} (\n{Note that this retreating move doesn\'t work here as the queen has the e5\nsquare available.} 24. Nd1 Qe5 {And Black can\'t exchange as after} 25. Qxe5 (\n25. Qf3 {has to be played instead, when still after} Be4 {Black does retain\nsome advantage}) 25... Bxe5 {Both the bishop on g2 and the rook on a1 are\nexposed and Black is winning ,despite being a piece down.}) 24... f3 {Another\ndevilish, typical Tal trick that poses more extremely difficult problems in\nfront of the opponent. The idea is to open the diagonal for the bishop in\norder to have a nasty Be5 check available. Alas, as quite often with Tal\'s\ncombinations, it turns out that the modern engine points out it is losing -\nbut only in one variation. --- According to Kasparov, the noise in the\nspectator\'s hall become so vibrant at this very moment that the unnerved\nGoldberg - Botvinnik\'s second - asked for the play to be transferred to an\nisolated room.} (24... Bxb1 {Objectively, Black should take on b1 and try to\nplay the position after} 25. Rxb1 Qc2 {When White has to find the nasty} 26.\nNb5 {For a clear cut advantage. The idea is that without the bishop on e5, the\nd6 pawn is not protected so Black can\'t take the rook on b1} Qxb1 (26... Be5 {\nIs a better defense, when after} 27. Nxd6 Bxd6 28. Qe6+ Kg7 29. Rxb7+ R8c7 {\nBlack is somehow surviving for the moment, although White is clearly in the\ndriver\'s seat.}) 27. Nxd6 {And due to the threats of Nxc4 and Qe6, White is\ncompletely winning.}) 25. Rxb2 $4 {[%cal Rg7a1,Rc8c1] The historic blunder\nthat largely determined the outcome of the first Botvinnik- Tal match. At the\nheight of the battle, Botvinnik finally falters under Tal\'s pressure and aims\nto exchange the queens, only to end up in a completely lost position where his\npieces will be completely tied up.} (25. Bxf3 {White should have taken the\npawn on f3 at once and asked Black - show me what you got with the opening of\nthe diagonal. The best line continues} Bxb1 26. Rxb1 Qc2 {And here Kasparov\nquotes a spectacular winning line found by Salo Flohr} 27. Be4 {A marvellous\ncounter-sacrifice, hitting the queen and forcing the reply.} (27. Rc1 {The\nmerciless computer points out the more cold-blooded way to proceed} Qb2 (27...\nQf5 28. Bg4 $18) 28. Bg4 {And again the weakness of the Black king is decisive\nand th erook on c8 is unnerved, forcing Balck to remove the pressure on the\nc-file and deal with the defence of their own king.}) 27... Rxe4 28. Nxe4 $1 {\nJust giving up the rook on b1.} Qxb1 29. Nxd6 {[%cal Rd6c8,Ge2e6] And even\nthough Black is now a clean exchange up, the weakness of the king on g8 is\ndecisive and White is the one totally winning with Qe6 coming next.}) 25...\nfxe2 {[%cal Rg7a1,Rf5b1,Rc8c1] Suddenly, Black\'s bishops and rooks are\ncoordinated wonderfully and the strong passed pawn on e2 is an important asset,\nas well.} 26. Rb3 {Trying to defend the knight on c3.} Rd4 {[%cal Rc8c3,Gd4d1]\nA powerful move, threatening the capture on c3 and infiltration on d1.} 27. Be1\n{Trying to cover the queening e1 square at all costs.} (27. Be3 Rxc3 28. Rbxc3\nRd1 {And the pawn will queen.}) 27... Be5+ {[%cal Re5h2,Ge5f4] A decisive\ninclusion of the bishop, that goes to f4.} 28. Kg1 Bf4 {A prosaic and safe way\nto win.} (28... Rxc3 {This immediate sacrifice also works as after} 29. Rbxc3\nRd1 30. Rc7 {Only now does Black attack the rook on c1 via either f4 or b2.}\nBf4 {Black has to endure big material losses.}) 29. Nxe2 Rxc1 30. Nxd4 Rxe1+\n31. Bf1 Be4 {And now with the bishop pair, extra pawn and more active pieces,\nthere is no raeson to doubt that Black is completely winning and the rest is a\nmatter of technique for a player of the caliber of Tal.} 32. Ne2 Be5 33. f4 Bf6\n34. Rxb7 Bxd5 35. Rc7 Bxa2 36. Rxa7 Bc4 37. Ra8+ Kf7 38. Ra7+ Ke6 39. Ra3 d5\n40. Kf2 Bh4+ 41. Kg2 Kd6 42. Ng3 Bxg3 {An important tool in the hands of every\nsuffering chess player when it comes to winning won positions - simplification.\nHere Tal goes for the rook endgame, correctly judging that the passed c-pawn,\nsupported by the king, will eventually decide the game.} 43. Bxc4 dxc4 44. Kxg3\nKd5 45. Ra7 c3 46. Rc7 Kd4 47. Rd7+ {And here Botvinnik decided to resign\nwithout even waiting for a reply. If you are unsure why exactly this rook\nendgame is won - eventually the pawn will cost White a rook, and in the\nmeantime they will be way way too slow with the counterplay on the kingside.\nIf you are unsure about the exact winning technique, I recommend you to check\na chapter on endgame for beginners in a book such as Silman\'s Amateur Mind.\n--- In any case, this is, for me, one of the most memorable, most fascinating\nand most entertaining Tal games of all time. It is maybe not as spectacular as\nsome of his other games, but this is by far the most Tal-like game played at\nsuch a high level against such a formidable opponent. --- The fact that he\nmanaged to rattle the great Patriarch with his daring, semi-gambling style of\nplay is really something. After this game, Botvinnik also lost the next one.\nAnd even though he tried to put up a find by the end of the match and at some\npoint even reduced the difference in score to 1, the outcome of the first "War\nof the Antipodes" was never really in doubt.} 0-1\n\n[Event "Varna ol (Men) fin-A"]\n[Site "Varna BUL"]\n[Date "1962.10.06"]\n[Round "9"]\n[White "Mikhail Tal"]\n[Black "Hans-Joachim Hecht"]\n[Result "1-0"]\n[ECO "E13"]\n[Annotator "USER"]\n[PlyCount "97"]\n[EventDate "1962.??.??"]\n\n{The following game was played during the Varna Olympiad in 1962. A year\nearlier, Tal has lost the World Championship Title in the 1961 return match\nagainst Botvinnik. More importantly, it was around that time that his chronic\nhealth issues - which would become an unfortunate lifetime trademark of his -\nbecame more serious. --- In 1962, he had a kidney operation due to which he\nhad to withdraw from the 1962 Curacao Candidates tournament. Thus, by the 1962\nChess Olympiad in Varna, he was barely recovering from all these unfortunate\nevents and as a result, ended up playing on the 2nd reserve board. --- It was\nquite fortunate, as he not only won the board gold medal, but he also played\nthe following game that would soon become one of those memorable Tal\nencounters that stays in your mind for a while.} 1. d4 {As mentioned earlier,\n1.d4 was not really the most common opening move for Tal, but he could, of\ncourse, vary as White.} Nf6 2. c4 e6 3. Nf3 b6 4. Nc3 Bb4 5. Bg5 Bb7 6. e3 h6 {\nThis variation of the Queen\'s Indian/Nimzo hybrid is probably not the most\ncritical for Black, but it does appear to this day in games of strong players \n(albeit not that much in the last decade).} 7. Bh4 Bxc3+ 8. bxc3 d6 {So, via\nthe transposition we have reached some sort of Nimzo-Indian position where\nWhite has the bishop pair and Black has the fluent pawn structure and\npotential target in the form of the doubled c-pawns. Objectively, White\'s\ndynamic play should always more than compensate for the static weaknesses,\nalthough I have personally always found Black\'s position easier to play in\nthese types of structures. But I guess it is a matter of taste.} 9. Nd2 {\nMoving the knight is a standard plan - the idea is to prepare f3-e4 pawn push\nand establish a big center.} e5 {Black usually counters this idea with a\ncentral expansion of their own.} (9... g5 {The alternative plan is to chase\nthe bishop from h4 and break the pin at the cost of the slight weakening of\nthe kingside pawns.} 10. Bg3 Nbd7 {This was played in some very high-profile\ngames, such as: Shankland,S (2720)-Xiong,J (2690) Saint Louis 2022}) 10. f3 {\nAll according to the plan, although this is definitely not the only way of\ncontinuing in this position.} Qe7 11. e4 {Now we have this typical stare-off\ncontest between the pawns on e4 and e5. On one hand White has gained some\nspace and restricted the bishop on b7 - on the other hand, the doubled pawns\non the c-file are now even weakes as the center has potentially lost some\nmobility.} Nbd7 12. Bd3 Nf8 {[%csl Rf4][%cal Gf8g6,Gf8e6,Re6f4] A good\nmaneuver. The knight is heading to g6 to gain a tempo on the bishop and then\nit will also eye the f4 square.} 13. c5 {This move, undoubling the pawns and\ngetting rid of the potential weakness is very typical, but not strictly\nnecessary and probably a bit too hasty here. White will end up losing a pawn\nfor questionable compensation.} (13. O-O {Castling is also possible, although\nit is a bit premature as after} Ng6 14. Bf2 Nf4 15. Bc2 O-O-O {Black can\nsafely castle queenside and then start attacking on the kingside. With the\ncenter so stable, White doesn\'t need to reveal his king\'s position just yet!})\n(13. Nf1 {[%cal Gf1e3] Trying to get the knight to e3 and not yet placing the\nking on the kingside, is the main move in this position!}) 13... dxc5 14. dxe5\n$2 {This move is objectively bad as it simply loses a pawn for no compensation,\nalthough it does open the position for the two bishops.} ({A move like} 14. d5\n{accepting that a pawn has been lost but trying to keep the position closed,\nis definitely a better try that was tested in a game between two grandmasters\nIndji\xe6 and Romanov in 2016. That game ended in a draw.}) 14... Qxe5 {[%cal\nRe5c3] Now the queen is centralized and exerting strong pressure on the c3\npawn, while the pieces on the d-file are also a bit loose. White is already\nsignificantly worse, objectively speaking.} 15. Qa4+ {This check tries to\ndisrupt Black\'s forces.} c6 {And Hecht immediately goes wrong. The problem of\nthis move is not so much that the bishop on b7 is blocked - but more that the\nd6 square has been weakened. We will see its significance very, very soon.} ({\nIt is far better to block with one of the knights, say} 15... N8d7) ({or} 15...\nN6d7 {In that case Black is ready to play Ng6 and O-O next with a perfectly\ngood and healthy position.}) 16. O-O {[%csl Rd6][%cal Gd2c4,Rc4d6] Hecht\nprobably missed this. Now Nc4 is coming next almost irrespective of what Black\ndoes.} Ng6 ({Taking the pawn here is bad as after} 16... Qxc3 17. Nc4 {And the\ncheck on d6 or capture on a7 is coming and Black is in trouble, say} b5 18.\nNd6+ Kd7 19. Nxb5 $1 cxb5 20. Bxb5+ Ke7 21. Rac1 {With a decisive attack\nagainst the king in the center.}) (16... Rd8 {is met with} 17. Qxa7 Rxd3 18.\nNc4 {And everything works in White\'s favour, say} Qc7 19. Rad1) 17. Nc4 {\n[%cal Rc4e5] A nice intermezzo, gaining a tempo on the queen.} Qe6 18. e5 {\nAnother powerful move, trying to keep the king in the center of the board.} b5\n{A tricky counterstrike and absolutely the best move in the position, creating\na total mess in the position, with half of the board hanging.} (18... Nxh4 {\nwould be met with} 19. Nd6+ {keeping the king in the center and now after} Kf8\n20. Rae1 {Is very strong, when the knights on h4 and f6 as well as the bishop\non b7 are under the attack. White has an ongoing initiative here as Black\'s\nking is really suffering from the lack of castling rights.}) 19. exf6 $3 {\nA legendary move that made this game famous. According to Tal himself, at this\nexact point, legendary grandmaster Miguel Najdorf who was watching the game,\napproached him and kissed him. This ultra brilliant move is just so incredibly\nbeautiful and it is really a pity it is not the best move in this position,\nobjectively speaking.} (19. Qb3 {The more prosaic retreat of the queen,\nmaintaining the threat of Nd6, we apparently much better. White has two pieces\nhanging, but it is not really great for Black to capture either of them.} Nxh4\n(19... bxc4 20. Qxb7 {is immediately over} Rd8 21. exf6 cxd3 22. fxg7) 20. Nd6+\n{A nasty intermediate check - the consequence of Black playing c6 earlier in\nthe game!} Kf8 21. Qxe6 fxe6 22. Nxb7 {[%csl Rc5,Rc6][%cal Gb7c5,Gd3e4] And\nafter the dust has settled, White is left with a superior endgame, despite\nbeing a pawn down - mainly because all Black\'s pawns are weak, their pieces\nare scattered, they lag in development and moves such as Nxc5 and Be4 are\ncoming with great effect.}) 19... bxa4 {Of course - what can be more natural\nthan capturing the queen. However, now Tal unleashes another very famous\ncombination!} (19... O-O {Simply castling out of it and not touching any of\nthe hanging pieces, is the typical engine reply, which is not at all very\nhuman-like. Tal mentioned the move} 20. Rae1 {As his intention (you have to\nmarvel and his imagination), when after the approximate} (20. Qc2 {It has to\nbe said that Kasparov\'s suggestion of simply retreating the queen was arguably\na better attempt to fight for the advantage. The idea is to take on g6 after}\nNxh4 (20... bxc4 21. Bxg6 fxg6 22. Qxg6 {When White has a major advantage in\nthis endgame due to Black\'s tripled (!!!) pawns.}) 21. Na5 Ba6 22. fxg7 Kxg7\n23. Qf2 {When White definitely has some compensation for the pawn and can play\non for the win!}) 20... Qxe1 21. Rxe1 bxa4 22. Bxg6 fxg6 23. Re7 g5 24. Rxg7+\nKh8 25. Bg3 Ba6 26. Be5 Bxc4 27. f7 {Things apparently end in a draw. Thus, 20.\nRae1 probably doesn\'t deserve a question mark as Kasparov stated in his books\n- this is one of those rare instances where more modern engines actually\napprove of Tal\'s choice!}) 20. fxg7 Rg8 21. Bf5 $3 {The point of Tal\'s\ncombination! Instead of moving the attacked piece, Tal leaves two more en\nprise and attacks the queen, but it transpires that Black can\'t really take\nthe knight on c4 or the bishop on f5.} Nxh4 {Ignoring the threat to the queen\nand taking the bishop is a legitimate defense - although the engine points out\nan even stronger, more paradoxical attempt.} ({First of all, capturing on f5\nis bad due to a simple fork} 21... Qxf5 22. Nd6+ Kd7 23. Nxf5 {When White has\na superior endgame due to the much better pawn structure.}) (21... Qxc4 {\nTaking the knight is also losing due to} 22. Rae1+ {When the bishops, the pawn\non g7 and the rook create a mating net!}) (21... Ba6 {However, there are two\nquiet defensive moves available at Black\'s disposal. The computer mentions\nsome crazy defence - moving the bishop out of the potential fork - as the best\npossibility. Now White actually has to find a very precise sequence to stay in\nthe game. Play might continue} 22. Bxe6 fxe6 23. Nd6+ Kd7 24. Ne4 {These are\nall virtually the only moves to stay in the game.} Bxf1 25. Nf6+ Kd6 26. Nxg8\nRxg8 27. Bg3+ Kd5 28. Kxf1 {And after all the fireworks, we have another\nendgame, where chances are level. It is true that Black has terrible pawn\nstructure. But on the other hand, the king is very active on d5 and the pawn\non g7 is falling. White is the one objectively playing for the win here, but\nthere is still a lot of chess remaining.}) 22. Bxe6 Ba6 23. Nd6+ Ke7 {Now it\nseems as if White is losing a piece, but there is a nice intermezzo available.}\n24. Bc4 {Attacking the bishop on a6 and saving a piece as Black is unable to\ncapture both hanging pieces at the same time!} Rxg7 (24... Kxd6 25. Bxa6 Rxg7 {\nComes to the same.}) (24... Bxc4 25. Nxc4 {Heading into a knight endgame is no\nfun either. Once again Black\'s pawn structure is horrible.}) 25. g3 Kxd6 26.\nBxa6 {As usual in chess, after a lot of fireworks, we have reached a technical\nendgame where White has some chances due to the better pawn structure - but\nalso due to the fact the bishop is usually stronger than the knight in\npositions with pawns on the both sides of the board. --- With best play it\nshould probably be a draw, but as anyone who has ever met Magnus Carlsen over\nthe board knows - there is a big difference between an equallish and a drawn\nposition. It is actually remarkable how quickly the game went downhil for\nHecht from this point.} Nf5 {This is probably a serious mistake already. The\nknight was not threatened yet and yet Black willingly spends a tempo moving it\nand removing the attack on the f3 pawn.} (26... Rb8 {Seizing the open file and\npreventing White from doing the same was the best. Note how White can\'t\ncontest due to the fact that f3 pawn is under the attack. White only has a\nslight advantage here.}) 27. Rab1 {Now White seizes the open file for his own\nrook and creates some fresh ideas of Rb7.} f6 $2 {But this move is just an\noutright blunder that virtually loses the game on the spot as it opens the 7th\nrank. However, Black\'s defence was already a bit trickier than on the previous\nmove.} (27... Ne3 {Preventing the rook from coming to d1 for the moment and\nintending Nd5 was most resillient.}) 28. Rfd1+ {Now Black is in gigantic\ntrouble as all White\'s pieces are active and Black\'s forces are completely\nuncoordinated.} Ke7 29. Re1+ {It is a bit surprising that Tal didn\'t take the\npawn on c6 here.} (29. Bb7 {Was winning the pawn back and activating the\nbishop further. Maybe Tal wanted to keep the activity and wasn\'t too concerned\nabout getting the pawn back?}) 29... Kd6 30. Kf2 c4 {The idea of this move is\nto open up the c5 square for the king but also to secure the d5 square for the\nknight.} (30... Rd7 {Is indicated by the computer as the most resillient,\npreparing to run with the king to e7 if required.}) 31. g4 {A reasonable move,\nchasing the knight away. But the problem is that the knight is now forced to\noccupy a better square - one on d5.} (31. Bxc4 {Taking the pawn here is not\noptimal as after} Re7 {is now possible as there aren\'t any checks on b7 and\nalso the king can go to c5 if required. This endgame is all about the piece\nactivity and preventing Black from coordinating their forces.}) (31. Rb4 {\n[%cal Rb4c4,Rb4a4] Activating the rook along the 4th rank and intending to\ntake on c4 was probably stronger than the text move.}) (31. Re4 {With similar\nideas, was likewise somewhat better.}) 31... Ne7 32. Rb7 {This actually\nrelinquishes a big part of White\'s advantage as it allows Black a surprising\ndefensive resource.} (32. Bxc4 {At this point, taking the pawn and then\nthinking later was probably the best way forward.}) 32... Rag8 {[%csl Gh6]\n[%cal Rg8g2,Gf6f5] It is very surprising to double the rooks on the\nsemi-closed file, but Black now has concrete ideas of undermining the\nstructure with h5 and f5 and trying to infiltrate.} 33. Bxc4 {Only now does\nWhite take the pawn, but now it happens under the inferior circumstances.} Nd5\n34. Bxd5 cxd5 35. Rb4 {It was already very difficult to win the position, but\nthis allows Black to simplify immediately.} (35. Reb1 {Keeping the option of\nexchanging the rooks and reducing the effect of the battery on the g-file was\nprobably better, although Black is now very close to the drawing margin.})\n35... Rc8 $2 {But tis move is a big mistake as Black misses the best\nopportunity to exchange some pawns and create the threat of the counterplay.} (\n35... f5 {[%cal Rf5g4] Would have almost guaranteed a draw. The point is that\nafter} 36. h3 (36. gxf5 Rg2+ {Is actually losing for White.} 37. Ke3 (37. Kf1\nRg1+ 38. Ke2 (38. Kf2 R8g2+ 39. Ke3 Rxe1+) 38... Re8+) 37... Re8+) 36... h5 37.\nRxa4 hxg4 38. hxg4 fxg4 39. fxg4 Rxg4 {White simply can\'t win.}) 36. Rxa4 Rxc3\n37. Ra6+ Kc5 38. Rxf6 {Now Black loses a few vital pawns and White ends up\nwith two connected passed pawns on the kingside. The rest is not of particular\ninterest as Tal went on to convert the advantage smoothly.} h5 39. h3 hxg4 40.\nhxg4 Rh7 41. g5 Rh5 42. Rf5 Rc2+ 43. Kg3 Kc4 44. Ree5 d4 45. g6 Rh1 46. Rc5+\nKd3 47. Rxc2 Kxc2 48. Kf4 Rg1 49. Rg5 {A fascinating game, featuring a lot of\ninstructive opening innacuraccies, a fabulous middlegame skirmish/combination\nand also a very instructive endgame. It may not be one of Tal\'s most accurate\ngames, but the aesthetic value of the combination started with 19.exf6 is what\nhas etched it in my heart and the chess history books forever.} 1-0\n\n[Event "Tal - Portisch Candidates Quarterfinal"]\n[Site "Bled YUG"]\n[Date "1965.06.28"]\n[Round "2"]\n[White "Mikhail Tal"]\n[Black "Lajos Portisch"]\n[Result "1-0"]\n[ECO "B11"]\n[Annotator "USER"]\n[PlyCount "53"]\n[EventDate "1965.06.26"]\n\n{Fast forward three years later. Even though back in 1961 Tal started having\nserious health issues that would pester him throughout his life, the kidney\noperation in 1962 apparently had some positive effects and Tal continued\nplaying at the highest level. --- In the 1963-1966 World Championship Cycle,\nhe qualified for the Candidates from the Amsterdam Interzonal tournament. This\ntime, instead of the marathon Candidates tournament, the cycle was held in the\nform of knock-out matches and Tal\'s opponent in the first, quarterfinal match\nwas the Hungarian Grandmaster Lajos Portisch. --- We will take a look at the\ngame two from this match, which is another one of those celebrated Tal flights\nof fantasy.} 1. e4 c6 {According to Kasparov, this was one of the very first\ntimes that Portisch played the Caro-Kann.} 2. Nc3 {We have previously seen how\nTal chose the rare setup in his 1959 Candidates game against Smyslov. Here, he\nopts for the Two Knights Variation, which is a very big and respectable\nvariation nowadays - but which I feel was not the most mainstream opening line\nat the time when this game was played.} d5 3. Nf3 dxe4 {Kasparov mentioned\nthat this is not the most accurate, but it is the 2nd most common move in this\nposition.} (3... Bg4 {This bishop pin is what consitutes the mainline.}) 4.\nNxe4 Bg4 {Only this move is somewhat imprecise, as it is usually better to\neither develop the bishop OR to capture on e4 - but not both.} (4... Nf6 {\nIs what constitues the mainline today but once again - let\'s now deelve too\ndeep into the opening theory of this variation.}) 5. h3 Bxf3 6. Qxf3 {In this\nvariation, White simply has the advantage of the bishop pair, although Black\'s\npawn structure is very solid as it is lacking weaknesses, which is one of the\nreasons why so many players are attracted to this Caro-Kann structures.} Nd7 7.\nd4 Ngf6 8. Bd3 Nxe4 9. Qxe4 e6 10. O-O Be7 11. c3 {A typical scenario for the\nstructure where the d4 pawn is facing the pawns on e6 and c6 has arisen. White\nhas a bit more space and the bishop pair, but Black is very solid - especially\nsince two pairs of minor pieces have already been exchanged (which also\nbenefits the side with less space). --- With that being said, White should\nobjectively be better here. The general idea is to be patient, and increase\nthe space advantage both on the queenside and on the kingside, by pushing the\npawns, although it has to be prepared and timed correctly. ---} Nf6 12. Qh4 {\nA very aggressive post for the queen, trying to stay close to the king and the\nkingside.} Nd5 {It was perfectly possible to castle, but Portisch wanted to\nbring the pieces to more active squares first.} 13. Qg4 Bf6 14. Re1 Qb6 {\nA little bit too optimistic. Portisch delays castling for yet another move and\ntries to pin the bishop on c1 to the defence of the pawn on b2. However, the\nqueen doesn\'t really belong on b6 here and it was once again better to simply\ncastle.} 15. c4 {A very aggressive, typical Tal continuation. He wants to\nchase the enemy knight from the strong central post on d5. Usually, this move\nhas to be carefully timed as in many cases the pawn on d4 can turn out to be\nweak, but here Tal had concrete attacking ideas in mind.} ({With that being\nsaid, virtually any other move such as} 15. Qh5 {keeping some pressure and\nmaking it as difficult as possible to castle, was possible. One sample\ncontinuation showcasing the idea of advancing the kingside pawns continues} g6\n16. Qf3 Bg7 17. h4 {White has a very promising position with the two bishops.\nA typical scenario for this variation - Black is solid, but very passive.})\n15... Nb4 {Now what? Isn\'t White just losing the pawn on d4?} (15... Ne7 {\nTrying to avoid the sacrifice that happened in the game was also possible.\nHere White is forced to sacrifice a pawn, but after either} 16. d5 ({Or} 16.\nBe3 Qxb2 17. Rab1 Qa3 18. Be4 {White has a lot of play for the pawn.}) 16...\ncxd5 17. Bg5) 16. Rxe6+ {A tremendous idea, sacrifing a full rook for the\nattack on the king that has overstayed the welcome in the center of the board.\nAt first glance, this might seem extremely suspicious as White only has the\nqueen around the king, the bishop on d3 is under the attack and the entire\nqueenside is undeveloped. However, Tal tries to make an argument that the\nterrible position of the opponent\'s king will provide him with more than\nenough opportunity to bring in the reserve and attack it. --- Objectively\nspeaking, this sacrifice shouldn\'t be sufficient for more than a draw,\nalthough as usual in Tal games, the objective evaluation is not of primary\nimportance. It has to be said this displays an amazing boldness - remember\nthat this was the second game of a Candidates match!} fxe6 17. Qxe6+ {Black\nhas three possible ways of dealing with the check and every one of them should\nbe examined.} Kf8 {With this move, the king goes into the more dangerous side\nof the board.} (17... Kd8 {Leads to a draw as after} 18. Qd6+ {repetition is\ninevitable:} Ke8 (18... Kc8 19. Bf5#) 19. Qe6+ {But here,Kasparov\'s comment is\ninteresting: "Here psychology again comes into plaY: who would agree to a draw\nwith an extra rook?"}) (17... Be7 {This natural interception was what Tal had\nto calculate very deeply. Here he prepared a devilish move:} 18. Bg6+ (18. Bg5\n{Doesn\'t work at once as after} Qc7 19. Re1 {There is this nasty intermediate\nmove} Nxd3 {Hitting the rook on e1!}) 18... Kd8 (18... hxg6 19. Bg5 {IS the\nidea, when after} Qc7 20. Re1 {Black is absolutely helpless.} Nd3 21. Qxg6+ {\nThis check wouldn\'t be possible if the bishop wasn\'t sacrificed!} Kf8 22. Rxe7)\n19. Bf5 {Threatening mate on d7} Qxd4 {The only move.} (19... Qc7 20. Bf4 {\nAnd White will mate.}) 20. Bf4 {And Kasparov states that this position\nappealed to Tal and provides a long and approximate variation that\ndemonstrates how White has practical chances, but how with the best play Black\nshould be able to force White to take the perpetual. --- Thus, even with best\nplay, Black\'s best bet would be to reach a draw, which means that the whole\ncombination is semi-correct, but very tough to handle over the board.}) 18. Bf4\n{[%cal Gf4d6] Threatening mate in one.} Rd8 (18... Re8 {Loses to} 19. Bd6+ Re7\n20. Re1 Qc7 21. Bxb4 {When Black\'s defence is collapsing.}) 19. c5 {[%cal\nRc5b6] Hitting the queen with a gain of tempo and creating an outpost on d6.}\nNxd3 {Black is forced to give up the queen.} ({It is not at all obvious why\nmoving the queen to the only available square is so bad, but after} 19... Qa5\n20. Re1 {Black is completely helpless against the threat of Bd6. Here you can\nsee why going to f8 was so dangerous - mating threats appear all the time.})\n20. cxb6 Nxf4 21. Qg4 Nd5 22. bxa7 {Thus, the dust has settled and White has a\nqueen and two pawns for the bishop, knight and the rook. However, the pawn on\na7 is very dangerous and Black\'s pieces are sorely lacking in coordination -\nso he already has to find the only defence to stay alive.} Ke7 {Poritsch wrote\nthat he saw the move g6, but though this is good enough as he saw that the\nchecks by heavy pieces are not as dangerous. However, he overlooked a strong\nreply that Tal, naturally finds!} (22... g6 {With the idea of placing the king\non g7, is much better. The point is that now the advance of the b-pawn doesn\'t\nhave the same effect as the king will not get opened. For example} 23. b4 Kg7\n24. b5 Rhf8 25. bxc6 bxc6 {And with the king on g7 instead of e7, the opening\nof the b-file and the position is far less relevant!}) 23. b4 $1 {A very\nstrong move, overlooked by Portisch. The pawn goes like a battering ram to b5\nin order to open up Black\'s queenside and lines leading to the enemy monarch.}\nRa8 {Trying to eliminate the pesky a-pawn.} ({The threat is now} 23... Z0 24.\nb5 Z0 25. bxc6 bxc6 {And now the king on e7 is sorely exposed, for example\nafter} 26. Re1+ Kd6 27. Qg3+ Kd7 28. Rb1 {With threats of Rb7 and Rb8 - Black\ncan\'t really survive here.}) (23... Nxb4 {Capturing the pawn on b4 is not a\nrelief as it opens up the b-file which White can exploit with} 24. Rb1 Rxd4 25.\nQg3 {When a3 and Qc7 are deadly threats and Black can\'t survive this - once\nagain due to the exposed nature of the king on e7.}) 24. Re1+ Kd6 25. b5 {\nThe point behind playing b4 earlier. Now this pawn is threatening to take on\nc6 or to land on b6, in either case with decisive effect.} Rxa7 {A final\nblunder in a lost position.} ({It was probably better to try to bring the\nother rook into the game, although now we can see another point behind the\nadvance of the pawn:} 25... Rhd8 26. b6 Nxb6 27. Rb1 {And when the b7 pawn\nfalls, White\'s position will be easily won.}) (25... cxb5 {Loses to} 26. Qe6+ {\nAs now also the defence of the knight is undermined.}) 26. Re6+ Kc7 27. Rxf6 {\n[%cal Rg4g7] And due to the threat of Qxg7, Portisch decided to resign. A\ntremendous attack and vintage Tal - initiative at all costs. I should probably\nadd that Tal went on to defeat Portisch convincingly in the quarter-final -\nthen also Larsen in the semi-final after finally losing to Spassky in the\nfinal match, thus confirming that his 1960 World Championship run was more\nthan just a fluke.} 1-0\n\n[Event "Alekhine Memorial"]\n[Site "Moscow URS"]\n[Date "1975.10.??"]\n[Round "8"]\n[White "Mikhail Tal"]\n[Black "Michael Francis Stean"]\n[Result "1-0"]\n[ECO "D34"]\n[Annotator "USER"]\n[PlyCount "61"]\n[EventDate "1975.??.??"]\n\n{In his later years, despite constantly battling with severe health problems,\nTal continued playing on a very high level. True, he never again really\nachieved notable success in the World Championship Cycle, but he was the\nregular participant in the elite tournaments and at some point even the holder\nof the longest undefeated streak of games (not something you would immediately\nassociate with his style). --- Every now and then, of course, he would stun\nthe chess world with one of his magical combinations - and I have decided to\nwrap up this article with two games from his "later" years. --- The first game\nwe are going to examine is his game against English Grandmaster Michael Stean\nplayed at the Alekhine Memorial in Moscow in 1975. It wasn\'t one of Tal\'s most\nsuccessful tournaments, but the following gem is arguably worth more than any\ntournament prize.} 1. Nf3 {A rare occurrence for Tal - opening with the Reti\nwas not something he did every day} Nf6 2. c4 c5 {But the game very quickly\ntransposes to the English opening...} 3. Nc3 e6 4. g3 d5 5. cxd5 exd5 6. d4 Nc6\n7. Bg2 Be7 8. O-O O-O 9. Bg5 {...and then to one of the main variations of the\nTarrasch Defence. This opening used to be very popular in the past (Kasparov\nfamously used it with great effect in his own path to the World Championship\nMatch), although nowadays it is not seen that often at the top level due to\nthe strategic risk the isolated pawn involves (and due to the fact more\nreliable neutralizing options are available at Black\'s disposal). --- Still,\nit is a very reputable opening and especially popular at club level, so it is\nnot a bad thing to see a game or two Model games in it if you are a 1.d4\nplayer.} cxd4 {To be honest, I always though this voluntary capture on d4 is\nsomewhat premature, but now I see it is the most commonly played move in this\nposition, so what do I exactly know.} 10. Nxd4 {Now we obtain a typical\nposition for the Tarrasch Defence, where Black has an isolated pawn but often\nobtains reasonable dynamic chances in return.} h6 11. Be3 Re8 12. Qb3 {This\nmove increases the pressure on the d5 pawn and basically forces Black\'s next\nmove. I am not 100% sure if it is beneficial to bring the knight closer to the\njuicy c4 square, even if this is the 2nd most common move in this position \n(have I mentioned I don\'t know that much at all about the Tarrasch Defence)?}\nNa5 13. Qc2 {[%cal Gc2f5] I guess one of the ideas behind having the queen on\nc2 is to be able to jump to f5 with the knight.} Bg4 {Another very typical\nTarrasch Defence move, pressuring the potentially weak e2 square and\nactivating the light -squared bishop.} 14. h3 {[%cal Rh3g4] Immediately posing\na question to the bishop.} Bd7 {The bishop is a bit passive here and it blocks\nthe queen\'s communication with the d5 pawn so it can be labeled as an\ninaccuracy.} (14... Bh5 {It was probably better to try and get the bishop on\ng6 to harrass the queen on c2, even if after} 15. g4 Bg6 16. Nf5 {It is not\nsuch an easy task to get rid of the knight for the moment. Still, the computer\ninsists the bishop will be more useful here in the long run - and it is also\nthe main move on the master level these days.}) 15. Rad1 {Bringing the pieces\nin play and planning to siege the isolated pawn.} Rc8 16. Nf5 Bf8 17. Bxd5 {\nFinally, the isolated pawn falls, but this is not the end of the world as\nBlack still has a lot of activity, potentially.} Re5 $2 {[%cal Re5f5,Re5d5]\nBut this move, naively hoping to win a piece by the means of a double attack,\nis a serious mistake as it overlooks a relatively basic tactic available at\nWhite\'s disposal.} 18. Nxh6+ {[%cal Ra2g8,Gc2g6] An "obvious" piece sacrifice,\nintending to use the pin on the a2-g8 diagonal to the maximum effect. Qg6 is\ncoming next.} gxh6 19. Qg6+ {[%cal Rg6f7,Rd5f7] The point of the combination\nwas to utilize the pin to infiltrate with the queen and collect the f7 pawn as\nwell.} Kh8 20. Bxf7 {Now h6 is also weak and Black should be dead lost,\nobjectively, although quite a few adventures lie in front of us.} Rc6 {[%cal\nGc6h6] Trying to cover the 6th rank laterally.} 21. Rd5 $2 {But this is a bit\ntoo flashy. Tal overlooks a very powerful defensive resources available to\nBlack in this position.} (21. Bxh6 {First of all, this simple capture on h6\nwas more than sufficient. After} Bxh6 22. Qxh6+ Nh7 23. Qf4 {White has four (!)\npawns for the piece, the pin on the d-file is annoying and the opponent\'s king\nis laid bare, so it is not at all surprising that White is completely winning.}\n) (21. Bf4 {This attack on the rook was a more sophisticated approach. The\nidea is to jump with the knight on d5 next after} Re7 22. Nd5 {When White has\na won position as the knight can\'t move - similarly as in the game.}) (21. Nd5\n{Jumping with the knight was also possible, but it doesn\'t come with the tempo\n(attack on the rook on d5).}) 21... Qe7 $2 {Returning the favour, although it\nis not surprising that Black goes wrong in such a complicated and dangerous\nposition. Also, it is very understandable that Black wanted to sidestep the\npotential pin on the d-file.} (21... Rxe3 {It was paramount to eliminate the\nstrong dark-squared bishop that will cause so much trouble in the actual game.\nAfter} 22. fxe3 Bg7 {Black is very solid and the outcome of the game will be\ncompletely unclear.}) (21... Re7 {Trying to remove the attacked rook on e5,\nwas also more resillient, although here the pin via} 22. Rfd1 {Is very strong\n- not to mention the hanging pawn on h6.}) (21... Nxd5 {The rook is, of course,\nimmune, due to the mating threat on g8.} 22. Qg8# {This motif will be the\ncentral tactical motif in the incoming tactical melee.}) 22. Bd4 {[%cal Rd4h8]\nNow everything is hanging on the long diagonal and Black doesn\'t have time to\nplace the bishop on g7 - the rook on e5 is hanging!} Nc4 {[%cal Gc4e5] Trying\ndesperately to reinforce the e5 point.} 23. f4 {A cold shower and the only\nclearly winning move.} Bg7 {Nothing else works - the rook can\'t move because\nof the previously seen mating threat on g8. Black is forced to give up the\nextra material and end up in a totally lost position.} 24. Bxe5 Nxe5 25. Rxe5\nQf8 26. Bb3 {Now White is an exchange and three pawns up, so the conversion\nisn\'t particularly difficult.} Ng4 27. Qd3 Nxe5 28. fxe5 {Okay, sorry, only\nthree pawns up as Black has just regained the exchange - but the outcome is\nnever in doubt all the same.} Qc5+ 29. Kh2 Be8 30. e6 Rd6 31. Qe4 {And here\nStean finally decided to throw in the towel. A powerful, very convincing\nvictory (despite the slight error on move 21 ) that was mainly the result of\nsuspicious opening play by his opponent.} 1-0\n\n[Event "Reykjavik"]\n[Site "Reykjavik ISL"]\n[Date "1987.02.20"]\n[Round "2"]\n[White "Mikhail Tal"]\n[Black "Johann Hjartarson"]\n[Result "1-0"]\n[ECO "C99"]\n[Annotator "USER"]\n[PlyCount "87"]\n[EventDate "1987.??.??"]\n\n{Last but not least, let\'s take a look at a famous and celebrated game that\nTal played in his later years. It was played in Reykjavik in 1987 and Tal\'s\nopponent was well-known Icelandic grandmaster Johann Hjartarson.} 1. e4 {\nBack to old loves in the old age?} e5 2. Nf3 Nc6 3. Bb5 {As Kasparov wrote\nsomewhere - "The ability to handle different structures that result from the\nRuy Lopez is what determins the class of a certain player". It is no wonder\nmost World Champions played the Ruy with at least one colour - and Tal was no\nexception.} a6 4. Ba4 Nf6 5. O-O Be7 6. Re1 b5 7. Bb3 O-O 8. c3 d6 9. h3 Na5 {\nThe Chigorin variation of the Closed Ruy Lopez is one of the oldest systems at\nBlack\'s disposal in this complex opening that has been played on all levels\nfor more than 100 years. These days, it is not the most frequent guest at the\nhighest level as there are other, more reliable systems available to Black,\nbut for average patzers like you and me, there is a very high probability we\nare going to encounter it sooner or later if we play 1.e4, 2.Nf3, 3.Bb5 and 4.\nBa4.} 10. Bc2 c5 11. d4 Qc7 12. Nbd2 {This is the old way of handling this\nvariation.} (12. d5 {These days, under the influence of the modern engines,\npeople have started realizing more and more that closing the center in all of\nthese closed systems of the Ruy Lopez is actually a very legitimate - maybe\neven the most critical - way of fighting for the opening advantage.}) 12... Bd7\n{One of the numerous possibilities at Black\'s disposal in this system.} 13. Nf1\ncxd4 14. cxd4 Rac8 15. Ne3 {[%cal Ge3c4,Ge3f5,Ge3d5,Ge3c2] The knight is very\nagile on e3, covering the important c4 square, defending the bishop on c2 and\npotentially eyeing the d5 and f5 squares.} Nc6 {A typical Chigorin maneuver.\nThe knight puts pressure on the d4 pawn and intends to go to b4 after White\ncloses the center, in order to harass the bishop on c2.} 16. d5 Nb4 17. Bb1 a5\n{[%csl Gc5][%cal Gb4a6,Gb5b4,Ga6c5] One of the ideas behind Black\'s setup is\nthis queenside expansion. They want to get the moves a5-b4 and then securely\nland the knight on c5.} 18. a3 Na6 19. b4 {A very nice tactical way of\npreventing Black from executing this plan. Remember this idea of playing b4 in\nthis type of structure as it happens very often in the Ruy.} g6 {This move is\na common idea in different Ruy Lopez structures. Sometimes, it leads to the\nfianchetto of the bishop via f8-g7 route, but sometimes the knight can also\nappear on this square.} (19... axb4 20. axb4 Nxb4 {Is bad as after} 21. Bd2 {\nIt transpires that the knight is actually trapped. A pattern worth knowing!})\n20. Bd2 {Now White obtains a very typical advantage in this type of variation\nbecause he has a big space advantage and the knight on a6 is completely out of\nthe game. However, Black\'s position is very sturdy and solid and it takes a\ngreat player to outmaneuver and outplay Black from a position as this.} axb4 {\nWhite was potentially threatening to take on a5, so Black avoids this option,\neven though it does open the a-file.} 21. axb4 Qb7 22. Bd3 {[%csl Rb5] Another\nfeature of this position is the weakness of the b5 pawn which White can\nutilize when maneuvering the pieces.} Nc7 {[%csl Gb5][%cal Gc7b5,Gc7e8,Ge8g7]\nAdding some protection to the b5 square and maybe - just maybe - hinting at\nthe potential Ne8-Ng7 route?} 23. Nc2 {The knight on e3 has finally done its\njob and now it moves out of the way to free the bishop on d2 to seek a more\npromising role.} Nh5 {[%cal Gh5f4,Gf7f5] Black has to create counterplay on\nthe kingside - either with the Nf4 knight jump or with the f5 pawn push.} 24.\nBe3 {White decides to ignore it and threaten Ra7 for now, although it is not\n100% clear whether the bishop is better placed on e3 or d2 (given that on e3\nit can be hit with the f-pawn). There are other alternatives, but the\ncharacter of the position remains the same nevertheless.} Ra8 25. Qd2 Rxa1 {\nIt is logical for Black to try and exchange some pieces when they have less\nspace.} 26. Nxa1 {An unconventional decision (how many of us would\nautomatically recapture with the rook)? But White wants to bring the knight to\nb3 square and then potentially eye the a5 or even the c5 square (spoiler alert)\n.} f5 {[%cal Gf5f4] Finally Black initiaties counterplay at the moment when\nour queen is locking the bishop and when f4 is actually a threat.} 27. Bh6 {\n[%cal Rh6f8] Placing the bishop outside of the chain and avoiding the threat.}\nNg7 $2 {But this move is actually very passive and totally misguided. The\nknight was very decent on h5 and it was absolutely not necessary to move it.\nHjartarson was maybe considering a kingside attack with f4 and so on, but this\nis a wrong idea in this position.} 28. Nb3 f4 {Closing down the position, in\nmy opinion, only helps White as now the counterplay on the kingside is not\nhappening any time soon and it is unrealistic to expect any sort of King\'s\nIndian pawn storm with g5-g4 given the current positioning of the pieces.} 29.\nNa5 Qb6 30. Rc1 Ra8 31. Qc2 {[%csl Rc6] White treis to increase the pressure\non the queenside and bring the pieces closer. The c6 square is looking quite\njuicy.} Nce8 32. Qb3 Bf6 33. Nc6 Nh5 {Now the knight arrives back - but where\nis it going now that the f4 square has been covered?} 34. Qb2 Bg7 {Maybe\nHjartarson was hoping to get the pawn chain going with g5-g4 and so on, but it\nis way too slow.} 35. Bxg7 Kxg7 {The culminating moment of this entire game!}\n36. Rc5 $3 {A wonderful move, that is not only spectacular, but also very\nstrong! The idea is very simple - either the pawn on b5 falls - or the pawn on\nd6 is diverted from the defence of the e5 pawn. One of those rare cases where\nTal\'s sacrifice was very positionally founded - and very correct :).} Qa6 (\n36... dxc5 {The rook can\'t be accepted as after} 37. Nfxe5 {A deadly\ndiscovered check is threatened, the bishop on d7 falls and the attack on\ndark-squares will rage. For example, after} (37. Ncxe5 {It is slightly more\nprecise to include the f-knight, although this capture also works, even though\nit allows} Qf6 {Here the prozaic} 38. bxc5 {Is sufficient, although it is\nclear that the other capture is even stronger.}) 37... Qa6 38. Nxd7+ Nhf6 {\nWhite can simply go for the endgame with} 39. Nxc5 Qa1+ 40. Qxa1 Rxa1+ 41. Kh2\n{As White has two pawns for the exchange already, the b5 pawn is falling and\nall White\'s pieces are perfectly placed, protecting e4,b4, d5 and so on.}) 37.\nRxb5 {And now the pawn falls and White obtains a strong passed b-pawn.} Nc7 $2\n{A final mistake in a lost position.} (37... Bxc6 {For better or for worse,\nBlack should have snatched on c6, although after} 38. dxc6 Qxc6 39. Ra5 {\nThe position remains lost - the b-pawn is too strong. But at least the game\ndoesn\'t end at once.}) 38. Rb8 {[%cal Rd3a6] Now White simplifies into a much\nmore winning endgame with the help of another very spectacular sacrifice.\nFirst, a simple discovered attack on the queen.} Qxd3 39. Ncxe5 {A tremendous\nblow at the most fortified point - once again utilizing the weakness of the\ndark-squares around the black king.} Qd1+ 40. Kh2 Ra1 {Threatening mate on the\nspot and at least forcing accuraccy to the very end.} (40... dxe5 {Leads to a\nmate by force after} 41. Qxe5+ Nf6 42. Qe7+ Kh6 {There is no way Black can\nsurvive here with such a king.} 43. Rxa8 Nxa8 44. Qf8+ Kh5 45. Qxf6) 41. Ng4+\nKf7 42. Nh6+ Ke7 43. Ng8+ {And here Hjartarson resigned not waiting for} Kf7\n44. Ng5# {Although he might have as well allowed mate here to honor Tal\'s\nbrilliant play. A fascinating game and one of the rare examples where Tal\'s\ncombinations had a strictly positional foundation. --- On the other hand,\napart from the splendid combination, I also found Tal\'s handling of a typical\nSpanish middlegame extremely instructive. We often admire his combinations and\ntend to forget he was also a very well-rounded player with above average\npositional understanding.} 1-0\n',zm='[Event "Puzzle 00008"]\n[Site "https://lichess.org/787zsVup/black#47"]\n[Date "????.??.??"]\n[Round "-"]\n[White "?"]\n[Black "?"]\n[Result "*"]\n[FEN "r6k/pp2r2p/4Rp1Q/3p4/8/1N1P2R1/PqP2bPP/7K b - - 0 24"]\n\n*',Um=["a","b","c","d","e","f","g","h"],Mm=["1","2","3","4","5","6","7","8"],Fm=["white","black"],Dm=["pawn","knight","bishop","rook","queen","king"],qm=["a","h"],Hm=e=>"role"in e,Wm=e=>void 0!==e,$m=e=>"white"===e?"black":"white",Km=e=>e>>3,Qm=e=>7&e,Gm=e=>{switch(e){case"pawn":return"p";case"knight":return"n";case"bishop":return"b";case"rook":return"r";case"queen":return"q";case"king":return"k"}};function Vm(e){switch(e.toLowerCase()){case"p":return"pawn";case"n":return"knight";case"b":return"bishop";case"r":return"rook";case"q":return"queen";case"k":return"king";default:return}}function Zm(e){if(2!==e.length)return;const t=e.charCodeAt(0)-"a".charCodeAt(0),n=e.charCodeAt(1)-"1".charCodeAt(0);return t<0||t>=8||n<0||n>=8?void 0:t+8*n}const Ym=e=>Um[Qm(e)]+Mm[Km(e)],Jm=e=>Hm(e)?`${Gm(e.role).toUpperCase()}@${Ym(e.to)}`:Ym(e.from)+Ym(e.to)+(e.promotion?Gm(e.promotion):""),Xm=(e,t)=>"white"===e?"a"===t?2:6:"a"===t?58:62,ey=(e,t)=>"white"===e?"a"===t?3:5:"a"===t?59:61;const ty=e=>ny[e],ny={flipTheBoard:"Flip the board",analysisBoard:"Analysis board",practiceWithComputer:"Practice with computer",getPgn:"Get PGN",download:"Download",viewOnLichess:"View on Lichess",viewOnSite:"View on site"},ry=["white","black"],oy=["a","b","c","d","e","f","g","h"],iy=["1","2","3","4","5","6","7","8"],ay=[...iy].reverse(),sy=Array.prototype.concat(...oy.map((e=>iy.map((t=>e+t))))),ly=e=>sy[8*e[0]+e[1]],cy=e=>[e.charCodeAt(0)-97,e.charCodeAt(1)-49],uy=sy.map(cy);const hy=()=>{let e;return{start(){e=performance.now()},cancel(){e=void 0},stop(){if(!e)return 0;const t=performance.now()-e;return e=void 0,t}}},dy=e=>"white"===e?"black":"white",fy=(e,t)=>{const n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r},py=(e,t)=>e.role===t.role&&e.color===t.color,gy=e=>(t,n)=>[(n?t[0]:7-t[0])*e.width/8,(n?7-t[1]:t[1])*e.height/8],my=(e,t)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px)`},yy=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;e.style.transform=`translate(${t[0]}px,${t[1]}px) scale(${n})`},by=(e,t)=>{e.style.visibility=t?"visible":"hidden"},vy=e=>{var t;return e.clientX||0===e.clientX?[e.clientX,e.clientY]:(null===(t=e.targetTouches)||void 0===t?void 0:t[0])?[e.targetTouches[0].clientX,e.targetTouches[0].clientY]:void 0},wy=e=>{var t;return 2===(2&(null!==(t=e.buttons)&&void 0!==t?t:0))},ky=(e,t)=>{const n=document.createElement(e);return t&&(n.className=t),n};function xy(e,t,n){const r=cy(e);return t||(r[0]=7-r[0],r[1]=7-r[1]),[n.left+n.width*r[0]/8+n.width/16,n.top+n.height*(7-r[1])/8+n.height/16]}class Ey{constructor(e){this.path=e,this.size=()=>this.path.length/2,this.head=()=>this.path.slice(0,2),this.tail=()=>new Ey(this.path.slice(2)),this.init=()=>new Ey(this.path.slice(0,-2)),this.last=()=>this.path.slice(-2),this.empty=()=>""==this.path,this.contains=e=>this.path.startsWith(e.path),this.isChildOf=e=>this.init()===e,this.append=e=>new Ey(this.path+e),this.equals=e=>this.path==e.path}}Ey.root=new Ey("");class _y{constructor(e,t,n,r){this.initial=e,this.moves=t,this.players=n,this.metadata=r,this.nodeAt=e=>Ny(this.moves,e),this.dataAt=e=>{const t=this.nodeAt(e);return t?Sy(t)?t.data:this.initial:void 0},this.title=()=>this.players.white.name?[this.players.white.title,this.players.white.name,"vs",this.players.black.title,this.players.black.name].filter((e=>e&&!!e.trim())).join("_").replace(" ","-"):"lichess-pgn-viewer",this.pathAtMainlinePly=e=>{var t;return 0==e?Ey.root:(null===(t=this.mainline[Math.max(0,Math.min(this.mainline.length-1,"last"==e?9999:e-1))])||void 0===t?void 0:t.path)||Ey.root},this.hasPlayerName=()=>{var e,t;return!(!(null===(e=this.players.white)||void 0===e?void 0:e.name)&&!(null===(t=this.players.black)||void 0===t?void 0:t.name))},this.mainline=Array.from(this.moves.mainline())}}const Ny=(e,t)=>{if(t.empty())return e;const n=((e,t)=>e.children.find((e=>e.data.path.last()==t)))(e,t.head());return n?Ny(n,t.tail()):void 0},Sy=e=>"data"in e;class Cy{unwrap(e,t){const n=this._chain((t=>Ty.ok(e?e(t):t)),(e=>t?Ty.ok(t(e)):Ty.err(e)));if(n.isErr)throw n.error;return n.value}map(e,t){return this._chain((t=>Ty.ok(e(t))),(e=>Ty.err(t?t(e):e)))}chain(e,t){return this._chain(e,t||(e=>Ty.err(e)))}}class Ay extends Cy{constructor(e){super(),this.value=void 0,this.isOk=!0,this.isErr=!1,this.value=e}_chain(e,t){return e(this.value)}}class Ry extends Cy{constructor(e){super(),this.error=void 0,this.isOk=!1,this.isErr=!0,this.error=e}_chain(e,t){return t(this.error)}}var Ty;!function(e){e.ok=function(e){return new Ay(e)},e.err=function(e){return new Ry(e||new Error)},e.all=function(t){if(Array.isArray(t)){const n=[];for(let e=0;e<t.length;e++){const r=t[e];if(r.isErr)return r;n.push(r.value)}return e.ok(n)}const n={},r=Object.keys(t);for(let e=0;e<r.length;e++){const o=t[r[e]];if(o.isErr)return o;n[r[e]]=o.value}return e.ok(n)}}(Ty||(Ty={}));const By=e=>(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459),Math.imul(e+(e>>>4)&252645135,16843009)>>24),jy=e=>(e=e>>>8&16711935|(16711935&e)<<8)>>>16&65535|(65535&e)<<16,Oy=e=>jy(e=(e=(e=e>>>1&1431655765|(1431655765&e)<<1)>>>2&858993459|(858993459&e)<<2)>>>4&252645135|(252645135&e)<<4);class Iy{constructor(e,t){this.lo=0|e,this.hi=0|t}static fromSquare(e){return e>=32?new Iy(0,1<<e-32):new Iy(1<<e,0)}static fromRank(e){return new Iy(255,0).shl64(8*e)}static fromFile(e){return new Iy(16843009<<e,16843009<<e)}static empty(){return new Iy(0,0)}static full(){return new Iy(4294967295,4294967295)}static corners(){return new Iy(129,2164260864)}static center(){return new Iy(402653184,24)}static backranks(){return new Iy(255,4278190080)}static backrank(e){return"white"===e?new Iy(255,0):new Iy(0,4278190080)}static lightSquares(){return new Iy(1437226410,1437226410)}static darkSquares(){return new Iy(2857740885,2857740885)}complement(){return new Iy(~this.lo,~this.hi)}xor(e){return new Iy(this.lo^e.lo,this.hi^e.hi)}union(e){return new Iy(this.lo|e.lo,this.hi|e.hi)}intersect(e){return new Iy(this.lo&e.lo,this.hi&e.hi)}diff(e){return new Iy(this.lo&~e.lo,this.hi&~e.hi)}intersects(e){return this.intersect(e).nonEmpty()}isDisjoint(e){return this.intersect(e).isEmpty()}supersetOf(e){return e.diff(this).isEmpty()}subsetOf(e){return this.diff(e).isEmpty()}shr64(e){return e>=64?Iy.empty():e>=32?new Iy(this.hi>>>e-32,0):e>0?new Iy(this.lo>>>e^this.hi<<32-e,this.hi>>>e):this}shl64(e){return e>=64?Iy.empty():e>=32?new Iy(0,this.lo<<e-32):e>0?new Iy(this.lo<<e,this.hi<<e^this.lo>>>32-e):this}bswap64(){return new Iy(jy(this.hi),jy(this.lo))}rbit64(){return new Iy(Oy(this.hi),Oy(this.lo))}minus64(e){const t=this.lo-e.lo,n=(t&e.lo&1)+(e.lo>>>1)+(t>>>1)>>>31;return new Iy(t,this.hi-(e.hi+n))}equals(e){return this.lo===e.lo&&this.hi===e.hi}size(){return By(this.lo)+By(this.hi)}isEmpty(){return 0===this.lo&&0===this.hi}nonEmpty(){return 0!==this.lo||0!==this.hi}has(e){return 0!==(e>=32?this.hi&1<<e-32:this.lo&1<<e)}set(e,t){return t?this.with(e):this.without(e)}with(e){return e>=32?new Iy(this.lo,this.hi|1<<e-32):new Iy(this.lo|1<<e,this.hi)}without(e){return e>=32?new Iy(this.lo,this.hi&~(1<<e-32)):new Iy(this.lo&~(1<<e),this.hi)}toggle(e){return e>=32?new Iy(this.lo,this.hi^1<<e-32):new Iy(this.lo^1<<e,this.hi)}last(){return 0!==this.hi?63-Math.clz32(this.hi):0!==this.lo?31-Math.clz32(this.lo):void 0}first(){return 0!==this.lo?31-Math.clz32(this.lo&-this.lo):0!==this.hi?63-Math.clz32(this.hi&-this.hi):void 0}withoutFirst(){return 0!==this.lo?new Iy(this.lo&this.lo-1,this.hi):new Iy(0,this.hi&this.hi-1)}moreThanOne(){return 0!==this.hi&&0!==this.lo||0!==(this.lo&this.lo-1)||0!==(this.hi&this.hi-1)}singleSquare(){return this.moreThanOne()?void 0:this.last()}*[Symbol.iterator](){let e=this.lo,t=this.hi;for(;0!==e;){const t=31-Math.clz32(e&-e);e^=1<<t,yield t}for(;0!==t;){const e=31-Math.clz32(t&-t);t^=1<<e,yield 32+e}}*reversed(){let e=this.lo,t=this.hi;for(;0!==t;){const e=31-Math.clz32(t);t^=1<<e,yield 32+e}for(;0!==e;){const t=31-Math.clz32(e);e^=1<<t,yield t}}}class Py{constructor(){}static default(){const e=new Py;return e.reset(),e}reset(){this.occupied=new Iy(65535,4294901760),this.promoted=Iy.empty(),this.white=new Iy(65535,0),this.black=new Iy(0,4294901760),this.pawn=new Iy(65280,16711680),this.knight=new Iy(66,1107296256),this.bishop=new Iy(36,603979776),this.rook=new Iy(129,2164260864),this.queen=new Iy(8,134217728),this.king=new Iy(16,268435456)}static empty(){const e=new Py;return e.clear(),e}clear(){this.occupied=Iy.empty(),this.promoted=Iy.empty();for(const e of Fm)this[e]=Iy.empty();for(const e of Dm)this[e]=Iy.empty()}clone(){const e=new Py;e.occupied=this.occupied,e.promoted=this.promoted;for(const t of Fm)e[t]=this[t];for(const t of Dm)e[t]=this[t];return e}getColor(e){return this.white.has(e)?"white":this.black.has(e)?"black":void 0}getRole(e){for(const t of Dm)if(this[t].has(e))return t}get(e){const t=this.getColor(e);if(!t)return;return{color:t,role:this.getRole(e),promoted:this.promoted.has(e)}}take(e){const t=this.get(e);return t&&(this.occupied=this.occupied.without(e),this[t.color]=this[t.color].without(e),this[t.role]=this[t.role].without(e),t.promoted&&(this.promoted=this.promoted.without(e))),t}set(e,t){const n=this.take(e);return this.occupied=this.occupied.with(e),this[t.color]=this[t.color].with(e),this[t.role]=this[t.role].with(e),t.promoted&&(this.promoted=this.promoted.with(e)),n}has(e){return this.occupied.has(e)}*[Symbol.iterator](){for(const e of this.occupied)yield[e,this.get(e)]}pieces(e,t){return this[e].intersect(this[t])}rooksAndQueens(){return this.rook.union(this.queen)}bishopsAndQueens(){return this.bishop.union(this.queen)}kingOf(e){return this.pieces(e,"king").singleSquare()}}class Ly{constructor(){}static empty(){const e=new Ly;for(const t of Dm)e[t]=0;return e}static fromBoard(e,t){const n=new Ly;for(const r of Dm)n[r]=e.pieces(t,r).size();return n}clone(){const e=new Ly;for(const t of Dm)e[t]=this[t];return e}equals(e){return Dm.every((t=>this[t]===e[t]))}add(e){const t=new Ly;for(const n of Dm)t[n]=this[n]+e[n];return t}nonEmpty(){return Dm.some((e=>this[e]>0))}isEmpty(){return!this.nonEmpty()}hasPawns(){return this.pawn>0}hasNonPawns(){return this.knight>0||this.bishop>0||this.rook>0||this.queen>0||this.king>0}size(){return this.pawn+this.knight+this.bishop+this.rook+this.queen+this.king}}class zy{constructor(e,t){this.white=e,this.black=t}static empty(){return new zy(Ly.empty(),Ly.empty())}static fromBoard(e){return new zy(Ly.fromBoard(e,"white"),Ly.fromBoard(e,"black"))}clone(){return new zy(this.white.clone(),this.black.clone())}equals(e){return this.white.equals(e.white)&&this.black.equals(e.black)}add(e){return new zy(this.white.add(e.white),this.black.add(e.black))}count(e){return this.white[e]+this.black[e]}size(){return this.white.size()+this.black.size()}isEmpty(){return this.white.isEmpty()&&this.black.isEmpty()}nonEmpty(){return!this.isEmpty()}hasPawns(){return this.white.hasPawns()||this.black.hasPawns()}hasNonPawns(){return this.white.hasNonPawns()||this.black.hasNonPawns()}}class Uy{constructor(e,t){this.white=e,this.black=t}static default(){return new Uy(3,3)}clone(){return new Uy(this.white,this.black)}equals(e){return this.white===e.white&&this.black===e.black}}var My;!function(e){e.Fen="ERR_FEN",e.Board="ERR_BOARD",e.Pockets="ERR_POCKETS",e.Turn="ERR_TURN",e.Castling="ERR_CASTLING",e.EpSquare="ERR_EP_SQUARE",e.RemainingChecks="ERR_REMAINING_CHECKS",e.Halfmoves="ERR_HALFMOVES",e.Fullmoves="ERR_FULLMOVES"}(My||(My={}));class Fy extends Error{}const Dy=e=>/^\d{1,4}$/.test(e)?parseInt(e,10):void 0,qy=e=>{const t=Vm(e);return t&&{role:t,color:e.toLowerCase()===e?"black":"white"}},Hy=e=>{const t=Py.empty();let n=7,r=0;for(let o=0;o<e.length;o++){const i=e[o];if("/"===i&&8===r)r=0,n--;else{const a=parseInt(i,10);if(a>0)r+=a;else{if(r>=8||n<0)return Ty.err(new Fy(My.Board));const a=r+8*n,s=qy(i);if(!s)return Ty.err(new Fy(My.Board));"~"===e[o+1]&&(s.promoted=!0,o++),t.set(a,s),r++}}}return 0!==n||8!==r?Ty.err(new Fy(My.Board)):Ty.ok(t)},Wy=e=>{if(e.length>64)return Ty.err(new Fy(My.Pockets));const t=zy.empty();for(const n of e){const e=qy(n);if(!e)return Ty.err(new Fy(My.Pockets));t[e.color][e.role]++}return Ty.ok(t)},$y=e=>{const t=e.split("+");if(3===t.length&&""===t[0]){const e=Dy(t[1]),n=Dy(t[2]);return!Wm(e)||e>3||!Wm(n)||n>3?Ty.err(new Fy(My.RemainingChecks)):Ty.ok(new Uy(3-e,3-n))}if(2===t.length){const e=Dy(t[0]),n=Dy(t[1]);return!Wm(e)||e>3||!Wm(n)||n>3?Ty.err(new Fy(My.RemainingChecks)):Ty.ok(new Uy(e,n))}return Ty.err(new Fy(My.RemainingChecks))},Ky=e=>{const t=e.split(/[\s_]+/),n=t.shift();let r,o,i=Ty.ok(void 0);if(n.endsWith("]")){const e=n.indexOf("[");if(-1===e)return Ty.err(new Fy(My.Fen));r=Hy(n.slice(0,e)),i=Wy(n.slice(e+1,-1))}else{const e=((e,t,n)=>{let r=e.indexOf(t);for(;n-- >0&&-1!==r;)r=e.indexOf(t,r+t.length);return r})(n,"/",7);-1===e?r=Hy(n):(r=Hy(n.slice(0,e)),i=Wy(n.slice(e+1)))}const a=t.shift();if(Wm(a)&&"w"!==a){if("b"!==a)return Ty.err(new Fy(My.Turn));o="black"}else o="white";return r.chain((e=>{const n=t.shift(),r=Wm(n)?((e,t)=>{let n=Iy.empty();if("-"===t)return Ty.ok(n);for(const r of t){const t=r.toLowerCase(),o=r===t?"black":"white",i=Iy.backrank(o).intersect(e[o]);let a;if("q"===t)a=i;else if("k"===t)a=i.reversed();else{if(!("a"<=t&&t<="h"))return Ty.err(new Fy(My.Castling));a=Iy.fromFile(t.charCodeAt(0)-"a".charCodeAt(0)).intersect(i)}for(const r of a){if(e.king.has(r))break;if(e.rook.has(r)){n=n.with(r);break}}}return Fm.some((e=>Iy.backrank(e).intersect(n).size()>2))?Ty.err(new Fy(My.Castling)):Ty.ok(n)})(e,n):Ty.ok(Iy.empty()),a=t.shift();let s;if(Wm(a)&&"-"!==a&&(s=Zm(a),!Wm(s)))return Ty.err(new Fy(My.EpSquare));let l,c=t.shift();Wm(c)&&c.includes("+")&&(l=$y(c),c=t.shift());const u=Wm(c)?Dy(c):0;if(!Wm(u))return Ty.err(new Fy(My.Halfmoves));const h=t.shift(),d=Wm(h)?Dy(h):1;if(!Wm(d))return Ty.err(new Fy(My.Fullmoves));const f=t.shift();let p=Ty.ok(void 0);if(Wm(f)){if(Wm(l))return Ty.err(new Fy(My.RemainingChecks));p=$y(f)}else Wm(l)&&(p=l);return t.length>0?Ty.err(new Fy(My.Fen)):i.chain((t=>r.chain((n=>p.map((r=>({board:e,pockets:t,turn:o,unmovedRooks:n,remainingChecks:r,epSquare:s,halfmoves:u,fullmoves:Math.max(1,d)})))))))}))},Qy=e=>{let t=Gm(e.role);return"white"===e.color&&(t=t.toUpperCase()),e.promoted&&(t+="~"),t},Gy=e=>{let t="",n=0;for(let r=7;r>=0;r--)for(let o=0;o<8;o++){const i=o+8*r,a=e.get(i);a?(n>0&&(t+=n,n=0),t+=Qy(a)):n++,7===o&&(n>0&&(t+=n,n=0),0!==r&&(t+="/"))}return t},Vy=e=>Dm.map((t=>Gm(t).repeat(e[t]))).join(""),Zy=(e,t)=>{let n="";for(const r of Fm){const o=Iy.backrank(r);let i=e.kingOf(r);Wm(i)&&!o.has(i)&&(i=void 0);const a=e.pieces(r,"rook").intersect(o);for(const e of t.intersect(a).reversed())if(e===a.first()&&Wm(i)&&e<i)n+="white"===r?"Q":"q";else if(e===a.last()&&Wm(i)&&i<e)n+="white"===r?"K":"k";else{const t=Um[Qm(e)];n+="white"===r?t.toUpperCase():t}}return n||"-"},Yy=(e,t)=>{return[Gy(e.board)+(e.pockets?`[${r=e.pockets,Vy(r.white).toUpperCase()+Vy(r.black)}]`:""),e.turn[0],Zy(e.board,e.unmovedRooks),Wm(e.epSquare)?Ym(e.epSquare):"-",...e.remainingChecks?[(n=e.remainingChecks,`${n.white}+${n.black}`)]:[],...(null===t||void 0===t?void 0:t.epd)?[]:[Math.max(0,Math.min(e.halfmoves,9999)),Math.max(1,Math.min(e.fullmoves,9999))]].join(" ");var n,r},Jy=(e,t)=>{let n=Iy.empty();for(const r of t){const t=e+r;0<=t&&t<64&&Math.abs(Qm(e)-Qm(t))<=2&&(n=n.with(t))}return n},Xy=e=>{const t=[];for(let n=0;n<64;n++)t[n]=e(n);return t},eb=Xy((e=>Jy(e,[-9,-8,-7,-1,1,7,8,9]))),tb=Xy((e=>Jy(e,[-17,-15,-10,-6,6,10,15,17]))),nb={white:Xy((e=>Jy(e,[7,9]))),black:Xy((e=>Jy(e,[-7,-9])))},rb=e=>eb[e],ob=e=>tb[e],ib=(e,t)=>nb[e][t],ab=Xy((e=>Iy.fromFile(Qm(e)).without(e))),sb=Xy((e=>Iy.fromRank(Km(e)).without(e))),lb=Xy((e=>{const t=new Iy(134480385,2151686160),n=8*(Km(e)-Qm(e));return(n>=0?t.shl64(n):t.shr64(-n)).without(e)})),cb=Xy((e=>{const t=new Iy(270549120,16909320),n=8*(Km(e)+Qm(e)-7);return(n>=0?t.shl64(n):t.shr64(-n)).without(e)})),ub=(e,t,n)=>{let r=n.intersect(t),o=r.bswap64();return r=r.minus64(e),o=o.minus64(e.bswap64()),r.xor(o.bswap64()).intersect(t)},hb=(e,t)=>{const n=Iy.fromSquare(e);return ub(n,lb[e],t).xor(ub(n,cb[e],t))},db=(e,t)=>((e,t)=>ub(Iy.fromSquare(e),ab[e],t))(e,t).xor(((e,t)=>{const n=sb[e];let r=t.intersect(n),o=r.rbit64();return r=r.minus64(Iy.fromSquare(e)),o=o.minus64(Iy.fromSquare(63-e)),r.xor(o.rbit64()).intersect(n)})(e,t)),fb=(e,t)=>hb(e,t).xor(db(e,t)),pb=(e,t,n)=>{switch(e.role){case"pawn":return ib(e.color,t);case"knight":return ob(t);case"bishop":return hb(t,n);case"rook":return db(t,n);case"queen":return fb(t,n);case"king":return rb(t)}},gb=(e,t)=>{const n=Iy.fromSquare(t);return sb[e].intersects(n)?sb[e].with(e):cb[e].intersects(n)?cb[e].with(e):lb[e].intersects(n)?lb[e].with(e):ab[e].intersects(n)?ab[e].with(e):Iy.empty()},mb=(e,t)=>gb(e,t).intersect(Iy.full().shl64(e).xor(Iy.full().shl64(t))).withoutFirst();var yb;!function(e){e.Empty="ERR_EMPTY",e.OppositeCheck="ERR_OPPOSITE_CHECK",e.ImpossibleCheck="ERR_IMPOSSIBLE_CHECK",e.PawnsOnBackrank="ERR_PAWNS_ON_BACKRANK",e.Kings="ERR_KINGS",e.Variant="ERR_VARIANT"}(yb||(yb={}));class bb extends Error{}class vb{constructor(){}static default(){const e=new vb;return e.unmovedRooks=Iy.corners(),e.rook={white:{a:0,h:7},black:{a:56,h:63}},e.path={white:{a:new Iy(14,0),h:new Iy(96,0)},black:{a:new Iy(0,234881024),h:new Iy(0,1610612736)}},e}static empty(){const e=new vb;return e.unmovedRooks=Iy.empty(),e.rook={white:{a:void 0,h:void 0},black:{a:void 0,h:void 0}},e.path={white:{a:Iy.empty(),h:Iy.empty()},black:{a:Iy.empty(),h:Iy.empty()}},e}clone(){const e=new vb;return e.unmovedRooks=this.unmovedRooks,e.rook={white:{a:this.rook.white.a,h:this.rook.white.h},black:{a:this.rook.black.a,h:this.rook.black.h}},e.path={white:{a:this.path.white.a,h:this.path.white.h},black:{a:this.path.black.a,h:this.path.black.h}},e}add(e,t,n,r){const o=Xm(e,t),i=ey(e,t);this.unmovedRooks=this.unmovedRooks.with(r),this.rook[e][t]=r,this.path[e][t]=mb(r,i).with(i).union(mb(n,o).with(o)).without(n).without(r)}static fromSetup(e){const t=vb.empty(),n=e.unmovedRooks.intersect(e.board.rook);for(const r of Fm){const o=Iy.backrank(r),i=e.board.kingOf(r);if(!Wm(i)||!o.has(i))continue;const a=n.intersect(e.board[r]).intersect(o),s=a.first();Wm(s)&&s<i&&t.add(r,"a",i,s);const l=a.last();Wm(l)&&i<l&&t.add(r,"h",i,l)}return t}discardRook(e){if(this.unmovedRooks.has(e)){this.unmovedRooks=this.unmovedRooks.without(e);for(const t of Fm)for(const n of qm)this.rook[t][n]===e&&(this.rook[t][n]=void 0)}}discardColor(e){this.unmovedRooks=this.unmovedRooks.diff(Iy.backrank(e)),this.rook[e].a=void 0,this.rook[e].h=void 0}}class wb{constructor(e){this.rules=e}reset(){this.board=Py.default(),this.pockets=void 0,this.turn="white",this.castles=vb.default(),this.epSquare=void 0,this.remainingChecks=void 0,this.halfmoves=0,this.fullmoves=1}setupUnchecked(e){this.board=e.board.clone(),this.board.promoted=Iy.empty(),this.pockets=void 0,this.turn=e.turn,this.castles=vb.fromSetup(e),this.epSquare=xb(this,e.epSquare),this.remainingChecks=void 0,this.halfmoves=e.halfmoves,this.fullmoves=e.fullmoves}kingAttackers(e,t,n){return((e,t,n,r)=>n[t].intersect(db(e,r).intersect(n.rooksAndQueens()).union(hb(e,r).intersect(n.bishopsAndQueens())).union(ob(e).intersect(n.knight)).union(rb(e).intersect(n.king)).union(ib($m(t),e).intersect(n.pawn))))(e,t,this.board,n)}playCaptureAt(e,t){this.halfmoves=0,"rook"===t.role&&this.castles.discardRook(e),this.pockets&&this.pockets[$m(t.color)][t.promoted?"pawn":t.role]++}ctx(){const e=this.isVariantEnd(),t=this.board.kingOf(this.turn);if(!Wm(t))return{king:t,blockers:Iy.empty(),checkers:Iy.empty(),variantEnd:e,mustCapture:!1};const n=db(t,Iy.empty()).intersect(this.board.rooksAndQueens()).union(hb(t,Iy.empty()).intersect(this.board.bishopsAndQueens())).intersect(this.board[$m(this.turn)]);let r=Iy.empty();for(const o of n){const e=mb(t,o).intersect(this.board.occupied);e.moreThanOne()||(r=r.union(e))}return{king:t,blockers:r,checkers:this.kingAttackers(t,$m(this.turn),this.board.occupied),variantEnd:e,mustCapture:!1}}clone(){var e,t;const n=new this.constructor;return n.board=this.board.clone(),n.pockets=null===(e=this.pockets)||void 0===e?void 0:e.clone(),n.turn=this.turn,n.castles=this.castles.clone(),n.epSquare=this.epSquare,n.remainingChecks=null===(t=this.remainingChecks)||void 0===t?void 0:t.clone(),n.halfmoves=this.halfmoves,n.fullmoves=this.fullmoves,n}validate(e){if(this.board.occupied.isEmpty())return Ty.err(new bb(yb.Empty));if(2!==this.board.king.size())return Ty.err(new bb(yb.Kings));if(!Wm(this.board.kingOf(this.turn)))return Ty.err(new bb(yb.Kings));const t=this.board.kingOf($m(this.turn));return Wm(t)?this.kingAttackers(t,this.turn,this.board.occupied).nonEmpty()?Ty.err(new bb(yb.OppositeCheck)):Iy.backranks().intersects(this.board.pawn)?Ty.err(new bb(yb.PawnsOnBackrank)):(null===e||void 0===e?void 0:e.ignoreImpossibleCheck)?Ty.ok(void 0):this.validateCheckers():Ty.err(new bb(yb.Kings))}validateCheckers(){const e=this.board.kingOf(this.turn);if(Wm(e)){const t=this.kingAttackers(e,$m(this.turn),this.board.occupied);if(t.nonEmpty())if(Wm(this.epSquare)){const n=8^this.epSquare,r=24^this.epSquare;if(t.moreThanOne()||t.first()!==n&&this.kingAttackers(e,$m(this.turn),this.board.occupied.without(n).with(r)).nonEmpty())return Ty.err(new bb(yb.ImpossibleCheck))}else if(t.size()>2||2===t.size()&&gb(t.first(),t.last()).has(e))return Ty.err(new bb(yb.ImpossibleCheck))}return Ty.ok(void 0)}dropDests(e){return Iy.empty()}dests(e,t){if((t=t||this.ctx()).variantEnd)return Iy.empty();const n=this.board.get(e);if(!n||n.color!==this.turn)return Iy.empty();let r,o;if("pawn"===n.role){r=ib(this.turn,e).intersect(this.board[$m(this.turn)]);const n="white"===this.turn?8:-8,i=e+n;if(0<=i&&i<64&&!this.board.occupied.has(i)){r=r.with(i);const t=i+n;("white"===this.turn?e<16:e>=48)&&!this.board.occupied.has(t)&&(r=r.with(t))}if(Wm(this.epSquare)&&_b(this,e,t)){const e=this.epSquare-n;(t.checkers.isEmpty()||t.checkers.singleSquare()===e)&&(o=Iy.fromSquare(this.epSquare))}}else r="bishop"===n.role?hb(e,this.board.occupied):"knight"===n.role?ob(e):"rook"===n.role?db(e,this.board.occupied):"queen"===n.role?fb(e,this.board.occupied):rb(e);if(r=r.diff(this.board[this.turn]),Wm(t.king)){if("king"===n.role){const n=this.board.occupied.without(e);for(const e of r)this.kingAttackers(e,$m(this.turn),n).nonEmpty()&&(r=r.without(e));return r.union(Nb(this,"a",t)).union(Nb(this,"h",t))}if(t.checkers.nonEmpty()){const e=t.checkers.singleSquare();if(!Wm(e))return Iy.empty();r=r.intersect(mb(e,t.king).with(e))}t.blockers.has(e)&&(r=r.intersect(gb(e,t.king)))}return o&&(r=r.union(o)),r}isVariantEnd(){return!1}variantOutcome(e){}hasInsufficientMaterial(e){if(this.board[e].intersect(this.board.pawn.union(this.board.rooksAndQueens())).nonEmpty())return!1;if(this.board[e].intersects(this.board.knight))return this.board[e].size()<=2&&this.board[$m(e)].diff(this.board.king).diff(this.board.queen).isEmpty();if(this.board[e].intersects(this.board.bishop)){return(!this.board.bishop.intersects(Iy.darkSquares())||!this.board.bishop.intersects(Iy.lightSquares()))&&this.board.pawn.isEmpty()&&this.board.knight.isEmpty()}return!0}toSetup(){var e,t;return{board:this.board.clone(),pockets:null===(e=this.pockets)||void 0===e?void 0:e.clone(),turn:this.turn,unmovedRooks:this.castles.unmovedRooks,epSquare:Eb(this),remainingChecks:null===(t=this.remainingChecks)||void 0===t?void 0:t.clone(),halfmoves:Math.min(this.halfmoves,150),fullmoves:Math.min(Math.max(this.fullmoves,1),9999)}}isInsufficientMaterial(){return Fm.every((e=>this.hasInsufficientMaterial(e)))}hasDests(e){e=e||this.ctx();for(const t of this.board[this.turn])if(this.dests(t,e).nonEmpty())return!0;return this.dropDests(e).nonEmpty()}isLegal(e,t){if(Hm(e))return!(!this.pockets||this.pockets[this.turn][e.role]<=0)&&(("pawn"!==e.role||!Iy.backranks().has(e.to))&&this.dropDests(t).has(e.to));{if("pawn"===e.promotion)return!1;if("king"===e.promotion&&"antichess"!==this.rules)return!1;if(!!e.promotion!==(this.board.pawn.has(e.from)&&Iy.backranks().has(e.to)))return!1;const n=this.dests(e.from,t);return n.has(e.to)||n.has(Ab(this,e).to)}}isCheck(){const e=this.board.kingOf(this.turn);return Wm(e)&&this.kingAttackers(e,$m(this.turn),this.board.occupied).nonEmpty()}isEnd(e){return!!(e?e.variantEnd:this.isVariantEnd())||(this.isInsufficientMaterial()||!this.hasDests(e))}isCheckmate(e){return!(e=e||this.ctx()).variantEnd&&e.checkers.nonEmpty()&&!this.hasDests(e)}isStalemate(e){return!(e=e||this.ctx()).variantEnd&&e.checkers.isEmpty()&&!this.hasDests(e)}outcome(e){const t=this.variantOutcome(e);return t||(e=e||this.ctx(),this.isCheckmate(e)?{winner:$m(this.turn)}:this.isInsufficientMaterial()||this.isStalemate(e)?{winner:void 0}:void 0)}allDests(e){e=e||this.ctx();const t=new Map;if(e.variantEnd)return t;for(const n of this.board[this.turn])t.set(n,this.dests(n,e));return t}play(e){const t=this.turn,n=this.epSquare,r=Cb(this,e);if(this.epSquare=void 0,this.halfmoves+=1,"black"===t&&(this.fullmoves+=1),this.turn=$m(t),Hm(e))this.board.set(e.to,{role:e.role,color:t}),this.pockets&&this.pockets[t][e.role]--,"pawn"===e.role&&(this.halfmoves=0);else{const o=this.board.take(e.from);if(!o)return;let i;if("pawn"===o.role){this.halfmoves=0,e.to===n&&(i=this.board.take(e.to+("white"===t?-8:8)));const r=e.from-e.to;16===Math.abs(r)&&8<=e.from&&e.from<=55&&(this.epSquare=e.from+e.to>>1),e.promotion&&(o.role=e.promotion,o.promoted=!!this.pockets)}else if("rook"===o.role)this.castles.discardRook(e.from);else if("king"===o.role){if(r){const e=this.castles.rook[t][r];if(Wm(e)){const n=this.board.take(e);this.board.set(Xm(t,r),o),n&&this.board.set(ey(t,r),n)}}this.castles.discardColor(t)}if(!r){const t=this.board.set(e.to,o)||i;t&&this.playCaptureAt(e.to,t)}}this.remainingChecks&&this.isCheck()&&(this.remainingChecks[t]=Math.max(this.remainingChecks[t]-1,0))}}class kb extends wb{constructor(){super("chess")}static default(){const e=new this;return e.reset(),e}static fromSetup(e,t){const n=new this;return n.setupUnchecked(e),n.validate(t).map((e=>n))}clone(){return super.clone()}}const xb=(e,t)=>{if(!Wm(t))return;const n="white"===e.turn?5:2,r="white"===e.turn?8:-8;if(Km(t)!==n)return;if(e.board.occupied.has(t+r))return;const o=t-r;return e.board.pawn.has(o)&&e.board[$m(e.turn)].has(o)?t:void 0},Eb=e=>{if(!Wm(e.epSquare))return;const t=e.ctx(),n=e.board.pieces(e.turn,"pawn").intersect(ib($m(e.turn),e.epSquare));for(const r of n)if(e.dests(r,t).has(e.epSquare))return e.epSquare},_b=(e,t,n)=>{if(!Wm(e.epSquare))return!1;if(!ib(e.turn,t).has(e.epSquare))return!1;if(!Wm(n.king))return!0;const r=e.epSquare+("white"===e.turn?-8:8),o=e.board.occupied.toggle(t).toggle(e.epSquare).toggle(r);return!e.kingAttackers(n.king,$m(e.turn),o).intersects(o)},Nb=(e,t,n)=>{if(!Wm(n.king)||n.checkers.nonEmpty())return Iy.empty();const r=e.castles.rook[e.turn][t];if(!Wm(r))return Iy.empty();if(e.castles.path[e.turn][t].intersects(e.board.occupied))return Iy.empty();const o=Xm(e.turn,t),i=mb(n.king,o),a=e.board.occupied.without(n.king);for(const c of i)if(e.kingAttackers(c,$m(e.turn),a).nonEmpty())return Iy.empty();const s=ey(e.turn,t),l=e.board.occupied.toggle(n.king).toggle(r).toggle(s);return e.kingAttackers(o,$m(e.turn),l).nonEmpty()?Iy.empty():Iy.fromSquare(r)},Sb=(e,t,n)=>{if(n.variantEnd)return Iy.empty();const r=e.board.get(t);if(!r||r.color!==e.turn)return Iy.empty();let o=pb(r,t,e.board.occupied);if("pawn"===r.role){let n=e.board[$m(e.turn)];Wm(e.epSquare)&&(n=n.with(e.epSquare)),o=o.intersect(n);const r="white"===e.turn?8:-8,i=t+r;if(0<=i&&i<64&&!e.board.occupied.has(i)){o=o.with(i);const n=i+r;("white"===e.turn?t<16:t>=48)&&!e.board.occupied.has(n)&&(o=o.with(n))}return o}return o=o.diff(e.board[e.turn]),t===n.king?o.union(Nb(e,"a",n)).union(Nb(e,"h",n)):o},Cb=(e,t)=>{if(Hm(t))return;const n=t.to-t.from;return(2===Math.abs(n)||e.board[e.turn].has(t.to))&&e.board.king.has(t.from)?n>0?"h":"a":void 0},Ab=(e,t)=>{const n=Cb(e,t);if(!n)return t;const r=e.castles.rook[e.turn][n];return{from:t.from,to:Wm(r)?r:t.to}};class Rb extends wb{constructor(){super("crazyhouse")}reset(){super.reset(),this.pockets=zy.empty()}setupUnchecked(e){super.setupUnchecked(e),this.board.promoted=e.board.promoted.intersect(e.board.occupied).diff(e.board.king).diff(e.board.pawn),this.pockets=e.pockets?e.pockets.clone():zy.empty()}static default(){const e=new this;return e.reset(),e}static fromSetup(e,t){const n=new this;return n.setupUnchecked(e),n.validate(t).map((e=>n))}clone(){return super.clone()}validate(e){return super.validate(e).chain((e=>{var t,n;return(null===(t=this.pockets)||void 0===t?void 0:t.count("king"))?Ty.err(new bb(yb.Kings)):((null===(n=this.pockets)||void 0===n?void 0:n.size())||0)+this.board.occupied.size()>64?Ty.err(new bb(yb.Variant)):Ty.ok(void 0)}))}hasInsufficientMaterial(e){return this.pockets?this.board.occupied.size()+this.pockets.size()<=3&&this.board.pawn.isEmpty()&&this.board.promoted.isEmpty()&&this.board.rooksAndQueens().isEmpty()&&this.pockets.count("pawn")<=0&&this.pockets.count("rook")<=0&&this.pockets.count("queen")<=0:super.hasInsufficientMaterial(e)}dropDests(e){var t,n;const r=this.board.occupied.complement().intersect((null===(t=this.pockets)||void 0===t?void 0:t[this.turn].hasNonPawns())?Iy.full():(null===(n=this.pockets)||void 0===n?void 0:n[this.turn].hasPawns())?Iy.backranks().complement():Iy.empty());if(e=e||this.ctx(),Wm(e.king)&&e.checkers.nonEmpty()){const t=e.checkers.singleSquare();return Wm(t)?r.intersect(mb(t,e.king)):Iy.empty()}return r}}class Tb extends wb{constructor(){super("atomic")}static default(){const e=new this;return e.reset(),e}static fromSetup(e,t){const n=new this;return n.setupUnchecked(e),n.validate(t).map((e=>n))}clone(){return super.clone()}validate(e){if(this.board.occupied.isEmpty())return Ty.err(new bb(yb.Empty));if(this.board.king.size()>2)return Ty.err(new bb(yb.Kings));const t=this.board.kingOf($m(this.turn));return Wm(t)?this.kingAttackers(t,this.turn,this.board.occupied).nonEmpty()?Ty.err(new bb(yb.OppositeCheck)):Iy.backranks().intersects(this.board.pawn)?Ty.err(new bb(yb.PawnsOnBackrank)):(null===e||void 0===e?void 0:e.ignoreImpossibleCheck)?Ty.ok(void 0):this.validateCheckers():Ty.err(new bb(yb.Kings))}validateCheckers(){return Wm(this.epSquare)?Ty.ok(void 0):super.validateCheckers()}kingAttackers(e,t,n){const r=this.board.pieces(t,"king");return r.isEmpty()||rb(e).intersects(r)?Iy.empty():super.kingAttackers(e,t,n)}playCaptureAt(e,t){super.playCaptureAt(e,t),this.board.take(e);for(const n of rb(e).intersect(this.board.occupied).diff(this.board.pawn)){const e=this.board.take(n);"rook"===(null===e||void 0===e?void 0:e.role)&&this.castles.discardRook(n),"king"===(null===e||void 0===e?void 0:e.role)&&this.castles.discardColor(e.color)}}hasInsufficientMaterial(e){if(this.board.pieces($m(e),"king").isEmpty())return!1;if(this.board[e].diff(this.board.king).isEmpty())return!0;if(this.board[$m(e)].diff(this.board.king).nonEmpty()){if(this.board.occupied.equals(this.board.bishop.union(this.board.king))){if(!this.board.bishop.intersect(this.board.white).intersects(Iy.darkSquares()))return!this.board.bishop.intersect(this.board.black).intersects(Iy.lightSquares());if(!this.board.bishop.intersect(this.board.white).intersects(Iy.lightSquares()))return!this.board.bishop.intersect(this.board.black).intersects(Iy.darkSquares())}return!1}return!this.board.queen.nonEmpty()&&!this.board.pawn.nonEmpty()&&(1===this.board.knight.union(this.board.bishop).union(this.board.rook).size()||!!this.board.occupied.equals(this.board.knight.union(this.board.king))&&this.board.knight.size()<=2)}dests(e,t){t=t||this.ctx();let n=Iy.empty();for(const r of Sb(this,e,t)){const t=this.clone();t.play({from:e,to:r});const o=t.board.kingOf(this.turn);!Wm(o)||Wm(t.board.kingOf(t.turn))&&!t.kingAttackers(o,t.turn,t.board.occupied).isEmpty()||(n=n.with(r))}return n}isVariantEnd(){return!!this.variantOutcome()}variantOutcome(e){for(const t of Fm)if(this.board.pieces(t,"king").isEmpty())return{winner:$m(t)}}}class Bb extends wb{constructor(){super("antichess")}reset(){super.reset(),this.castles=vb.empty()}setupUnchecked(e){super.setupUnchecked(e),this.castles=vb.empty()}static default(){const e=new this;return e.reset(),e}static fromSetup(e,t){const n=new this;return n.setupUnchecked(e),n.validate(t).map((e=>n))}clone(){return super.clone()}validate(e){return this.board.occupied.isEmpty()?Ty.err(new bb(yb.Empty)):Iy.backranks().intersects(this.board.pawn)?Ty.err(new bb(yb.PawnsOnBackrank)):Ty.ok(void 0)}kingAttackers(e,t,n){return Iy.empty()}ctx(){const e=super.ctx();if(Wm(this.epSquare)&&ib($m(this.turn),this.epSquare).intersects(this.board.pieces(this.turn,"pawn")))return e.mustCapture=!0,e;const t=this.board[$m(this.turn)];for(const n of this.board[this.turn])if(Sb(this,n,e).intersects(t))return e.mustCapture=!0,e;return e}dests(e,t){t=t||this.ctx();const n=Sb(this,e,t),r=this.board[$m(this.turn)];return n.intersect(t.mustCapture?Wm(this.epSquare)&&"pawn"===this.board.getRole(e)?r.with(this.epSquare):r:Iy.full())}hasInsufficientMaterial(e){if(this.board[e].isEmpty())return!1;if(this.board[$m(e)].isEmpty())return!0;if(this.board.occupied.equals(this.board.bishop)){const t=this.board[e].intersects(Iy.lightSquares()),n=this.board[e].intersects(Iy.darkSquares()),r=this.board[$m(e)].isDisjoint(Iy.lightSquares()),o=this.board[$m(e)].isDisjoint(Iy.darkSquares());return t&&r||n&&o}return!(!this.board.occupied.equals(this.board.knight)||2!==this.board.occupied.size())&&this.board.white.intersects(Iy.lightSquares())!==this.board.black.intersects(Iy.darkSquares())!==(this.turn===e)}isVariantEnd(){return this.board[this.turn].isEmpty()}variantOutcome(e){if((e=e||this.ctx()).variantEnd||this.isStalemate(e))return{winner:this.turn}}}class jb extends wb{constructor(){super("kingofthehill")}static default(){const e=new this;return e.reset(),e}static fromSetup(e,t){const n=new this;return n.setupUnchecked(e),n.validate(t).map((e=>n))}clone(){return super.clone()}hasInsufficientMaterial(e){return!1}isVariantEnd(){return this.board.king.intersects(Iy.center())}variantOutcome(e){for(const t of Fm)if(this.board.pieces(t,"king").intersects(Iy.center()))return{winner:t}}}class Ob extends wb{constructor(){super("3check")}reset(){super.reset(),this.remainingChecks=Uy.default()}setupUnchecked(e){var t;super.setupUnchecked(e),this.remainingChecks=(null===(t=e.remainingChecks)||void 0===t?void 0:t.clone())||Uy.default()}static default(){const e=new this;return e.reset(),e}static fromSetup(e,t){const n=new this;return n.setupUnchecked(e),n.validate(t).map((e=>n))}clone(){return super.clone()}hasInsufficientMaterial(e){return this.board.pieces(e,"king").equals(this.board[e])}isVariantEnd(){return!!this.remainingChecks&&(this.remainingChecks.white<=0||this.remainingChecks.black<=0)}variantOutcome(e){if(this.remainingChecks)for(const t of Fm)if(this.remainingChecks[t]<=0)return{winner:t}}}class Ib extends wb{constructor(){super("racingkings")}reset(){this.board=(()=>{const e=Py.empty();return e.occupied=new Iy(65535,0),e.promoted=Iy.empty(),e.white=new Iy(61680,0),e.black=new Iy(3855,0),e.pawn=Iy.empty(),e.knight=new Iy(6168,0),e.bishop=new Iy(9252,0),e.rook=new Iy(16962,0),e.queen=new Iy(129,0),e.king=new Iy(33024,0),e})(),this.pockets=void 0,this.turn="white",this.castles=vb.empty(),this.epSquare=void 0,this.remainingChecks=void 0,this.halfmoves=0,this.fullmoves=1}setupUnchecked(e){super.setupUnchecked(e),this.castles=vb.empty()}static default(){const e=new this;return e.reset(),e}static fromSetup(e,t){const n=new this;return n.setupUnchecked(e),n.validate(t).map((e=>n))}clone(){return super.clone()}validate(e){return this.isCheck()||this.board.pawn.nonEmpty()?Ty.err(new bb(yb.Variant)):super.validate(e)}dests(e,t){if(e===(t=t||this.ctx()).king)return super.dests(e,t);let n=Iy.empty();for(const r of super.dests(e,t)){const t={from:e,to:r},o=this.clone();o.play(t),o.isCheck()||(n=n.with(r))}return n}hasInsufficientMaterial(e){return!1}isVariantEnd(){const e=Iy.fromRank(7),t=this.board.king.intersect(e);if(t.isEmpty())return!1;if("white"===this.turn||t.intersects(this.board.black))return!0;const n=this.board.kingOf("black");if(Wm(n)){const t=this.board.occupied.without(n);for(const r of rb(n).intersect(e).diff(this.board.black))if(this.kingAttackers(r,"white",t).isEmpty())return!1}return!0}variantOutcome(e){if(e?!e.variantEnd:!this.isVariantEnd())return;const t=Iy.fromRank(7),n=this.board.pieces("black","king").intersects(t),r=this.board.pieces("white","king").intersects(t);return n&&!r?{winner:"black"}:r&&!n?{winner:"white"}:{winner:void 0}}}class Pb extends wb{constructor(){super("horde")}reset(){this.board=(()=>{const e=Py.empty();return e.occupied=new Iy(4294967295,4294901862),e.promoted=Iy.empty(),e.white=new Iy(4294967295,102),e.black=new Iy(0,4294901760),e.pawn=new Iy(4294967295,16711782),e.knight=new Iy(0,1107296256),e.bishop=new Iy(0,603979776),e.rook=new Iy(0,2164260864),e.queen=new Iy(0,134217728),e.king=new Iy(0,268435456),e})(),this.pockets=void 0,this.turn="white",this.castles=vb.default(),this.castles.discardColor("white"),this.epSquare=void 0,this.remainingChecks=void 0,this.halfmoves=0,this.fullmoves=1}static default(){const e=new this;return e.reset(),e}static fromSetup(e,t){const n=new this;return n.setupUnchecked(e),n.validate(t).map((e=>n))}clone(){return super.clone()}validate(e){if(this.board.occupied.isEmpty())return Ty.err(new bb(yb.Empty));if(1!==this.board.king.size())return Ty.err(new bb(yb.Kings));const t=this.board.kingOf($m(this.turn));if(Wm(t)&&this.kingAttackers(t,this.turn,this.board.occupied).nonEmpty())return Ty.err(new bb(yb.OppositeCheck));for(const n of Fm){const e=this.board.pieces(n,"king").isEmpty()?Iy.backrank($m(n)):Iy.backranks();if(this.board.pieces(n,"pawn").intersects(e))return Ty.err(new bb(yb.PawnsOnBackrank))}return(null===e||void 0===e?void 0:e.ignoreImpossibleCheck)?Ty.ok(void 0):this.validateCheckers()}hasInsufficientMaterial(e){if(this.board.pieces(e,"king").nonEmpty())return!1;const t=e=>"light"===e?"dark":"light",n=e=>"light"===e?Iy.lightSquares():Iy.darkSquares(),r=e=>{const t=this.board.pieces(e,"bishop");return t.intersects(Iy.darkSquares())&&t.intersects(Iy.lightSquares())},o=Ly.fromBoard(this.board,e),i=t=>n(t).intersect(this.board.pieces(e,"bishop")).size(),a=i("light")>=1?"light":"dark",s=o.pawn+o.knight+o.rook+o.queen+Math.min(i("dark"),2)+Math.min(i("light"),2),l=Ly.fromBoard(this.board,$m(e)),c=t=>n(t).intersect(this.board.pieces($m(e),"bishop")).size(),u=l.size(),h=e=>u-e;if(0===s)return!0;if(s>=4)return!1;if((o.pawn>=1||o.queen>=1)&&s>=2)return!1;if(o.rook>=1&&s>=2&&(2!==s||1!==o.rook||1!==o.bishop||1!==h(c(a))))return!1;if(1===s){if(1===u)return!0;if(1===o.queen)return!(l.pawn>=1||l.rook>=1||c("light")>=2||c("dark")>=2);if(1===o.pawn){const t=this.board.pieces(e,"pawn").last(),n=this.clone();n.board.set(t,{color:e,role:"queen"});const r=this.clone();return r.board.set(t,{color:e,role:"knight"}),n.hasInsufficientMaterial(e)&&r.hasInsufficientMaterial(e)}if(1===o.rook)return!(l.pawn>=2||l.rook>=1&&l.pawn>=1||l.rook>=1&&l.knight>=1||l.pawn>=1&&l.knight>=1);if(1===o.bishop)return!(c(t(a))>=2||c(t(a))>=1&&l.pawn>=1||l.pawn>=2);if(1===o.knight)return!(u>=4&&(l.knight>=2||l.pawn>=2||l.rook>=1&&l.knight>=1||l.rook>=1&&l.bishop>=1||l.knight>=1&&l.bishop>=1||l.rook>=1&&l.pawn>=1||l.knight>=1&&l.pawn>=1||l.bishop>=1&&l.pawn>=1||r($m(e))&&l.pawn>=1)&&(c("dark")<2||h(c("dark"))>=3)&&(c("light")<2||h(c("light"))>=3))}else{if(2===s)return 1===u||(2===o.knight?l.pawn+l.bishop+l.knight<1:r(e)?!(l.pawn>=1||l.bishop>=1||l.knight>=1&&l.rook+l.queen>=1):o.bishop>=1&&o.knight>=1?!(l.pawn>=1||c(t(a))>=1||h(c(a))>=3):!(l.pawn>=1&&c(t(a))>=1||l.pawn>=1&&l.knight>=1||c(t(a))>=1&&l.knight>=1||c(t(a))>=2||l.knight>=2||l.pawn>=2));if(3===s)return!(2===o.knight&&1===o.bishop||3===o.knight||r(e))&&1===u}return!0}isVariantEnd(){return this.board.white.isEmpty()||this.board.black.isEmpty()}variantOutcome(e){return this.board.white.isEmpty()?{winner:"black"}:this.board.black.isEmpty()?{winner:"white"}:void 0}}class Lb{constructor(){this.children=[]}*mainline(){let e=this;for(;e.children.length;){const t=e.children[0];yield t.data,e=t}}}class zb extends Lb{constructor(e){super(),this.data=e}}const Ub=()=>new Map([["Event","?"],["Site","?"],["Date","????.??.??"],["Round","?"],["White","?"],["Black","?"],["Result","*"]]),Mb=e=>/^\s*$/.test(e),Fb=e=>e.startsWith("%");class Db extends Error{}class qb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ub,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e6;this.emitGame=e,this.initHeaders=t,this.maxBudget=n,this.lineBuf=[],this.resetGame(),this.state=0}resetGame(){this.budget=this.maxBudget,this.found=!1,this.state=1,this.game=function(){return{headers:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ub)(),moves:new Lb}}(this.initHeaders),this.stack=[{parent:this.game.moves,root:!0}],this.commentBuf=[]}consumeBudget(e){if(this.budget-=e,this.budget<0)throw new Db("ERR_PGN_BUDGET")}parse(e,t){if(!(this.budget<0))try{let n=0;for(;;){const t=e.indexOf("\n",n);if(-1===t)break;const r=t>n&&"\r"===e[t-1]?t-1:t;this.consumeBudget(t-n),this.lineBuf.push(e.slice(n,r)),n=t+1,this.handleLine()}this.consumeBudget(e.length-n),this.lineBuf.push(e.slice(n)),(null===t||void 0===t?void 0:t.stream)||(this.handleLine(),this.emit(void 0))}catch(n){this.emit(n)}}handleLine(){let e=!0,t=this.lineBuf.join("");this.lineBuf=[];e:for(;;)switch(this.state){case 0:t.startsWith("\ufeff")&&(t=t.slice(1)),this.state=1;case 1:if(Mb(t)||Fb(t))return;this.found=!0,this.state=2;case 2:{if(Fb(t))return;let n=!0;for(;n;)n=!1,t=t.replace(/^\s*\[([A-Za-z0-9][A-Za-z0-9_+#=:-]*)\s+"((?:[^"\\]|\\"|\\\\)*)"\]/,((t,r,o)=>(this.consumeBudget(200),this.game.headers.set(r,o.replace(/\\"/g,'"').replace(/\\\\/g,"\\")),n=!0,e=!1,"")));if(Mb(t))return;this.state=3}case 3:{if(e){if(Fb(t))return;if(Mb(t))return this.emit(void 0)}const n=/(?:[NBKRQ]?[a-h]?[1-8]?[-x]?[a-h][1-8](?:=?[nbrqkNBRQK])?|[pnbrqkPNBRQK]?@[a-h][1-8]|O-O-O|0-0-0|O-O|0-0)[+#]?|--|Z0|0000|@@@@|{|;|\$\d{1,4}|[?!]{1,2}|\(|\)|\*|1-0|0-1|1\/2-1\/2/g;let r;for(;r=n.exec(t);){const e=this.stack[this.stack.length-1];let o=r[0];if(";"===o)return;if(o.startsWith("$"))this.handleNag(parseInt(o.slice(1),10));else if("!"===o)this.handleNag(1);else if("?"===o)this.handleNag(2);else if("!!"===o)this.handleNag(3);else if("??"===o)this.handleNag(4);else if("!?"===o)this.handleNag(5);else if("?!"===o)this.handleNag(6);else if("1-0"===o||"0-1"===o||"1/2-1/2"===o||"*"===o)1===this.stack.length&&"*"!==o&&this.game.headers.set("Result",o);else if("("===o)this.consumeBudget(100),this.stack.push({parent:e.parent,root:!1});else if(")"===o)this.stack.length>1&&this.stack.pop();else{if("{"===o){const e=n.lastIndex,r=" "===t[e]?e+1:e;t=t.slice(r),this.state=4;continue e}this.consumeBudget(100),"Z0"===o||"0000"===o||"@@@@"===o?o="--":o.startsWith("0")&&(o=o.replace(/0/g,"O")),e.node&&(e.parent=e.node),e.node=new zb({san:o,startingComments:e.startingComments}),e.startingComments=void 0,e.root=!1,e.parent.children.push(e.node)}}return}case 4:{const n=t.indexOf("}");if(-1===n)return void this.commentBuf.push(t);{const r=n>0&&" "===t[n-1]?n-1:n;this.commentBuf.push(t.slice(0,r)),this.handleComment(),t=t.slice(n),this.state=3,e=!1}}}}handleNag(e){var t;this.consumeBudget(50);const n=this.stack[this.stack.length-1];n.node&&((t=n.node.data).nags||(t.nags=[]),n.node.data.nags.push(e))}handleComment(){var e,t;this.consumeBudget(100);const n=this.stack[this.stack.length-1],r=this.commentBuf.join("\n");this.commentBuf=[],n.node?((e=n.node.data).comments||(e.comments=[]),n.node.data.comments.push(r)):n.root?((t=this.game).comments||(t.comments=[]),this.game.comments.push(r)):(n.startingComments||(n.startingComments=[]),n.startingComments.push(r))}emit(e){if(4===this.state&&this.handleComment(),e)return this.emitGame(this.game,e);this.found&&this.emitGame(this.game,void 0),this.resetGame()}}const Hb=function(e){const t=[];return new qb((e=>t.push(e)),arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ub,NaN).parse(e),t},Wb=(e,t)=>{const n=(e=>{switch((e||"chess").toLowerCase()){case"chess":case"chess960":case"chess 960":case"standard":case"from position":case"classical":case"normal":case"fischerandom":case"fischerrandom":case"fischer random":case"wild/0":case"wild/1":case"wild/2":case"wild/3":case"wild/4":case"wild/5":case"wild/6":case"wild/7":case"wild/8":case"wild/8a":return"chess";case"crazyhouse":case"crazy house":case"house":case"zh":return"crazyhouse";case"king of the hill":case"koth":case"kingofthehill":return"kingofthehill";case"three-check":case"three check":case"threecheck":case"three check chess":case"3-check":case"3 check":case"3check":return"3check";case"antichess":case"anti chess":case"anti":return"antichess";case"atomic":case"atom":case"atomic chess":return"atomic";case"horde":case"horde chess":return"horde";case"racing kings":case"racingkings":case"racing":case"race":return"racingkings";default:return}})(e.get("Variant"));if(!n)return Ty.err(new bb(yb.Variant));const r=e.get("FEN");return r?Ky(r).chain((e=>((e,t,n)=>{switch(e){case"chess":return kb.fromSetup(t,n);case"antichess":return Bb.fromSetup(t,n);case"atomic":return Tb.fromSetup(t,n);case"horde":return Pb.fromSetup(t,n);case"racingkings":return Ib.fromSetup(t,n);case"kingofthehill":return jb.fromSetup(t,n);case"3check":return Ob.fromSetup(t,n);case"crazyhouse":return Rb.fromSetup(t,n)}})(n,e,t))):Ty.ok((e=>{switch(e){case"chess":return kb.default();case"antichess":return Bb.default();case"atomic":return Tb.default();case"horde":return Pb.default();case"racingkings":return Ib.default();case"kingofthehill":return jb.default();case"3check":return Ob.default();case"crazyhouse":return Rb.default()}})(n))};const $b=e=>{const t=function(e){switch(e){case"G":return"green";case"R":return"red";case"Y":return"yellow";case"B":return"blue";default:return}}(e.slice(0,1)),n=Zm(e.slice(1,3)),r=Zm(e.slice(3,5));if(t&&Wm(n))return 3===e.length?{color:t,from:n,to:n}:5===e.length&&Wm(r)?{color:t,from:n,to:r}:void 0},Kb=e=>{let t,n,r;const o=[];return{text:e.replace(/\s?\[%(emt|clk)\s(\d{1,5}):(\d{1,2}):(\d{1,2}(?:\.\d{0,3})?)\]\s?/g,((e,r,o,i,a)=>{const s=3600*parseInt(o,10)+60*parseInt(i,10)+parseFloat(a);return"emt"===r?t=s:"clk"===r&&(n=s),"  "})).replace(/\s?\[%(?:csl|cal)\s([RGYB][a-h][1-8](?:[a-h][1-8])?(?:,[RGYB][a-h][1-8](?:[a-h][1-8])?)*)\]\s?/g,((e,t)=>{for(const n of t.split(","))o.push($b(n));return"  "})).replace(/\s?\[%eval\s(?:#([+-]?\d{1,5})|([+-]?(?:\d{1,5}|\d{0,5}\.\d{1,2})))(?:,(\d{1,5}))?\]\s?/g,((e,t,n,o)=>{const i=o&&parseInt(o,10);return r=t?{mate:parseInt(t,10),depth:i}:{pawns:parseFloat(n),depth:i},"  "})).trim(),shapes:o,emt:t,clock:n,evaluation:r}},Qb=(e,t)=>{let n="";if(Hm(t))"pawn"!==t.role&&(n=Gm(t.role).toUpperCase()),n+="@"+Ym(t.to);else{const r=e.board.getRole(t.from);if(!r)return"--";if("king"!==r||!e.board[e.turn].has(t.to)&&2!==Math.abs(t.to-t.from)){const o=e.board.occupied.has(t.to)||"pawn"===r&&Qm(t.from)!==Qm(t.to);if("pawn"!==r){let o;if(n=Gm(r).toUpperCase(),o="king"===r?rb(t.to).intersect(e.board.king):"queen"===r?fb(t.to,e.board.occupied).intersect(e.board.queen):"rook"===r?db(t.to,e.board.occupied).intersect(e.board.rook):"bishop"===r?hb(t.to,e.board.occupied).intersect(e.board.bishop):ob(t.to).intersect(e.board.knight),o=o.intersect(e.board[e.turn]).without(t.from),o.nonEmpty()){const r=e.ctx();for(const n of o)e.dests(n,r).has(t.to)||(o=o.without(n));if(o.nonEmpty()){let e=!1,r=o.intersects(Iy.fromRank(Km(t.from)));o.intersects(Iy.fromFile(Qm(t.from)))?e=!0:r=!0,r&&(n+=Um[Qm(t.from)]),e&&(n+=Mm[Km(t.from)])}}}else o&&(n=Um[Qm(t.from)]);o&&(n+="x"),n+=Ym(t.to),t.promotion&&(n+="="+Gm(t.promotion).toUpperCase())}else n=t.to>t.from?"O-O":"O-O-O"}return n},Gb=(e,t)=>{var n;const r=Qb(e,t);return e.play(t),(null===(n=e.outcome())||void 0===n?void 0:n.winner)?r+"#":e.isCheck()?r+"+":r};class Vb{constructor(e,t,n){this.pos=e,this.path=t,this.clocks=n,this.clone=()=>new Vb(this.pos.clone(),this.path,{...this.clocks})}}const Zb=e=>{const t=e.map(Kb),n=e=>e.reduce(((e,t)=>void 0==typeof t?e:t),void 0);return{texts:t.map((e=>e.text)).filter((e=>!!e)),shapes:t.flatMap((e=>e.shapes)),clock:n(t.map((e=>e.clock))),emt:n(t.map((e=>e.emt)))}},Yb=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,r;const o=Hb(e)[0]||Hb("*")[0],i=Wb(o.headers).unwrap(),a=Yy(i.toSetup()),s=Zb(o.comments||[]),l=new Map(Array.from(o.headers,(e=>{let[t,n]=e;return[t.toLowerCase(),n]}))),c=function(e,t){var n;const r=e.get("source")||e.get("site"),o=null===(n=e.get("timecontrol"))||void 0===n?void 0:n.split("+").map((e=>parseInt(e))),i=o&&o[0]?{initial:o[0],increment:o[1]||0}:void 0,a=e.get("orientation");return{externalLink:r&&r.match(/^https?:\/\//)?r:void 0,isLichess:!(!t||!(null===r||void 0===r?void 0:r.startsWith(t))),timeControl:i,orientation:"white"===a||"black"===a?a:void 0}}(l,t),u={fen:a,turn:i.turn,check:i.isCheck(),pos:i.clone(),comments:s.texts,shapes:s.shapes,clocks:{white:(null===(n=c.timeControl)||void 0===n?void 0:n.initial)||s.clock,black:(null===(r=c.timeControl)||void 0===r?void 0:r.initial)||s.clock}},h=Jb(i,o.moves,c),d=function(e,t){const n=(t,n)=>{const r=e.get(`${t}${n}`);return"?"==r||""==r?void 0:r},r=e=>{const r=n(e,"");return{name:r,title:n(e,"title"),rating:parseInt(n(e,"elo")||"")||void 0,isLichessUser:t.isLichess&&!!(null===r||void 0===r?void 0:r.match(/^[a-z0-9][a-z0-9_-]{0,28}[a-z0-9]$/i))}};return{white:r("white"),black:r("black")}}(l,c);return new _y(u,h,d,c)},Jb=(e,t,n)=>((e,t,n)=>{const r=new Lb,o=[{before:e,after:r,ctx:t}];let i;for(;i=o.pop();)for(let e=0;e<i.before.children.length;e++){const t=e<i.before.children.length-1?i.ctx.clone():i.ctx,r=i.before.children[e],a=n(t,r.data,e);if(Wm(a)){const e=new zb(a);i.after.children.push(e),o.push({before:r,after:e,ctx:t})}}return r})(t,new Vb(e,Ey.root,{}),((e,t,r)=>{const o=((e,t)=>{const n=e.ctx(),r=t.match(/^([NBRQK])?([a-h])?([1-8])?[-x]?([a-h][1-8])(?:=?([nbrqkNBRQK]))?[+#]?$/);if(!r){let r;if("O-O"===t||"O-O+"===t||"O-O#"===t?r="h":"O-O-O"!==t&&"O-O-O+"!==t&&"O-O-O#"!==t||(r="a"),r){const t=e.castles.rook[e.turn][r];if(!Wm(n.king)||!Wm(t)||!e.dests(n.king,n).has(t))return;return{from:n.king,to:t}}const o=t.match(/^([pnbrqkPNBRQK])?@([a-h][1-8])[+#]?$/);if(!o)return;const i={role:o[1]?Vm(o[1]):"pawn",to:Zm(o[2])};return e.isLegal(i,n)?i:void 0}const o=r[1]?Vm(r[1]):"pawn",i=Zm(r[4]),a=r[5]?Vm(r[5]):void 0;if(!!a!==("pawn"===o&&Iy.backranks().has(i)))return;if("king"===a&&"antichess"!==e.rules)return;let s=e.board.pieces(e.turn,o);"pawn"!==o||r[2]?r[2]&&(s=s.intersect(Iy.fromFile(r[2].charCodeAt(0)-"a".charCodeAt(0)))):s=s.intersect(Iy.fromFile(Qm(i))),r[3]&&(s=s.intersect(Iy.fromRank(r[3].charCodeAt(0)-"1".charCodeAt(0))));const l="pawn"===o?Iy.fromFile(Qm(i)):Iy.empty();let c;s=s.intersect(l.union(pb({color:$m(e.turn),role:o},i,e.board.occupied)));for(const u of s)if(e.dests(u,n).has(i)){if(Wm(c))return;c=u}return Wm(c)?{from:c,to:i,promotion:a}:void 0})(e.pos,t.san);if(!o)return;const i=(e=>Hm(e)?String.fromCharCode(35+e.to,139+["queen","rook","bishop","knight","pawn"].indexOf(e.role)):String.fromCharCode(35+e.from,e.promotion?99+8*["queen","rook","bishop","knight","king"].indexOf(e.promotion)+Qm(e.to):35+e.to))(o),a=e.path.append(i),s=Gb(e.pos,o);e.path=a;const l=e.pos.toSetup(),c=Zb(t.comments||[]),u=Zb(t.startingComments||[]),h=[...c.shapes,...u.shapes],d=2*(l.fullmoves-1)+("white"===e.pos.turn?0:1);let f=e.clocks=Xb(e.clocks,e.pos.turn,c.clock);d<2&&n.timeControl&&(f={white:n.timeControl.initial,black:n.timeControl.initial,...f});return{path:a,ply:d,move:o,san:s,uci:Jm(o),fen:Yy(e.pos.toSetup()),turn:e.pos.turn,check:e.pos.isCheck(),comments:c.texts,startingComments:u.texts,nags:t.nags||[],shapes:h,clocks:f,emt:c.emt}})),Xb=(e,t,n)=>"white"==t?{...e,black:n}:{...e,white:n};class ev{constructor(e,t){var n,r=this;this.opts=e,this.redraw=t,this.flipped=!1,this.pane="board",this.autoScrollRequested=!1,this.curNode=()=>this.game.nodeAt(this.path)||this.game.moves,this.curData=()=>this.game.dataAt(this.path)||this.game.initial,this.goTo=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n,o;const i="first"==e?Ey.root:"prev"==e?r.path.init():"next"==e?null===(o=null===(n=r.game.nodeAt(r.path))||void 0===n?void 0:n.children[0])||void 0===o?void 0:o.data.path:r.game.pathAtMainlinePly("last");r.toPath(i||r.path,t)},this.canGoTo=e=>"prev"==e||"first"==e?!this.path.empty():!!this.curNode().children[0],this.toPath=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r.path=e,r.pane="board",r.autoScrollRequested=!0,r.redrawGround(),r.redraw(),t&&r.focus()},this.focus=()=>{var e;return null===(e=this.div)||void 0===e?void 0:e.focus()},this.toggleMenu=()=>{this.pane="board"==this.pane?"menu":"board",this.redraw()},this.togglePgn=()=>{this.pane="pgn"==this.pane?"board":"pgn",this.redraw()},this.orientation=()=>{const e=this.opts.orientation||"white";return this.flipped?$m(e):e},this.flip=()=>{this.flipped=!this.flipped,this.pane="board",this.redrawGround(),this.redraw()},this.cgState=()=>{var e;const t=this.curData(),n="uci"in t?(e=>{if(e)return"@"===e[1]?[e.slice(2,4)]:[e.slice(0,2),e.slice(2,4)]})(t.uci):null===(e=this.opts.chessground)||void 0===e?void 0:e.lastMove;return{fen:t.fen,orientation:this.orientation(),check:t.check,lastMove:n,turnColor:t.turn}},this.analysisUrl=()=>this.game.metadata.isLichess&&this.game.metadata.externalLink||`https://lichess.org/analysis/${this.curData().fen.replace(" ","_")}?color=${this.orientation()}`,this.practiceUrl=()=>`${this.analysisUrl()}#practice`,this.setGround=e=>{this.ground=e,this.redrawGround()},this.redrawGround=()=>this.withGround((e=>{e.set(this.cgState()),e.setShapes(this.curData().shapes.map((e=>({orig:Ym(e.from),dest:Ym(e.to),brush:e.color}))))})),this.withGround=e=>this.ground&&e(this.ground),this.game=Yb(e.pgn,e.lichess),e.orientation=e.orientation||this.game.metadata.orientation,this.translate=(n=e.translate,e=>n&&n(e)||ty(e)),this.path=this.game.pathAtMainlinePly(e.initialPly)}}const tv=(e,t)=>Math.abs(e-t),nv=e=>(t,n,r,o)=>tv(t,r)<2&&("white"===e?o===n+1||n<=1&&o===n+2&&t===r:o===n-1||n>=6&&o===n-2&&t===r),rv=(e,t,n,r)=>{const o=tv(e,n),i=tv(t,r);return 1===o&&2===i||2===o&&1===i},ov=(e,t,n,r)=>tv(e,n)===tv(t,r),iv=(e,t,n,r)=>e===n||t===r,av=(e,t,n,r)=>ov(e,t,n,r)||iv(e,t,n,r),sv=(e,t,n)=>(r,o,i,a)=>tv(r,i)<2&&tv(o,a)<2||n&&o===a&&o===("white"===e?0:7)&&(4===r&&(2===i&&t.includes(0)||6===i&&t.includes(7))||t.includes(i));function lv(e,t,n){const r=e.get(t);if(!r)return[];const o=cy(t),i=r.role,a="pawn"===i?nv(r.color):"knight"===i?rv:"bishop"===i?ov:"rook"===i?iv:"queen"===i?av:sv(r.color,function(e,t){const n="white"===t?"1":"8",r=[];for(const[o,i]of e)o[1]===n&&i.color===t&&"rook"===i.role&&r.push(cy(o)[0]);return r}(e,r.color),n);return uy.filter((e=>(o[0]!==e[0]||o[1]!==e[1])&&a(o[0],o[1],e[0],e[1]))).map(ly)}function cv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&setTimeout((()=>e(...n)),1)}function uv(e){e.premovable.current&&(e.premovable.current=void 0,cv(e.premovable.events.unset))}function hv(e){const t=e.predroppable;t.current&&(t.current=void 0,cv(t.events.unset))}function dv(e,t,n){const r=e.pieces.get(t),o=e.pieces.get(n);if(t===n||!r)return!1;const i=o&&o.color!==r.color?o:void 0;return n===e.selected&&vv(e),cv(e.events.move,t,n,i),function(e,t,n){if(!e.autoCastle)return!1;const r=e.pieces.get(t);if(!r||"king"!==r.role)return!1;const o=cy(t),i=cy(n);if(0!==o[1]&&7!==o[1]||o[1]!==i[1])return!1;4!==o[0]||e.pieces.has(n)||(6===i[0]?n=ly([7,i[1]]):2===i[0]&&(n=ly([0,i[1]])));const a=e.pieces.get(n);return!(!a||a.color!==r.color||"rook"!==a.role)&&(e.pieces.delete(t),e.pieces.delete(n),o[0]<i[0]?(e.pieces.set(ly([6,i[1]]),r),e.pieces.set(ly([5,i[1]]),a)):(e.pieces.set(ly([2,i[1]]),r),e.pieces.set(ly([3,i[1]]),a)),!0)}(e,t,n)||(e.pieces.set(n,r),e.pieces.delete(t)),e.lastMove=[t,n],e.check=void 0,cv(e.events.change),i||!0}function fv(e,t,n,r){if(e.pieces.has(n)){if(!r)return!1;e.pieces.delete(n)}return cv(e.events.dropNewPiece,t,n),e.pieces.set(n,t),e.lastMove=[n],e.check=void 0,cv(e.events.change),e.movable.dests=void 0,e.turnColor=dy(e.turnColor),!0}function pv(e,t,n){const r=dv(e,t,n);return r&&(e.movable.dests=void 0,e.turnColor=dy(e.turnColor),e.animation.current=void 0),r}function gv(e,t,n){if(kv(e,t,n)){const r=pv(e,t,n);if(r){const o=e.hold.stop();vv(e);const i={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:o};return!0!==r&&(i.captured=r),cv(e.movable.events.after,t,n,i),!0}}else if(function(e,t,n){var r,o;const i=null!==(o=null===(r=e.premovable.customDests)||void 0===r?void 0:r.get(t))&&void 0!==o?o:lv(e.pieces,t,e.premovable.castle);return t!==n&&xv(e,t)&&i.includes(n)}(e,t,n))return function(e,t,n,r){hv(e),e.premovable.current=[t,n],cv(e.premovable.events.set,t,n,r)}(e,t,n,{ctrlKey:e.stats.ctrlKey}),vv(e),!0;return vv(e),!1}function mv(e,t,n,r){const o=e.pieces.get(t);o&&(function(e,t,n){const r=e.pieces.get(t);return!!r&&(t===n||!e.pieces.has(n))&&("both"===e.movable.color||e.movable.color===r.color&&e.turnColor===r.color)}(e,t,n)||r)?(e.pieces.delete(t),fv(e,o,n,r),cv(e.movable.events.afterNewPiece,o.role,n,{premove:!1,predrop:!1})):o&&function(e,t,n){const r=e.pieces.get(t),o=e.pieces.get(n);return!!r&&(!o||o.color!==e.movable.color)&&e.predroppable.enabled&&("pawn"!==r.role||"1"!==n[1]&&"8"!==n[1])&&e.movable.color===r.color&&e.turnColor!==r.color}(e,t,n)?function(e,t,n){uv(e),e.predroppable.current={role:t,key:n},cv(e.predroppable.events.set,t,n)}(e,o.role,n):(uv(e),hv(e)),e.pieces.delete(t),vv(e)}function yv(e,t,n){if(cv(e.events.select,t),e.selected){if(e.selected===t&&!e.draggable.enabled)return vv(e),void e.hold.cancel();if((e.selectable.enabled||n)&&e.selected!==t&&gv(e,e.selected,t))return void(e.stats.dragged=!1)}(e.selectable.enabled||e.draggable.enabled)&&(wv(e,t)||xv(e,t))&&(bv(e,t),e.hold.start())}function bv(e,t){e.selected=t,xv(e,t)?e.premovable.customDests||(e.premovable.dests=lv(e.pieces,t,e.premovable.castle)):e.premovable.dests=void 0}function vv(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function wv(e,t){const n=e.pieces.get(t);return!!n&&("both"===e.movable.color||e.movable.color===n.color&&e.turnColor===n.color)}const kv=(e,t,n)=>{var r,o;return t!==n&&wv(e,t)&&(e.movable.free||!!(null===(o=null===(r=e.movable.dests)||void 0===r?void 0:r.get(t))||void 0===o?void 0:o.includes(n)))};function xv(e,t){const n=e.pieces.get(t);return!!n&&e.premovable.enabled&&e.movable.color===n.color&&e.turnColor!==n.color}function Ev(e){const t=e.premovable.current;if(!t)return!1;const n=t[0],r=t[1];let o=!1;if(kv(e,n,r)){const t=pv(e,n,r);if(t){const i={premove:!0};!0!==t&&(i.captured=t),cv(e.movable.events.after,n,r,i),o=!0}}return uv(e),o}function _v(e){uv(e),hv(e),vv(e)}function Nv(e){e.movable.color=e.movable.dests=e.animation.current=void 0,_v(e)}function Sv(e,t,n){let r=Math.floor(8*(e[0]-n.left)/n.width);t||(r=7-r);let o=7-Math.floor(8*(e[1]-n.top)/n.height);return t||(o=7-o),r>=0&&r<8&&o>=0&&o<8?ly([r,o]):void 0}const Cv=e=>"white"===e.orientation,Av="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",Rv={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},Tv={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};function Bv(e){"start"===e&&(e=Av);const t=new Map;let n=7,r=0;for(const o of e)switch(o){case" ":case"[":return t;case"/":if(--n,n<0)return t;r=0;break;case"~":{const e=t.get(ly([r-1,n]));e&&(e.promoted=!0);break}default:{const e=o.charCodeAt(0);if(e<57)r+=e-48;else{const e=o.toLowerCase();t.set(ly([r,n]),{role:Rv[e],color:o===e?"black":"white"}),++r}}}return t}function jv(e,t){t.animation&&(Iv(e.animation,t.animation),(e.animation.duration||0)<70&&(e.animation.enabled=!1))}function Ov(e,t){var n,r,o;if((null===(n=t.movable)||void 0===n?void 0:n.dests)&&(e.movable.dests=void 0),(null===(r=t.drawable)||void 0===r?void 0:r.autoShapes)&&(e.drawable.autoShapes=[]),Iv(e,t),t.fen&&(e.pieces=Bv(t.fen),e.drawable.shapes=(null===(o=t.drawable)||void 0===o?void 0:o.shapes)||[]),"check"in t&&function(e,t){if(e.check=void 0,!0===t&&(t=e.turnColor),t)for(const[n,r]of e.pieces)"king"===r.role&&r.color===t&&(e.check=n)}(e,t.check||!1),"lastMove"in t&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&bv(e,e.selected),jv(e,t),!e.movable.rookCastle&&e.movable.dests){const t="white"===e.movable.color?"1":"8",n="e"+t,r=e.movable.dests.get(n),o=e.pieces.get(n);if(!r||!o||"king"!==o.role)return;e.movable.dests.set(n,r.filter((e=>!(e==="a"+t&&r.includes("c"+t))&&!(e==="h"+t&&r.includes("g"+t)))))}}function Iv(e,t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Object.prototype.hasOwnProperty.call(e,n)&&Pv(e[n])&&Pv(t[n])?Iv(e[n],t[n]):e[n]=t[n])}function Pv(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}const Lv=(e,t)=>t.animation.enabled?function(e,t){const n=new Map(t.pieces),r=e(t),o=function(e,t){const n=new Map,r=[],o=new Map,i=[],a=[],s=new Map;let l,c,u;for(const[h,d]of e)s.set(h,Uv(h,d));for(const h of sy)l=t.pieces.get(h),c=s.get(h),l?c?py(l,c.piece)||(i.push(c),a.push(Uv(h,l))):a.push(Uv(h,l)):c&&i.push(c);for(const h of a)c=Mv(h,i.filter((e=>py(h.piece,e.piece)))),c&&(u=[c.pos[0]-h.pos[0],c.pos[1]-h.pos[1]],n.set(h.key,u.concat(u)),r.push(c.key));for(const h of i)r.includes(h.key)||o.set(h.key,h.piece);return{anims:n,fadings:o}}(n,t);if(o.anims.size||o.fadings.size){const e=t.animation.current&&t.animation.current.start;t.animation.current={start:performance.now(),frequency:1/t.animation.duration,plan:o},e||Fv(t,performance.now())}else t.dom.redraw();return r}(e,t):zv(e,t);function zv(e,t){const n=e(t);return t.dom.redraw(),n}const Uv=(e,t)=>({key:e,pos:cy(e),piece:t}),Mv=(e,t)=>t.sort(((t,n)=>fy(e.pos,t.pos)-fy(e.pos,n.pos)))[0];function Fv(e,t){const n=e.animation.current;if(void 0===n)return void(e.dom.destroyed||e.dom.redrawNow());const r=1-(t-n.start)*n.frequency;if(r<=0)e.animation.current=void 0,e.dom.redrawNow();else{const t=Dv(r);for(const e of n.plan.anims.values())e[2]=e[0]*t,e[3]=e[1]*t;e.dom.redrawNow(!0),requestAnimationFrame((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now();return Fv(e,t)}))}}const Dv=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,qv=["green","red","blue","yellow"];function Hv(e,t){if(t.touches&&t.touches.length>1)return;t.stopPropagation(),t.preventDefault(),t.ctrlKey?vv(e):_v(e);const n=vy(t),r=Sv(n,Cv(e),e.dom.bounds());r&&(e.drawable.current={orig:r,pos:n,brush:Gv(t),snapToValidMove:e.drawable.defaultSnapToValidMove},Wv(e))}function Wv(e){requestAnimationFrame((()=>{const t=e.drawable.current;if(t){const n=Sv(t.pos,Cv(e),e.dom.bounds());n||(t.snapToValidMove=!1);const r=t.snapToValidMove?function(e,t,n,r){const o=cy(e),i=uy.filter((e=>av(o[0],o[1],e[0],e[1])||rv(o[0],o[1],e[0],e[1]))),a=i.map((e=>xy(ly(e),n,r))).map((e=>fy(t,e))),[,s]=a.reduce(((e,t,n)=>e[0]<t?e:[t,n]),[a[0],0]);return ly(i[s])}(t.orig,t.pos,Cv(e),e.dom.bounds()):n;r!==t.mouseSq&&(t.mouseSq=r,t.dest=r!==t.orig?r:void 0,e.dom.redrawNow()),Wv(e)}}))}function $v(e,t){e.drawable.current&&(e.drawable.current.pos=vy(t))}function Kv(e){const t=e.drawable.current;t&&(t.mouseSq&&function(e,t){const n=e=>e.orig===t.orig&&e.dest===t.dest,r=e.shapes.find(n);r&&(e.shapes=e.shapes.filter((e=>!n(e))));r&&r.brush===t.brush||e.shapes.push({orig:t.orig,dest:t.dest,brush:t.brush});Vv(e)}(e.drawable,t),Qv(e))}function Qv(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function Gv(e){var t;const n=(e.shiftKey||e.ctrlKey)&&wy(e),r=e.altKey||e.metaKey||(null===(t=e.getModifierState)||void 0===t?void 0:t.call(e,"AltGraph"));return qv[(n?1:0)+(r?2:0)]}function Vv(e){e.onChange&&e.onChange(e.shapes)}function Zv(e,t){if(!e.trustAllEvents&&!t.isTrusted)return;if(void 0!==t.buttons&&t.buttons>1)return;if(t.touches&&t.touches.length>1)return;const n=e.dom.bounds(),r=vy(t),o=Sv(r,Cv(e),n);if(!o)return;const i=e.pieces.get(o),a=e.selected;var s;if(a||!e.drawable.enabled||!e.drawable.eraseOnClick&&i&&i.color===e.turnColor||(s=e).drawable.shapes.length&&(s.drawable.shapes=[],s.dom.redraw(),Vv(s.drawable)),!1!==t.cancelable&&(!t.touches||e.blockTouchScroll||i||a||function(e,t){const n=Cv(e),r=e.dom.bounds(),o=Math.pow(r.width/8,2);for(const i of e.pieces.keys()){const e=xy(i,n,r);if(fy(e,t)<=o)return!0}return!1}(e,r)))t.preventDefault();else if(t.touches)return;const l=!!e.premovable.current,c=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&kv(e,e.selected,o)?Lv((e=>yv(e,o)),e):yv(e,o);const u=e.selected===o,h=nw(e,o);if(i&&h&&u&&function(e,t){const n=e.pieces.get(t);return!!n&&e.draggable.enabled&&("both"===e.movable.color||e.movable.color===n.color&&(e.turnColor===n.color||e.premovable.enabled))}(e,o)){e.draggable.current={orig:o,piece:i,origPos:r,pos:r,started:e.draggable.autoDistance&&e.stats.dragged,element:h,previouslySelected:a,originTarget:t.target,keyHasChanged:!1},h.cgDragging=!0,h.classList.add("dragging");const s=e.dom.elements.ghost;s&&(s.className=`ghost ${i.color} ${i.role}`,my(s,gy(n)(cy(o),Cv(e))),by(s,!0)),Yv(e)}else l&&uv(e),c&&hv(e);e.dom.redraw()}function Yv(e){requestAnimationFrame((()=>{var t;const n=e.draggable.current;if(!n)return;(null===(t=e.animation.current)||void 0===t?void 0:t.plan.anims.has(n.orig))&&(e.animation.current=void 0);const r=e.pieces.get(n.orig);if(r&&py(r,n.piece)){if(!n.started&&fy(n.pos,n.origPos)>=Math.pow(e.draggable.distance,2)&&(n.started=!0),n.started){if("function"===typeof n.element){const e=n.element();if(!e)return;e.cgDragging=!0,e.classList.add("dragging"),n.element=e}const t=e.dom.bounds();my(n.element,[n.pos[0]-t.left-t.width/16,n.pos[1]-t.top-t.height/16]),n.keyHasChanged||(n.keyHasChanged=n.orig!==Sv(n.pos,Cv(e),t))}}else ew(e);Yv(e)}))}function Jv(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.pos=vy(t))}function Xv(e,t){const n=e.draggable.current;if(!n)return;if("touchend"===t.type&&!1!==t.cancelable&&t.preventDefault(),"touchend"===t.type&&n.originTarget!==t.target&&!n.newPiece)return void(e.draggable.current=void 0);uv(e),hv(e);const r=Sv(vy(t)||n.pos,Cv(e),e.dom.bounds());r&&n.started&&n.orig!==r?n.newPiece?mv(e,n.orig,r,n.force):(e.stats.ctrlKey=t.ctrlKey,gv(e,n.orig,r)&&(e.stats.dragged=!0)):n.newPiece?e.pieces.delete(n.orig):e.draggable.deleteOnDropOff&&!r&&(e.pieces.delete(n.orig),cv(e.events.change)),(n.orig!==n.previouslySelected&&!n.keyHasChanged||n.orig!==r&&r)&&e.selectable.enabled||vv(e),tw(e),e.draggable.current=void 0,e.dom.redraw()}function ew(e){const t=e.draggable.current;t&&(t.newPiece&&e.pieces.delete(t.orig),e.draggable.current=void 0,vv(e),tw(e),e.dom.redraw())}function tw(e){const t=e.dom.elements;t.ghost&&by(t.ghost,!1)}function nw(e,t){let n=e.dom.elements.board.firstChild;for(;n;){if(n.cgKey===t&&"PIECE"===n.tagName)return n;n=n.nextSibling}}function rw(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}function ow(e,t){function n(){!function(e){e.orientation=dy(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0}(e),t()}return{set(t){t.orientation&&t.orientation!==e.orientation&&n(),jv(e,t),(t.fen?Lv:zv)((e=>Ov(e,t)),e)},state:e,getFen:()=>{return t=e.pieces,ay.map((e=>oy.map((n=>{const r=t.get(n+e);if(r){let e=Tv[r.role];return"white"===r.color&&(e=e.toUpperCase()),r.promoted&&(e+="~"),e}return"1"})).join(""))).join("/").replace(/1{2,}/g,(e=>e.length.toString()));var t},toggleOrientation:n,setPieces(t){Lv((e=>function(e,t){for(const[n,r]of t)r?e.pieces.set(n,r):e.pieces.delete(n)}(e,t)),e)},selectSquare(t,n){t?Lv((e=>yv(e,t,n)),e):e.selected&&(vv(e),e.dom.redraw())},move(t,n){Lv((e=>dv(e,t,n)),e)},newPiece(t,n){Lv((e=>fv(e,t,n)),e)},playPremove(){if(e.premovable.current){if(Lv(Ev,e))return!0;e.dom.redraw()}return!1},playPredrop(t){if(e.predroppable.current){const n=function(e,t){const n=e.predroppable.current;let r=!1;if(!n)return!1;t(n)&&fv(e,{role:n.role,color:e.movable.color},n.key)&&(cv(e.movable.events.afterNewPiece,n.role,n.key,{premove:!1,predrop:!0}),r=!0);return hv(e),r}(e,t);return e.dom.redraw(),n}return!1},cancelPremove(){zv(uv,e)},cancelPredrop(){zv(hv,e)},cancelMove(){zv((e=>{_v(e),ew(e)}),e)},stop(){zv((e=>{Nv(e),ew(e)}),e)},explode(t){!function(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout((()=>{rw(e,2),setTimeout((()=>rw(e,void 0)),120)}),120)}(e,t)},setAutoShapes(t){zv((e=>e.drawable.autoShapes=t),e)},setShapes(t){zv((e=>e.drawable.shapes=t),e)},getKeyAtDomPos:t=>Sv(t,Cv(e),e.dom.bounds()),redrawAll:t,dragNewPiece(t,n,r){!function(e,t,n,r){const o="a0";e.pieces.set(o,t),e.dom.redraw();const i=vy(n);e.draggable.current={orig:o,piece:t,origPos:i,pos:i,started:!0,element:()=>nw(e,o),originTarget:n.target,newPiece:!0,force:!!r,keyHasChanged:!1},Yv(e)}(e,t,n,r)},destroy(){Nv(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}const iw={hilitePrimary:{key:"hilitePrimary",color:"#3291ff",opacity:1,lineWidth:1},hiliteWhite:{key:"hiliteWhite",color:"#ffffff",opacity:1,lineWidth:1}};function aw(e,t,n){var r;const o=e.drawable,i=o.current,a=i&&i.mouseSq?i:void 0,s=new Map,l=e.dom.bounds(),c=o.autoShapes.filter((e=>!e.piece));for(const f of o.shapes.concat(c).concat(a?[a]:[])){if(!f.dest)continue;const t=null!==(r=s.get(f.dest))&&void 0!==r?r:new Set,n=ww(fw(cy(f.orig),e.orientation),l),o=ww(fw(cy(f.dest),e.orientation),l);t.add(kw(n,o)),s.set(f.dest,t)}const u=o.shapes.concat(c).map((e=>({shape:e,current:!1,hash:sw(e,pw(e.dest,s),!1,l)})));a&&u.push({shape:a,current:!0,hash:sw(a,pw(a.dest,s),!0,l)});const h=u.map((e=>e.hash)).join(";");if(h===e.drawable.prevSvgHash)return;e.drawable.prevSvgHash=h;const d=t.querySelector("defs");!function(e,t,n){var r;const o=new Map;let i;for(const l of t.filter((e=>e.shape.dest&&e.shape.brush)))i=yw(e.brushes[l.shape.brush],l.shape.modifiers),(null===(r=l.shape.modifiers)||void 0===r?void 0:r.hilite)&&o.set(uw(i).key,uw(i)),o.set(i.key,i);const a=new Set;let s=n.firstElementChild;for(;s;)a.add(s.getAttribute("cgKey")),s=s.nextElementSibling;for(const[l,c]of o.entries())a.has(l)||n.appendChild(hw(c))}(o,u,d),function(e,t,n,r){const o=new Map;for(const i of e)o.set(i.hash,!1);for(const i of[t,n]){const e=[];let t,n=i.firstElementChild;for(;n;)t=n.getAttribute("cgHash"),o.has(t)?o.set(t,!0):e.push(n),n=n.nextElementSibling;for(const r of e)i.removeChild(r)}for(const i of e.filter((e=>!o.get(e.hash))))for(const e of r(i))e.isCustom?n.appendChild(e.el):t.appendChild(e.el)}(u,t.querySelector("g"),n.querySelector("g"),(t=>function(e,t,n,r,o){let{shape:i,current:a,hash:s}=t;var l,c;const u=ww(fw(cy(i.orig),e.orientation),o),h=i.dest?ww(fw(cy(i.dest),e.orientation),o):u,d=i.brush&&yw(n[i.brush],i.modifiers),f=r.get(i.dest),p=[];if(d){const e=mw(gw("g"),{cgHash:s});p.push({el:e}),u[0]!==h[0]||u[1]!==h[1]?e.appendChild(function(e,t,n,r,o,i){var a;function s(a){var s;const l=function(e){return(e?20:10)/64}(i&&!o),c=r[0]-n[0],u=r[1]-n[1],h=Math.atan2(u,c),d=Math.cos(h)*l,f=Math.sin(h)*l;return mw(gw("line"),{stroke:a?uw(t).color:t.color,"stroke-width":bw(t,o)+(a?.04:0),"stroke-linecap":"round","marker-end":`url(#arrowhead-${a?uw(t).key:t.key})`,opacity:(null===(s=e.modifiers)||void 0===s?void 0:s.hilite)?1:vw(t,o),x1:n[0],y1:n[1],x2:r[0]-d,y2:r[1]-f})}if(!(null===(a=e.modifiers)||void 0===a?void 0:a.hilite))return s(!1);const l=gw("g"),c=mw(gw("g"),{filter:"url(#cg-filter-blur)"});return c.appendChild(function(e,t){const n={from:[Math.floor(Math.min(e[0],t[0])),Math.floor(Math.min(e[1],t[1]))],to:[Math.ceil(Math.max(e[0],t[0])),Math.ceil(Math.max(e[1],t[1]))]};return mw(gw("rect"),{x:n.from[0],y:n.from[1],width:n.to[0]-n.from[0],height:n.to[1]-n.from[1],fill:"none",stroke:"none"})}(n,r)),c.appendChild(s(!0)),l.appendChild(c),l.appendChild(s(!1)),l}(i,d,u,h,a,pw(i.dest,r))):e.appendChild(function(e,t,n,r){const o=[3/64,4/64],i=(r.width+r.height)/(4*Math.max(r.width,r.height));return mw(gw("circle"),{stroke:e.color,"stroke-width":o[n?0:1],fill:"none",opacity:vw(e,n),cx:t[0],cy:t[1],r:i-o[1]/2})}(n[i.brush],u,a,o))}if(i.label){const e=i.label;null!==(l=e.fill)&&void 0!==l||(e.fill=i.brush&&n[i.brush].color);const t=i.brush?void 0:"tr";p.push({el:dw(e,s,u,h,f,t),isCustom:!0})}if(i.customSvg){const e=null!==(c=i.customSvg.center)&&void 0!==c?c:"orig",[t,n]="label"===e?xw(u,h,f).map((e=>e-.5)):"dest"===e?h:u,r=mw(gw("g"),{transform:`translate(${t},${n})`,cgHash:s});r.innerHTML=`<svg width="1" height="1" viewBox="0 0 100 100">${i.customSvg.html}</svg>`,p.push({el:r,isCustom:!0})}return p}(e,t,o.brushes,s,l)))}function sw(e,t,n,r){let{orig:o,dest:i,brush:a,piece:s,modifiers:l,customSvg:c,label:u}=e;var h,d,f;return[r.width,r.height,n,o,i,a,t&&"-",s&&lw(s),l&&(f=l,[f.lineWidth,f.hilite&&"*"].filter((e=>e)).join(",")),c&&`custom-${cw(c.html)},${null!==(d=null===(h=c.center)||void 0===h?void 0:h[0])&&void 0!==d?d:"o"}`,u&&`label-${cw(u.text)}`].filter((e=>e)).join(",")}function lw(e){return[e.color,e.role,e.scale].filter((e=>e)).join(",")}function cw(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)>>>0;return t.toString()}function uw(e){return["#ffffff","#fff","white"].includes(e.color)?iw.hilitePrimary:iw.hiliteWhite}function hw(e){const t=mw(gw("marker"),{id:"arrowhead-"+e.key,orient:"auto",overflow:"visible",markerWidth:4,markerHeight:4,refX:e.key.startsWith("hilite")?1.86:2.05,refY:2});return t.appendChild(mw(gw("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function dw(e,t,n,r,o,i){var a;const s=.4*.75**e.text.length,l=xw(n,r,o),c="tr"===i?.4:0,u=mw(gw("g"),{transform:`translate(${l[0]+c},${l[1]-c})`,cgHash:t});u.appendChild(mw(gw("circle"),{r:.2,"fill-opacity":i?1:.8,"stroke-opacity":i?1:.7,"stroke-width":.03,fill:null!==(a=e.fill)&&void 0!==a?a:"#666",stroke:"white"}));const h=mw(gw("text"),{"font-size":s,"font-family":"Noto Sans","text-anchor":"middle",fill:"white",y:.13*.75**e.text.length});return h.innerHTML=e.text,u.appendChild(h),u}function fw(e,t){return"white"===t?e:[7-e[0],7-e[1]]}function pw(e,t){return!0===(e&&t.has(e)&&t.get(e).size>1)}function gw(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function mw(e,t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.setAttribute(n,t[n]);return e}function yw(e,t){return t?{color:e.color,opacity:Math.round(10*e.opacity)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth),key:[e.key,t.lineWidth].filter((e=>e)).join("")}:e}function bw(e,t){return(e.lineWidth||10)*(t?.85:1)/64}function vw(e,t){return(e.opacity||1)*(t?.9:1)}function ww(e,t){const n=Math.min(1,t.width/t.height),r=Math.min(1,t.height/t.width);return[(e[0]-3.5)*n,(3.5-e[1])*r]}function kw(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Math.atan2(t[1]-e[1],t[0]-e[0])+Math.PI;return n?(Math.round(8*r/Math.PI)+16)%16:r}function xw(e,t,n){let r=function(e,t){return Math.sqrt([e[0]-t[0],e[1]-t[1]].reduce(((e,t)=>e+t*t),0))}(e,t);const o=kw(e,t,!1);if(n&&(r-=33/64,n.size>1)){r-=10/64;const o=kw(e,t);(n.has((o+1)%16)||n.has((o+15)%16))&&1&o&&(r-=.4)}return[e[0]-Math.cos(o)*r,e[1]-Math.sin(o)*r].map((e=>e+.5))}function Ew(e,t){e.innerHTML="",e.classList.add("cg-wrap");for(const l of ry)e.classList.toggle("orientation-"+l,t.orientation===l);e.classList.toggle("manipulable",!t.viewOnly);const n=ky("cg-container");e.appendChild(n);const r=ky("cg-board");let o,i,a,s;if(n.appendChild(r),t.drawable.visible&&(o=mw(gw("svg"),{class:"cg-shapes",viewBox:"-4 -4 8 8",preserveAspectRatio:"xMidYMid slice"}),o.appendChild(function(){const e=gw("defs"),t=mw(gw("filter"),{id:"cg-filter-blur"});return t.appendChild(mw(gw("feGaussianBlur"),{stdDeviation:"0.019"})),e.appendChild(t),e}()),o.appendChild(gw("g")),i=mw(gw("svg"),{class:"cg-custom-svgs",viewBox:"-3.5 -3.5 8 8",preserveAspectRatio:"xMidYMid slice"}),i.appendChild(gw("g")),a=ky("cg-auto-pieces"),n.appendChild(o),n.appendChild(i),n.appendChild(a)),t.coordinates){const e="black"===t.orientation?" black":"",r="left"===t.ranksPosition?" left":"";n.appendChild(_w(iy,"ranks"+e+r)),n.appendChild(_w(oy,"files"+e))}return t.draggable.enabled&&t.draggable.showGhost&&(s=ky("piece","ghost"),by(s,!1),n.appendChild(s)),{board:r,container:n,wrap:e,ghost:s,svg:o,customSvg:i,autoPieces:a}}function _w(e,t){const n=ky("coords",t);let r;for(const o of e)r=ky("coord"),r.textContent=o,n.appendChild(r);return n}function Nw(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}const Sw=e=>t=>{e.draggable.current?ew(e):e.drawable.current?Qv(e):t.shiftKey||wy(t)?e.drawable.enabled&&Hv(e,t):e.viewOnly||(e.dropmode.active?function(e,t){if(!e.dropmode.active)return;uv(e),hv(e);const n=e.dropmode.piece;if(n){e.pieces.set("a0",n);const r=vy(t),o=r&&Sv(r,Cv(e),e.dom.bounds());o&&mv(e,"a0",o)}e.dom.redraw()}(e,t):Zv(e,t))},Cw=(e,t,n)=>r=>{e.drawable.current?e.drawable.enabled&&n(e,r):e.viewOnly||t(e,r)};function Aw(e){const t=Cv(e),n=gy(e.dom.bounds()),r=e.dom.elements.board,o=e.pieces,i=e.animation.current,a=i?i.plan.anims:new Map,s=i?i.plan.fadings:new Map,l=e.draggable.current,c=function(e){var t,n,r;const o=new Map;if(e.lastMove&&e.highlight.lastMove)for(const s of e.lastMove)Pw(o,s,"last-move");e.check&&e.highlight.check&&Pw(o,e.check,"check");if(e.selected&&(Pw(o,e.selected,"selected"),e.movable.showDests)){const i=null===(t=e.movable.dests)||void 0===t?void 0:t.get(e.selected);if(i)for(const t of i)Pw(o,t,"move-dest"+(e.pieces.has(t)?" oc":""));const a=null!==(r=null===(n=e.premovable.customDests)||void 0===n?void 0:n.get(e.selected))&&void 0!==r?r:e.premovable.dests;if(a)for(const t of a)Pw(o,t,"premove-dest"+(e.pieces.has(t)?" oc":""))}const i=e.premovable.current;if(i)for(const s of i)Pw(o,s,"current-premove");else e.predroppable.current&&Pw(o,e.predroppable.current.key,"current-premove");const a=e.exploding;if(a)for(const s of a.keys)Pw(o,s,"exploding"+a.stage);e.highlight.custom&&e.highlight.custom.forEach(((e,t)=>{Pw(o,t,e)}));return o}(e),u=new Set,h=new Set,d=new Map,f=new Map;let p,g,m,y,b,v,w,k,x,E;for(g=r.firstChild;g;){if(p=g.cgKey,Tw(g))if(m=o.get(p),b=a.get(p),v=s.get(p),y=g.cgPiece,!g.cgDragging||l&&l.orig===p||(g.classList.remove("dragging"),my(g,n(cy(p),t)),g.cgDragging=!1),!v&&g.cgFading&&(g.cgFading=!1,g.classList.remove("fading")),m){if(b&&g.cgAnimating&&y===Iw(m)){const e=cy(p);e[0]+=b[2],e[1]+=b[3],g.classList.add("anim"),my(g,n(e,t))}else g.cgAnimating&&(g.cgAnimating=!1,g.classList.remove("anim"),my(g,n(cy(p),t)),e.addPieceZIndex&&(g.style.zIndex=Ow(cy(p),t)));y!==Iw(m)||v&&g.cgFading?v&&y===Iw(v)?(g.classList.add("fading"),g.cgFading=!0):Lw(d,y,g):u.add(p)}else Lw(d,y,g);else if(Bw(g)){const e=g.className;c.get(p)===e?h.add(p):Lw(f,e,g)}g=g.nextSibling}for(const[_,N]of c)if(!h.has(_)){x=f.get(N),E=x&&x.pop();const e=n(cy(_),t);if(E)E.cgKey=_,my(E,e);else{const t=ky("square",N);t.cgKey=_,my(t,e),r.insertBefore(t,r.firstChild)}}for(const[_,N]of o)if(b=a.get(_),!u.has(_))if(w=d.get(Iw(N)),k=w&&w.pop(),k){k.cgKey=_,k.cgFading&&(k.classList.remove("fading"),k.cgFading=!1);const r=cy(_);e.addPieceZIndex&&(k.style.zIndex=Ow(r,t)),b&&(k.cgAnimating=!0,k.classList.add("anim"),r[0]+=b[2],r[1]+=b[3]),my(k,n(r,t))}else{const o=Iw(N),i=ky("piece",o),a=cy(_);i.cgPiece=o,i.cgKey=_,b&&(i.cgAnimating=!0,a[0]+=b[2],a[1]+=b[3]),my(i,n(a,t)),e.addPieceZIndex&&(i.style.zIndex=Ow(a,t)),r.appendChild(i)}for(const _ of d.values())jw(e,_);for(const _ of f.values())jw(e,_)}function Rw(e){var t,n;const r=e.dom.elements.wrap.getBoundingClientRect(),o=e.dom.elements.container,i=r.height/r.width,a=8*Math.floor(r.width*window.devicePixelRatio/8)/window.devicePixelRatio,s=a*i;o.style.width=a+"px",o.style.height=s+"px",e.dom.bounds.clear(),null===(t=e.addDimensionsCssVarsTo)||void 0===t||t.style.setProperty("--cg-width",a+"px"),null===(n=e.addDimensionsCssVarsTo)||void 0===n||n.style.setProperty("--cg-height",s+"px")}const Tw=e=>"PIECE"===e.tagName,Bw=e=>"SQUARE"===e.tagName;function jw(e,t){for(const n of t)e.dom.elements.board.removeChild(n)}function Ow(e,t){const n=e[1];return`${t?10-n:3+n}`}const Iw=e=>`${e.color} ${e.role}`;function Pw(e,t,n){const r=e.get(t);r?e.set(t,`${r} ${n}`):e.set(t,n)}function Lw(e,t,n){const r=e.get(t);r?r.push(n):e.set(t,[n])}function zw(e,t){!function(e,t,n){const r=new Map,o=[];for(const s of e)r.set(s.hash,!1);let i,a=t.firstElementChild;for(;a;)i=a.getAttribute("cgHash"),r.has(i)?r.set(i,!0):o.push(a),a=a.nextElementSibling;for(const s of o)t.removeChild(s);for(const s of e)r.get(s.hash)||t.appendChild(n(s))}(e.drawable.autoShapes.filter((e=>e.piece)).map((e=>({shape:e,hash:Uw(e),current:!1}))),t,(t=>function(e,t,n){let{shape:r,hash:o}=t;var i,a,s;const l=r.orig,c=null===(i=r.piece)||void 0===i?void 0:i.role,u=null===(a=r.piece)||void 0===a?void 0:a.color,h=null===(s=r.piece)||void 0===s?void 0:s.scale,d=ky("piece",`${c} ${u}`);return d.setAttribute("cgHash",o),d.cgKey=l,d.cgScale=h,yy(d,gy(n)(cy(l),Cv(e)),h),d}(e,t,e.dom.bounds())))}const Uw=e=>{var t,n,r;return[e.orig,null===(t=e.piece)||void 0===t?void 0:t.role,null===(n=e.piece)||void 0===n?void 0:n.color,null===(r=e.piece)||void 0===r?void 0:r.scale].join(",")};function Mw(e,t){const n={pieces:Bv(Av),orientation:"white",turnColor:"white",coordinates:!0,ranksPosition:"right",autoCastle:!0,viewOnly:!1,disableContextMenu:!1,addPieceZIndex:!1,blockTouchScroll:!1,pieceKey:!1,trustAllEvents:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15},purple:{key:"purple",color:"#68217a",opacity:.65,lineWidth:10},pink:{key:"pink",color:"#ee2080",opacity:.5,lineWidth:10},white:{key:"white",color:"white",opacity:1,lineWidth:10}},prevSvgHash:""},hold:hy()};function r(){const t="dom"in n?n.dom.unbind:void 0,r=Ew(e,n),o=function(e){let t;const n=()=>(void 0===t&&(t=e()),t);return n.clear=()=>{t=void 0},n}((()=>r.board.getBoundingClientRect())),i=e=>{Aw(s),r.autoPieces&&zw(s,r.autoPieces),!e&&r.svg&&aw(s,r.svg,r.customSvg)},a=()=>{Rw(s),function(e){const t=Cv(e),n=gy(e.dom.bounds());let r=e.dom.elements.board.firstChild;for(;r;)(Tw(r)&&!r.cgAnimating||Bw(r))&&my(r,n(cy(r.cgKey),t)),r=r.nextSibling}(s),r.autoPieces&&function(e){var t;const n=Cv(e),r=gy(e.dom.bounds());let o=null===(t=e.dom.elements.autoPieces)||void 0===t?void 0:t.firstChild;for(;o;)yy(o,r(cy(o.cgKey),n),o.cgScale),o=o.nextSibling}(s)},s=n;return s.dom={elements:r,bounds:o,redraw:Fw(i),redrawNow:i,unbind:t},s.drawable.prevSvgHash="",Rw(s),i(!1),function(e,t){const n=e.dom.elements.board;if("ResizeObserver"in window&&new ResizeObserver(t).observe(e.dom.elements.wrap),(e.disableContextMenu||e.drawable.enabled)&&n.addEventListener("contextmenu",(e=>e.preventDefault())),e.viewOnly)return;const r=Sw(e);n.addEventListener("touchstart",r,{passive:!1}),n.addEventListener("mousedown",r,{passive:!1})}(s,a),t||(s.dom.unbind=function(e,t){const n=[];if("ResizeObserver"in window||n.push(Nw(document.body,"chessground.resize",t)),!e.viewOnly){const t=Cw(e,Jv,$v),r=Cw(e,Xv,Kv);for(const e of["touchmove","mousemove"])n.push(Nw(document,e,t));for(const e of["touchend","mouseup"])n.push(Nw(document,e,r));const o=()=>e.dom.bounds.clear();n.push(Nw(document,"scroll",o,{capture:!0,passive:!0})),n.push(Nw(window,"resize",o,{passive:!0}))}return()=>n.forEach((e=>e()))}(s,a)),s.events.insert&&s.events.insert(r),s}return Ov(n,t||{}),ow(r(),r)}function Fw(e){let t=!1;return()=>{t||(t=!0,requestAnimationFrame((()=>{e(),t=!1})))}}function Dw(e,t,n,r,o){return{sel:e,data:t,children:n,text:r,elm:o,key:void 0===t?void 0:t.key}}const qw=Array.isArray;function Hw(e){return"string"===typeof e||"number"===typeof e||e instanceof String||e instanceof Number}function Ww(e,t,n){if(e.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==t)for(let r=0;r<t.length;++r){const e=t[r];if("string"===typeof e)continue;const n=e.data;void 0!==n&&Ww(n,e.children,e.sel)}}function $w(e,t,n){let r,o,i,a={};if(void 0!==n?(null!==t&&(a=t),qw(n)?r=n:Hw(n)?o=n.toString():n&&n.sel&&(r=[n])):void 0!==t&&null!==t&&(qw(t)?r=t:Hw(t)?o=t.toString():t&&t.sel?r=[t]:a=t),void 0!==r)for(i=0;i<r.length;++i)Hw(r[i])&&(r[i]=Dw(void 0,void 0,void 0,r[i],void 0));return"s"!==e[0]||"v"!==e[1]||"g"!==e[2]||3!==e.length&&"."!==e[3]&&"#"!==e[3]||Ww(a,r,e),Dw(e,a,r,o,void 0)}const Kw=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Qw((o=>o.addEventListener(e,(e=>{const r=t(e);return!1===r&&e.preventDefault(),null===n||void 0===n||n(),r}),{passive:r})))};function Qw(e){return{insert:t=>e(t.elm)}}const Gw=e=>t=>{(e=>e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement)(t)||("ArrowLeft"==t.key?e.goTo("prev"):"ArrowRight"==t.key?e.goTo("next"):"f"==t.key&&e.flip())},Vw=e=>$w("div.lpv__menu.lpv__pane",[$w("button.lpv__menu__entry.lpv__menu__flip.lpv__fbt",{hook:Kw("click",e.flip)},e.translate("flipTheBoard")),$w("a.lpv__menu__entry.lpv__menu__analysis.lpv__fbt",{attrs:{href:e.analysisUrl(),target:"_blank"}},e.translate("analysisBoard")),$w("a.lpv__menu__entry.lpv__menu__practice.lpv__fbt",{attrs:{href:e.practiceUrl(),target:"_blank"}},e.translate("practiceWithComputer")),e.opts.menu.getPgn.enabled?$w("button.lpv__menu__entry.lpv__menu__pgn.lpv__fbt",{hook:Kw("click",e.togglePgn)},e.translate("getPgn")):void 0,Zw(e)]),Zw=e=>{const t=e.game.metadata.externalLink;return t&&$w("a.lpv__menu__entry.lpv__fbt",{attrs:{href:t,target:"_blank"}},e.translate(e.game.metadata.isLichess?"viewOnLichess":"viewOnSite"))},Yw=e=>$w("div.lpv__controls",["board"==e.pane?void 0:Jw(e,"first","step-backward"),Jw(e,"prev","left-open"),$w("button.lpv__fbt.lpv__controls__menu.lpv__icon",{class:{active:"board"!=e.pane,"lpv__icon-ellipsis-vert":"board"==e.pane},hook:Kw("click",e.toggleMenu)},"board"==e.pane?void 0:"X"),Jw(e,"next","right-open"),"board"==e.pane?void 0:Jw(e,"last","step-forward")]),Jw=(e,t,n)=>$w(`button.lpv__controls__goto.lpv__controls__goto--${t}.lpv__fbt.lpv__icon.lpv__icon-${n}`,{class:{disabled:"board"==e.pane&&!e.canGoTo(t)},hook:Qw((n=>function(e,t,n){for(const r of["touchstart","mousedown"])e.addEventListener(r,(e=>{t(e),e.preventDefault(),n&&n()}),{passive:!1})}(n,(n=>function(e,t){const n=()=>{e(),r=Math.max(100,r-r/15),o=setTimeout(n,r)};let r=350,o=setTimeout(n,500);e();const i="touchstart"==t.type?"touchend":"mouseup";document.addEventListener(i,(()=>clearTimeout(o)),{once:!0})}((()=>e.goTo(t)),n)))))}),Xw=e=>$w("div.lpv__side",$w("div.lpv__moves",{hook:{insert:t=>{const n=t.elm;e.path.empty()||lk(e,n),n.addEventListener("mousedown",(t=>{const n=t.target.getAttribute("p");n&&e.toPath(new Ey(n))}),{passive:!0})},postpatch:(t,n)=>{e.autoScrollRequested&&(lk(e,n.elm),e.autoScrollRequested=!1)}}},[...e.game.initial.comments.map(nk),...ok(e)])),ek=()=>$w("move.empty","..."),tk=e=>$w("index",`${e}.`),nk=e=>$w("comment",e),rk=e=>Math.floor((e.ply-1)/2)+1,ok=e=>{const t=sk(e),n=[];let r,o=e.game.moves.children.slice(1);for("black"==e.game.initial.pos.turn&&e.game.mainline[0]&&n.push(tk(e.game.initial.pos.fullmoves),ek());r=(r||e.game.moves).children[0];){const e=r.data,i=e.ply%2==1;i&&n.push(tk(rk(e))),n.push(t(e));const a=i&&(o.length||e.comments.length)&&r.children.length;a&&n.push(ek()),e.comments.forEach((e=>n.push(nk(e)))),o.forEach((e=>n.push(ik(t,e)))),a&&n.push(tk(rk(e)),ek()),o=r.children.slice(1)}return n},ik=(e,t)=>$w("variation",[...t.data.startingComments.map(nk),...ak(e,t)]),ak=(e,t)=>{let n=[],r=[];t.data.ply%2==0&&n.push($w("index",[rk(t.data),"..."]));do{const o=t.data;o.ply%2==1&&n.push($w("index",[rk(o),"."])),n.push(e(o)),o.comments.forEach((e=>n.push(nk(e)))),r.forEach((t=>{n=[...n,$w("paren.open","("),...ak(e,t),$w("paren.close",")")]})),r=t.children.slice(1),t=t.children[0]}while(t);return n},sk=e=>t=>$w("move",{class:{current:e.path.equals(t.path),ancestor:e.path.contains(t.path),good:t.nags.includes(1),mistake:t.nags.includes(2),brilliant:t.nags.includes(3),blunder:t.nags.includes(4),interesting:t.nags.includes(5),inaccuracy:t.nags.includes(6)},attrs:{p:t.path.path}},t.san),lk=(e,t)=>{const n=t.querySelector(".current");t.scrollTop=n?n.offsetTop-t.offsetHeight/2+n.offsetHeight:e.path.empty()?0:99999};function ck(e,t){const n="bottom"==t?e.orientation():$m(e.orientation()),r=e.game.players[n],o=[r.title?$w("span.lpv__player__title",r.title):void 0,$w("span.lpv__player__name",r.name),r.rating?$w("span.lpv__player__rating",["(",r.rating,")"]):void 0];return $w(`div.lpv__player.lpv__player--${t}`,[r.isLichessUser?$w("a.lpv__player__person.ulpt.user-link",{attrs:{href:`${e.opts.lichess}/@/${r.name}`}},o):$w("span.lpv__player__person",o),e.opts.showClocks?uk(e,n):void 0])}const uk=(e,t)=>{const n=e.curData(),r=n.clocks&&n.clocks[t];return void 0==typeof r?void 0:$w("div.lpv__player__clock",{class:{active:t==n.turn}},hk(r))},hk=e=>{if(!e&&0!==e)return["-"];const t=new Date(1e3*e),n=dk(t.getUTCMinutes())+":"+dk(t.getUTCSeconds());return e>=3600?[Math.floor(e/3600)+":"+n]:[n]},dk=e=>(e<10?"0":"")+e;function fk(e){const t=e.opts,n=`lpv.lpv--moves-${t.showMoves}.lpv--controls-${t.showControls}${t.classes?"."+t.classes.replace(" ","."):""}`,r="auto"==t.showPlayers?e.game.hasPlayerName():t.showPlayers;return $w(`div.${n}`,{class:{"lpv--menu":"board"!=e.pane,"lpv--players":r},attrs:{tabindex:0},hook:Qw((t=>{e.setGround(Mw(t.querySelector(".cg-wrap"),mk(e,t))),t.addEventListener("keydown",Gw(e))}))},[r?ck(e,"top"):void 0,pk(e),r?ck(e,"bottom"):void 0,t.showControls?Yw(e):void 0,t.showMoves?Xw(e):void 0,"menu"==e.pane?Vw(e):"pgn"==e.pane?gk(e):void 0])}const pk=e=>$w("div.lpv__board",{hook:Qw((t=>{t.addEventListener("click",e.focus),e.opts.scrollToMove&&!("ontouchstart"in window)&&t.addEventListener("wheel",function(e){let t=0;return n=>{t+=n.deltaY*(n.deltaMode?40:1),Math.abs(t)>=4?(e(n,!0),t=0):e(n,!1)}}(((t,n)=>{t.preventDefault(),t.deltaY>0&&n?e.goTo("next",!1):t.deltaY<0&&n&&e.goTo("prev",!1)})))}))},$w("div.cg-wrap")),gk=e=>{const t=new Blob([e.opts.pgn],{type:"text/plain"});return $w("div.lpv__pgn.lpv__pane",[$w("a.lpv__pgn__download.lpv__fbt",{attrs:{href:window.URL.createObjectURL(t),download:e.opts.menu.getPgn.fileName||`${e.game.title()}.pgn`}},e.translate("download")),$w("textarea.lpv__pgn__text",e.opts.pgn)])},mk=(e,t)=>({viewOnly:!e.opts.drawArrows,addDimensionsCssVarsTo:t,drawable:{enabled:e.opts.drawArrows,visible:!0},disableContextMenu:e.opts.drawArrows,...e.opts.chessground||{},movable:{free:!1},draggable:{enabled:!1},selectable:{enabled:!1},...e.cgState()});function yk(e){if(bk(e)){for(;e&&bk(e);){e=vk(e).parent}return null!==e&&void 0!==e?e:null}return e.parentNode}function bk(e){return 11===e.nodeType}function vk(e,t){var n,r,o;const i=e;return null!==(n=i.parent)&&void 0!==n||(i.parent=null!==t&&void 0!==t?t:null),null!==(r=i.firstChildNode)&&void 0!==r||(i.firstChildNode=e.firstChild),null!==(o=i.lastChildNode)&&void 0!==o||(i.lastChildNode=e.lastChild),i}const wk={createElement:function(e,t){return document.createElement(e,t)},createElementNS:function(e,t,n){return document.createElementNS(e,t,n)},createTextNode:function(e){return document.createTextNode(e)},createDocumentFragment:function(){return vk(document.createDocumentFragment())},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){if(bk(e)){let t=e;for(;t&&bk(t);){t=vk(t).parent}e=null!==t&&void 0!==t?t:e}bk(t)&&(t=vk(t,e)),n&&bk(n)&&(n=vk(n).firstChildNode),e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){bk(t)&&(t=vk(t,e)),e.appendChild(t)},parentNode:yk,nextSibling:function(e){var t;if(bk(e)){const n=vk(e),r=yk(n);if(r&&n.lastChildNode){const e=Array.from(r.childNodes),o=e.indexOf(n.lastChildNode);return null!==(t=e[o+1])&&void 0!==t?t:null}return null}return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},getTextContent:function(e){return e.textContent},isElement:function(e){return 1===e.nodeType},isText:function(e){return 3===e.nodeType},isComment:function(e){return 8===e.nodeType},isDocumentFragment:bk};function kk(e){return void 0===e}function xk(e){return void 0!==e}const Ek=Dw("",{},[],void 0,void 0);function _k(e,t){var n,r;const o=e.key===t.key,i=(null===(n=e.data)||void 0===n?void 0:n.is)===(null===(r=t.data)||void 0===r?void 0:r.is),a=e.sel===t.sel,s=!(!e.sel&&e.sel===t.sel)||typeof e.text===typeof t.text;return a&&o&&i&&s}function Nk(){throw new Error("The document fragment is not supported on this platform.")}function Sk(e,t,n){var r;const o={};for(let i=t;i<=n;++i){const t=null===(r=e[i])||void 0===r?void 0:r.key;void 0!==t&&(o[t]=i)}return o}const Ck=["create","update","remove","destroy","pre","post"];function Ak(e,t,n){const r={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},o=void 0!==t?t:wk;for(const h of Ck)for(const t of e){const e=t[h];void 0!==e&&r[h].push(e)}function i(e,t){return function(){if(0===--t){const t=o.parentNode(e);o.removeChild(t,e)}}}function a(e,t){var i,s,l,c;let u,h=e.data;if(void 0!==h){const t=null===(i=h.hook)||void 0===i?void 0:i.init;xk(t)&&(t(e),h=e.data)}const d=e.children,f=e.sel;if("!"===f)kk(e.text)&&(e.text=""),e.elm=o.createComment(e.text);else if(void 0!==f){const n=f.indexOf("#"),i=f.indexOf(".",n),l=n>0?n:f.length,c=i>0?i:f.length,p=-1!==n||-1!==i?f.slice(0,Math.min(l,c)):f,g=e.elm=xk(h)&&xk(u=h.ns)?o.createElementNS(u,p,h):o.createElement(p,h);for(l<c&&g.setAttribute("id",f.slice(l+1,c)),i>0&&g.setAttribute("class",f.slice(c+1).replace(/\./g," ")),u=0;u<r.create.length;++u)r.create[u](Ek,e);if(qw(d))for(u=0;u<d.length;++u){const e=d[u];null!=e&&o.appendChild(g,a(e,t))}else Hw(e.text)&&o.appendChild(g,o.createTextNode(e.text));const m=e.data.hook;xk(m)&&(null===(s=m.create)||void 0===s||s.call(m,Ek,e),m.insert&&t.push(e))}else if((null===(l=null===n||void 0===n?void 0:n.experimental)||void 0===l?void 0:l.fragments)&&e.children){for(e.elm=(null!==(c=o.createDocumentFragment)&&void 0!==c?c:Nk)(),u=0;u<r.create.length;++u)r.create[u](Ek,e);for(u=0;u<e.children.length;++u){const n=e.children[u];null!=n&&o.appendChild(e.elm,a(n,t))}}else e.elm=o.createTextNode(e.text);return e.elm}function s(e,t,n,r,i,s){for(;r<=i;++r){const i=n[r];null!=i&&o.insertBefore(e,a(i,s),t)}}function l(e){var t,n;const o=e.data;if(void 0!==o){null===(n=null===(t=null===o||void 0===o?void 0:o.hook)||void 0===t?void 0:t.destroy)||void 0===n||n.call(t,e);for(let t=0;t<r.destroy.length;++t)r.destroy[t](e);if(void 0!==e.children)for(let t=0;t<e.children.length;++t){const n=e.children[t];null!=n&&"string"!==typeof n&&l(n)}}}function c(e,t,n,a){for(var s,u;n<=a;++n){let a,h;const d=t[n];if(null!=d)if(xk(d.sel)){l(d),a=r.remove.length+1,h=i(d.elm,a);for(let t=0;t<r.remove.length;++t)r.remove[t](d,h);const e=null===(u=null===(s=null===d||void 0===d?void 0:d.data)||void 0===s?void 0:s.hook)||void 0===u?void 0:u.remove;xk(e)?e(d,h):h()}else d.children?(l(d),c(e,d.children,0,d.children.length-1)):o.removeChild(e,d.elm)}}function u(e,t,n){var i,l,h,d,f,p,g,m;const y=null===(i=t.data)||void 0===i?void 0:i.hook;null===(l=null===y||void 0===y?void 0:y.prepatch)||void 0===l||l.call(y,e,t);const b=t.elm=e.elm;if(e===t)return;if(void 0!==t.data||xk(t.text)&&t.text!==e.text){null!==(h=t.data)&&void 0!==h||(t.data={}),null!==(d=e.data)&&void 0!==d||(e.data={});for(let n=0;n<r.update.length;++n)r.update[n](e,t);null===(g=null===(p=null===(f=t.data)||void 0===f?void 0:f.hook)||void 0===p?void 0:p.update)||void 0===g||g.call(p,e,t)}const v=e.children,w=t.children;kk(t.text)?xk(v)&&xk(w)?v!==w&&function(e,t,n,r){let i,l,h,d,f=0,p=0,g=t.length-1,m=t[0],y=t[g],b=n.length-1,v=n[0],w=n[b];for(;f<=g&&p<=b;)null==m?m=t[++f]:null==y?y=t[--g]:null==v?v=n[++p]:null==w?w=n[--b]:_k(m,v)?(u(m,v,r),m=t[++f],v=n[++p]):_k(y,w)?(u(y,w,r),y=t[--g],w=n[--b]):_k(m,w)?(u(m,w,r),o.insertBefore(e,m.elm,o.nextSibling(y.elm)),m=t[++f],w=n[--b]):_k(y,v)?(u(y,v,r),o.insertBefore(e,y.elm,m.elm),y=t[--g],v=n[++p]):(void 0===i&&(i=Sk(t,f,g)),l=i[v.key],kk(l)?o.insertBefore(e,a(v,r),m.elm):(h=t[l],h.sel!==v.sel?o.insertBefore(e,a(v,r),m.elm):(u(h,v,r),t[l]=void 0,o.insertBefore(e,h.elm,m.elm))),v=n[++p]);p<=b&&(d=null==n[b+1]?null:n[b+1].elm,s(e,d,n,p,b,r)),f<=g&&c(e,t,f,g)}(b,v,w,n):xk(w)?(xk(e.text)&&o.setTextContent(b,""),s(b,null,w,0,w.length-1,n)):xk(v)?c(b,v,0,v.length-1):xk(e.text)&&o.setTextContent(b,""):e.text!==t.text&&(xk(v)&&c(b,v,0,v.length-1),o.setTextContent(b,t.text)),null===(m=null===y||void 0===y?void 0:y.postpatch)||void 0===m||m.call(y,e,t)}return function(e,t){let n,i,s;const l=[];for(n=0;n<r.pre.length;++n)r.pre[n]();for(!function(e,t){return e.isElement(t)}(o,e)?function(e,t){return e.isDocumentFragment(t)}(o,e)&&(e=Dw(void 0,{},[],void 0,e)):e=function(e){const t=e.id?"#"+e.id:"",n=e.getAttribute("class"),r=n?"."+n.split(" ").join("."):"";return Dw(o.tagName(e).toLowerCase()+t+r,{},[],void 0,e)}(e),_k(e,t)?u(e,t,l):(i=e.elm,s=o.parentNode(i),a(t,l),null!==s&&(o.insertBefore(s,t.elm,o.nextSibling(i)),c(s,[e],0,0))),n=0;n<l.length;++n)l[n].data.hook.insert(l[n]);for(n=0;n<r.post.length;++n)r.post[n]();return t}}function Rk(e,t){let n,r;const o=t.elm;let i=e.data.class,a=t.data.class;if((i||a)&&i!==a){for(r in i=i||{},a=a||{},i)i[r]&&!Object.prototype.hasOwnProperty.call(a,r)&&o.classList.remove(r);for(r in a)n=a[r],n!==i[r]&&o.classList[n?"add":"remove"](r)}}const Tk={create:Rk,update:Rk};function Bk(e,t){let n;const r=t.elm;let o=e.data.attrs,i=t.data.attrs;if((o||i)&&o!==i){for(n in o=o||{},i=i||{},i){const e=i[n];o[n]!==e&&(!0===e?r.setAttribute(n,""):!1===e?r.removeAttribute(n):120!==n.charCodeAt(0)?r.setAttribute(n,e):58===n.charCodeAt(3)?r.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,e):58===n.charCodeAt(5)?r.setAttributeNS("http://www.w3.org/1999/xlink",n,e):r.setAttribute(n,e))}for(n in o)n in i||r.removeAttribute(n)}}const jk={create:Bk,update:Bk},Ok={pgn:"*",fen:void 0,showPlayers:"auto",showClocks:!0,showMoves:"auto",showControls:!0,scrollToMove:!0,orientation:void 0,initialPly:0,chessground:{},drawArrows:!0,menu:{getPgn:{enabled:!0,fileName:void 0}},lichess:"https://lichess.org",classes:void 0};function Ik(e,t){const n={...Ok};return Pk(n,t),n.fen&&(n.pgn=`[FEN "${n.fen}"]\n${n.pgn}`),n.classes||(n.classes=e.className),n}function Pk(e,t){for(const n in t)"undefined"!==typeof t[n]&&(Lk(e[n])&&Lk(t[n])?Pk(e[n],t[n]):e[n]=t[n])}function Lk(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function zk(e,t){let{title:r,titleId:o,...i}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},i),r?n.createElement("title",{id:o},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Uk=n.forwardRef(zk);function Mk(e){let{pgn:t,options:r}=e;const i=(0,n.useRef)(null),[a,s]=(0,n.useState)();return(0,n.useEffect)((()=>{if(i.current){s(void 0);try{(function(e,t){const n=Ak([Tk,jk]),r=Ik(e,t),o=new ev(r,(function(){a=n(a,fk(o))})),i=fk(o);e.innerHTML="";let a=n(e,i);return o.div=a.elm,o})(i.current,{pgn:t,initialPly:0,lichess:!1,...r}).goTo("last",!1)}catch(Ry){s(Ry)}}}),[t,r]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"lichess-pgn-viewer-container",children:(0,o.jsx)("div",{ref:i})},t),a&&(0,o.jsx)(mg,{status:"error",icon:(0,o.jsx)(Uk,{className:"w-8 h-8"}),children:(0,o.jsx)("div",{className:"text-xl font-bold mb-2",children:"There has been an error displaying the contents as chessboard."})})]})}const Fk=Pm,Dk=JSON.stringify(Om,null,2),qk=Dk.split("\n").length+1;function Hk(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{className:"text-3xl font-bold tracking-tighter mb-2",children:"NIP-64"}),(0,o.jsxs)("div",{className:"flex flex-col gap-4 mb-4",children:[(0,o.jsx)("h3",{className:"text-2xl font-bold tracking-tighter",children:"Basic event"}),(0,o.jsx)("div",{className:"overflow-auto",children:(0,o.jsx)($g,{className:"w-full bg-base-200 font-mono",rows:qk,value:Dk,readOnly:!0})})]}),(0,o.jsxs)("div",{className:"flex flex-col gap-4 mb-4",children:[(0,o.jsx)("h3",{className:"text-2xl font-bold tracking-tighter",children:"Example"}),(0,o.jsxs)("div",{className:"flex flex-col xl:flex-row gap-4 mb-4",children:[(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,o.jsx)("h4",{className:"text-xl font-bold tracking-tighter",children:"PGN viewer"}),(0,o.jsx)(Mk,{pgn:Fk.content})]}),(0,o.jsxs)("div",{className:"flex flex-col grow gap-2 overflow-auto",children:[(0,o.jsx)("h4",{className:"text-xl font-bold tracking-tighter",children:(0,o.jsx)("code",{className:"font-mono",children:"`content`"})}),(0,o.jsx)($g,{className:"w-full h-full min-h-96 bg-base-200 font-mono",value:Fk.content,readOnly:!0})]})]})]})]})}const Wk=["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter"];function $k(e){let{dataTheme:t,selected:n,onClick:r}=e;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Am,{dataTheme:t,role:"button","aria-label":"Theme select","aria-pressed":n,tabIndex:0,onClick:()=>r(t),className:"border-base-content/20 hover:border-base-content/40 outline-base-content  rounded-lg  overflow-hidden border outline-2 outline-offset-2",children:(0,o.jsxs)("div",{className:"grid grid-cols-5 grid-rows-3",children:[(0,o.jsx)("div",{className:"bg-base-200 col-start-1 row-span-2 row-start-1"}),(0,o.jsx)("div",{className:"bg-base-300 col-start-1 row-start-3"}),(0,o.jsxs)("div",{className:"bg-base-100 col-span-4 col-start-2 row-span-3 row-start-1 flex flex-col gap-1 p-2",children:[(0,o.jsx)("div",{className:"font-bold",children:t}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(0,o.jsx)(Rd,{size:"xs",color:"primary",children:"A"}),(0,o.jsx)(Rd,{size:"xs",color:"secondary",children:"A"}),(0,o.jsx)(Rd,{size:"xs",color:"accent",children:"A"}),(0,o.jsx)(Rd,{size:"xs",color:"ghost",children:"A"})]})]})]})})})}function Kk(){const e=c(),t=u(),{theme:n,setTheme:r}=Rm();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{className:"text-3xl font-bold tracking-tighter",children:"Settings"}),(0,o.jsx)("div",{className:"text-lg"}),(0,o.jsxs)("div",{className:"mb-4 flex flex-col gap-2",children:[(0,o.jsx)("h2",{className:"text-xl font-bold tracking-tighter",children:"Theme"}),(0,o.jsx)("div",{className:"flex flex-wrap gap-4",children:(0,o.jsx)("div",{className:"grid grid-cols-4 gap-4",children:Wk.map(((e,i)=>(0,o.jsx)($k,{dataTheme:e,selected:e===n,onClick:()=>{var n;n=e,document.getElementsByTagName("html")[0].setAttribute("data-theme",n),t({theme:n}),r(n)}},`theme_${e}_#${i}`)))})})]}),(0,o.jsxs)("div",{className:"mb-4 flex flex-col gap-2",children:[(0,o.jsx)("h2",{className:"text-xl font-bold tracking-tighter",children:"Developer Settings"}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("div",{className:"flex items-center",children:(0,o.jsx)(Tg,{id:"developer-mode-checkbox",checked:e.dev,onChange:()=>t({dev:!e.dev})})}),(0,o.jsxs)("div",{className:"flex flex-col p-2",children:[(0,o.jsx)(Ag.Label,{htmlFor:"developer-mode-checkbox",title:"Enable Developer Mode",className:"p-0"}),(0,o.jsx)("span",{className:"text-gray-500 dark:text-gray-300 text-xs font-normal",children:"Append debug information to pages or console"})]})]})]}),e.dev&&(0,o.jsxs)("div",{className:"mt-8",children:[(0,o.jsx)("h6",{className:"font-bold font-mono ",children:"[debug]"}),(0,o.jsx)("h6",{className:"font-mono",children:"settings"}),(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsx)("pre",{children:`${JSON.stringify(e,null,2)}`})})]})]})}function Qk(e){let{name:t,version:n}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{className:"text-3xl font-bold tracking-tighter",children:"About"}),(0,o.jsxs)("div",{className:"text-lg text-slate-500 break-all",children:[(0,o.jsx)("span",{children:t})," ",n]}),(0,o.jsx)("div",{className:"my-4",children:(0,o.jsx)("ul",{children:(0,o.jsx)("li",{children:(0,o.jsx)("a",{className:"link link-hover",href:"https://github.com/nostr-protocol/nips/blob/master/64.md",children:"NIP-64 (GitHub)"})})})}),(0,o.jsx)("div",{className:"my-4",children:(0,o.jsxs)("ul",{children:[(0,o.jsx)("li",{children:(0,o.jsx)("a",{className:"link link-hover",href:"https://tailwindcss.com/",children:"Tailwind CSS"})}),(0,o.jsx)("li",{children:(0,o.jsx)("a",{className:"link link-hover",href:"https://daisyui.com/components",children:"Daisy UI Components"})}),(0,o.jsx)("li",{children:(0,o.jsx)("a",{className:"link link-hover",href:"https://react.daisyui.com/",children:"React Daisy UI"})})]})})]})}function Gk(e,t){let{title:r,titleId:o,...i}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},i),r?n.createElement("title",{id:o},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Vk=n.forwardRef(Gk);function Zk(e,t){let{title:r,titleId:o,...i}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},i),r?n.createElement("title",{id:o},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 0 1 9 9v.375M10.125 2.25A3.375 3.375 0 0 1 13.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 0 1 3.375 3.375M9 15l2.25 2.25L15 12"}))}const Yk=n.forwardRef(Zk);function Jk(e,t){let{title:r,titleId:o,...i}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},i),r?n.createElement("title",{id:o},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const Xk=n.forwardRef(Jk);function ex(e,t){let{title:r,titleId:o,...i}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},i),r?n.createElement("title",{id:o},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const tx=n.forwardRef(ex);function nx(e,t){let{title:r,titleId:o,...i}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},i),r?n.createElement("title",{id:o},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"}))}const rx=n.forwardRef(nx);function ox(e,t){let{title:r,titleId:o,...i}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},i),r?n.createElement("title",{id:o},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"}))}const ix=n.forwardRef(ox),ax={index:"/",search:"/search",settings:"/settings",resources:"/resources",validate:"/validate",about:"/about","*":"/"};function sx(e){let{title:t,children:n}=e;return(0,o.jsxs)("div",{className:"menu w-80 md:w-80 bg-base-100 h-screen",children:[(0,o.jsxs)(Zp,{horizontal:!1,className:"gap-2",children:[(0,o.jsx)(Zp.Title,{className:"mb-2",children:t}),(0,o.jsx)(Zp.Item,{children:(0,o.jsxs)(Rh,{to:ax.index,children:[(0,o.jsx)(Vk,{className:"w-6 h-6"}),"Home"]})}),(0,o.jsx)(Zp.Item,{children:(0,o.jsxs)(Rh,{to:ax.validate,children:[(0,o.jsx)(Yk,{className:"w-6 h-6"}),"Validate"]})}),(0,o.jsx)(Zp.Item,{children:(0,o.jsxs)(Rh,{to:ax.search,children:[(0,o.jsx)(Xk,{className:"w-6 h-6"}),"Search"]})}),(0,o.jsx)(Zp.Item,{children:(0,o.jsxs)(Rh,{to:ax.resources,children:[(0,o.jsx)(tx,{className:"w-6 h-6"}),"Resources"]})}),(0,o.jsx)(Zp.Item,{children:(0,o.jsxs)(Rh,{to:ax.settings,children:[(0,o.jsx)(rx,{className:"w-6 h-6"}),"Settings"]})}),(0,o.jsx)(Zp.Item,{children:(0,o.jsxs)(Rh,{to:"https://github.com/nostr-protocol/nips/blob/master/64.md",target:"_blank",children:[(0,o.jsx)(ix,{className:"w-6 h-6"}),"NIP-64"]})})]}),(0,o.jsx)(o.Fragment,{children:n})]})}function lx(e){let{to:t,children:n}=e;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"font-title inline-flex text-2xl transition-all duration-100 md:text-3xl",children:(0,o.jsx)(Ah,{to:t,children:(0,o.jsx)(Rd,{className:"text-xl normal-case",color:"ghost",children:n})})})})}function cx(e){let{title:t,toggleSidebar:n}=e;return(0,o.jsx)("div",{className:"bg-base-200 text-base-200-content",children:(0,o.jsxs)(rg,{className:"md:container mx-auto gap-2 mb-6",children:[(0,o.jsxs)(rg.Start,{children:[(0,o.jsx)("div",{className:"flex-none md:hidden",children:(0,o.jsx)(Rd,{shape:"square",color:"ghost",onClick:n,children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"inline-block w-6 h-6 stroke-current",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),(0,o.jsx)("div",{className:"flex-1 hidden md:block",children:(0,o.jsx)("span",{"data-testid":"sidebar-title-md",children:(0,o.jsx)(lx,{to:ax.index,children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"w-8 mr-2",children:(0,o.jsx)("img",{src:"logo192.png",alt:"logo"})}),t]})})})})]}),(0,o.jsx)(rg.Center,{className:"flex-none md:hidden",children:(0,o.jsx)("span",{"data-testid":"sidebar-title",children:(0,o.jsx)(lx,{to:ax.index,children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"w-8 mr-2",children:(0,o.jsx)("img",{src:"logo192.png",alt:"logo"})}),t]})})})}),(0,o.jsx)(rg.End,{children:(0,o.jsx)("div",{className:"flex-none hidden md:block",children:(0,o.jsxs)(Zp,{horizontal:!0,className:"gap-2",children:[(0,o.jsx)(Zp.Item,{children:(0,o.jsxs)(Rh,{to:"https://github.com/nostr-protocol/nips/blob/master/64.md",target:"_blank",children:["NIP-64",(0,o.jsx)(ix,{className:"w-6 h-6"})]})}),(0,o.jsx)(Zp.Item,{children:(0,o.jsxs)(Rh,{to:ax.validate,children:[(0,o.jsx)(Yk,{className:"w-6 h-6"}),"Validate"]})}),(0,o.jsx)(Zp.Item,{className:"rounded-lg",children:(0,o.jsxs)(Rh,{to:ax.search,children:[(0,o.jsx)(Xk,{className:"w-6 h-6"}),"Search"]})}),(0,o.jsx)(Zp.Item,{className:"rounded-lg",children:(0,o.jsxs)(Rh,{to:ax.resources,children:[(0,o.jsx)(tx,{className:"w-6 h-6"}),"Resources"]})})]})})})]})})}function ux(e,t){let{title:r,titleId:o,...i}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},i),r?n.createElement("title",{id:o},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const hx=n.forwardRef(ux);function dx(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function fx(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}const px={number:dx,bool:function(e){if("boolean"!==typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:fx,hash:function(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");dx(e.outputLen),dx(e.blockLen)},exists:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){fx(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},gx=px,mx="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,yx=e=>e instanceof Uint8Array,bx=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),vx=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function wx(e){if("string"===typeof e&&(e=function(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!yx(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class kx{clone(){return this._cloneInto()}}function xx(e){const t=t=>e().update(wx(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Ex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(mx&&"function"===typeof mx.getRandomValues)return mx.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class _x extends kx{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=bx(this.buffer)}update(e){gx.exists(this);const{view:t,buffer:n,blockLen:r}=this,o=(e=wx(e)).length;for(let i=0;i<o;){const a=Math.min(r-this.pos,o-i);if(a!==r)n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=bx(e);for(;r<=o-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){gx.exists(this),gx.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:o}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let u=i;u<r;u++)t[u]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),a=Number(n>>o&i),s=Number(n&i),l=r?4:0,c=r?0:4;e.setUint32(t+l,a,r),e.setUint32(t+c,s,r)}(n,r-8,BigInt(8*this.length),o),this.process(n,0);const a=bx(e),s=this.outputLen;if(s%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=s/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)a.setUint32(4*u,c[u],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:o,destroyed:i,pos:a}=this;return e.length=r,e.pos=a,e.finished=o,e.destroyed=i,r%t&&e.buffer.set(n),e}}const Nx=(e,t,n)=>e&t^e&n^t&n,Sx=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cx=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ax=new Uint32Array(64);class Rx extends _x{constructor(){super(64,32,8,!1),this.A=0|Cx[0],this.B=0|Cx[1],this.C=0|Cx[2],this.D=0|Cx[3],this.E=0|Cx[4],this.F=0|Cx[5],this.G=0|Cx[6],this.H=0|Cx[7]}get(){const{A:e,B:t,C:n,D:r,E:o,F:i,G:a,H:s}=this;return[e,t,n,r,o,i,a,s]}set(e,t,n,r,o,i,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|a,this.H=0|s}process(e,t){for(let h=0;h<16;h++,t+=4)Ax[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const e=Ax[h-15],t=Ax[h-2],n=vx(e,7)^vx(e,18)^e>>>3,r=vx(t,17)^vx(t,19)^t>>>10;Ax[h]=r+Ax[h-7]+n+Ax[h-16]|0}let{A:n,B:r,C:o,D:i,E:a,F:s,G:l,H:c}=this;for(let h=0;h<64;h++){const e=c+(vx(a,6)^vx(a,11)^vx(a,25))+((u=a)&s^~u&l)+Sx[h]+Ax[h]|0,t=(vx(n,2)^vx(n,13)^vx(n,22))+Nx(n,r,o)|0;c=l,l=s,s=a,a=i+e|0,i=o,o=r,r=n,n=e+t|0}var u;n=n+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,s=s+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,r,o,i,a,s,l,c)}roundClean(){Ax.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Tx extends Rx{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Bx=xx((()=>new Rx)),jx=(xx((()=>new Tx)),BigInt(0),BigInt(1)),Ox=BigInt(2),Ix=e=>e instanceof Uint8Array,Px=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Lx(e){if(!Ix(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Px[e[n]];return t}function zx(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function Ux(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const t=2*r,o=e.slice(t,t+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[r]=i}return n}function Mx(e){return zx(Lx(e))}function Fx(e){if(!Ix(e))throw new Error("Uint8Array expected");return zx(Lx(Uint8Array.from(e).reverse()))}function Dx(e,t){return Ux(e.toString(16).padStart(2*t,"0"))}function qx(e,t){return Dx(e,t).reverse()}function Hx(e,t,n){let r;if("string"===typeof t)try{r=Ux(t)}catch(Ry){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${Ry}`)}else{if(!Ix(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const o=r.length;if("number"===typeof n&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function Wx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new Uint8Array(t.reduce(((e,t)=>e+t.length),0));let o=0;return t.forEach((e=>{if(!Ix(e))throw new Error("Uint8Array expected");r.set(e,o),o+=e.length})),r}const $x=e=>(Ox<<BigInt(e-1))-jx,Kx=e=>new Uint8Array(e),Qx=e=>Uint8Array.from(e);function Gx(e,t,n){if("number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!==typeof n)throw new Error("hmacFn must be a function");let r=Kx(e),o=Kx(e),i=0;const a=()=>{r.fill(1),o.fill(0),i=0},s=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n(o,r,...t)},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kx();o=s(Qx([0]),e),r=s(),0!==e.length&&(o=s(Qx([1]),e),r=s())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=s();const t=r.slice();n.push(t),e+=r.length}return Wx(...n)};return(e,t)=>{let n;for(a(),l(e);!(n=t(c()));)l();return a(),n}}const Vx={bigint:e=>"bigint"===typeof e,function:e=>"function"===typeof e,boolean:e=>"boolean"===typeof e,string:e=>"string"===typeof e,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"===typeof e&&Number.isSafeInteger(e.outputLen)};function Zx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(t,n,r)=>{const o=Vx[n];if("function"!==typeof o)throw new Error(`Invalid validator "${n}", expected function`);const i=e[t];if((!r||void 0!==i)&&!o(i,e))throw new Error(`Invalid param ${String(t)}=${i} (${typeof i}), expected ${n}`)};for(const[o,i]of Object.entries(t))r(o,i,!1);for(const[o,i]of Object.entries(n))r(o,i,!0);return e}const Yx=BigInt(0),Jx=BigInt(1),Xx=BigInt(2),eE=BigInt(3),tE=BigInt(4),nE=BigInt(5),rE=BigInt(8);BigInt(9),BigInt(16);function oE(e,t){const n=e%t;return n>=Yx?n:t+n}function iE(e,t,n){if(n<=Yx||t<Yx)throw new Error("Expected power/modulo > 0");if(n===Jx)return Yx;let r=Jx;for(;t>Yx;)t&Jx&&(r=r*e%n),e=e*e%n,t>>=Jx;return r}function aE(e,t,n){let r=e;for(;t-- >Yx;)r*=r,r%=n;return r}function sE(e,t){if(e===Yx||t<=Yx)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=oE(e,t),r=t,o=Yx,i=Jx,a=Jx,s=Yx;for(;n!==Yx;){const e=r/n,t=r%n,l=o-a*e,c=i-s*e;r=n,n=t,o=a,i=s,a=l,s=c}if(r!==Jx)throw new Error("invert: does not exist");return oE(o,t)}function lE(e){if(e%tE===eE){const t=(e+Jx)/tE;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%rE===nE){const t=(e-nE)/rE;return function(e,n){const r=e.mul(n,Xx),o=e.pow(r,t),i=e.mul(n,o),a=e.mul(e.mul(i,Xx),o),s=e.mul(i,e.sub(a,e.ONE));if(!e.eql(e.sqr(s),n))throw new Error("Cannot find square root");return s}}return function(e){const t=(e-Jx)/Xx;let n,r,o;for(n=e-Jx,r=0;n%Xx===Yx;n/=Xx,r++);for(o=Xx;o<e&&iE(o,t,e)!==e-Jx;o++);if(1===r){const t=(e+Jx)/tE;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const i=(n+Jx)/Xx;return function(e,a){if(e.pow(a,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let s=r,l=e.pow(e.mul(e.ONE,o),n),c=e.pow(a,i),u=e.pow(a,n);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<s&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const n=e.pow(l,Jx<<BigInt(s-t-1));l=e.sqr(n),c=e.mul(c,n),u=e.mul(u,l),s=t}return c}}(e)}const cE=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function uE(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}const hE=BigInt(0),dE=BigInt(1);function fE(e){return Zx(e.Fp,cE.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),Zx(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...uE(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:pE,hexToBytes:gE}=e,mE={Err:class extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},_parseInt(e){const{Err:t}=mE;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(128&r[0])throw new t("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:pE(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=mE,n="string"===typeof e?gE(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:i}=mE._parseInt(n.subarray(2)),{d:a,l:s}=mE._parseInt(i);if(s.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:a}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},r=t(n(e.s)),o=t(n(e.r)),i=r.length/2,a=o.length/2,s=n(i),l=n(a);return`30${n(a+i+4)}02${l}${o}02${s}${r}`}},yE=BigInt(0),bE=BigInt(1),vE=(BigInt(2),BigInt(3));BigInt(4);function wE(e){const t=function(e){const t=fE(e);Zx(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!==typeof n||"bigint"!==typeof n.beta||"function"!==typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=t.toBytes||((e,t,r)=>{const o=t.toAffine();return Wx(Uint8Array.from([4]),n.toBytes(o.x),n.toBytes(o.y))}),o=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function i(e){const{a:r,b:o}=t,i=n.sqr(e),a=n.mul(i,e);return n.add(n.add(a,n.mul(e,r)),o)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){return"bigint"===typeof e&&yE<e&&e<t.n}function s(e){if(!a(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:o,n:i}=t;if(n&&"bigint"!==typeof e){if(e instanceof Uint8Array&&(e=Lx(e)),"string"!==typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let a;try{a="bigint"===typeof e?e:Mx(Hx("private key",e,r))}catch(l){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return o&&(a=oE(a,i)),s(a),a}const c=new Map;function u(e){if(!(e instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof h)throw new Error("projective point not allowed");const o=e=>n.eql(e,n.ZERO);return o(t)&&o(r)?h.ZERO:new h(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(h.fromAffine)}static fromHex(e){const t=h.fromAffine(o(Hx("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw new Error("bad point: x or y not FE");const o=n.sqr(r),a=i(e);if(!n.eql(o,a))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){u(e);const{px:t,py:r,pz:o}=this,{px:i,py:a,pz:s}=e,l=n.eql(n.mul(t,s),n.mul(i,o)),c=n.eql(n.mul(r,s),n.mul(a,o));return l&&c}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,o=n.mul(r,vE),{px:i,py:a,pz:s}=this;let l=n.ZERO,c=n.ZERO,u=n.ZERO,d=n.mul(i,i),f=n.mul(a,a),p=n.mul(s,s),g=n.mul(i,a);return g=n.add(g,g),u=n.mul(i,s),u=n.add(u,u),l=n.mul(e,u),c=n.mul(o,p),c=n.add(l,c),l=n.sub(f,c),c=n.add(f,c),c=n.mul(l,c),l=n.mul(g,l),u=n.mul(o,u),p=n.mul(e,p),g=n.sub(d,p),g=n.mul(e,g),g=n.add(g,u),u=n.add(d,d),d=n.add(u,d),d=n.add(d,p),d=n.mul(d,g),c=n.add(c,d),p=n.mul(a,s),p=n.add(p,p),d=n.mul(p,g),l=n.sub(l,d),u=n.mul(p,f),u=n.add(u,u),u=n.add(u,u),new h(l,c,u)}add(e){u(e);const{px:r,py:o,pz:i}=this,{px:a,py:s,pz:l}=e;let c=n.ZERO,d=n.ZERO,f=n.ZERO;const p=t.a,g=n.mul(t.b,vE);let m=n.mul(r,a),y=n.mul(o,s),b=n.mul(i,l),v=n.add(r,o),w=n.add(a,s);v=n.mul(v,w),w=n.add(m,y),v=n.sub(v,w),w=n.add(r,i);let k=n.add(a,l);return w=n.mul(w,k),k=n.add(m,b),w=n.sub(w,k),k=n.add(o,i),c=n.add(s,l),k=n.mul(k,c),c=n.add(y,b),k=n.sub(k,c),f=n.mul(p,w),c=n.mul(g,b),f=n.add(c,f),c=n.sub(y,f),f=n.add(y,f),d=n.mul(c,f),y=n.add(m,m),y=n.add(y,m),b=n.mul(p,b),w=n.mul(g,w),y=n.add(y,b),b=n.sub(m,b),b=n.mul(p,b),w=n.add(w,b),m=n.mul(y,w),d=n.add(d,m),m=n.mul(k,w),c=n.mul(v,c),c=n.sub(c,m),m=n.mul(v,y),f=n.mul(k,f),f=n.add(f,m),new h(c,d,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return f.wNAFCached(this,c,e,(e=>{const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(h.fromAffine)}))}multiplyUnsafe(e){const r=h.ZERO;if(e===yE)return r;if(s(e),e===bE)return this;const{endo:o}=t;if(!o)return f.unsafeLadder(this,e);let{k1neg:i,k1:a,k2neg:l,k2:c}=o.splitScalar(e),u=r,d=r,p=this;for(;a>yE||c>yE;)a&bE&&(u=u.add(p)),c&bE&&(d=d.add(p)),p=p.double(),a>>=bE,c>>=bE;return i&&(u=u.negate()),l&&(d=d.negate()),d=new h(n.mul(d.px,o.beta),d.py,d.pz),u.add(d)}multiply(e){s(e);let r,o,i=e;const{endo:a}=t;if(a){const{k1neg:e,k1:t,k2neg:s,k2:l}=a.splitScalar(i);let{p:c,f:u}=this.wNAF(t),{p:d,f:p}=this.wNAF(l);c=f.constTimeNegate(e,c),d=f.constTimeNegate(s,d),d=new h(n.mul(d.px,a.beta),d.py,d.pz),r=c.add(d),o=u.add(p)}else{const{p:e,f:t}=this.wNAF(i);r=e,o=t}return h.normalizeZ([r,o])[0]}multiplyAndAddUnsafe(e,t,n){const r=h.BASE,o=(e,t)=>t!==yE&&t!==bE&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),i=o(this,t).add(o(e,n));return i.is0()?void 0:i}toAffine(e){const{px:t,py:r,pz:o}=this,i=this.is0();null==e&&(e=i?n.ONE:n.inv(o));const a=n.mul(t,e),s=n.mul(r,e),l=n.mul(o,e);if(i)return{x:n.ZERO,y:n.ZERO};if(!n.eql(l,n.ONE))throw new Error("invZ was invalid");return{x:a,y:s}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===bE)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===bE?this:n?n(h,this):this.multiplyUnsafe(t.h)}toRawBytes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.assertValidity(),r(h,this,e)}toHex(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Lx(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const d=t.nBitLength,f=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,o=t;for(;n>hE;)n&dE&&(r=r.add(o)),o=o.double(),n>>=dE;return r},precomputeWindow(e,t){const{windows:n,windowSize:o}=r(t),i=[];let a=e,s=a;for(let r=0;r<n;r++){s=a,i.push(s);for(let e=1;e<o;e++)s=s.add(a),i.push(s);a=s.double()}return i},wNAF(t,o,i){const{windows:a,windowSize:s}=r(t);let l=e.ZERO,c=e.BASE;const u=BigInt(2**t-1),h=2**t,d=BigInt(t);for(let e=0;e<a;e++){const t=e*s;let r=Number(i&u);i>>=d,r>s&&(r-=h,i+=dE);const a=t,f=t+Math.abs(r)-1,p=e%2!==0,g=r<0;0===r?c=c.add(n(p,o[a])):l=l.add(n(g,o[f]))}return{p:l,f:c}},wNAFCached(e,t,n,r){const o=e._WINDOW_SIZE||1;let i=t.get(e);return i||(i=this.precomputeWindow(e,o),1!==o&&t.set(e,r(i))),this.wNAF(o,i,n)}}}(h,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:a}}function kE(e){const t=function(e){const t=fE(e);return Zx(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,o=n.BYTES+1,i=2*n.BYTES+1;function a(e){return oE(e,r)}function s(e){return sE(e,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:u,isWithinCurveOrder:h}=wE({...t,toBytes(e,t,r){const o=t.toAffine(),i=n.toBytes(o.x),a=Wx;return r?a(Uint8Array.from([t.hasEvenY()?2:3]),i):a(Uint8Array.from([4]),i,n.toBytes(o.y))},fromBytes(e){const t=e.length,r=e[0],a=e.subarray(1);if(t!==o||2!==r&&3!==r){if(t===i&&4===r){return{x:n.fromBytes(a.subarray(0,n.BYTES)),y:n.fromBytes(a.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}{const e=Mx(a);if(!(yE<(s=e)&&s<n.ORDER))throw new Error("Point is not on curve");const t=u(e);let o=n.sqrt(t);return 1===(1&r)!==((o&bE)===bE)&&(o=n.neg(o)),{x:e,y:o}}var s}}),d=e=>Lx(Dx(e,t.nByteLength));function f(e){return e>r>>bE}const p=(e,t,n)=>Mx(e.slice(t,n));class g{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=Hx("compactSignature",e,2*n),new g(p(e,0,n),p(e,n,2*n))}static fromDER(e){const{r:t,s:n}=mE.toSig(Hx("DER",e));return new g(t,n)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:o,recovery:i}=this,c=v(Hx("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const u=2===i||3===i?r+t.n:r;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0===(1&i)?"02":"03",f=l.fromHex(h+d(u)),p=s(u),g=a(-c*p),m=a(o*p),y=l.BASE.multiplyAndAddUnsafe(f,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Ux(this.toDERHex())}toDERHex(){return mE.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ux(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const m={isValidPrivateKey(e){try{return c(e),!0}catch(t){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const e=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=(e=Hx("privateHash",e)).length,o=uE(t).nByteLength+8;if(o<24||r<o||r>1024)throw new Error(`hashToPrivateScalar: expected ${o}-1024 bytes of input, got ${r}`);return oE(n?Fx(e):Mx(e),t-Jx)+Jx}(t.randomBytes(n.BYTES+8),r);return Dx(e,t.nByteLength)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function y(e){const t=e instanceof Uint8Array,n="string"===typeof e,r=(t||n)&&e.length;return t?r===o||r===i:n?r===2*o||r===2*i:e instanceof l}const b=t.bits2int||function(e){const n=Mx(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},v=t.bits2int_modN||function(e){return a(b(e))},w=$x(t.nBitLength);function k(e){if("bigint"!==typeof e)throw new Error("bigint expected");if(!(yE<=e&&e<w))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Dx(e,t.nByteLength)}function x(e,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;if(["recovered","canonical"].some((e=>e in o)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:u}=t;let{lowS:d,prehash:p,extraEntropy:m}=o;null==d&&(d=!0),e=Hx("msgHash",e),p&&(e=Hx("prehashed msgHash",i(e)));const y=v(e),w=c(r),x=[k(w),k(y)];if(null!=m){const e=!0===m?u(n.BYTES):m;x.push(Hx("extraEntropy",e,n.BYTES))}const _=Wx(...x),N=y;return{seed:_,k2sig:function(e){const t=b(e);if(!h(t))return;const n=s(t),r=l.BASE.multiply(t).toAffine(),o=a(r.x);if(o===yE)return;const i=a(n*a(N+o*w));if(i===yE)return;let c=(r.x===o?0:2)|Number(r.y&bE),u=i;return d&&f(i)&&(u=function(e){return f(e)?a(-e):e}(i),c^=1),new g(o,u,c)}}}const E={lowS:t.lowS,prehash:!1},_={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return l.fromHex(t).multiply(c(e)).toRawBytes(n)},sign:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;const{seed:o,k2sig:i}=x(e,n,r),a=t;return Gx(a.hash.outputLen,a.nByteLength,a.hmac)(o,i)},verify:function(e,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_;const i=e;if(n=Hx("msgHash",n),r=Hx("publicKey",r),"strict"in o)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:u}=o;let h,d;try{if("string"===typeof i||i instanceof Uint8Array)try{h=g.fromDER(i)}catch(x){if(!(x instanceof mE.Err))throw x;h=g.fromCompact(i)}else{if("object"!==typeof i||"bigint"!==typeof i.r||"bigint"!==typeof i.s)throw new Error("PARSE");{const{r:e,s:t}=i;h=new g(e,t)}}d=l.fromHex(r)}catch(E){if("PARSE"===E.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&h.hasHighS())return!1;u&&(n=t.hash(n));const{r:f,s:p}=h,m=v(n),y=s(p),b=a(m*y),w=a(f*y),k=l.BASE.multiplyAndAddUnsafe(d,b,w)?.toAffine();return!!k&&a(k.x)===f},ProjectivePoint:l,Signature:g,utils:m}}class xE extends kx{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,gx.hash(e);const n=wx(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(n.length>r?e.create().update(n).digest():n);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(e){return gx.exists(this),this.iHash.update(e),this}digestInto(e){gx.exists(this),gx.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:a}=this;return e.finished=r,e.destroyed=o,e.blockLen=i,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const EE=(e,t,n)=>new xE(e,t).update(n).digest();function _E(e){return{hash:e,hmac:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return EE(e,t,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new Uint8Array(t.reduce(((e,t)=>e+t.length),0));let o=0;return t.forEach((e=>{if(!yx(e))throw new Error("Uint8Array expected");r.set(e,o),o+=e.length})),r}(...r))},randomBytes:Ex}}EE.create=(e,t)=>new xE(e,t);const NE=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),SE=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),CE=BigInt(1),AE=BigInt(2),RE=(e,t)=>(e+t/AE)/t;function TE(e){const t=NE,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),a=BigInt(23),s=BigInt(44),l=BigInt(88),c=e*e*e%t,u=c*c*e%t,h=aE(u,n,t)*u%t,d=aE(h,n,t)*u%t,f=aE(d,AE,t)*c%t,p=aE(f,o,t)*f%t,g=aE(p,i,t)*p%t,m=aE(g,s,t)*g%t,y=aE(m,l,t)*m%t,b=aE(y,s,t)*g%t,v=aE(b,n,t)*u%t,w=aE(v,a,t)*p%t,k=aE(w,r,t)*c%t,x=aE(k,AE,t);if(!BE.eql(BE.sqr(x),e))throw new Error("Cannot find square root");return x}const BE=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=Yx)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:i}=uE(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=lE(e),s=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:$x(o),ZERO:Yx,ONE:Jx,create:t=>oE(t,e),isValid:t=>{if("bigint"!==typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return Yx<=t&&t<e},is0:e=>e===Yx,isOdd:e=>(e&Jx)===Jx,neg:t=>oE(-t,e),eql:(e,t)=>e===t,sqr:t=>oE(t*t,e),add:(t,n)=>oE(t+n,e),sub:(t,n)=>oE(t-n,e),mul:(t,n)=>oE(t*n,e),pow:(e,t)=>function(e,t,n){if(n<Yx)throw new Error("Expected power > 0");if(n===Yx)return e.ONE;if(n===Jx)return t;let r=e.ONE,o=t;for(;n>Yx;)n&Jx&&(r=e.mul(r,o)),o=e.sqr(o),n>>=Jx;return r}(s,e,t),div:(t,n)=>oE(t*sE(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>sE(t,e),sqrt:r.sqrt||(e=>a(s,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,o)=>e.is0(r)?t:(n[o]=t,e.mul(t,r))),e.ONE),o=e.inv(r);return t.reduceRight(((t,r,o)=>e.is0(r)?t:(n[o]=e.mul(t,n[o]),e.mul(t,r))),o),n}(s,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?qx(e,i):Dx(e,i),fromBytes:e=>{if(e.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${e.length}`);return n?Fx(e):Mx(e)}});return Object.freeze(s)}(NE,void 0,void 0,{sqrt:TE}),jE=function(e,t){const n=t=>kE({...e,..._E(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:BE,n:SE,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=SE,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-CE*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),s=RE(i*e,t),l=RE(-r*e,t);let c=oE(e-s*n-l*o,t),u=oE(-s*r-l*i,t);const h=c>a,d=u>a;if(h&&(c=t-c),d&&(u=t-u),c>a||u>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:c,k2neg:d,k2:u}}}},Bx),OE=BigInt(0),IE=e=>"bigint"===typeof e&&OE<e&&e<NE,PE=e=>"bigint"===typeof e&&OE<e&&e<SE,LE={};function zE(e){let t=LE[e];if(void 0===t){const n=Bx(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=Wx(n,n),LE[e]=t}for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Bx(Wx(t,...r))}const UE=e=>e.toRawBytes(!0).slice(1),ME=e=>Dx(e,32),FE=e=>oE(e,NE),DE=e=>oE(e,SE),qE=jE.ProjectivePoint,HE=(e,t,n)=>qE.BASE.multiplyAndAddUnsafe(e,t,n);function WE(e){let t=jE.utils.normPrivateKeyToScalar(e),n=qE.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:DE(-t),bytes:UE(n)}}function $E(e){if(!IE(e))throw new Error("bad x: need 0 < x < p");const t=FE(e*e);let n=TE(FE(t*e+BigInt(7)));n%AE!==OE&&(n=FE(-n));const r=new qE(e,n,CE);return r.assertValidity(),r}function KE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return DE(Mx(zE("BIP0340/challenge",...t)))}function QE(e){return WE(e).bytes}function GE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ex(32);const r=Hx("message",e),{bytes:o,scalar:i}=WE(t),a=Hx("auxRand",n,32),s=ME(i^Mx(zE("BIP0340/aux",a))),l=zE("BIP0340/nonce",s,o,r),c=DE(Mx(l));if(c===OE)throw new Error("sign failed: k is zero");const{bytes:u,scalar:h}=WE(c),d=KE(u,o,r),f=new Uint8Array(64);if(f.set(u,0),f.set(ME(DE(h+d*i)),32),!VE(f,r,o))throw new Error("sign: Invalid signature produced");return f}function VE(e,t,n){const r=Hx("signature",e,64),o=Hx("message",t),i=Hx("publicKey",n,32);try{const e=$E(Mx(i)),t=Mx(r.subarray(0,32));if(!IE(t))return!1;const n=Mx(r.subarray(32,64));if(!PE(n))return!1;const a=KE(ME(t),UE(e),o),s=HE(e,n,DE(-a));return!(!s||!s.hasEvenY()||s.toAffine().x!==t)}catch(a){return!1}}const ZE=(()=>({getPublicKey:QE,sign:GE,verify:VE,utils:{randomPrivateKey:jE.utils.randomPrivateKey,lift_x:$E,pointToBytes:UE,numberToBytesBE:Dx,bytesToNumberBE:Mx,taggedHash:zE,mod:oE}}))(),YE="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,JE=e=>e instanceof Uint8Array,XE=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),e_=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const t_=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function n_(e){if(!JE(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=t_[e[n]];return t}function r_(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const t=2*r,o=e.slice(t,t+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[r]=i}return n}function o_(e){if("string"===typeof e&&(e=function(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!JE(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function i_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new Uint8Array(t.reduce(((e,t)=>e+t.length),0));let o=0;return t.forEach((e=>{if(!JE(e))throw new Error("Uint8Array expected");r.set(e,o),o+=e.length})),r}class a_{clone(){return this._cloneInto()}}function s_(e){const t=t=>e().update(o_(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function l_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(YE&&"function"===typeof YE.getRandomValues)return YE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function c_(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function u_(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}const h_={number:c_,bool:function(e){if("boolean"!==typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:u_,hash:function(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");c_(e.outputLen),c_(e.blockLen)},exists:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){u_(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},d_=h_;class f_ extends a_{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=XE(this.buffer)}update(e){d_.exists(this);const{view:t,buffer:n,blockLen:r}=this,o=(e=o_(e)).length;for(let i=0;i<o;){const a=Math.min(r-this.pos,o-i);if(a!==r)n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=XE(e);for(;r<=o-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){d_.exists(this),d_.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:o}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let u=i;u<r;u++)t[u]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),a=Number(n>>o&i),s=Number(n&i),l=r?4:0,c=r?0:4;e.setUint32(t+l,a,r),e.setUint32(t+c,s,r)}(n,r-8,BigInt(8*this.length),o),this.process(n,0);const a=XE(e),s=this.outputLen;if(s%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=s/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)a.setUint32(4*u,c[u],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:o,destroyed:i,pos:a}=this;return e.length=r,e.pos=a,e.finished=o,e.destroyed=i,r%t&&e.buffer.set(n),e}}const p_=(e,t,n)=>e&t^e&n^t&n,g_=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),m_=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),y_=new Uint32Array(64);class b_ extends f_{constructor(){super(64,32,8,!1),this.A=0|m_[0],this.B=0|m_[1],this.C=0|m_[2],this.D=0|m_[3],this.E=0|m_[4],this.F=0|m_[5],this.G=0|m_[6],this.H=0|m_[7]}get(){const{A:e,B:t,C:n,D:r,E:o,F:i,G:a,H:s}=this;return[e,t,n,r,o,i,a,s]}set(e,t,n,r,o,i,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|a,this.H=0|s}process(e,t){for(let h=0;h<16;h++,t+=4)y_[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const e=y_[h-15],t=y_[h-2],n=e_(e,7)^e_(e,18)^e>>>3,r=e_(t,17)^e_(t,19)^t>>>10;y_[h]=r+y_[h-7]+n+y_[h-16]|0}let{A:n,B:r,C:o,D:i,E:a,F:s,G:l,H:c}=this;for(let h=0;h<64;h++){const e=c+(e_(a,6)^e_(a,11)^e_(a,25))+((u=a)&s^~u&l)+g_[h]+y_[h]|0,t=(e_(n,2)^e_(n,13)^e_(n,22))+p_(n,r,o)|0;c=l,l=s,s=a,a=i+e|0,i=o,o=r,r=n,n=e+t|0}var u;n=n+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,s=s+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,r,o,i,a,s,l,c)}roundClean(){y_.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class v_ extends b_{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const w_=s_((()=>new b_));s_((()=>new v_));function k_(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function x_(){const e=(e,t)=>n=>e(t(n));for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return{encode:Array.from(n).reverse().reduce(((t,n)=>t?e(t,n.encode):n.encode),void 0),decode:n.reduce(((t,n)=>t?e(t,n.decode):n.decode),void 0)}}function E_(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(k_(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!==typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function __(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!==typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!==typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!==typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function N_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=";if(k_(e),"string"!==typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function S_(e){if("function"!==typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function C_(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],i=Array.from(e);for(i.forEach((e=>{if(k_(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,a=!0;for(let o=r;o<i.length;o++){const s=i[o],l=t*e+s;if(!Number.isSafeInteger(l)||t*e/t!==e||l-s!==t*e)throw new Error("convertRadix: carry overflow");if(e=l%n,i[o]=Math.floor(l/n),!Number.isSafeInteger(i[o])||i[o]*n+e!==l)throw new Error("convertRadix: carry overflow");a&&(i[o]?a=!1:r=o)}if(o.push(e),a)break}for(let a=0;a<e.length-1&&0===e[a];a++)o.push(0);return o.reverse()}const A_=(e,t)=>t?A_(t,e%t):e,R_=(e,t)=>e+(t-A_(e,t));function T_(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(R_(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${R_(t,n)}`);let o=0,i=0;const a=2**n-1,s=[];for(const l of e){if(k_(l),l>=2**t)throw new Error(`convertRadix2: invalid data word=${l} from=${t}`);if(o=o<<t|l,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)s.push((o>>i-n&a)>>>0);o&=2**i-1}if(o=o<<n-i&a,!r&&i>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&s.push(o>>>0),s}function B_(e){return k_(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return C_(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(C_(t,e,256))}}}function j_(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(k_(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(R_(8,e)>32||R_(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return T_(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!==typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(T_(n,e,8,t))}}}function O_(e){if("function"!==typeof e)throw new Error("unsafeWrapper fn should be function");return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(null,n)}catch(Ry){}}}const I_=x_(j_(4),E_("0123456789ABCDEF"),__("")),P_=x_(j_(5),E_("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),N_(5),__("")),L_=(x_(j_(5),E_("0123456789ABCDEFGHIJKLMNOPQRSTUV"),N_(5),__("")),x_(j_(5),E_("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),__(""),S_((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),x_(j_(6),E_("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),N_(6),__(""))),z_=x_(j_(6),E_("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),N_(6),__("")),U_=e=>x_(B_(58),E_(e),__("")),M_=U_("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),F_=(U_("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),U_("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),[0,2,3,5,6,7,9,10,11]),D_={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=M_.encode(r).padStart(F_[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),o=F_.indexOf(r.length),i=M_.decode(r);for(let e=0;e<i.length-o;e++)if(0!==i[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-o)))}return Uint8Array.from(t)}},q_=x_(E_("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),__("")),H_=[996825010,642813549,513874426,1027748829,705979059];function W_(e){const t=e>>25;let n=(33554431&e)<<5;for(let r=0;r<H_.length;r++)1===(t>>r&1)&&(n^=H_[r]);return n}function $_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=e.length;let o=1;for(let i=0;i<r;i++){const t=e.charCodeAt(i);if(t<33||t>126)throw new Error(`Invalid prefix (${e})`);o=W_(o)^t>>5}o=W_(o);for(let i=0;i<r;i++)o=W_(o)^31&e.charCodeAt(i);for(let i of t)o=W_(o)^i;for(let i=0;i<6;i++)o=W_(o);return o^=n,q_.encode(T_([o%2**30],30,5,!1))}function K_(e){const t="bech32"===e?1:734539939,n=j_(5),r=n.decode,o=n.encode,i=O_(r);function a(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;if("string"!==typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==n&&e.length>n)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${n})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const o=(e=r).lastIndexOf("1");if(0===o||-1===o)throw new Error('Letter "1" must be present between prefix and data only');const i=e.slice(0,o),a=e.slice(o+1);if(a.length<6)throw new Error("Data must be at least 6 characters long");const s=q_.decode(a).slice(0,-6),l=$_(i,s,t);if(!a.endsWith(l))throw new Error(`Invalid checksum in ${e}: expected "${l}"`);return{prefix:i,words:s}}return{encode:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:90;if("string"!==typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(n)||n.length&&"number"!==typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const o=e.length+7+n.length;if(!1!==r&&o>r)throw new TypeError(`Length ${o} exceeds limit ${r}`);return`${e=e.toLowerCase()}1${q_.encode(n)}${$_(e,n,t)}`},decode:a,decodeToBytes:function(e){const{prefix:t,words:n}=a(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:O_(a),fromWords:r,fromWordsUnsafe:i,toWords:o}}const Q_=K_("bech32"),G_=(K_("bech32m"),{encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)}),V_=(x_(j_(4),E_("0123456789abcdef"),__(""),S_((e=>{if("string"!==typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}))),"abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n"));function Z_(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Y_(e){if(!((t=e)instanceof Uint8Array||null!=t&&"object"===typeof t&&"Uint8Array"===t.constructor.name))throw new Error("Expected Uint8Array");for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function J_(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Z_(e.outputLen),Z_(e.blockLen)}function X_(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function eN(e,t){Y_(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const tN={number:Z_,bool:function(e){if("boolean"!==typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:Y_,hash:J_,exists:X_,output:eN},nN="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function rN(e){return e instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name}const oN=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),iN=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const aN=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));const sN={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function lN(e){return e>=sN._0&&e<=sN._9?e-sN._0:e>=sN._A&&e<=sN._F?e-(sN._A-10):e>=sN._a&&e<=sN._f?e-(sN._a-10):void 0}function cN(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function uN(e){if("string"===typeof e&&(e=cN(e)),!rN(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function hN(){let e=0;for(let n=0;n<arguments.length;n++){const t=n<0||arguments.length<=n?void 0:arguments[n];if(!rN(t))throw new Error("Uint8Array expected");e+=t.length}const t=new Uint8Array(e);for(let n=0,r=0;n<arguments.length;n++){const e=n<0||arguments.length<=n?void 0:arguments[n];t.set(e,r),r+=e.length}return t}class dN{clone(){return this._cloneInto()}}const fN={}.toString;function pN(e){const t=t=>e().update(uN(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}class gN extends dN{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,J_(e);const n=uN(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(n.length>r?e.create().update(n).digest():n);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(e){return X_(this),this.iHash.update(e),this}digestInto(e){X_(this),Y_(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:a}=this;return e.finished=r,e.destroyed=o,e.blockLen=i,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const mN=(e,t,n)=>new gN(e,t).update(n).digest();function yN(e,t,n,r){J_(e);const o=function(e,t){if(void 0!==t&&"[object Object]"!==fN.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)}({dkLen:32,asyncTick:10},r),{c:i,dkLen:a,asyncTick:s}=o;if(Z_(i),Z_(a),Z_(s),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=uN(t),c=uN(n),u=new Uint8Array(a),h=mN.create(e,l),d=h._cloneInto().update(c);return{c:i,dkLen:a,asyncTick:s,DK:u,PRF:h,PRFSalt:d}}function bN(e,t,n,r,o){return e.destroy(),t.destroy(),r&&r.destroy(),o.fill(0),n}mN.create=(e,t)=>new gN(e,t);class vN extends dN{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=oN(this.buffer)}update(e){X_(this);const{view:t,buffer:n,blockLen:r}=this,o=(e=uN(e)).length;for(let i=0;i<o;){const a=Math.min(r-this.pos,o-i);if(a!==r)n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=oN(e);for(;r<=o-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){X_(this),eN(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:o}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let u=i;u<r;u++)t[u]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),a=Number(n>>o&i),s=Number(n&i),l=r?4:0,c=r?0:4;e.setUint32(t+l,a,r),e.setUint32(t+c,s,r)}(n,r-8,BigInt(8*this.length),o),this.process(n,0);const a=oN(e),s=this.outputLen;if(s%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=s/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)a.setUint32(4*u,c[u],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:o,destroyed:i,pos:a}=this;return e.length=r,e.pos=a,e.finished=o,e.destroyed=i,r%t&&e.buffer.set(n),e}}const wN=(e,t,n)=>e&t^e&n^t&n,kN=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xN=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),EN=new Uint32Array(64);class _N extends vN{constructor(){super(64,32,8,!1),this.A=0|xN[0],this.B=0|xN[1],this.C=0|xN[2],this.D=0|xN[3],this.E=0|xN[4],this.F=0|xN[5],this.G=0|xN[6],this.H=0|xN[7]}get(){const{A:e,B:t,C:n,D:r,E:o,F:i,G:a,H:s}=this;return[e,t,n,r,o,i,a,s]}set(e,t,n,r,o,i,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|a,this.H=0|s}process(e,t){for(let h=0;h<16;h++,t+=4)EN[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const e=EN[h-15],t=EN[h-2],n=iN(e,7)^iN(e,18)^e>>>3,r=iN(t,17)^iN(t,19)^t>>>10;EN[h]=r+EN[h-7]+n+EN[h-16]|0}let{A:n,B:r,C:o,D:i,E:a,F:s,G:l,H:c}=this;for(let h=0;h<64;h++){const e=c+(iN(a,6)^iN(a,11)^iN(a,25))+((u=a)&s^~u&l)+kN[h]+EN[h]|0,t=(iN(n,2)^iN(n,13)^iN(n,22))+wN(n,r,o)|0;c=l,l=s,s=a,a=i+e|0,i=o,o=r,r=n,n=e+t|0}var u;n=n+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,s=s+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,r,o,i,a,s,l,c)}roundClean(){EN.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const NN=pN((()=>new _N)),SN=BigInt(2**32-1),CN=BigInt(32);function AN(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&SN),l:Number(e>>CN&SN)}:{h:0|Number(e>>CN&SN),l:0|Number(e&SN)}}const RN={fromBig:AN,split:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:i,l:a}=AN(e[o],t);[n[o],r[o]]=[i,a]}return[n,r]},toBig:(e,t)=>BigInt(e>>>0)<<CN|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,n)=>e<<n|t>>>32-n,rotlSL:(e,t,n)=>t<<n|e>>>32-n,rotlBH:(e,t,n)=>t<<n-32|e>>>64-n,rotlBL:(e,t,n)=>e<<n-32|t>>>64-n,add:function(e,t,n,r){const o=(t>>>0)+(r>>>0);return{h:e+n+(o/2**32|0)|0,l:0|o}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,o)=>t+n+r+o+(e/2**32|0)|0,add5H:(e,t,n,r,o,i)=>t+n+r+o+i+(e/2**32|0)|0,add5L:(e,t,n,r,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(o>>>0)},TN=RN,[BN,jN]=(()=>TN.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),ON=new Uint32Array(80),IN=new Uint32Array(80);class PN extends vN{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:o,Cl:i,Dh:a,Dl:s,Eh:l,El:c,Fh:u,Fl:h,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[e,t,n,r,o,i,a,s,l,c,u,h,d,f,p,g]}set(e,t,n,r,o,i,a,s,l,c,u,h,d,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|o,this.Cl=0|i,this.Dh=0|a,this.Dl=0|s,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let b=0;b<16;b++,t+=4)ON[b]=e.getUint32(t),IN[b]=e.getUint32(t+=4);for(let b=16;b<80;b++){const e=0|ON[b-15],t=0|IN[b-15],n=TN.rotrSH(e,t,1)^TN.rotrSH(e,t,8)^TN.shrSH(e,t,7),r=TN.rotrSL(e,t,1)^TN.rotrSL(e,t,8)^TN.shrSL(e,t,7),o=0|ON[b-2],i=0|IN[b-2],a=TN.rotrSH(o,i,19)^TN.rotrBH(o,i,61)^TN.shrSH(o,i,6),s=TN.rotrSL(o,i,19)^TN.rotrBL(o,i,61)^TN.shrSL(o,i,6),l=TN.add4L(r,s,IN[b-7],IN[b-16]),c=TN.add4H(l,n,a,ON[b-7],ON[b-16]);ON[b]=0|c,IN[b]=0|l}let{Ah:n,Al:r,Bh:o,Bl:i,Ch:a,Cl:s,Dh:l,Dl:c,Eh:u,El:h,Fh:d,Fl:f,Gh:p,Gl:g,Hh:m,Hl:y}=this;for(let b=0;b<80;b++){const e=TN.rotrSH(u,h,14)^TN.rotrSH(u,h,18)^TN.rotrBH(u,h,41),t=TN.rotrSL(u,h,14)^TN.rotrSL(u,h,18)^TN.rotrBL(u,h,41),v=u&d^~u&p,w=h&f^~h&g,k=TN.add5L(y,t,w,jN[b],IN[b]),x=TN.add5H(k,m,e,v,BN[b],ON[b]),E=0|k,_=TN.rotrSH(n,r,28)^TN.rotrBH(n,r,34)^TN.rotrBH(n,r,39),N=TN.rotrSL(n,r,28)^TN.rotrBL(n,r,34)^TN.rotrBL(n,r,39),S=n&o^n&a^o&a,C=r&i^r&s^i&s;m=0|p,y=0|g,p=0|d,g=0|f,d=0|u,f=0|h,({h:u,l:h}=TN.add(0|l,0|c,0|x,0|E)),l=0|a,c=0|s,a=0|o,s=0|i,o=0|n,i=0|r;const A=TN.add3L(E,N,C);n=TN.add3H(A,x,_,S),r=0|A}({h:n,l:r}=TN.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:o,l:i}=TN.add(0|this.Bh,0|this.Bl,0|o,0|i)),({h:a,l:s}=TN.add(0|this.Ch,0|this.Cl,0|a,0|s)),({h:l,l:c}=TN.add(0|this.Dh,0|this.Dl,0|l,0|c)),({h:u,l:h}=TN.add(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:f}=TN.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=TN.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:y}=TN.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(n,r,o,i,a,s,l,c,u,h,d,f,p,g,m,y)}roundClean(){ON.fill(0),IN.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const LN=pN((()=>new PN));function zN(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function UN(e){return e instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name}function MN(){const e=e=>e,t=(e,t)=>n=>e(t(n));for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return{encode:r.map((e=>e.encode)).reduceRight(t,e),decode:r.map((e=>e.decode)).reduce(t,e)}}function FN(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(zN(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!==typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function DN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!==typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!==typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!==typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function qN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=";if(zN(e),"string"!==typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function HN(e){if("function"!==typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function WN(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],i=Array.from(e);for(i.forEach((e=>{if(zN(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,a=!0;for(let o=r;o<i.length;o++){const s=i[o],l=t*e+s;if(!Number.isSafeInteger(l)||t*e/t!==e||l-s!==t*e)throw new Error("convertRadix: carry overflow");e=l%n;const c=Math.floor(l/n);if(i[o]=c,!Number.isSafeInteger(c)||c*n+e!==l)throw new Error("convertRadix: carry overflow");a&&(c?a=!1:r=o)}if(o.push(e),a)break}for(let a=0;a<e.length-1&&0===e[a];a++)o.push(0);return o.reverse()}const $N=(e,t)=>t?$N(t,e%t):e,KN=(e,t)=>e+(t-$N(e,t));function QN(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(KN(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${KN(t,n)}`);let o=0,i=0;const a=2**n-1,s=[];for(const l of e){if(zN(l),l>=2**t)throw new Error(`convertRadix2: invalid data word=${l} from=${t}`);if(o=o<<t|l,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)s.push((o>>i-n&a)>>>0);o&=2**i-1}if(o=o<<n-i&a,!r&&i>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&s.push(o>>>0),s}function GN(e){return zN(e),{encode:t=>{if(!UN(t))throw new Error("radix.encode input should be Uint8Array");return WN(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(WN(t,e,256))}}}function VN(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(zN(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(KN(8,e)>32||KN(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!UN(n))throw new Error("radix2.encode input should be Uint8Array");return QN(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!==typeof n[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(QN(n,e,8,t))}}}function ZN(e,t){if(zN(e),"function"!==typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!UN(n))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),o=new Uint8Array(n.length+e);return o.set(n),o.set(r,n.length),o},decode(n){if(!UN(n))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),o=t(r).slice(0,e),i=n.slice(-e);for(let t=0;t<e;t++)if(o[t]!==i[t])throw new Error("Invalid checksum");return r}}}const YN={alphabet:FN,chain:MN,checksum:ZN,convertRadix:WN,convertRadix2:QN,radix:GN,radix2:VN,join:DN,padding:qN},JN=MN(VN(4),FN("0123456789ABCDEF"),DN("")),XN=MN(VN(5),FN("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),qN(5),DN("")),eS=(VN(5),FN("0123456789ABCDEFGHIJKLMNOPQRSTUV"),qN(5),DN(""),VN(5),FN("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),DN(""),HN((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),MN(VN(6),FN("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),qN(6),DN(""))),tS=MN(VN(6),FN("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),qN(6),DN("")),nS=(VN(6),FN("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),DN(""),e=>MN(GN(58),FN(e),DN(""))),rS=nS("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),oS=[0,2,3,5,6,7,9,10,11],iS={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=rS.encode(r).padStart(oS[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),o=oS.indexOf(r.length),i=rS.decode(r);for(let e=0;e<i.length-o;e++)if(0!==i[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-o)))}return Uint8Array.from(t)}},aS=e=>MN(ZN(4,(t=>e(e(t)))),rS);FN("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),DN("");const sS={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},lS=(VN(4),FN("0123456789abcdef"),DN(""),HN((e=>{if("string"!==typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),e=>"\u3042\u3044\u3053\u304f\u3057\u3093"===e[0]);function cS(e){if("string"!==typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function uS(e){const t=cS(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function hS(e){tN.bytes(e,16,20,24,28,32)}function dS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128;if(tN.number(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return function(e,t){hS(e);const n=pS(t).encode(e);return n.join(lS(t)?"\u3000":" ")}(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(nN&&"function"===typeof nN.getRandomValues)return nN.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}(t/8),e)}const fS=e=>{const t=8-e.length/4;return new Uint8Array([NN(e)[0]>>t<<t])};function pS(e){if(!Array.isArray(e)||2048!==e.length||"string"!==typeof e[0])throw new Error("Worlist: expected array of 2048 strings");return e.forEach((e=>{if("string"!==typeof e)throw new Error(`Wordlist: non-string element: ${e}`)})),YN.chain(YN.checksum(1,fS),YN.radix2(11,!0),YN.alphabet(e))}function gS(e,t){try{!function(e,t){const{words:n}=uS(e),r=pS(t).decode(n);hS(r)}(e,t)}catch(Ry){return!1}return!0}const mS=e=>cS(`mnemonic${e}`);function yS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(e,t,n,r){const{c:o,dkLen:i,DK:a,PRF:s,PRFSalt:l}=yN(e,t,n,r);let c;const u=new Uint8Array(4),h=oN(u),d=new Uint8Array(s.outputLen);for(let f=1,p=0;p<i;f++,p+=s.outputLen){const e=a.subarray(p,p+s.outputLen);h.setInt32(0,f,!1),(c=l._cloneInto(c)).update(u).digestInto(d),e.set(d.subarray(0,e.length));for(let t=1;t<o;t++){s._cloneInto(c).update(d).digestInto(d);for(let t=0;t<e.length;t++)e[t]^=d[t]}}return bN(s,l,a,c,d)}(LN,uS(e).nfkd,mS(t),{c:2048,dkLen:64})}const bS=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),vS=Uint8Array.from({length:16},((e,t)=>t));let wS=[vS],kS=[vS.map((e=>(9*e+5)%16))];for(let $R=0;$R<4;$R++)for(let e of[wS,kS])e.push(e[$R].map((e=>bS[e])));const xS=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),ES=wS.map(((e,t)=>e.map((e=>xS[t][e])))),_S=kS.map(((e,t)=>e.map((e=>xS[t][e])))),NS=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),SS=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),CS=(e,t)=>e<<t|e>>>32-t;function AS(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const RS=new Uint32Array(16);class TS extends vN{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:o}=this;return[e,t,n,r,o]}set(e,t,n,r,o){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|o}process(e,t){for(let d=0;d<16;d++,t+=4)RS[d]=e.getUint32(t,!0);let n=0|this.h0,r=n,o=0|this.h1,i=o,a=0|this.h2,s=a,l=0|this.h3,c=l,u=0|this.h4,h=u;for(let d=0;d<5;d++){const e=4-d,t=NS[d],f=SS[d],p=wS[d],g=kS[d],m=ES[d],y=_S[d];for(let r=0;r<16;r++){const e=CS(n+AS(d,o,a,l)+RS[p[r]]+t,m[r])+u|0;n=u,u=l,l=0|CS(a,10),a=o,o=e}for(let n=0;n<16;n++){const t=CS(r+AS(e,i,s,c)+RS[g[n]]+f,y[n])+h|0;r=h,h=c,c=0|CS(s,10),s=i,i=t}}this.set(this.h1+a+c|0,this.h2+l+h|0,this.h3+u+r|0,this.h4+n+i|0,this.h0+o+s|0)}roundClean(){RS.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const BS=pN((()=>new TS)),jS=jE.ProjectivePoint,OS=aS(NN);function IS(e){return BigInt(`0x${function(e){if(!rN(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=aN[e[n]];return t}(e)}`)}function PS(e){return function(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){const t=lN(e.charCodeAt(i)),n=lN(e.charCodeAt(i+1));if(void 0===t||void 0===n){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}r[o]=16*t+n}return r}(e.toString(16).padStart(64,"0"))}const LS=cN("Bitcoin seed"),zS={private:76066276,public:76067358},US=2147483648,MS=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const t=new Uint8Array(4);return oN(t).setUint32(0,e,!1),t};class FS{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return(e=>oN(e).getUint32(0,!1))(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return OS.encode(this.serialize(this.versions.private,hN(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return OS.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zS;if(Y_(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=mN(LN,LS,e);return new FS({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zS;const n=OS.decode(e),r=oN(n),o=r.getUint32(0,!1),i={versions:t,depth:n[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),s=0===a[0];if(o!==t[s?"private":"public"])throw new Error("Version mismatch");return new FS(s?{...i,privateKey:a.slice(1)}:{...i,publicKey:a})}static fromJSON(e){return FS.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!==typeof e)throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||zS,this.depth=e.depth||0,this.chainCode=e.chainCode,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!jE.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey="bigint"===typeof e.privateKey?e.privateKey:IS(e.privateKey),this.privKeyBytes=PS(this.privKey),this.pubKey=jE.getPublicKey(e.privateKey,!0)}else{if(!e.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=jS.fromHex(e.publicKey).toRawBytes(!0)}this.pubHash=(e=>BS(NN(e)))(this.pubKey)}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const t=e.replace(/^[mM]'?\//,"").split("/");let n=this;for(const r of t){const e=/^(\d+)('?)$/.exec(r);if(!e||3!==e.length)throw new Error(`Invalid child index: ${r}`);let t=+e[1];if(!Number.isSafeInteger(t)||t>=US)throw new Error("Invalid index");"'"===e[2]&&(t+=US),n=n.deriveChild(t)}return n}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=MS(e);if(e>=US){const e=this.privateKey;if(!e)throw new Error("Could not derive hardened child key");t=hN(new Uint8Array([0]),e,t)}else t=hN(this.pubKey,t);const n=mN(LN,this.chainCode,t),r=IS(n.slice(0,32)),o=n.slice(32);if(!jE.utils.isValidPrivateKey(r))throw new Error("Tweak bigger than curve order");const i={versions:this.versions,chainCode:o,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const e=oE(this.privKey+r,jE.CURVE.n);if(!jE.utils.isValidPrivateKey(e))throw new Error("The tweak was out of range or the resulted private key is invalid");i.privateKey=e}else{const e=jS.fromHex(this.pubKey).add(jS.fromPrivateKey(r));if(e.equals(jS.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");i.publicKey=e.toRawBytes(!0)}return new FS(i)}catch(a){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return Y_(e,32),jE.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){if(Y_(e,32),Y_(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=jE.Signature.fromCompact(t)}catch(r){return!1}return jE.verify(n,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return Y_(t,33),hN(MS(e),new Uint8Array([this.depth]),MS(this.parentFingerprint),MS(this.index),this.chainCode,t)}}const DS=e=>e instanceof Uint8Array,qS=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function HS(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function WS(e){if("string"===typeof e&&(e=HS(e)),!DS(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function $S(e,t){if(void 0!==t&&("object"!==typeof t||(n=t,"[object Object]"!==Object.prototype.toString.call(n)||n.constructor!==Object)))throw new Error("options must be object or undefined");var n;return Object.assign(e,t)}function KS(e,t){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");if("number"===typeof t&&e.length!==t)throw new Error(`Uint8Array length ${t} expected`)}function QS(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function GS(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}const VS={number:QS,bool:function(e){if("boolean"!==typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:GS,hash:function(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("hash must be wrapped by utils.wrapConstructor");QS(e.outputLen),QS(e.blockLen)},exists:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){GS(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},ZS=VS,YS=(e,t)=>255&e[t++]|(255&e[t++])<<8;class JS{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,KS(e=WS(e),32);const t=YS(e,0),n=YS(e,2),r=YS(e,4),o=YS(e,6),i=YS(e,8),a=YS(e,10),s=YS(e,12),l=YS(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|n<<3),this.r[2]=7939&(n>>>10|r<<6),this.r[3]=8191&(r>>>7|o<<9),this.r[4]=255&(o>>>4|i<<12),this.r[5]=i>>>1&8190,this.r[6]=8191&(i>>>14|a<<2),this.r[7]=8065&(a>>>11|s<<5),this.r[8]=8191&(s>>>8|l<<8),this.r[9]=l>>>5&127;for(let c=0;c<8;c++)this.pad[c]=YS(e,16+2*c)}process(e,t){const n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?0:2048,{h:r,r:o}=this,i=o[0],a=o[1],s=o[2],l=o[3],c=o[4],u=o[5],h=o[6],d=o[7],f=o[8],p=o[9],g=YS(e,t+0),m=YS(e,t+2),y=YS(e,t+4),b=YS(e,t+6),v=YS(e,t+8),w=YS(e,t+10),k=YS(e,t+12),x=YS(e,t+14);let E=r[0]+(8191&g),_=r[1]+(8191&(g>>>13|m<<3)),N=r[2]+(8191&(m>>>10|y<<6)),S=r[3]+(8191&(y>>>7|b<<9)),C=r[4]+(8191&(b>>>4|v<<12)),A=r[5]+(v>>>1&8191),R=r[6]+(8191&(v>>>14|w<<2)),T=r[7]+(8191&(w>>>11|k<<5)),B=r[8]+(8191&(k>>>8|x<<8)),j=r[9]+(x>>>5|n),O=0,I=O+E*i+_*(5*p)+N*(5*f)+S*(5*d)+C*(5*h);O=I>>>13,I&=8191,I+=A*(5*u)+R*(5*c)+T*(5*l)+B*(5*s)+j*(5*a),O+=I>>>13,I&=8191;let P=O+E*a+_*i+N*(5*p)+S*(5*f)+C*(5*d);O=P>>>13,P&=8191,P+=A*(5*h)+R*(5*u)+T*(5*c)+B*(5*l)+j*(5*s),O+=P>>>13,P&=8191;let L=O+E*s+_*a+N*i+S*(5*p)+C*(5*f);O=L>>>13,L&=8191,L+=A*(5*d)+R*(5*h)+T*(5*u)+B*(5*c)+j*(5*l),O+=L>>>13,L&=8191;let z=O+E*l+_*s+N*a+S*i+C*(5*p);O=z>>>13,z&=8191,z+=A*(5*f)+R*(5*d)+T*(5*h)+B*(5*u)+j*(5*c),O+=z>>>13,z&=8191;let U=O+E*c+_*l+N*s+S*a+C*i;O=U>>>13,U&=8191,U+=A*(5*p)+R*(5*f)+T*(5*d)+B*(5*h)+j*(5*u),O+=U>>>13,U&=8191;let M=O+E*u+_*c+N*l+S*s+C*a;O=M>>>13,M&=8191,M+=A*i+R*(5*p)+T*(5*f)+B*(5*d)+j*(5*h),O+=M>>>13,M&=8191;let F=O+E*h+_*u+N*c+S*l+C*s;O=F>>>13,F&=8191,F+=A*a+R*i+T*(5*p)+B*(5*f)+j*(5*d),O+=F>>>13,F&=8191;let D=O+E*d+_*h+N*u+S*c+C*l;O=D>>>13,D&=8191,D+=A*s+R*a+T*i+B*(5*p)+j*(5*f),O+=D>>>13,D&=8191;let q=O+E*f+_*d+N*h+S*u+C*c;O=q>>>13,q&=8191,q+=A*l+R*s+T*a+B*i+j*(5*p),O+=q>>>13,q&=8191;let H=O+E*p+_*f+N*d+S*h+C*u;O=H>>>13,H&=8191,H+=A*c+R*l+T*s+B*a+j*i,O+=H>>>13,H&=8191,O=(O<<2)+O|0,O=O+I|0,I=8191&O,O>>>=13,P+=O,r[0]=I,r[1]=P,r[2]=L,r[3]=z,r[4]=U,r[5]=M,r[6]=F,r[7]=D,r[8]=q,r[9]=H}finalize(){const{h:e,pad:t}=this,n=new Uint16Array(10);let r=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=r,r=e[a]>>>13,e[a]&=8191;e[0]+=5*r,r=e[0]>>>13,e[0]&=8191,e[1]+=r,r=e[1]>>>13,e[1]&=8191,e[2]+=r,n[0]=e[0]+5,r=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+r,r=n[a]>>>13,n[a]&=8191;n[9]-=8192;let o=(1^r)-1;for(let a=0;a<10;a++)n[a]&=o;o=~o;for(let a=0;a<10;a++)e[a]=e[a]&o|n[a];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let i=e[0]+t[0];e[0]=65535&i;for(let a=1;a<8;a++)i=(e[a]+t[a]|0)+(i>>>16)|0,e[a]=65535&i}update(e){ZS.exists(this);const{buffer:t,blockLen:n}=this,r=(e=WS(e)).length;for(let o=0;o<r;){const i=Math.min(n-this.pos,r-o);if(i!==n)t.set(e.subarray(o,o+i),this.pos),this.pos+=i,o+=i,this.pos===n&&(this.process(t,0,!1),this.pos=0);else for(;n<=r-o;o+=n)this.process(e,o)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){ZS.exists(this),ZS.output(e,this),this.finished=!0;const{buffer:t,h:n}=this;let{pos:r}=this;if(r){for(t[r++]=1;r<16;r++)t[r]=0;this.process(t,0,!0)}this.finalize();let o=0;for(let i=0;i<8;i++)e[o++]=n[i]>>>0,e[o++]=n[i]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}}!function(e){const t=(t,n)=>e(n).update(WS(t)).digest(),n=e(new Uint8Array(32));t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t)}((e=>new JS(e)));const XS=HS("expand 16-byte k"),eC=HS("expand 32-byte k"),tC=qS(XS),nC=qS(eC),rC=e=>!(e.byteOffset%4),oC=e=>{const{core:t,rounds:n,counterRight:r,counterLen:o,allow128bitKeys:i,extendNonceFn:a,blockLen:s}=$S({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},e);ZS.number(o),ZS.number(n),ZS.number(s),ZS.bool(r),ZS.bool(i);const l=s/4;if(s%4!==0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return function(e,c,u,h){let d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(ZS.bytes(e),ZS.bytes(c),ZS.bytes(u),h||(h=new Uint8Array(u.length)),ZS.bytes(h),ZS.number(d),d<0||d>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(h.length<u.length)throw new Error(`Salsa/ChaCha: output (${h.length}) is shorter than data (${u.length})`);const f=[];let p,g;if(32===e.length)p=e,g=nC;else{if(16!==e.length||!i)throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${e.length}`);p=new Uint8Array(32),p.set(e),p.set(e,16),g=tC,f.push(p)}if(a){if(c.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");p=a(g,p,c.subarray(0,16),new Uint8Array(32)),f.push(p),c=c.subarray(16)}const m=16-o;if(c.length!==m)throw new Error(`Salsa/ChaCha: nonce must be ${m} or 16 bytes`);if(12!==m){const e=new Uint8Array(12);e.set(c,r?0:12-c.length),f.push(c=e)}const y=new Uint8Array(s),b=qS(y),v=qS(p),w=qS(c),k=rC(u)&&qS(u),x=rC(h)&&qS(h);f.push(b);const E=u.length;for(let r=0,o=d;r<E;o++){if(t(g,v,w,b,o,n),o>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");const e=Math.min(s,E-r);if(e===s&&x&&k){const e=r/4;if(r%4!==0)throw new Error("Salsa/ChaCha: invalid block position");for(let t=0;t<l;t++)x[e+t]=k[e+t]^b[t];r+=s}else{for(let t=0;t<e;t++)h[r+t]=u[r+t]^y[t];r+=e}}for(let t=0;t<f.length;t++)f[t].fill(0);return h}},iC=(e,t)=>e<<t|e>>>32-t;function aC(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:20,a=e[0],s=e[1],l=e[2],c=e[3],u=t[0],h=t[1],d=t[2],f=t[3],p=t[4],g=t[5],m=t[6],y=t[7],b=o,v=n[0],w=n[1],k=n[2],x=a,E=s,_=l,N=c,S=u,C=h,A=d,R=f,T=p,B=g,j=m,O=y,I=b,P=v,L=w,z=k;for(let M=0;M<i;M+=2)x=x+S|0,I=iC(I^x,16),T=T+I|0,S=iC(S^T,12),x=x+S|0,I=iC(I^x,8),T=T+I|0,S=iC(S^T,7),E=E+C|0,P=iC(P^E,16),B=B+P|0,C=iC(C^B,12),E=E+C|0,P=iC(P^E,8),B=B+P|0,C=iC(C^B,7),_=_+A|0,L=iC(L^_,16),j=j+L|0,A=iC(A^j,12),_=_+A|0,L=iC(L^_,8),j=j+L|0,A=iC(A^j,7),N=N+R|0,z=iC(z^N,16),O=O+z|0,R=iC(R^O,12),N=N+R|0,z=iC(z^N,8),O=O+z|0,R=iC(R^O,7),x=x+C|0,z=iC(z^x,16),j=j+z|0,C=iC(C^j,12),x=x+C|0,z=iC(z^x,8),j=j+z|0,C=iC(C^j,7),E=E+A|0,I=iC(I^E,16),O=O+I|0,A=iC(A^O,12),E=E+A|0,I=iC(I^E,8),O=O+I|0,A=iC(A^O,7),_=_+R|0,P=iC(P^_,16),T=T+P|0,R=iC(R^T,12),_=_+R|0,P=iC(P^_,8),T=T+P|0,R=iC(R^T,7),N=N+S|0,L=iC(L^N,16),B=B+L|0,S=iC(S^B,12),N=N+S|0,L=iC(L^N,8),B=B+L|0,S=iC(S^B,7);let U=0;r[U++]=a+x|0,r[U++]=s+E|0,r[U++]=l+_|0,r[U++]=c+N|0,r[U++]=u+S|0,r[U++]=h+C|0,r[U++]=d+A|0,r[U++]=f+R|0,r[U++]=p+T|0,r[U++]=g+B|0,r[U++]=m+j|0,r[U++]=y+O|0,r[U++]=b+I|0,r[U++]=v+P|0,r[U++]=w+L|0,r[U++]=k+z|0}const sC=oC({core:aC,counterRight:!1,counterLen:4,allow128bitKeys:!1});class lC extends a_{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,d_.hash(e);const n=o_(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(n.length>r?e.create().update(n).digest():n);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(e){return d_.exists(this),this.iHash.update(e),this}digestInto(e){d_.exists(this),d_.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:a}=this;return e.finished=r,e.destroyed=o,e.blockLen=i,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const cC=(e,t,n)=>new lC(e,t).update(n).digest();cC.create=(e,t)=>new lC(e,t);const uC=new Uint8Array([0]),hC=new Uint8Array;const dC=(e,t,n,r,o)=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32;if(d_.hash(e),d_.number(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(r/e.outputLen);void 0===n&&(n=hC);const i=new Uint8Array(o*e.outputLen),a=cC.create(e,t),s=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let c=0;c<o;c++)uC[0]=c+1,s.update(0===c?hC:l).update(n).update(uC).digestInto(l),i.set(l,e.outputLen*c),a._cloneInto(s);return a.destroy(),s.destroy(),l.fill(0),uC.fill(0),i.slice(0,r)}(e,function(e,t,n){return d_.hash(e),void 0===n&&(n=new Uint8Array(e.outputLen)),cC(e,o_(n),o_(t))}(e,t,n),r,o);var fC=Object.defineProperty,pC=(e,t)=>{for(var n in t)fC(e,n,{get:t[n],enumerable:!0})};function gC(e){return n_(ZE.getPublicKey(e))}pC({},{MessageNode:()=>kC,MessageQueue:()=>xC,insertEventIntoAscendingList:()=>wC,insertEventIntoDescendingList:()=>vC,normalizeURL:()=>bC,utf8Decoder:()=>mC,utf8Encoder:()=>yC});var mC=new TextDecoder("utf-8"),yC=new TextEncoder;function bC(e){let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),("80"===t.port&&"ws:"===t.protocol||"443"===t.port&&"wss:"===t.protocol)&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function vC(e,t){let n,r=0,o=e.length-1,i=r;if(o<0)i=0;else if(t.created_at<e[o].created_at)i=o+1;else if(t.created_at>=e[r].created_at)i=r;else for(;;){if(o<=r+1){i=o;break}if(n=Math.floor(r+(o-r)/2),e[n].created_at>t.created_at)r=n;else{if(!(e[n].created_at<t.created_at)){i=n;break}o=n}}return e[i]?.id!==t.id?[...e.slice(0,i),t,...e.slice(i)]:e}function wC(e,t){let n,r=0,o=e.length-1,i=r;if(o<0)i=0;else if(t.created_at>e[o].created_at)i=o+1;else if(t.created_at<=e[r].created_at)i=r;else for(;;){if(o<=r+1){i=o;break}if(n=Math.floor(r+(o-r)/2),e[n].created_at<t.created_at)r=n;else{if(!(e[n].created_at>t.created_at)){i=n;break}o=n}}return e[i]?.id!==t.id?[...e.slice(0,i),t,...e.slice(i)]:e}var kC=class{_value;_next;get value(){return this._value}set value(e){this._value=e}get next(){return this._next}set next(e){this._next=e}constructor(e){this._value=e,this._next=null}},xC=class{_first;_last;get first(){return this._first}set first(e){this._first=e}get last(){return this._last}set last(e){this._last=e}_size;get size(){return this._size}set size(e){this._size=e}constructor(){this._first=null,this._last=null,this._size=0}enqueue(e){const t=new kC(e);return 0!==this._size&&this._last?(this._last.next=t,this._last=t):(this._first=t,this._last=t),this._size++,!0}dequeue(){if(0===this._size||!this._first)return null;let e=this._first;return this._first=e.next,e.next=null,this._size--,e.value}},EC=Symbol("verified");function _C(e,t){const n=e;return n.pubkey=gC(t),n.id=NC(n),n.sig=RC(n,t),n[EC]=!0,n}function NC(e){return n_(w_(yC.encode(function(e){if(!CC(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}(e))))}var SC=e=>e instanceof Object;function CC(e){if(!SC(e))return!1;if("number"!==typeof e.kind)return!1;if("string"!==typeof e.content)return!1;if("number"!==typeof e.created_at)return!1;if("string"!==typeof e.pubkey)return!1;if(!e.pubkey.match(/^[a-f0-9]{64}$/))return!1;if(!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let e=0;e<n.length;e++)if("object"===typeof n[e])return!1}return!0}function AC(e){if("boolean"===typeof e[EC])return e[EC];const t=NC(e);if(t!==e.id)return e[EC]=!1;try{return e[EC]=ZE.verify(e.sig,t,e.pubkey)}catch(n){return e[EC]=!1}}function RC(e,t){return n_(ZE.sign(NC(e),t))}function TC(e,t){if(e.ids&&-1===e.ids.indexOf(t.id)&&!e.ids.some((e=>t.id.startsWith(e))))return!1;if(e.kinds&&-1===e.kinds.indexOf(t.kind))return!1;if(e.authors&&-1===e.authors.indexOf(t.pubkey)&&!e.authors.some((e=>t.pubkey.startsWith(e))))return!1;for(let n in e)if("#"===n[0]){let r=e[`#${n.slice(1)}`];if(r&&!t.tags.find((e=>{let[t,o]=e;return t===n.slice(1)&&-1!==r.indexOf(o)})))return!1}return!(e.since&&t.created_at<e.since)&&!(e.until&&t.created_at>e.until)}function BC(e,t){for(let n=0;n<e.length;n++)if(TC(e[n],t))return!0;return!1}function jC(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function OC(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,o=e.slice(r),i=Math.min(o.indexOf(","),o.indexOf("}"));return parseInt(o.slice(0,i),10)}function IC(e){let t=e.slice(0,22).indexOf('"EVENT"');if(-1===t)return null;let n=e.slice(t+7+1).indexOf('"');if(-1===n)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(-1===o)return null;let i=r+1+o;return e.slice(r+1,i)}function PC(e,t){return t===jC(e,"id")}function LC(e,t){return t===jC(e,"pubkey")}function zC(e,t){return t===OC(e,"kind")}pC({},{getHex64:()=>jC,getInt:()=>OC,getSubscriptionId:()=>IC,matchEventId:()=>PC,matchEventKind:()=>zC,matchEventPubkey:()=>LC});function UC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{listTimeout:n=3e3,getTimeout:r=3e3,countTimeout:o=3e3}=t;var i,a,s={},l={connect:[],disconnect:[],error:[],notice:[],auth:[]},c={},u={};function h(){return 1===i?.readyState}async function d(e){let t=JSON.stringify(e);if(h()||(await new Promise((e=>setTimeout(e,1e3))),h()))try{i.send(t)}catch(n){console.log(n)}}const f=function(e){let{verb:t="REQ",skipVerification:n=!1,alreadyHaveEvent:r=null,id:o=Math.random().toString().slice(2)}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o;s[i]={id:i,filters:e,skipVerification:n,alreadyHaveEvent:r},d([t,i,...e]);let a={sub:function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(t||e,{skipVerification:o.skipVerification||n,alreadyHaveEvent:o.alreadyHaveEvent||r,id:i})},unsub:()=>{delete s[i],delete c[i],d(["CLOSE",i])},on:(e,t)=>{c[i]=c[i]||{event:[],count:[],eose:[]},c[i][e].push(t)},off:(e,t)=>{let n=c[i],r=n[e].indexOf(t);r>=0&&n[e].splice(r,1)},get events(){return MC(a)}};return a};function p(e,t){return new Promise(((n,r)=>{if(!e.id)return void r(new Error(`event ${e} has no id`));let o=e.id;d([t,e]),u[o]={resolve:n,reject:r}}))}return{url:e,sub:f,on:(e,t)=>{l[e].push(t),"connect"===e&&1===i?.readyState&&t()},off:(e,t)=>{let n=l[e].indexOf(t);-1!==n&&l[e].splice(n,1)},list:(e,t)=>new Promise((r=>{let o=f(e,t),i=[],a=setTimeout((()=>{o.unsub(),r(i)}),n);o.on("eose",(()=>{o.unsub(),clearTimeout(a),r(i)})),o.on("event",(e=>{i.push(e)}))})),get:(e,t)=>new Promise((n=>{let o=f([e],t),i=setTimeout((()=>{o.unsub(),n(null)}),r);o.on("event",(e=>{o.unsub(),clearTimeout(i),n(e)}))})),count:e=>new Promise((t=>{let n=f(e,{...f,verb:"COUNT"}),r=setTimeout((()=>{n.unsub(),t(null)}),o);n.on("count",(e=>{n.unsub(),clearTimeout(r),t(e)}))})),async publish(e){await p(e,"EVENT")},async auth(e){await p(e,"AUTH")},connect:async function(){h()||await async function(){return a||(a=new Promise(((t,n)=>{try{i=new WebSocket(e)}catch(d){n(d)}i.onopen=()=>{l.connect.forEach((e=>e())),t()},i.onerror=()=>{a=void 0,l.error.forEach((e=>e())),n()},i.onclose=async()=>{a=void 0,l.disconnect.forEach((e=>e()))};let r,o=new xC;function h(){if(0===o.size)return clearInterval(r),void(r=null);var t=o.dequeue();if(!t)return;let n=IC(t);if(n){let r=s[n];if(r&&r.alreadyHaveEvent&&r.alreadyHaveEvent(jC(t,"id"),e))return}try{let e=JSON.parse(t);switch(e[0]){case"EVENT":{let t=e[1],n=e[2];return void(CC(n)&&s[t]&&(s[t].skipVerification||AC(n))&&BC(s[t].filters,n)&&(s[t],(c[t]?.event||[]).forEach((e=>e(n)))))}case"COUNT":let t=e[1],n=e[2];return void(s[t]&&(c[t]?.count||[]).forEach((e=>e(n))));case"EOSE":{let t=e[1];return void(t in c&&(c[t].eose.forEach((e=>e())),c[t].eose=[]))}case"OK":{let t=e[1],n=e[2],r=e[3]||"";if(t in u){let{resolve:e,reject:o}=u[t];n?e(null):o(new Error(r))}return}case"NOTICE":let r=e[1];return void l.notice.forEach((e=>e(r)));case"AUTH":{let t=e[1];return void l.auth?.forEach((e=>e(t)))}}}catch(d){return}}i.onmessage=e=>{o.enqueue(e.data),r||(r=setInterval(h,0))}})),a)}()},close(){l={connect:[],disconnect:[],error:[],notice:[],auth:[]},c={},u={},i?.readyState===WebSocket.OPEN&&i.close()},get status(){return i?.readyState??3}}}async function*MC(e){let t;const n=[],r=e=>{t?(t(e),t=void 0):n.push(e)};e.on("event",r);try{for(;;)if(n.length>0)yield n.shift();else{const e=await new Promise((e=>{t=e}));yield e}}finally{e.off("event",r)}}var FC={};pC(FC,{BECH32_REGEX:()=>qC,decode:()=>HC,naddrEncode:()=>JC,neventEncode:()=>YC,noteEncode:()=>QC,nprofileEncode:()=>ZC,npubEncode:()=>KC,nrelayEncode:()=>XC,nsecEncode:()=>$C});var DC=5e3,qC=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function HC(e){let{prefix:t,words:n}=Q_.decode(e,DC),r=new Uint8Array(Q_.fromWords(n));switch(t){case"nprofile":{let e=WC(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:n_(e[0][0]),relays:e[1]?e[1].map((e=>mC.decode(e))):[]}}}case"nevent":{let e=WC(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(e[2]&&32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(e[3]&&4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:n_(e[0][0]),relays:e[1]?e[1].map((e=>mC.decode(e))):[],author:e[2]?.[0]?n_(e[2][0]):void 0,kind:e[3]?.[0]?parseInt(n_(e[3][0]),16):void 0}}}case"naddr":{let e=WC(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!e[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!e[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:mC.decode(e[0][0]),pubkey:n_(e[2][0]),kind:parseInt(n_(e[3][0]),16),relays:e[1]?e[1].map((e=>mC.decode(e))):[]}}}case"nrelay":{let e=WC(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:mC.decode(e[0][0])}}case"nsec":case"npub":case"note":return{type:t,data:n_(r)};default:throw new Error(`unknown prefix ${t}`)}}function WC(e){let t={},n=e;for(;n.length>0;){let e=n[0],r=n[1];if(!r)throw new Error(`malformed TLV ${e}`);let o=n.slice(2,2+r);if(n=n.slice(2+r),o.length<r)throw new Error(`not enough data to read on TLV ${e}`);t[e]=t[e]||[],t[e].push(o)}return t}function $C(e){return VC("nsec",e)}function KC(e){return VC("npub",e)}function QC(e){return VC("note",e)}function GC(e,t){let n=Q_.toWords(t);return Q_.encode(e,n,DC)}function VC(e,t){return GC(e,r_(t))}function ZC(e){return GC("nprofile",eA({0:[r_(e.pubkey)],1:(e.relays||[]).map((e=>yC.encode(e)))}))}function YC(e){let t;return void 0!=e.kind&&(t=function(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=255&e,t}(e.kind)),GC("nevent",eA({0:[r_(e.id)],1:(e.relays||[]).map((e=>yC.encode(e))),2:e.author?[r_(e.author)]:[],3:t?[new Uint8Array(t)]:[]}))}function JC(e){let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e.kind,!1),GC("naddr",eA({0:[yC.encode(e.identifier)],1:(e.relays||[]).map((e=>yC.encode(e))),2:[r_(e.pubkey)],3:[new Uint8Array(t)]}))}function XC(e){return GC("nrelay",eA({0:[yC.encode(e)]}))}function eA(e){let t=[];return Object.entries(e).forEach((e=>{let[n,r]=e;r.forEach((e=>{let r=new Uint8Array(e.length+2);r.set([parseInt(n)],0),r.set([e.length],1),r.set(e,2),t.push(r)}))})),i_(...t)}async function tA(e,t,n){const r=rA(jE.getSharedSecret(e,"02"+t));let o=Uint8Array.from(l_(16)),i=yC.encode(n),a=await crypto.subtle.importKey("raw",r,{name:"AES-CBC"},!1,["encrypt"]),s=await crypto.subtle.encrypt({name:"AES-CBC",iv:o},a,i);return`${L_.encode(new Uint8Array(s))}?iv=${L_.encode(new Uint8Array(o.buffer))}`}async function nA(e,t,n){let[r,o]=n.split("?iv="),i=rA(jE.getSharedSecret(e,"02"+t)),a=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),s=L_.decode(r),l=L_.decode(o),c=await crypto.subtle.decrypt({name:"AES-CBC",iv:l},a,s);return mC.decode(c)}function rA(e){return e.slice(1,33)}pC({},{decrypt:()=>nA,encrypt:()=>tA}),"undefined"!==typeof crypto&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);pC({},{NIP05_REGEX:()=>iA,queryProfile:()=>lA,searchDomain:()=>sA,useFetchImplementation:()=>aA});var oA,iA=/^(?:([\w.+-]+)@)?([\w.-]+)$/;try{oA=fetch}catch{}function aA(e){oA=e}async function sA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return(await(await oA(`https://${e}/.well-known/nostr.json?name=${t}`)).json()).names}catch(n){return{}}}async function lA(e){const t=e.match(iA);if(!t)return null;const[n,r="_",o]=t;try{const e=await oA(`https://${o}/.well-known/nostr.json?name=${r}`),{names:t,relays:n}=function(e){const t={names:{}};for(const[n,r]of Object.entries(e.names))"string"===typeof n&&"string"===typeof r&&(t.names[n]=r);if(e.relays){t.relays={};for(const[n,r]of Object.entries(e.relays))"string"===typeof n&&Array.isArray(r)&&(t.relays[n]=r.filter((e=>"string"===typeof e)))}return t}(await e.json()),i=t[r];return i?{pubkey:i,relays:n?.[i]}:null}catch(i){return null}}function cA(e,t){let n=FS.fromMasterSeed(yS(e,t)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return n_(n)}function uA(){return dS(V_)}function hA(e){return gS(e,V_)}pC({},{generateSeedWords:()=>uA,privateKeyFromSeedWords:()=>cA,validateWords:()=>hA});function dA(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)"e"===r[0]&&r[1]&&n.push(r),"p"===r[0]&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){const e=n[r],[o,i,a,s]=e,l={id:i,relays:a?[a]:[]},c=0===r,u=r===n.length-1;"root"!==s?"reply"!==s?"mention"!==s?c?t.root=l:u?t.reply=l:t.mentions.push(l):t.mentions.push(l):t.reply=l:t.root=l}return t}pC({},{parse:()=>dA});function fA(e){let t=0;for(let n=0;n<e.length;n++){const r=parseInt(e[n],16);if(0!==r){t+=Math.clz32(r)-28;break}t+=4}return t}function pA(e,t){let n=0;const r=e,o=["nonce",n.toString(),t.toString()];for(r.tags.push(o);;){const e=Math.floor((new Date).getTime()/1e3);if(e!==r.created_at&&(n=0,r.created_at=e),o[1]=(++n).toString(),r.id=NC(r),fA(r.id)>=t)break}return r}pC({},{getPow:()=>fA,minePow:()=>pA});function gA(e,t,n,r){return _C({kind:6,tags:[...e.tags??[],["e",t.id,n],["p",t.pubkey]],content:""===e.content?"":JSON.stringify(t),created_at:e.created_at},r)}function mA(e){if(6!==e.kind)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const o=e.tags[r];o.length>=2&&("e"===o[0]&&void 0===t?t=o:"p"===o[0]&&void 0===n&&(n=o))}return void 0!==t?{id:t[1],relays:[t[2],n?.[2]].filter((e=>"string"===typeof e)),author:n?.[1]}:void 0}function yA(e){let{skipVerification:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=mA(e);if(void 0===n||""===e.content)return;let r;try{r=JSON.parse(e.content)}catch(o){return}return r.id===n.id&&(t||AC(r))?r:void 0}pC({},{finishRepostEvent:()=>gA,getRepostedEvent:()=>yA,getRepostedEventPointer:()=>mA});pC({},{NOSTR_URI_REGEX:()=>bA,parse:()=>wA,test:()=>vA});var bA=new RegExp(`nostr:(${qC.source})`);function vA(e){return"string"===typeof e&&new RegExp(`^${bA.source}$`).test(e)}function wA(e){const t=e.match(new RegExp(`^${bA.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:HC(t[1])}}function kA(e,t,n){const r=t.tags.filter((e=>e.length>=2&&("e"===e[0]||"p"===e[0])));return _C({...e,kind:7,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function xA(e){if(7!==e.kind)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const o=e.tags[r];o.length>=2&&("e"===o[0]&&void 0===t?t=o:"p"===o[0]&&void 0===n&&(n=o))}return void 0!==t&&void 0!==n?{id:t[1],relays:[t[2],n[2]].filter((e=>void 0!==e)),author:n[1]}:void 0}pC({},{finishReactionEvent:()=>kA,getReactedEventPointer:()=>xA});function EA(e,t){let n=[];(t.kind||-1)>=0&&n.push(`kind=${t.kind}`),t.until&&n.push(`created_at<${t.until}`),t.since&&n.push(`created_at>${t.since}`);let r=n.join("&");if(""===r)throw new Error("refusing to create a delegation without any conditions");let o=w_(yC.encode(`nostr:delegation:${t.pubkey}:${r}`)),i=n_(ZE.sign(o,e));return{from:gC(e),to:t.pubkey,cond:r,sig:i}}function _A(e){let t=e.tags.find((e=>"delegation"===e[0]&&e.length>=4));if(!t)return null;let n=t[1],r=t[2],o=t[3],i=r.split("&");for(let s=0;s<i.length;s++){let[t,n,r]=i[s].split(/\b/);if(("kind"!==t||"="!==n||e.kind!==parseInt(r))&&(!("created_at"===t&&"<"===n&&e.created_at<parseInt(r))&&!("created_at"===t&&">"===n&&e.created_at>parseInt(r))))return null}let a=w_(yC.encode(`nostr:delegation:${e.pubkey}:${r}`));return ZE.verify(o,a,n)?n:null}pC({},{createDelegation:()=>EA,getDelegator:()=>_A});pC({},{matchAll:()=>SA,regex:()=>NA,replaceAll:()=>CA});var NA=()=>new RegExp(`\\b${bA.source}\\b`,"g");function*SA(e){const t=e.matchAll(NA());for(const r of t)try{const[e,t]=r;yield{uri:e,value:t,decoded:HC(t),start:r.index,end:r.index+e.length}}catch(n){}}function CA(e,t){return e.replaceAll(NA(),((e,n)=>t({uri:e,value:n,decoded:HC(n)})))}pC({},{channelCreateEvent:()=>RA,channelHideMessageEvent:()=>jA,channelMessageEvent:()=>BA,channelMetadataEvent:()=>TA,channelMuteUserEvent:()=>OA});var AA,RA=(e,t)=>{let n;if("object"===typeof e.content)n=JSON.stringify(e.content);else{if("string"!==typeof e.content)return;n=e.content}return _C({kind:40,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},TA=(e,t)=>{let n;if("object"===typeof e.content)n=JSON.stringify(e.content);else{if("string"!==typeof e.content)return;n=e.content}return _C({kind:41,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},BA=(e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),_C({kind:42,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},jA=(e,t)=>{let n;if("object"===typeof e.content)n=JSON.stringify(e.content);else{if("string"!==typeof e.content)return;n=e.content}return _C({kind:43,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},OA=(e,t)=>{let n;if("object"===typeof e.content)n=JSON.stringify(e.content);else{if("string"!==typeof e.content)return;n=e.content}return _C({kind:44,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)};pC({},{useFetchImplementation:()=>IA,validateGithub:()=>PA});try{AA=fetch}catch{}function IA(e){AA=e}async function PA(e,t,n){try{return await(await AA(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch(r){return!1}}pC({},{authenticate:()=>LA});var LA=async e=>{let{challenge:t,relay:n,sign:r}=e;const o={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",n.url],["challenge",t]],content:""};return n.auth(await r(o))};pC({},{decrypt:()=>MA,encrypt:()=>UA,utils:()=>zA});var zA={v2:{maxPlaintextSize:65408,minCiphertextSize:100,maxCiphertextSize:102400,getConversationKey:(e,t)=>jE.getSharedSecret(e,"02"+t).subarray(1,33),getMessageKeys(e,t){const n=dC(w_,e,t,"nip44-v2",76);return{encryption:n.subarray(0,32),nonce:n.subarray(32,44),auth:n.subarray(44,76)}},calcPadding(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)},pad(e){const t=yC.encode(e),n=t.length;if(n<1||n>=zA.v2.maxPlaintextSize)throw new Error("invalid plaintext length: must be between 1b and 64KB");const r=zA.v2.calcPadding(n),o=new Uint8Array(r-n),i=new Uint8Array(2);return new DataView(i.buffer).setUint16(0,n),i_(i,t,o)},unpad(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(0===t||n.length!==t||e.length!==2+zA.v2.calcPadding(t))throw new Error("invalid padding");return mC.decode(n)}}};function UA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=n.version??2;if(2!==r)throw new Error("unknown encryption version "+r);const o=n.salt??l_(32);KS(o,32);const i=zA.v2.getMessageKeys(e,o),a=zA.v2.pad(t),s=sC(i.encryption,i.nonce,a),l=cC(w_,i.auth,s);return L_.encode(i_(new Uint8Array([r]),o,s,l))}function MA(e,t){const n=zA.v2;KS(e,32);const r=t.length;if(r<n.minCiphertextSize||r>=n.maxCiphertextSize)throw new Error("invalid ciphertext length: "+r);if("#"===t[0])throw new Error("unknown encryption version");let o;try{o=L_.decode(t)}catch(h){throw new Error("invalid base64: "+h.message)}const i=o.subarray(0,1)[0];if(2!==i)throw new Error("unknown encryption version "+i);const a=o.subarray(1,33),s=o.subarray(33,-32),l=o.subarray(-32),c=n.getMessageKeys(e,a);if(!function(e,t){if(e.length!==t.length)throw new Error("equalBytes: Different size of Uint8Arrays");let n=!0;for(let r=0;r<e.length;r++)n&&(n=e[r]===t[r]);return n}(cC(w_,c.auth,s),l))throw new Error("invalid MAC");const u=sC(c.encryption,c.nonce,s);return n.unpad(u)}function FA(e){const{pathname:t,searchParams:n}=new URL(e),r=t,o=n.get("relay"),i=n.get("secret");if(!r||!o||!i)throw new Error("invalid connection string");return{pubkey:r,relay:o,secret:i}}async function DA(e){let{pubkey:t,secret:n,invoice:r}=e;const o={method:"pay_invoice",params:{invoice:r}},i=await tA(n,t,JSON.stringify(o));return _C({kind:23194,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t]]},n)}pC({},{makeNwcRequestEvent:()=>DA,parseConnectionString:()=>FA});var qA,HA={};pC(HA,{getZapEndpoint:()=>$A,makeZapReceipt:()=>GA,makeZapRequest:()=>KA,useFetchImplementation:()=>WA,validateZapRequest:()=>QA});try{qA=fetch}catch{}function WA(e){qA=e}async function $A(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:e}=Q_.decode(n,1e3),r=Q_.fromWords(e);t=mC.decode(r)}else{if(!r)return null;{let[e,n]=r.split("@");t=`https://${n}/.well-known/lnurlp/${e}`}}let o=await qA(t),i=await o.json();if(i.allowsNostr&&i.nostrPubkey)return i.callback}catch(t){}return null}function KA(e){let{profile:t,event:n,amount:r,relays:o,comment:i=""}=e;if(!r)throw new Error("amount not given");if(!t)throw new Error("profile not given");let a={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t],["amount",r.toString()],["relays",...o]]};return n&&a.tags.push(["e",n]),a}function QA(e){let t;try{t=JSON.parse(e)}catch(i){return"Invalid zap request JSON."}if(!CC(t))return"Zap request is not a valid Nostr event.";if(!AC(t))return"Invalid signature on zap request.";let n=t.tags.find((e=>{let[t,n]=e;return"p"===t&&n}));if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find((e=>{let[t,n]=e;return"e"===t&&n}));if(r&&!r[1].match(/^[a-f0-9]{64}$/))return"Zap request 'e' tag is not valid hex.";let o=t.tags.find((e=>{let[t,n]=e;return"relays"===t&&n}));return o?null:"Zap request doesn't have a 'relays' tag."}function GA(e){let{zapRequest:t,preimage:n,bolt11:r,paidAt:o}=e,i=JSON.parse(t).tags.filter((e=>{let[t]=e;return"e"===t||"p"===t||"a"===t})),a={kind:9735,created_at:Math.round(o.getTime()/1e3),content:"",tags:[...i,["bolt11",r],["description",t]]};return n&&a.tags.push(["preimage",n]),a}pC({},{getToken:()=>ZA,unpackEventFromToken:()=>JA,validateEvent:()=>XA,validateToken:()=>YA});var VA="Nostr ";async function ZA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||!t)throw new Error("Missing loginUrl or httpMethod");const o=function(){return{kind:arguments.length>0&&void 0!==arguments[0]?arguments[0]:255,content:"",tags:[],created_at:0}}(27235);o.tags=[["u",e],["method",t]],o.created_at=Math.round((new Date).getTime()/1e3);const i=await n(o);return(r?VA:"")+L_.encode(yC.encode(JSON.stringify(i)))}async function YA(e,t,n){const r=await JA(e).catch((e=>{throw e}));return await XA(r,t,n).catch((e=>{throw e}))}async function JA(e){if(!e)throw new Error("Missing token");e=e.replace(VA,"");const t=mC.decode(L_.decode(e));if(!t||0===t.length||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}async function XA(e,t,n){if(!e)throw new Error("Invalid nostr event");if(!AC(e))throw new Error("Invalid nostr event, signature invalid");if(27235!==e.kind)throw new Error("Invalid nostr event, kind invalid");if(!e.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round((new Date).getTime()/1e3)-e.created_at>60)throw new Error("Invalid nostr event, expired");const r=e.tags.find((e=>"u"===e[0]));if(1!==r?.length&&r?.[1]!==t)throw new Error("Invalid nostr event, url tag invalid");const o=e.tags.find((e=>"method"===e[0]));if(1!==o?.length&&o?.[1].toLowerCase()!==n.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0}var eR=__webpack_require__(787),tR=__webpack_require__(54),nR=(__webpack_require__(940),__webpack_require__(225),class{ndkRelay;_status;relay;connectedAt;_connectionStats={attempts:0,success:0,durations:[]};debug;constructor(e){this.ndkRelay=e,this._status=3,this.relay=UC(this.ndkRelay.url),this.debug=this.ndkRelay.debug.extend("connectivity"),this.relay.on("notice",(e=>this.handleNotice(e)))}async connect(){const e=()=>{this.updateConnectionStats.connected(),this._status=1,this.ndkRelay.emit("connect"),this.ndkRelay.emit("ready")},t=()=>{this.updateConnectionStats.disconnected(),1===this._status&&(this._status=3,this.handleReconnection()),this.ndkRelay.emit("disconnect")},n=async e=>{this.debug("Relay requested authentication",{havePolicy:!!this.ndkRelay.authPolicy}),this.ndkRelay.authPolicy?7!==this._status&&(this._status=7,await this.ndkRelay.authPolicy(this.ndkRelay,e),7===this._status&&(this.debug("Authentication policy finished"),this._status=1,this.ndkRelay.emit("ready"))):await this.ndkRelay.emit("auth",e)};try{this.updateConnectionStats.attempt(),this._status=0,this.relay.off("connect",e),this.relay.off("disconnect",t),this.relay.on("connect",e),this.relay.on("disconnect",t),this.relay.on("auth",n),await this.relay.connect()}catch(Ry){throw this.debug("Failed to connect",Ry),this._status=3,Ry}}disconnect(){this._status=2,this.relay.close()}get status(){return this._status}isAvailable(){return 1===this._status}isFlapping(){const e=this._connectionStats.durations;if(e.length%3!==0)return!1;const t=e.reduce(((e,t)=>e+t),0)/e.length,n=e.map((e=>Math.pow(e-t,2))).reduce(((e,t)=>e+t),0)/e.length;return Math.sqrt(n)<1e3}async handleNotice(e){(e.includes("oo many")||e.includes("aximum"))&&(this.disconnect(),setTimeout((()=>this.connect()),2e3),this.debug(this.relay.url,"Relay complaining?",e)),this.ndkRelay.emit("notice",this.relay,e)}handleReconnection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.isFlapping())return this.ndkRelay.emit("flapping",this,this._connectionStats),void(this._status=5);const t=this.connectedAt?Math.max(0,6e4-(Date.now()-this.connectedAt)):0;setTimeout((()=>{this._status=4,this.connect().then((()=>{this.debug("Reconnected")})).catch((t=>{this.debug("Reconnect failed",t),e<5?setTimeout((()=>{this.handleReconnection(e+1)}),6e4):this.debug("Reconnect failed after 5 attempts")}))}),t)}updateConnectionStats={connected:()=>{this._connectionStats.success++,this._connectionStats.connectedAt=Date.now()},disconnected:()=>{this._connectionStats.connectedAt&&(this._connectionStats.durations.push(Date.now()-this._connectionStats.connectedAt),this._connectionStats.durations.length>100&&this._connectionStats.durations.shift()),this._connectionStats.connectedAt=void 0},attempt:()=>{this._connectionStats.attempts++}};get connectionStats(){return this._connectionStats}}),rR=class{ndkRelay;constructor(e){this.ndkRelay=e}async publish(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;const n=()=>new Promise(((n,r)=>{try{this.publishEvent(e,t).then((e=>n(e))).catch((e=>r(e)))}catch(o){r(o)}})),r=new Promise(((e,n)=>{setTimeout((()=>n(new Error("Timeout"))),t)})),o=()=>{n().then((e=>i(e))).catch((e=>a(e)))};let i,a;return 1===this.ndkRelay.status?Promise.race([n(),r]):Promise.race([new Promise(((e,t)=>{i=e,a=t,this.ndkRelay.once("connect",o)})),r]).finally((()=>{this.ndkRelay.removeListener("connect",o)}))}async publishEvent(e,t){const n=await e.toNostrEvent(),r=this.ndkRelay.connectivity.relay.publish(n);let o;const i=new Promise(((t,n)=>{r.then((()=>{clearTimeout(o),this.ndkRelay.emit("published",e),t(!0)})).catch((t=>{clearTimeout(o),this.ndkRelay.debug("Publish failed",t,e.id),this.ndkRelay.emit("publish:failed",e,t),n(t)}))}));if(!t||e.isEphemeral())return i;const a=new Promise(((n,r)=>{o=setTimeout((()=>{this.ndkRelay.debug("Publish timed out",e.rawEvent()),this.ndkRelay.emit("publish:failed",e,"Timeout"),r(new Error("Publish operation timed out"))}),t)}));return Promise.race([i,a])}async auth(e){return this.ndkRelay.connectivity.relay.auth(e.rawEvent())}};function oR(e){const t={};return e.forEach((e=>{Object.entries(e).forEach((e=>{let[n,r]=e;Array.isArray(r)?void 0===t[n]?t[n]=[...r]:t[n]=Array.from(new Set([...t[n],...r])):t[n]=r}))})),t}function iR(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const[n,r]of Object.entries(e)){const e=t[n];if(!e)return!1;if(Array.isArray(r)&&Array.isArray(e)){const t=r;for(const n of e){const e=n;if(!t.includes(e))return!1}}else if(e!==r)return!1}return!0}var aR=class extends eR.EventEmitter{subscriptions;req;debug;constructor(e,t){super(),this.subscriptions=e,this.debug=t||this.subscriptions[0].subscription.debug.extend("grouped");for(const n of e)this.handleSubscriptionClosure(n)}addSubscription(e){this.subscriptions.push(e),this.handleSubscriptionClosure(e)}eventReceived(e){for(const t of this.subscriptions)t.eventReceived(e)}eoseReceived(e){Array.from(this.subscriptions).forEach((async t=>{t.subscription.eoseReceived(e)}))}handleSubscriptionClosure(e){e.subscription.on("close",(()=>{const t=this.subscriptions.findIndex((t=>t.subscription===e.subscription));this.subscriptions.splice(t,1),this.subscriptions.length<=0&&this.emit("close")}))}map(e){return this.subscriptions.map(e)}[Symbol.iterator](){let e=0;const t=this.subscriptions;return{next:()=>e<t.length?{value:t[e++],done:!1}:{value:null,done:!0}}}},sR=class{subscription;filters=[];ndkRelay;constructor(e,t,n){this.subscription=e,this.filters=t,this.ndkRelay=n}eventReceived(e){this.eventMatchesLocalFilter(e)&&this.subscription.eventReceived(e,this.ndkRelay,!1)}eventMatchesLocalFilter(e){const t=e.rawEvent();return this.filters.some((e=>TC(e,t)))}};var lR=class{ndkRelay;delayedItems=new Map;delayedTimers=new Map;activeSubscriptions=new Map;activeSubscriptionsByGroupId=new Map;executionTimeoutsByGroupId=new Map;debug;groupingDebug;conn;constructor(e){this.ndkRelay=e,this.conn=e.connectivity,this.debug=e.debug.extend("subscriptions"),this.groupingDebug=e.debug.extend("grouping")}subscribe(e,t){const n=function(e){const t=[];for(const n of e){if(n.since||n.until)return null;const e=Object.keys(n||{}).sort().join("-");t.push(e)}return t.join("|")}(t),r=new sR(e,t,this.ndkRelay);if(!n||!e.isGroupable())return void this.executeSubscriptions(n,new aR([r]),t);const o=this.activeSubscriptionsByGroupId.get(n);if(o){const n=function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length&&iR(e[n],t[n]);n++)return e[n]}(o.filters,t);if(n){const n=this.activeSubscriptions.get(o.sub);return void n?.addSubscription(new sR(e,t,this.ndkRelay))}}let i=this.delayedItems.get(n);i?i.addSubscription(r):(i=new aR([r]),this.delayedItems.set(n,i),i.once("close",(()=>{this.delayedItems.get(n)&&this.delayedItems.delete(n)})));let a=this.executionTimeoutsByGroupId.get(n);a&&"at-most"!==e.opts.groupableDelayType||(a=setTimeout((()=>{this.executeGroup(n,e)}),e.opts.groupableDelay),this.executionTimeoutsByGroupId.set(n,a)),this.delayedTimers.has(n)?this.delayedTimers.get(n).push(a):this.delayedTimers.set(n,[a])}executeGroup(e,t){const n=this.delayedItems.get(e);this.delayedItems.delete(e);const r=this.delayedTimers.get(e);if(this.delayedTimers.delete(e),r)for(const o of r)clearTimeout(o);if(n){const t=n.subscriptions[0].filters.length,r=[];for(let e=0;e<t;e++){const t=n.map((t=>t.filters[e]));r.push(oR(t))}this.executeSubscriptions(e,n,r)}}executeSubscriptionsWhenConnected(e,t,n){const r=()=>{this.debug("new relay coming online for active subscription",{relay:this.ndkRelay.url,mergeFilters:oR}),this.executeSubscriptionsConnected(e,t,n)};this.ndkRelay.once("ready",r),t.once("close",(()=>{this.ndkRelay.removeListener("ready",r)}))}executeSubscriptions(e,t,n){this.conn.isAvailable()?this.executeSubscriptionsConnected(e,t,n):this.executeSubscriptionsWhenConnected(e,t,n)}executeSubscriptionsConnected(e,t,n){const r=[];for(const{subscription:s}of t)r.push(s);const o=function(e,t){const n=e.map((e=>e.subId)).filter(Boolean),r=[],o=new Set,i=new Set;if(n.length>0)r.push(Array.from(new Set(n)).join(","));else{for(const e of t)for(const t of Object.keys(e))"kinds"===t?e.kinds?.forEach((e=>i.add(e))):o.add(t);i.size>0&&r.push("kinds:"+Array.from(i).join(",")),o.size>0&&r.push(Array.from(o).join(","))}let a=r.join("-");return a.length>20&&(a=a.substring(0,20)),1!==n.length&&(a+="-"+Math.floor(999*Math.random()).toString()),a}(r,n);t.req=n;const i={id:o};(this.ndkRelay.trusted||r.every((e=>e.opts.skipVerification)))&&(i.skipVerification=!0);const a=this.conn.relay.sub(n,i);return this.activeSubscriptions.set(a,t),e&&this.activeSubscriptionsByGroupId.set(e,{filters:n,sub:a}),a.on("event",(e=>{const t=new NR(void 0,e);t.relay=this.ndkRelay;const n=this.activeSubscriptions.get(a);n?.eventReceived(t)})),a.on("eose",(()=>{const e=this.activeSubscriptions.get(a);e?.eoseReceived(this.ndkRelay)})),t.once("close",(()=>{a.unsub(),this.activeSubscriptions.delete(a),e&&this.activeSubscriptionsByGroupId.delete(e)})),this.executeSubscriptionsWhenConnected(e,t,n),a}executedFilters(){const e=new Map;for(const[,t]of this.activeSubscriptions)e.set(t.req,t.map((e=>e.subscription)));return e}},cR=(e=>(e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECTING=2]="DISCONNECTING",e[e.DISCONNECTED=3]="DISCONNECTED",e[e.RECONNECTING=4]="RECONNECTING",e[e.FLAPPING=5]="FLAPPING",e[e.AUTH_REQUIRED=6]="AUTH_REQUIRED",e[e.AUTHENTICATING=7]="AUTHENTICATING",e))(cR||{}),uR=class extends eR.EventEmitter{url;scores;connectivity;subs;publisher;authPolicy;trusted=!1;complaining=!1;debug;constructor(e,t){super(),this.url=e,this.scores=new Map,this.debug=tR(`ndk:relay:${e}`),this.connectivity=new nR(this),this.subs=new lR(this),this.publisher=new rR(this),this.authPolicy=t}get status(){return this.connectivity.status}get connectionStats(){return this.connectivity.connectionStats}async connect(){return this.connectivity.connect()}disconnect(){3!==this.status&&this.connectivity.disconnect()}subscribe(e,t){this.subs.subscribe(e,t)}async publish(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;return this.publisher.publish(e,t)}async auth(e){return this.publisher.auth(e)}scoreSlowerEvent(e){}tagReference(e){const t=["r",this.url];return e&&t.push(e),t}referenceTags(){return[["r",this.url]]}activeSubscriptions(){return this.subs.executedFilters()}},hR=class extends Error{errors;constructor(e,t){super(e),this.errors=t}get relayErrors(){const e=[];for(const[t,n]of this.errors)e.push(`${t.url}: ${n}`);return e.join("\n")}},dR=class e{relays;debug;ndk;constructor(e,t){this.relays=e,this.ndk=t,this.debug=t.debug.extend("relayset")}addRelay(e){this.relays.add(e)}static fromRelayUrls(t,n){const r=new Set;for(const e of t){const t=n.pool.relays.get(e);if(t)r.add(t);else{const t=new uR(e);n.pool.useTemporaryRelay(t),r.add(t)}}return new e(new Set(r),n)}async publish(e,t){const n=new Set,r=new Map,o=e.isEphemeral(),i=Array.from(this.relays).map((i=>new Promise((a=>{i.publish(e,t).then((e=>{n.add(i),a()})).catch((e=>{o||(r.set(i,e),this.debug("error publishing to relay",{relay:i.url,err:e})),a()}))}))));if(await Promise.all(i),0===n.size&&!o)throw new hR("No relay was able to receive the event",r);return n}get size(){return this.relays.size}};var fR=tR("ndk:zap"),pR=["wss://nos.lol","wss://relay.nostr.band","wss://relay.f7z.io","wss://relay.damus.io","wss://nostr.mom","wss://no.str.cr"],gR=class extends eR.EventEmitter{ndk;zappedEvent;zappedUser;constructor(e){super(),this.ndk=e.ndk,this.zappedEvent=e.zappedEvent,this.zappedUser=e.zappedUser||this.ndk.getUser({hexpubkey:this.zappedEvent?.pubkey})}async getZapEndpoint(){let e,t,n,r,o;if(this.zappedUser&&(this.zappedUser.profile||await this.zappedUser.fetchProfile({groupable:!1}),o=this.zappedUser.profile,e=(this.zappedUser.profile||{}).lud06,t=(this.zappedUser.profile||{}).lud16),t&&!t.startsWith("LNURL")){const[e,r]=t.split("@");n=`https://${r}/.well-known/lnurlp/${e}`}else if(e){const{words:t}=Q_.decode(e,1e3),r=Q_.fromWords(t);n=new TextDecoder("utf-8").decode(r)}if(!n)throw fR("No zap endpoint found",o,{lud06:e,lud16:t}),new Error("No zap endpoint found");try{const e=this.ndk.httpFetch||fetch,t=await e(n);if(200!==t.status){const e=await t.text();throw new Error(`Unable to fetch zap endpoint ${n}: ${e}`)}const o=await t.json();return o?.allowsNostr&&(o?.nostrPubkey||o?.nostrPubKey)&&(r=o.callback),r}catch(Ry){throw new Error(`Unable to fetch zap endpoint ${n}: ${Ry}`)}}async createZapRequest(e,t,n,r,o){const i=await this.generateZapRequest(e,t,n,r);if(!i)return null;const{event:a,zapEndpoint:s}=i;if(!a)throw new Error("No zap request event found");let l;await a.sign(o);try{fR(`Getting invoice for zap request: ${s}`),l=await this.getInvoice(a,e,s)}catch(Ry){throw new Error("Failed to get invoice: "+Ry)}return l}async getInvoice(e,t,n){fR(`Fetching invoice from ${n}?`+new URLSearchParams({amount:t.toString(),nostr:encodeURIComponent(JSON.stringify(e.rawEvent()))}));const r=new URL(n);r.searchParams.append("amount",t.toString()),r.searchParams.append("nostr",JSON.stringify(e.rawEvent())),fR(`Fetching invoice from ${r.toString()}`);const o=await fetch(r.toString());if(fR(`Got response from zap endpoint: ${n}`,{status:o.status}),200!==o.status){fR(`Received non-200 status from zap endpoint: ${n}`,{status:o.status,amount:t,nostr:JSON.stringify(e.rawEvent())});const r=await o.text();throw new Error(`Unable to fetch zap endpoint ${n}: ${r}`)}return(await o.json()).pr}async generateZapRequest(e,t,n,r,o){const i=await this.getZapEndpoint();if(!i)throw new Error("No zap endpoint found");if(!this.zappedEvent&&!this.zappedUser)throw new Error("No zapped event or user found");const a=HA.makeZapRequest({profile:this.zappedUser.pubkey,event:null,amount:e,comment:t||"",relays:r??this.relays()});if(this.zappedEvent){const e=this.zappedEvent.referenceTags().filter((e=>"p"!==e[0]));a.tags.push(...e)}a.tags.push(["lnurl",i]);const s=new NR(this.ndk,a);return n&&(s.tags=s.tags.concat(n)),{event:s,zapEndpoint:i}}relays(){let e=[];return this.ndk?.pool?.relays&&(e=this.ndk.pool.urls()),e.length||(e=pR),e}};async function mR(e){return""}function yR(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=1e4&&this.kind<2e4}function bR(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=2e4&&this.kind<3e4}function vR(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=3e4&&this.kind<4e4}async function wR(e,t){if(!this.ndk)throw new Error("No NDK instance found!");if(t||(await this.ndk.assertSigner(),t=this.ndk.signer),!e){const t=this.getMatchingTags("p");if(1!==t.length)throw new Error("No recipient could be determined and no explicit recipient was provided");e=this.ndk.getUser({hexpubkey:t[0][1]})}this.content=await(t?.encrypt(e,this.content))}async function kR(e,t){if(!this.ndk)throw new Error("No NDK instance found!");t||(await this.ndk.assertSigner(),t=this.ndk.signer),e||(e=this.author),this.content=await(t?.decrypt(e,this.content))}function xR(){let e=[];return this.onRelays.length>0?e=this.onRelays.map((e=>e.url)):this.relay&&(e=[this.relay.url]),this.isParamReplaceable()?FC.naddrEncode({kind:this.kind,pubkey:this.pubkey,identifier:this.replaceableDTag(),relays:e}):e.length>0?FC.neventEncode({id:this.tagId(),relays:e,author:this.pubkey}):FC.noteEncode(this.tagId())}async function ER(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;if(!t&&e){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),t=this.ndk.signer}const n=new NR(this.ndk,{kind:_R(this),content:""});return n.tag(this),16===n.kind&&n.tags.push(["k",`${this.kind}`]),t&&await n.sign(t),e&&await n.publish(),n}function _R(e){return 1===e.kind?6:16}var NR=class e extends eR.EventEmitter{ndk;created_at;content="";tags=[];kind;id="";sig;pubkey="";_author=void 0;relay;onRelays=[];constructor(e,t){super(),this.ndk=e,this.created_at=t?.created_at,this.content=t?.content||"",this.tags=t?.tags||[],this.id=t?.id||"",this.sig=t?.sig,this.pubkey=t?.pubkey||"",this.kind=t?.kind}rawEvent(){return{created_at:this.created_at,content:this.content,tags:this.tags,kind:this.kind,pubkey:this.pubkey,id:this.id,sig:this.sig}}set author(e){this.pubkey=e.hexpubkey,this._author=void 0}get author(){if(this._author)return this._author;if(!this.ndk)throw new Error("No NDK instance found");const e=this.ndk.getUser({hexpubkey:this.pubkey});return this._author=e,e}tag(t,n,r){let o=[];if(void 0!==t.fetchProfile){const e=["p",t.pubkey];n&&e.push("",n),o.push(e)}else if(t instanceof e){const e=t;r??=e?.pubkey===this.pubkey,o=e.referenceTags(n,r);for(const t of e.getMatchingTags("p"))t[1]!==this.pubkey&&(this.tags.find((e=>"p"===e[0]&&e[1]===t[1]))||this.tags.push(["p",t[1]]))}else{if(!Array.isArray(t))throw new Error("Invalid argument",t);o=[t]}this.tags=function(e,t){const n=new Map,r=(e,t)=>e.every(((e,n)=>e===t[n]));return e.concat(t).forEach((e=>{for(let[t,o]of n)if(r(o,e)||r(e,o))return void(e.length>=o.length&&n.set(t,e));n.set((e=>e.join(","))(e),e)})),Array.from(n.values())}(this.tags,o)}async toNostrEvent(e){if(!e&&""===this.pubkey){const e=await(this.ndk?.signer?.user());this.pubkey=e?.hexpubkey||""}this.created_at||(this.created_at=Math.floor(Date.now()/1e3));const t=this.rawEvent(),{content:n,tags:r}=await this.generateTags();t.content=n||"",t.tags=r;try{this.id=NC(t)}catch(Ry){}return this.id&&(t.id=this.id),this.sig&&(t.sig=this.sig),t}isReplaceable=yR.bind(this);isEphemeral=bR.bind(this);isParamReplaceable=vR.bind(this);encode=xR.bind(this);encrypt=wR.bind(this);decrypt=kR.bind(this);getMatchingTags(e){return this.tags.filter((t=>t[0]===e))}tagValue(e){const t=this.getMatchingTags(e);if(0!==t.length)return t[0][1]}get alt(){return this.tagValue("alt")}set alt(e){this.removeTag("alt"),e&&this.tags.push(["alt",e])}get dTag(){return this.tagValue("d")}set dTag(e){this.removeTag("d"),e&&this.tags.push(["d",e])}removeTag(e){this.tags=this.tags.filter((t=>t[0]!==e))}async sign(e){e?this.author=await e.user():(this.ndk?.assertSigner(),e=this.ndk.signer),await this.generateTags(),this.isReplaceable()&&(this.created_at=Math.floor(Date.now()/1e3));const t=await this.toNostrEvent();return this.sig=await e.sign(t),this.sig}async publish(e,t){if(this.sig||await this.sign(),!this.ndk)throw new Error("NDKEvent must be associated with an NDK instance to publish");e||(e=this.ndk.devWriteRelaySet||function(e,t){const n=new Set;return e.pool?.relays.forEach((e=>n.add(e))),new dR(n,e)}(this.ndk)),this.ndk.debug(`publish to ${e.size} relays`,this.rawEvent());const n=await e.publish(this,t);return this.onRelays=Array.from(n),n}async generateTags(){let e=[];const t=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];const r=e=>{t.find((t=>t[0]===e[0]&&t[1]===e[1]))||t.push(e)};return e=e.replace(/(@|nostr:)(npub|nprofile|note|nevent|naddr)[a-zA-Z0-9]+/g,(e=>{try{const t=e.split(/(@|nostr:)/)[2],{type:o,data:i}=FC.decode(t);let a;switch(o){case"npub":a=["p",i];break;case"nprofile":a=["p",i.pubkey];break;case"note":n.push(new Promise((async e=>{r(["e",i,await mR(),"mention"]),e()})));break;case"nevent":n.push(new Promise((async e=>{let{id:t,relays:n,author:o}=i;n&&0!==n.length||(n=[await mR()]),r(["e",t,n[0],"mention"]),o&&r(["p",o]),e()})));break;case"naddr":n.push(new Promise((async e=>{const t=[i.kind,i.pubkey,i.identifier].join(":");let n=i.relays??[];0===n.length&&(n=[await mR()]),r(["a",t,n[0],"mention"]),r(["p",i.pubkey]),e()})));break;default:return e}return a&&r(a),`nostr:${t}`}catch(t){return e}})),await Promise.all(n),e=e.replace(/#(\w+)/g,((e,n)=>{const r=["t",n];return t.find((e=>e[0]===r[0]&&e[1]===r[1]))||t.push(r),e})),{content:e,tags:t}}(this.content,this.tags),n=t.content;if(e=t.tags,this.kind&&this.isParamReplaceable()){if(!this.getMatchingTags("d")[0]){const t=this.tagValue("title");let n=[...Array(t?6:16)].map((()=>Math.random().toString(36)[2])).join("");t&&t.length>0&&(n=t.replace(/[^a-z0-9]+/gi,"-").replace(/^-|-$/g,"")+"-"+n),e.push(["d",n])}}if((this.ndk?.clientName||this.ndk?.clientNip89)&&!this.tagValue("client")){const t=["client",this.ndk.clientName??""];this.ndk.clientNip89&&t.push(this.ndk.clientNip89),e.push(t)}return{content:n||"",tags:e}}muted(){const e=this.ndk?.mutedIds.get(this.pubkey);if(e&&"p"===e)return"author";const t=this.tagReference(),n=this.ndk?.mutedIds.get(t[1]);return n&&n===t[0]?"event":null}replaceableDTag(){if(this.kind&&this.kind>=3e4&&this.kind<=4e4){const e=this.getMatchingTags("d")[0];return e?e[1]:""}throw new Error("Event is not a parameterized replaceable event")}deduplicationKey(){return 0===this.kind||3===this.kind||this.kind&&this.kind>=1e4&&this.kind<2e4?`${this.kind}:${this.pubkey}`:this.tagId()}tagId(){return this.isParamReplaceable()?this.tagAddress():this.id}tagAddress(){if(!this.isParamReplaceable())throw new Error("This must only be called on replaceable events");const e=this.replaceableDTag();return`${this.kind}:${this.pubkey}:${e}`}tagReference(e){let t;return t=this.isParamReplaceable()?["a",this.tagAddress()]:["e",this.tagId()],this.relay?t.push(this.relay.url):t.push(""),e&&t.push(e),t}referenceTags(e,t){let n=[];return n=this.isParamReplaceable()?[["a",this.tagAddress()],["e",this.id]]:[["e",this.id]],this.relay?.url?n=n.map((e=>(e.push(this.relay?.url),e))):e&&(n=n.map((e=>(e.push(""),e)))),e&&n.forEach((t=>t.push(e))),t||n.push(...this.author.referenceTags()),n}filter(){return this.isParamReplaceable()?{"#a":[this.tagId()]}:{"#e":[this.tagId()]}}async zap(e,t,n,r,o){if(!this.ndk)throw new Error("No NDK instance found");o||this.ndk.assertSigner();const i=new gR({ndk:this.ndk,zappedEvent:this,zappedUser:r}),a=Array.from(this.ndk.pool.relays.keys());return await i.createZapRequest(e,t,n,a,o)}async delete(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const r=new e(this.ndk,{kind:5,content:t||""});return r.tag(this),n&&await r.publish(),r}repost=ER.bind(this);async react(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const r=new e(this.ndk,{kind:7,content:t});return r.tag(this),n?await r.publish():await r.sign(),r}get isValid(){return!0}};var SR=__webpack_require__(884),CR=__webpack_require__.n(SR);function AR(){var e,t,r;const{ndk:i}=Ol(),a=(0,n.useRef)(null),s=null===i||void 0===i?void 0:i.pool.stats(),l=Array.from((null===i||void 0===i?void 0:i.pool.relays.entries())||[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(op,{className:"bg-base-200 shadow",children:[(0,o.jsxs)(op.Stat,{className:"cursor-pointer",onClick:()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.showModal()},children:[(0,o.jsx)(op.Stat.Title,{children:"Total"}),(0,o.jsx)(op.Stat.Value,{children:null!==(e=null===s||void 0===s?void 0:s.total)&&void 0!==e?e:"?"}),(0,o.jsx)(op.Stat.Desc,{children:"Total relays"})]}),(0,o.jsxs)(op.Stat,{children:[(0,o.jsx)(op.Stat.Title,{children:"Connected"}),(0,o.jsx)(op.Stat.Value,{children:null!==(t=null===s||void 0===s?void 0:s.connected)&&void 0!==t?t:"?"}),(0,o.jsx)(op.Stat.Desc,{children:"Conntected relays"})]}),(0,o.jsxs)(op.Stat,{children:[(0,o.jsx)(op.Stat.Title,{children:"Disconnected"}),(0,o.jsx)(op.Stat.Value,{children:null!==(r=null===s||void 0===s?void 0:s.disconnected)&&void 0!==r?r:"?"}),(0,o.jsx)(op.Stat.Desc,{children:"Disconntected relays"})]})]}),(0,o.jsxs)(Jd,{ref:a,backdrop:!0,className:"w-11/12 max-w-5xl",id:"ndk-stats-total-relays-modal",children:[(0,o.jsx)("form",{method:"dialog",children:(0,o.jsx)(Rd,{size:"sm",color:"ghost",shape:"circle",className:"absolute right-2 top-2",children:(0,o.jsx)(hx,{className:"w-6 h-6",title:"Close"})})}),(0,o.jsx)(Jd.Header,{className:"font-bold",children:"Relays"}),(0,o.jsxs)(Jd.Body,{className:"flex flex-col gap-4",children:[0===l.length&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(mg,{children:"No relays."})}),l.map(((e,t)=>{let[n,r]=e;const i=r.connectionStats.connectedAt?new Date(r.connectionStats.connectedAt):void 0;return(0,o.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,o.jsx)("div",{className:"font-bold",children:n}),(0,o.jsx)("div",{children:(0,o.jsxs)(op,{className:"bg-base-200 shadow",children:[(0,o.jsxs)(op.Stat,{children:[(0,o.jsx)(op.Stat.Title,{children:"Attempts"}),(0,o.jsx)(op.Stat.Value,{children:r.connectionStats.attempts}),(0,o.jsx)(op.Stat.Desc,{className:"hidden",children:"The number of times a connection has been attempted."})]}),(0,o.jsxs)(op.Stat,{children:[(0,o.jsx)(op.Stat.Title,{children:"Success"}),(0,o.jsx)(op.Stat.Value,{children:r.connectionStats.success}),(0,o.jsx)(op.Stat.Desc,{className:"hidden",children:"The number of times a connection has been successfully established."})]}),(0,o.jsxs)(op.Stat,{children:[(0,o.jsx)(op.Stat.Title,{children:"Connected at"}),(0,o.jsx)(op.Stat.Value,{children:i?i.toLocaleTimeString(void 0,{hour12:!1}):"?"}),(0,o.jsx)(op.Stat.Desc,{children:i?i.toLocaleDateString():"?"}),(0,o.jsx)(op.Stat.Desc,{className:"hidden",children:"The time the current connection was established in milliseconds."})]}),(0,o.jsxs)(op.Stat,{children:[(0,o.jsx)(op.Stat.Title,{children:"Status"}),(0,o.jsx)(op.Stat.Value,{className:CR()({"text-green-300":r.status===cR.CONNECTING,"text-green-500":r.status===cR.CONNECTED,"text-green-400":r.status===cR.RECONNECTING}),children:cR[r.status]}),(0,o.jsx)(op.Stat.Desc,{className:"hidden",children:"The status of the connection."})]})]})})]},t)}))]})]})]})}function RR(){return(0,o.jsx)("div",{className:"bg-base-300 text-base-300-content sticky top-[100vh] p-10",children:(0,o.jsxs)(nm,{className:"md:container mx-auto",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(nm.Title,{children:"Pages"}),(0,o.jsx)(Ah,{className:"link link-hover",to:ax.index,children:"Home"}),(0,o.jsx)(Ah,{className:"link link-hover",to:ax.validate,children:"Validate"}),(0,o.jsx)(Ah,{className:"link link-hover",to:ax.search,children:"Search"}),(0,o.jsx)(Ah,{className:"link link-hover",to:ax.resources,children:"Resources"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(nm.Title,{children:"More"}),(0,o.jsx)(Ah,{className:"link link-hover",to:ax.settings,children:"Settings"}),(0,o.jsx)(Ah,{className:"link link-hover",to:ax.about,children:"About"}),(0,o.jsxs)("a",{className:"link link-hover flex items-center",href:"https://github.com/nostr-protocol/nips/blob/master/64.md",target:"_blank",rel:"noreferrer",children:["NIP-64 (GitHub) ",(0,o.jsx)(ix,{className:"ms-1 w-4 h-4"})]})]}),(0,o.jsx)("div",{className:"hidden md:block"}),(0,o.jsx)("div",{className:"flex w-full lg:justify-end",children:(0,o.jsx)(AR,{})})]})})}function TR(e){let{title:t,children:r,drawer:i}=e;const[a,s]=(0,n.useState)(!1),l=()=>s((e=>!e));return(0,o.jsxs)(Yg,{...i,side:(0,o.jsx)(sx,{title:t}),sideClassName:"z-50",end:!1,open:a,onClickOverlay:l,className:"min-h-screen",children:[(0,o.jsx)(cx,{title:t,toggleSidebar:l}),(0,o.jsx)("div",{className:"md:container mx-auto",children:(0,o.jsx)("div",{className:"px-4 pb-32",children:r})}),(0,o.jsx)(RR,{})]})}var BR=__webpack_require__(756);const jR=e=>new Promise(((t,n)=>{try{t((0,BR.parseGames)(e))}catch(Ry){n(Ry)}})),OR=e=>{try{const t=(0,BR.parseGames)(e);return(null===t||void 0===t?void 0:t.length)>0}catch(Ry){return!1}},IR=e=>(0,BR.split)(e),PR=e=>(0,o.jsx)(Ag,{noValidate:!0,onSubmit:t=>{t.preventDefault(),t.stopPropagation(),e.onSubmit(e.value)},children:(0,o.jsxs)("div",{className:"flex pb-2",children:[(0,o.jsx)("div",{className:"grow form-control",children:(0,o.jsx)(jg,{type:"text",size:"lg",className:"bg-base-200",value:e.value,onChange:t=>e.onChange(t.target.value),placeholder:"NIP-64 event id",color:e.error?"error":void 0})}),(0,o.jsx)("div",{className:"flex-none ml-1",children:(0,o.jsx)(Rd,{type:"submit",size:"lg",children:"Search"})})]})});function LR(){const{ndk:e}=Ol(),[t,r]=(0,n.useState)(""),[i,a]=(0,n.useState)(!1),[s,l]=(0,n.useState)(!1),[c,u]=(0,n.useState)(),h=(0,n.useMemo)((()=>(null===c||void 0===c?void 0:c.kind)===Tm?null===c||void 0===c?void 0:c.content:void 0),[c]),[d,f]=(0,n.useState)(),[p,g]=(0,n.useState)(),m=(0,n.useMemo)((()=>!!h&&OR(h)),[h]);(0,n.useEffect)((()=>{l(!1)}),[t]),(0,n.useEffect)((()=>{if(f(void 0),g(void 0),!h)return;const e=new AbortController;return jR(h).then((t=>{e.signal.aborted||(f(t),g(void 0))})).catch((t=>{e.signal.aborted||(f(void 0),g(t))})),()=>e.abort()}),[h]);const y=(0,n.useMemo)((()=>{if(!d||d.length>0)return 0;if(0===d[0].moves.length)return 0;return d[0].moves.reduce(((e,t)=>e.moveNumber>t.moveNumber?e:t)).moveNumber||0}),[d]),b=async t=>{if(a(!1),u(void 0),t){a(!0);try{var n;const r=await(null===e||void 0===e?void 0:e.fetchEvent(t,{subId:"s",closeOnEose:!0}));u(null!==(n=null===r||void 0===r?void 0:r.rawEvent())&&void 0!==n?n:void 0),a(!1)}catch(Ry){a(!1)}finally{l(!0)}}else l(!0)},v=e=>{r(e),b(e)};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"flex justify-center items-center",children:(0,o.jsx)("div",{className:"w-full grid grid-cols-1 lg:w-8/12",children:(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"w-full mt-16 grid grid-cols-1 gap-2",children:[(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)("h2",{className:"text-3xl font-bold tracking-tighter",children:"Search"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"my-1",children:(0,o.jsx)("small",{children:"Search for NIP-64 events."})}),(0,o.jsx)(PR,{value:t,onChange:r,onSubmit:()=>b(t)}),(0,o.jsxs)("div",{className:"flex gap-1",children:[(0,o.jsx)(Rd,{type:"button",size:"sm",color:"primary",onClick:()=>v(jm),children:"Example (NIP-64)"}),(0,o.jsx)(Rd,{type:"button",size:"sm",onClick:()=>v(Bm),children:"Example (non NIP-64)"})]})]}),(0,o.jsxs)("div",{className:"my-4",children:[i&&(0,o.jsx)(mg,{children:(0,o.jsx)(Sd,{})}),s&&!i&&!c&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(mg,{children:"No results found."})})]}),c&&(0,o.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,o.jsx)(gp,{className:"bg-base-200 rounded-lg",size:"lg",zebra:!0,children:(0,o.jsxs)(gp.Body,{children:[(0,o.jsxs)(gp.Row,{hover:!0,children:[(0,o.jsx)("span",{children:"Kind"}),(0,o.jsx)("span",{className:CR()({"text-success":c.kind===Tm,"text-error":c.kind!==Tm}),children:c.kind}),(0,o.jsx)("span",{children:c.kind===Tm?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(af,{variant:"outline",color:"success",children:"NIP-64"})}):(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(af,{variant:"outline",color:"error",children:[(0,o.jsx)("strong",{children:"not"}),"\xa0NIP-64"]})})})]}),(0,o.jsxs)(gp.Row,{hover:!0,children:[(0,o.jsx)("span",{children:"PGN"}),(0,o.jsx)("span",{className:CR()({"text-success":m,"text-error":!m}),children:m?"true":"false"}),(0,o.jsx)("span",{children:m?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(af,{variant:"outline",color:"success",children:"Valid"})}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(af,{variant:"outline",color:"error",children:"Invalid"})})})]}),(0,o.jsxs)(gp.Row,{hover:!0,children:[(0,o.jsx)("span",{children:"Move #"}),(0,o.jsx)("span",{className:CR()({"text-success":m,"text-error":!m}),children:m&&y>0?y:"-"}),(0,o.jsx)("span",{})]})]})}),d&&h&&(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,o.jsx)("h3",{className:"text-2xl font-bold tracking-tighter",children:"PGN viewer"}),(0,o.jsx)(Mk,{pgn:h})]}),(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,o.jsx)("h3",{className:"text-2xl font-bold tracking-tighter",children:"PGN"}),p&&(0,o.jsx)(mg,{status:"error",children:(null===p||void 0===p?void 0:p.message)||"Unknown error."}),(0,o.jsx)("div",{className:"bg-base-200 rounded-lg p-4 overflow-x-auto",children:h?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("pre",{children:h})}):(0,o.jsx)("div",{children:"Not present."})})]}),(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,o.jsx)("h3",{className:"text-2xl font-bold tracking-tighter",children:"Event"}),(0,o.jsx)("div",{className:"bg-base-200 rounded-lg p-4 overflow-x-auto",children:(0,o.jsx)("pre",{className:"bg-base-200",children:JSON.stringify((e=>{let{sig:t,...n}=e;return n})(c||{}),null,2)})})]})]})]})})})})})}function zR(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{className:"text-3xl font-bold tracking-tighter mb-2",children:"Resources"}),(0,o.jsxs)("div",{className:"flex flex-col gap-2 mb-4",children:[(0,o.jsx)("h3",{className:"text-2xl font-bold tracking-tighter",children:"Nostr"}),(0,o.jsx)("ul",{children:(0,o.jsx)("li",{children:(0,o.jsx)("a",{className:"link flex items-center",href:"https://github.com/nostr-protocol/nips/blob/master/64.md",children:"NIP-64 (GitHub)"})})})]}),(0,o.jsxs)("div",{className:"flex flex-col gap-2 mb-4",children:[(0,o.jsx)("h3",{className:"text-2xl font-bold tracking-tighter",children:"Specification"}),(0,o.jsxs)("ul",{children:[(0,o.jsxs)("li",{children:[(0,o.jsx)("a",{className:"link",href:"https://en.wikipedia.org/wiki/Portable_Game_Notation",children:"Portable Game Notation (Wikipedia)"}),": Very short summary of the essentials."]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("a",{className:"link",href:"https://github.com/mliebelt/pgn-spec-commented/blob/main/pgn-specification.md",children:"PGN Specification"}),": Specification and Implementation Guide"]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("a",{className:"link",href:"https://github.com/mliebelt/pgn-spec-commented/blob/main/pgn-spec-supplement.md",children:"PGN Specification Supplement"}),": Addition for adding graphical elements, clock values, eval, ..."]})]})]}),(0,o.jsxs)("div",{className:"flex flex-col gap-2 mb-4",children:[(0,o.jsx)("h3",{className:"text-2xl font-bold tracking-tighter",children:"Libraries"}),(0,o.jsxs)("ul",{children:[(0,o.jsxs)("li",{children:[(0,o.jsx)("a",{className:"link",href:"https://github.com/niklasf/chessops",children:"niklasf / chessops (GitHub)"}),": Chess and chess variant rules and operations in TypeScript."]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("a",{className:"link",href:"https://github.com/lichess-org/pgn-viewer",children:"lichess-org / pgn-viewer (GitHub)"}),": PGN viewer widget, designed to be embedded in content pages."]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("a",{className:"link",href:"https://github.com/jhlywa/chess.js",children:"jhlywa / chess.js (GitHub)"}),": A TypeScript chess library used for chess move generation/validation, piece placement/movement, and check/checkmate/stalemate detection."]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("a",{className:"link",href:"https://github.com/mliebelt/pgn-parser",children:"mliebelt / pgn-parser (GitHub)"}),": Javascript library to allow reading of a PGN."]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("a",{className:"link",href:"https://github.com/lichess-org/chessground",children:"lichess-org / chessground (GitHub)"}),": Chessground is a free/libre open source chess UI."]})]})]})]})}const UR=e=>(0,o.jsx)(Ag,{noValidate:!0,onSubmit:t=>{t.preventDefault(),t.stopPropagation(),e.onSubmit(e.value)},children:(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,o.jsx)("div",{className:"form-control",children:(0,o.jsx)($g,{size:"lg",rows:10,className:"bg-base-200 font-mono",value:e.value,onChange:t=>e.onChange(t.target.value),placeholder:"Paste PGN here",color:e.error?"error":e.success?"success":void 0})}),(0,o.jsx)("div",{className:"flex gap-2 justify-center",children:(0,o.jsx)(Rd,{type:"submit",size:"lg",children:"Validate"})})]})});function MR(){const[e,t]=(0,n.useState)(""),[r,i]=(0,n.useState)(),[a,s]=(0,n.useState)(),[l,c]=(0,n.useState)(),u=(0,n.useMemo)((()=>!!e&&OR(e)),[e]);(0,n.useEffect)((()=>{const t=new AbortController;return s(void 0),c(IR(e)),jR(e).then((e=>{t.signal.aborted||s(e)})).catch((e=>{t.signal.aborted||s(void 0)})),()=>t.abort()}),[e]),(0,n.useEffect)((()=>{i(void 0)}),[e]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"flex flex-col gap-4 mb-4",children:[(0,o.jsx)("h2",{className:"text-3xl font-bold tracking-tighter",children:"Validate PGN"}),(0,o.jsx)("div",{className:"text-lg text-slate-500 break-all",children:"Check validity of PGN format (not compliance of chess rules)."}),(0,o.jsx)("div",{className:"flex gap-4",children:[Im,Lm,zm].map(((e,n)=>(0,o.jsxs)(Rd,{type:"button",size:"sm",color:"primary",onClick:()=>t(e),children:["Example PGN ",n+1]},n)))}),r&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(mg,{...r})}),(0,o.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,o.jsx)(UR,{value:e,onChange:t,onSubmit:()=>(async e=>{try{await jR(e),i({status:"success",children:(0,o.jsx)("div",{className:"flex flex-col",children:(0,o.jsx)("div",{className:"font-bold",children:"PGN is valid."})})})}catch(Ry){i({status:"error",children:(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("div",{className:"font-bold",children:"PGN is *not* valid."}),(0,o.jsx)("div",{children:(null===Ry||void 0===Ry?void 0:Ry.message)||"Unknown parse error."})]})})}})(e),success:!!e&&u,error:!!e&&!u}),u&&(0,o.jsxs)(o.Fragment,{children:[l&&(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,o.jsx)("h3",{className:"text-2xl font-bold tracking-tighter",children:"PGN viewer"}),l.map(((e,t)=>(0,o.jsx)("div",{children:(0,o.jsx)(Mk,{pgn:e.all})},t)))]}),a&&(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,o.jsx)("h3",{className:"text-2xl font-bold tracking-tighter",children:"Parse result"}),(0,o.jsx)("div",{className:"bg-base-200 rounded-lg p-4 overflow-x-auto",children:(0,o.jsx)("pre",{className:"bg-base-200",children:JSON.stringify(a,null,2)})})]})]})]})]})})}const FR=e=>ph(e);function DR(e){let{to:t}=e;return(0,o.jsx)(oh,{to:t,replace:!0})}const qR=function(){const{theme:e}=c(),t=FR(lh((0,o.jsxs)(ah,{id:"base",element:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{children:(0,o.jsx)(ih,{})})}),children:[(0,o.jsxs)(ah,{id:"parent",element:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(TR,{title:window.APP.APP_NAME,drawer:{},children:(0,o.jsx)(ih,{})})}),children:[(0,o.jsx)(ah,{id:"index",path:ax.index,index:!0,element:(0,o.jsx)(Hk,{})}),(0,o.jsx)(ah,{id:"search",path:ax.search,element:(0,o.jsx)(LR,{})}),(0,o.jsx)(ah,{id:"resources",path:ax.resources,element:(0,o.jsx)(zR,{})}),(0,o.jsx)(ah,{id:"settings",path:ax.settings,element:(0,o.jsx)(Kk,{})}),(0,o.jsx)(ah,{id:"validate",path:ax.validate,element:(0,o.jsx)(MR,{})}),(0,o.jsx)(ah,{id:"about",path:ax.about,element:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Qk,{name:window.APP.APP_NAME,version:"v0.0.1"})})})]}),(0,o.jsx)(ah,{id:"404",path:"*",element:(0,o.jsx)(DR,{to:ax["*"]})})]})));return(0,o.jsx)(Am,{dataTheme:e||"dark",children:(0,o.jsx)(Eh,{router:t})})},HR={dev:!1,theme:"dark"},WR=Wl;t.createRoot(document.getElementById("root")).render((0,o.jsx)(o.Fragment,{children:(0,o.jsx)(l,{value:{defaultValues:HR},children:(0,o.jsx)(jl,{relayUrls:WR,children:(0,o.jsx)(qR,{})})})}))})()})();